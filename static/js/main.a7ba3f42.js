/*! For license information please see main.a7ba3f42.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var S=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function E(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function C(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case d:return"Fragment";case u:return"Portal";case f:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case b:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case g:return(e.displayName||"Context")+".Provider";case m:return(e._context.displayName||"Context")+".Consumer";case y:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case w:return null!==(t=e.displayName||null)?t:C(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return C(e(t))}catch(n){}}return null}var T,j,I=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=Object.assign;function A(e){if(void 0===T)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);T=t&&t[1]||"",j=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+T+e+j}var D=!1;function O(e,t){if(!e||D)return"";D=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{D=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?A(n):""}function R(e){switch(e.tag){case 26:case 27:case 5:return A(e.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 15:return e=O(e.type,!1);case 11:return e=O(e.type.render,!1);case 1:return e=O(e.type,!0);default:return""}}function L(e){try{var t="";do{t+=R(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function M(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function F(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function U(e){if(M(e)!==e)throw Error(a(188))}function V(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=V(e)))return t;e=e.sibling}return null}var z=Array.isArray,B=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},H=[],q=-1;function W(e){return{current:e}}function G(e){0>q||(e.current=H[q],H[q]=null,q--)}function K(e,t){q++,H[q]=e.current,e.current=t}var Q=W(null),Y=W(null),X=W(null),J=W(null);function Z(e,t){switch(K(X,t),K(Y,e),K(Q,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Yu(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Xu(e=Yu(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(Q),K(Q,t)}function ee(){G(Q),G(Y),G(X)}function te(e){null!==e.memoizedState&&K(J,e);var t=Q.current,n=Xu(t,e.type);t!==n&&(K(Y,e),K(Q,n))}function ne(e){Y.current===e&&(G(Q),G(Y)),J.current===e&&(G(J),Ld._currentValue=$)}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(xe(e)/ke|0)|0},xe=Math.log,ke=Math.LN2;var Se=128,Ne=4194304;function Ee(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=e.warmLanes;e=0!==e.finishedLanes;var o=134217727&n;return 0!==o?0!==(n=o&~i)?r=Ee(n):0!==(s&=o)?r=Ee(s):e||0!==(a=o&~a)&&(r=Ee(a)):0!==(o=n&~i)?r=Ee(o):0!==s?r=Ee(s):e||0!==(a=n&~a)&&(r=Ee(a)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||32===i&&0!==(4194176&a))?t:r}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Te(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function je(){var e=Se;return 0===(4194176&(Se<<=1))&&(Se=128),e}function Ie(){var e=Ne;return 0===(62914560&(Ne<<=1))&&(Ne=4194304),e}function Pe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ae(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Re(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Le(){var e=B.p;return 0!==e?e:void 0===(e=window.event)?32:Xd(e.type)}var Me=Math.random().toString(36).slice(2),Fe="__reactFiber$"+Me,Ue="__reactProps$"+Me,Ve="__reactContainer$"+Me,ze="__reactEvents$"+Me,Be="__reactListeners$"+Me,$e="__reactHandles$"+Me,He="__reactResources$"+Me,qe="__reactMarker$"+Me;function We(e){delete e[Fe],delete e[Ue],delete e[ze],delete e[Be],delete e[$e]}function Ge(e){var t=e[Fe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[Fe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ld(e);null!==e;){if(n=e[Fe])return n;e=ld(e)}return t}n=(e=n).parentNode}return null}function Ke(e){if(e=e[Fe]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ye(e){var t=e[He];return t||(t=e[He]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Xe(e){e[qe]=!0}var Je=new Set,Ze={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Ze[e]=t,e=0;e<t.length;e++)Je.add(t[e])}var nt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},st={};function at(e,t,n){if(i=t,re.call(st,i)||!re.call(it,i)&&(rt.test(i)?st[i]=!0:(it[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ot(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function lt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function yt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(z(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Nt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Nt(e,s,t[s])}function _t(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var It=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var At=null,Dt=null;function Ot(e){var t=Ke(e);if(t&&(e=t.stateNode)){var n=e[Ue]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Ue]||null;if(!i)throw Error(a(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Rt=!1;function Lt(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return e(t)}finally{if(Rt=!1,(null!==At||null!==Dt)&&(Fc(),At&&(t=At,e=Dt,Dt=At=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ue]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!1;if(nt)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(xh){Ft=!1}var Vt=null,zt=null,Bt=null;function $t(){if(Bt)return Bt;var e,t,n=zt,r=n.length,i="value"in Vt?Vt.value:Vt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Bt=i.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Wt(){return!1}function Gt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?qt:Wt,this.isPropagationStopped=Wt,this}return P(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Kt,Qt,Yt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jt=Gt(Xt),Zt=P({},Xt,{view:0,detail:0}),en=Gt(Zt),tn=P({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?(Kt=e.screenX-Yt.screenX,Qt=e.screenY-Yt.screenY):Qt=Kt=0,Yt=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),nn=Gt(tn),rn=Gt(P({},tn,{dataTransfer:0})),sn=Gt(P({},Zt,{relatedTarget:0})),an=Gt(P({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),on=Gt(P({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Gt(P({},Xt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function fn(){return hn}var pn=Gt(P({},Zt,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Gt(P({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Gt(P({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),yn=Gt(P({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Gt(P({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Gt(P({},Xt,{newState:0,oldState:0})),wn=[9,13,27,32],xn=nt&&"CompositionEvent"in window,kn=null;nt&&"documentMode"in document&&(kn=document.documentMode);var Sn=nt&&"TextEvent"in window&&!kn,Nn=nt&&(!xn||kn&&8<kn&&11>=kn),En=String.fromCharCode(32),_n=!1;function Cn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function An(e,t,n,r){At?Dt?Dt.push(r):Dt=[r]:At=r,0<(t=Lu(t,"onChange")).length&&(n=new Jt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dn=null,On=null;function Rn(e){Tu(e,0)}function Ln(e){if(ht(Qe(e)))return e}function Mn(e,t){if("change"===e)return t}var Fn=!1;if(nt){var Un;if(nt){var Vn="oninput"in document;if(!Vn){var zn=document.createElement("div");zn.setAttribute("oninput","return;"),Vn="function"===typeof zn.oninput}Un=Vn}else Un=!1;Fn=Un&&(!document.documentMode||9<document.documentMode)}function Bn(){Dn&&(Dn.detachEvent("onpropertychange",$n),On=Dn=null)}function $n(e){if("value"===e.propertyName&&Ln(On)){var t=[];An(t,On,e,Pt(e)),Lt(Rn,t)}}function Hn(e,t,n){"focusin"===e?(Bn(),On=n,(Dn=t).attachEvent("onpropertychange",$n)):"focusout"===e&&Bn()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(On)}function Wn(e,t){if("click"===e)return Ln(t)}function Gn(e,t){if("input"===e||"change"===e)return Ln(t)}var Kn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if(Kn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Kn(e[i],t[i]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=Yn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yn(r)}}function Jn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Jn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zn(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function tr(e,t){var n=Zn(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Jn(t.ownerDocument.documentElement,t)){if(null!==r&&er(t))if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Xn(t,s);var a=Xn(t,r);i&&a&&(1!==n.rangeCount||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nr=nt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Qn(sr,r)||(sr=r,0<(r=Lu(ir,"onSelect")).length&&(t=new Jt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}nt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),et(t,[e])}var Sr=[],Nr=0,Er=0;function _r(){for(var e=Nr,t=Er=Nr=0;t<e;){var n=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var i=Sr[t];Sr[t++]=null;var s=Sr[t];if(Sr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Ir(n,i,s)}}function Cr(e,t,n,r){Sr[Nr++]=e,Sr[Nr++]=t,Sr[Nr++]=n,Sr[Nr++]=r,Er|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Tr(e,t,n,r){return Cr(e,t,n,r),Pr(e)}function jr(e,t){return Cr(e,null,null,t),Pr(e)}function Ir(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;i&&null!==t&&3===e.tag&&(s=e.stateNode,i=31-we(n),null===(e=(s=s.hiddenUpdates)[i])?s[i]=[t]:e.push(t),t.lane=536870912|n)}function Pr(e){if(50<Tc)throw Tc=0,jc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ar={},Dr=new WeakMap;function Or(e,t){if("object"===typeof e&&null!==e){var n=Dr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:L(t)},Dr.set(e,t),t)}return{value:e,source:t,stack:L(t)}}var Rr=[],Lr=0,Mr=null,Fr=0,Ur=[],Vr=0,zr=null,Br=1,$r="";function Hr(e,t){Rr[Lr++]=Fr,Rr[Lr++]=Mr,Mr=e,Fr=t}function qr(e,t,n){Ur[Vr++]=Br,Ur[Vr++]=$r,Ur[Vr++]=zr,zr=e;var r=Br;e=$r;var i=32-we(r)-1;r&=~(1<<i),n+=1;var s=32-we(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Br=1<<32-we(t)+i|n<<i|r,$r=s+e}else Br=1<<s|n<<i|r,$r=e}function Wr(e){null!==e.return&&(Hr(e,1),qr(e,1,0))}function Gr(e){for(;e===Mr;)Mr=Rr[--Lr],Rr[Lr]=null,Fr=Rr[--Lr],Rr[Lr]=null;for(;e===zr;)zr=Ur[--Vr],Ur[Vr]=null,$r=Ur[--Vr],Ur[Vr]=null,Br=Ur[--Vr],Ur[Vr]=null}var Kr=null,Qr=null,Yr=!1,Xr=null,Jr=!1,Zr=Error(a(519));function ei(e){throw si(Or(Error(a(418,"")),e)),Zr}function ti(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Fe]=e,t[Ue]=r,n){case"dialog":ju("cancel",t),ju("close",t);break;case"iframe":case"object":case"embed":ju("load",t);break;case"video":case"audio":for(n=0;n<_u.length;n++)ju(_u[n],t);break;case"source":ju("error",t);break;case"img":case"image":case"link":ju("error",t),ju("load",t);break;case"details":ju("toggle",t);break;case"input":ju("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":ju("invalid",t);break;case"textarea":ju("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Bu(t.textContent,n)?(null!=r.popover&&(ju("beforetoggle",t),ju("toggle",t)),null!=r.onScroll&&ju("scroll",t),null!=r.onScrollEnd&&ju("scrollend",t),null!=r.onClick&&(t.onclick=$u),t=!0):t=!1,t||ei(e)}function ni(e){for(Kr=e.return;Kr;)switch(Kr.tag){case 3:case 27:return void(Jr=!0);case 5:case 13:return void(Jr=!1);default:Kr=Kr.return}}function ri(e){if(e!==Kr)return!1;if(!Yr)return ni(e),Yr=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Ju(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&Qr&&ei(e),ni(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){Qr=od(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}Qr=null}}else Qr=Kr?od(e.stateNode.nextSibling):null;return!0}function ii(){Qr=Kr=null,Yr=!1}function si(e){null===Xr?Xr=[e]:Xr.push(e)}var ai=Error(a(460)),oi=Error(a(474)),li={then:function(){}};function ci(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ui(){}function di(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ui,ui),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===ai)throw Error(a(483));throw e;default:if("string"===typeof t.status)t.then(ui,ui);else{if(null!==(e=tc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===ai)throw Error(a(483));throw e}throw hi=t,ai}}var hi=null;function fi(){if(null===hi)throw Error(a(459));var e=hi;return hi=null,e}var pi=null,mi=0;function gi(e){var t=mi;return mi+=1,null===pi&&(pi=[]),di(pi,e,t)}function yi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function vi(e,t){if(t.$$typeof===l)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n,r){var s=n.type;return s===d?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===x&&bi(s)===t.type)?(yi(t=i(t,n.props),n),t.return=e,t):(yi(t=Ul(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$l(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,s){return null===t||7!==t.tag?((t=Vl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Bl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case c:return yi(n=Ul(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case u:return(t=$l(t,e.mode,n)).return=e,t;case x:return m(e,t=(0,t._init)(t._payload),n)}if(z(t)||E(t))return(t=Vl(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return m(e,gi(t),n);if(t.$$typeof===g)return m(e,_o(e,t),n);vi(e,t)}return null}function y(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===i?h(e,t,n,r):null;case u:return n.key===i?f(e,t,n,r):null;case x:return y(e,t,n=(i=n._init)(n._payload),r)}if(z(n)||E(n))return null!==i?null:p(e,t,n,r,null);if("function"===typeof n.then)return y(e,t,gi(n),r);if(n.$$typeof===g)return y(e,t,_o(e,n),r);vi(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case c:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case u:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(z(r)||E(r))return p(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return v(e,t,n,gi(r),i);if(r.$$typeof===g)return v(e,t,n,_o(t,r),i);vi(t,r)}return null}function b(l,h,f,p){if("object"===typeof f&&null!==f&&f.type===d&&null===f.key&&(f=f.props.children),"object"===typeof f&&null!==f){switch(f.$$typeof){case c:e:{for(var w=f.key;null!==h;){if(h.key===w){if((w=f.type)===d){if(7===h.tag){n(l,h.sibling),(p=i(h,f.props.children)).return=l,l=p;break e}}else if(h.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===x&&bi(w)===h.type){n(l,h.sibling),yi(p=i(h,f.props),f),p.return=l,l=p;break e}n(l,h);break}t(l,h),h=h.sibling}f.type===d?((p=Vl(f.props.children,l.mode,p,f.key)).return=l,l=p):(yi(p=Ul(f.type,f.key,f.props,null,l.mode,p),f),p.return=l,l=p)}return o(l);case u:e:{for(w=f.key;null!==h;){if(h.key===w){if(4===h.tag&&h.stateNode.containerInfo===f.containerInfo&&h.stateNode.implementation===f.implementation){n(l,h.sibling),(p=i(h,f.children||[])).return=l,l=p;break e}n(l,h);break}t(l,h),h=h.sibling}(p=$l(f,l.mode,p)).return=l,l=p}return o(l);case x:return b(l,h,f=(w=f._init)(f._payload),p)}if(z(f))return function(i,a,o,l){for(var c=null,u=null,d=a,h=a=0,f=null;null!==d&&h<o.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var p=y(i,d,o[h],l);if(null===p){null===d&&(d=f);break}e&&d&&null===p.alternate&&t(i,d),a=s(p,a,h),null===u?c=p:u.sibling=p,u=p,d=f}if(h===o.length)return n(i,d),Yr&&Hr(i,h),c;if(null===d){for(;h<o.length;h++)null!==(d=m(i,o[h],l))&&(a=s(d,a,h),null===u?c=d:u.sibling=d,u=d);return Yr&&Hr(i,h),c}for(d=r(d);h<o.length;h++)null!==(f=v(d,i,h,o[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),a=s(f,a,h),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach((function(e){return t(i,e)})),Yr&&Hr(i,h),c}(l,h,f,p);if(E(f)){if("function"!==typeof(w=E(f)))throw Error(a(150));return function(i,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,h=o,f=o=0,p=null,g=l.next();null!==h&&!g.done;f++,g=l.next()){h.index>f?(p=h,h=null):p=h.sibling;var b=y(i,h,g.value,c);if(null===b){null===h&&(h=p);break}e&&h&&null===b.alternate&&t(i,h),o=s(b,o,f),null===d?u=b:d.sibling=b,d=b,h=p}if(g.done)return n(i,h),Yr&&Hr(i,f),u;if(null===h){for(;!g.done;f++,g=l.next())null!==(g=m(i,g.value,c))&&(o=s(g,o,f),null===d?u=g:d.sibling=g,d=g);return Yr&&Hr(i,f),u}for(h=r(h);!g.done;f++,g=l.next())null!==(g=v(h,i,f,g.value,c))&&(e&&null!==g.alternate&&h.delete(null===g.key?f:g.key),o=s(g,o,f),null===d?u=g:d.sibling=g,d=g);return e&&h.forEach((function(e){return t(i,e)})),Yr&&Hr(i,f),u}(l,h,f=w.call(f),p)}if("function"===typeof f.then)return b(l,h,gi(f),p);if(f.$$typeof===g)return b(l,h,_o(l,f),p);vi(l,f)}return"string"===typeof f&&""!==f||"number"===typeof f||"bigint"===typeof f?(f=""+f,null!==h&&6===h.tag?(n(l,h.sibling),(p=i(h,f)).return=l,l=p):(n(l,h),(p=Bl(f,l.mode,p)).return=l,l=p),o(l)):n(l,h)}return function(e,t,n,r){try{mi=0;var i=b(e,t,n,r);return pi=null,i}catch(a){if(a===ai)throw a;var s=Rl(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var xi=wi(!0),ki=wi(!1),Si=W(null),Ni=W(0);function Ei(e,t){K(Ni,e=cc),K(Si,t),cc=e|t.baseLanes}function _i(){K(Ni,cc),K(Si,Si.current)}function Ci(){cc=Ni.current,G(Si),G(Ni)}var Ti=W(null),ji=null;function Ii(e){var t=e.alternate;K(Oi,1&Oi.current),K(Ti,e),null===ji&&(null===t||null!==Si.current||null!==t.memoizedState)&&(ji=e)}function Pi(e){if(22===e.tag){if(K(Oi,Oi.current),K(Ti,e),null===ji){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ji=e)}}else Ai()}function Ai(){K(Oi,Oi.current),K(Ti,Ti.current)}function Di(e){G(Ti),ji===e&&(ji=null),G(Oi)}var Oi=W(0);function Ri(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Li="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Mi=r.unstable_scheduleCallback,Fi=r.unstable_NormalPriority,Ui={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vi(){return{controller:new Li,data:new Map,refCount:0}}function zi(e){e.refCount--,0===e.refCount&&Mi(Fi,(function(){e.controller.abort()}))}var Bi=null,$i=0,Hi=0,qi=null;function Wi(){if(0===--$i&&null!==Bi){null!==qi&&(qi.status="fulfilled");var e=Bi;Bi=null,Hi=0,qi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gi=I.S;I.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Bi){var n=Bi=[];$i=0,Hi=xu(),qi={status:"pending",value:void 0,then:function(e){n.push(e)}}}$i++,t.then(Wi,Wi)}(0,t),null!==Gi&&Gi(e,t)};var Ki=W(null);function Qi(){var e=Ki.current;return null!==e?e:tc.pooledCache}function Yi(e,t){K(Ki,null===t?Ki.current:t.pool)}function Xi(){var e=Qi();return null===e?null:{parent:Ui._currentValue,pool:e}}var Ji=0,Zi=null,es=null,ts=null,ns=!1,rs=!1,is=!1,ss=0,as=0,os=null,ls=0;function cs(){throw Error(a(321))}function us(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kn(e[n],t[n]))return!1;return!0}function ds(e,t,n,r,i,s){return Ji=s,Zi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?Ea:_a,is=!1,s=n(r,i),is=!1,rs&&(s=fs(t,n,r,i)),hs(e),s}function hs(e){I.H=Na;var t=null!==es&&null!==es.next;if(Ji=0,ts=es=Zi=null,ns=!1,as=0,os=null,t)throw Error(a(300));null===e||$a||null!==(e=e.dependencies)&&So(e)&&($a=!0)}function fs(e,t,n,r){Zi=e;var i=0;do{if(rs&&(os=null),as=0,rs=!1,25<=i)throw Error(a(301));if(i+=1,ts=es=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}I.H=Ca,s=t(n,r)}while(rs);return s}function ps(){var e=I.H,t=e.useState()[0];return t="function"===typeof t.then?ws(t):t,e=e.useState()[0],(null!==es?es.memoizedState:null)!==e&&(Zi.flags|=1024),t}function ms(){var e=0!==ss;return ss=0,e}function gs(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ys(e){if(ns){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ns=!1}Ji=0,ts=es=Zi=null,rs=!1,as=ss=0,os=null}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ts?Zi.memoizedState=ts=e:ts=ts.next=e,ts}function bs(){if(null===es){var e=Zi.alternate;e=null!==e?e.memoizedState:null}else e=es.next;var t=null===ts?Zi.memoizedState:ts.next;if(null!==t)ts=t,es=e;else{if(null===e){if(null===Zi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(es=e).memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},null===ts?Zi.memoizedState=ts=e:ts=ts.next=e}return ts}function ws(e){var t=as;return as+=1,null===os&&(os=[]),e=di(os,e,t),t=Zi,null===(null===ts?t.memoizedState:ts.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?Ea:_a),e}function xs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ws(e);if(e.$$typeof===g)return Eo(e)}throw Error(a(438,String(e)))}function ks(e){var t=null,n=Zi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Zi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=S;return t.index++,n}function Ss(e,t){return"function"===typeof t?t(e):t}function Ns(e){return Es(bs(),es,e)}function Es(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(rc&h)===h:(Ji&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Hi&&(d=!0);else{if((Ji&f)===f){u=u.next,f===Hi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,Zi.lanes|=f,dc|=f}h=u.action,is&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,Zi.lanes|=h,dc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Kn(s,e.memoizedState)&&($a=!0,d&&null!==(n=qi)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function _s(e){var t=bs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Kn(s,t.memoizedState)||($a=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Cs(e,t,n){var r=Zi,i=bs(),s=Yr;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Kn((es||i).memoizedState,n);if(o&&(i.memoizedState=n,$a=!0),i=i.queue,Js(Is.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==ts&&1&ts.memoizedState.tag){if(r.flags|=2048,Gs(9,js.bind(null,r,i,n,t),{destroy:void 0},null),null===tc)throw Error(a(349));s||0!==(60&Ji)||Ts(r,t,n)}return n}function Ts(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Zi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function js(e,t,n,r){t.value=n,t.getSnapshot=r,Ps(t)&&As(e)}function Is(e,t,n){return n((function(){Ps(t)&&As(e)}))}function Ps(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kn(e,n)}catch(r){return!0}}function As(e){var t=jr(e,2);null!==t&&Ac(t,e,2)}function Ds(e){var t=vs();if("function"===typeof e){var n=e;if(e=n(),is){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:e},t}function Os(e,t,n,r){return e.baseState=n,Es(e,es,"function"===typeof r?r:Ss)}function Rs(e,t,n,r,i){if(xa(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==I.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,Ls(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Ls(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=I.T,a={};I.T=a;try{var o=n(i,r),l=I.S;null!==l&&l(a,o),Ms(e,t,o)}catch(c){Us(e,t,c)}finally{I.T=s}}else try{Ms(e,t,s=n(i,r))}catch(u){Us(e,t,u)}}function Ms(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){Fs(e,t,n)}),(function(n){return Us(e,t,n)})):Fs(e,t,n)}function Fs(e,t,n){t.status="fulfilled",t.value=n,Vs(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ls(e,n)))}function Us(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Vs(t),t=t.next}while(t!==r)}e.action=null}function Vs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function zs(e,t){return t}function Bs(e,t){if(Yr){var n=tc.formState;if(null!==n){e:{var r=Zi;if(Yr){if(Qr){t:{for(var i=Qr,s=Jr;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=od(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){Qr=od(i.nextSibling),r="F!"===i.data;break e}}ei(r)}r=!1}r&&(t=n[0])}}return(n=vs()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:t},n.queue=r,n=va.bind(null,Zi,r),r.dispatch=n,r=Ds(!1),s=wa.bind(null,Zi,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=vs()).queue=i,n=Rs.bind(null,Zi,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function $s(e){return Hs(bs(),es,e)}function Hs(e,t,n){t=Es(e,t,zs)[0],e=Ns(Ss)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?ws(t):t;var r=bs(),i=r.queue,s=i.dispatch;return n!==r.memoizedState&&(Zi.flags|=2048,Gs(9,qs.bind(null,i,n),{destroy:void 0},null)),[t,s,e]}function qs(e,t){e.action=t}function Ws(e){var t=bs(),n=es;if(null!==n)return Hs(t,n,e);bs(),t=t.memoizedState;var r=(n=bs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Gs(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=Zi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ks(){return bs().memoizedState}function Qs(e,t,n,r){var i=vs();Zi.flags|=e,i.memoizedState=Gs(1|t,n,{destroy:void 0},void 0===r?null:r)}function Ys(e,t,n,r){var i=bs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==es&&null!==r&&us(r,es.memoizedState.deps)?i.memoizedState=Gs(t,n,s,r):(Zi.flags|=e,i.memoizedState=Gs(1|t,n,s,r))}function Xs(e,t){Qs(8390656,8,e,t)}function Js(e,t){Ys(2048,8,e,t)}function Zs(e,t){return Ys(4,2,e,t)}function ea(e,t){return Ys(4,4,e,t)}function ta(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function na(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ys(4,4,ta.bind(null,t,e),n)}function ra(){}function ia(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&us(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sa(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&us(t,r[1]))return r[0];if(r=e(),is){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function aa(e,t,n){return void 0===n||0!==(1073741824&Ji)?e.memoizedState=t:(e.memoizedState=n,e=Pc(),Zi.lanes|=e,dc|=e,n)}function oa(e,t,n,r){return Kn(n,t)?n:null!==Si.current?(e=aa(e,n,r),Kn(e,t)||($a=!0),e):0===(42&Ji)?($a=!0,e.memoizedState=n):(e=Pc(),Zi.lanes|=e,dc|=e,t)}function la(e,t,n,r,i){var s=B.p;B.p=0!==s&&8>s?s:8;var a=I.T,o={};I.T=o,wa(e,!1,t,n);try{var l=i(),c=I.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)ba(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Ic());else ba(e,t,r,Ic())}catch(u){ba(e,t,{then:function(){},status:"rejected",reason:u},Ic())}finally{B.p=s,I.T=a}}function ca(){}function ua(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=da(e).queue;la(e,i,t,$,null===n?ca:function(){return ha(e),n(r)})}function da(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:$},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ha(e){ba(e,da(e).next.queue,{},Ic())}function fa(){return Eo(Ld)}function pa(){return bs().memoizedState}function ma(){return bs().memoizedState}function ga(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ic(),r=Ao(t,e=Po(n),n);return null!==r&&(Ac(r,t,n),Do(r,t,n)),t={cache:Vi()},void(e.payload=t)}t=t.return}}function ya(e,t,n){var r=Ic();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},xa(e)?ka(t,n):null!==(n=Tr(e,t,n,r))&&(Ac(n,e,r),Sa(n,t,r))}function va(e,t,n){ba(e,t,n,Ic())}function ba(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(xa(e))ka(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Kn(o,a))return Cr(e,t,i,0),null===tc&&_r(),!1}catch(l){}if(null!==(n=Tr(e,t,i,r)))return Ac(n,e,r),Sa(n,t,r),!0}return!1}function wa(e,t,n,r){if(r={lane:2,revertLane:xu(),action:r,hasEagerState:!1,eagerState:null,next:null},xa(e)){if(t)throw Error(a(479))}else null!==(t=Tr(e,n,r,2))&&Ac(t,e,2)}function xa(e){var t=e.alternate;return e===Zi||null!==t&&t===Zi}function ka(e,t){rs=ns=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Sa(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var Na={readContext:Eo,use:xs,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useLayoutEffect:cs,useInsertionEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useSyncExternalStore:cs,useId:cs};Na.useCacheRefresh=cs,Na.useMemoCache=cs,Na.useHostTransitionStatus=cs,Na.useFormState=cs,Na.useActionState=cs,Na.useOptimistic=cs;var Ea={readContext:Eo,use:xs,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Eo,useEffect:Xs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Qs(4194308,4,ta.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qs(4194308,4,e,t)},useInsertionEffect:function(e,t){Qs(4,2,e,t)},useMemo:function(e,t){var n=vs();t=void 0===t?null:t;var r=e();if(is){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=vs();if(void 0!==n){var i=n(t);if(is){be(!0);try{n(t)}finally{be(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=ya.bind(null,Zi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:function(e){var t=(e=Ds(e)).queue,n=va.bind(null,Zi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ra,useDeferredValue:function(e,t){return aa(vs(),e,t)},useTransition:function(){var e=Ds(!1);return e=la.bind(null,Zi,e.queue,!0,!1),vs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Zi,i=vs();if(Yr){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===tc)throw Error(a(349));0!==(60&rc)||Ts(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Xs(Is.bind(null,r,s,e),[e]),r.flags|=2048,Gs(9,js.bind(null,r,s,n,t),{destroy:void 0},null),n},useId:function(){var e=vs(),t=tc.identifierPrefix;if(Yr){var n=$r;t=":"+t+"R"+(n=(Br&~(1<<32-we(Br)-1)).toString(32)+n),0<(n=ss++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ls++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return vs().memoizedState=ga.bind(null,Zi)}};Ea.useMemoCache=ks,Ea.useHostTransitionStatus=fa,Ea.useFormState=Bs,Ea.useActionState=Bs,Ea.useOptimistic=function(e){var t=vs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=wa.bind(null,Zi,!0,n),n.dispatch=t,[e,t]};var _a={readContext:Eo,use:xs,useCallback:ia,useContext:Eo,useEffect:Js,useImperativeHandle:na,useInsertionEffect:Zs,useLayoutEffect:ea,useMemo:sa,useReducer:Ns,useRef:Ks,useState:function(){return Ns(Ss)},useDebugValue:ra,useDeferredValue:function(e,t){return oa(bs(),es.memoizedState,e,t)},useTransition:function(){var e=Ns(Ss)[0],t=bs().memoizedState;return["boolean"===typeof e?e:ws(e),t]},useSyncExternalStore:Cs,useId:pa};_a.useCacheRefresh=ma,_a.useMemoCache=ks,_a.useHostTransitionStatus=fa,_a.useFormState=$s,_a.useActionState=$s,_a.useOptimistic=function(e,t){return Os(bs(),0,e,t)};var Ca={readContext:Eo,use:xs,useCallback:ia,useContext:Eo,useEffect:Js,useImperativeHandle:na,useInsertionEffect:Zs,useLayoutEffect:ea,useMemo:sa,useReducer:_s,useRef:Ks,useState:function(){return _s(Ss)},useDebugValue:ra,useDeferredValue:function(e,t){var n=bs();return null===es?aa(n,e,t):oa(n,es.memoizedState,e,t)},useTransition:function(){var e=_s(Ss)[0],t=bs().memoizedState;return["boolean"===typeof e?e:ws(e),t]},useSyncExternalStore:Cs,useId:pa};function Ta(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:P({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}Ca.useCacheRefresh=ma,Ca.useMemoCache=ks,Ca.useHostTransitionStatus=fa,Ca.useFormState=Ws,Ca.useActionState=Ws,Ca.useOptimistic=function(e,t){var n=bs();return null!==es?Os(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var ja={isMounted:function(e){return!!(e=e._reactInternals)&&M(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ic(),i=Po(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ao(e,i,r))&&(Ac(t,e,r),Do(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ic(),i=Po(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ao(e,i,r))&&(Ac(t,e,r),Do(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ic(),r=Po(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ao(e,r,n))&&(Ac(t,e,n),Do(t,e,n))}};function Ia(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,r)||!Qn(i,s))}function Pa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Aa(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=P({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var Da="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Oa(e){Da(e)}function Ra(e){console.error(e)}function La(e){Da(e)}function Ma(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Fa(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Ua(e,t,n){return(n=Po(n)).tag=3,n.payload={element:null},n.callback=function(){Ma(e,t)},n}function Va(e){return(e=Po(e)).tag=3,e}function za(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Fa(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Fa(t,n,r),"function"!==typeof i&&(null===kc?kc=new Set([this]):kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ba=Error(a(461)),$a=!1;function Ha(e,t,n,r){t.child=null===e?ki(t,null,n,r):xi(t,e.child,n,r)}function qa(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return No(t),r=ds(e,t,n,a,s,i),o=ms(),null===e||$a?(Yr&&o&&Wr(t),t.flags|=1,Ha(e,t,r,i),t.child):(gs(e,t,i),ho(e,t,i))}function Wa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ll(s)||void 0!==s.defaultProps||null!==n.compare?((e=Ul(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ga(e,t,s,r,i))}if(s=e.child,!fo(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(a,r)&&e.ref===t.ref)return ho(e,t,i)}return t.flags|=1,(e=Ml(s,r)).ref=t.ref,e.return=t,t.child=e}function Ga(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Qn(s,r)&&e.ref===t.ref){if($a=!1,t.pendingProps=r=s,!fo(e,i))return t.lanes=e.lanes,ho(e,t,i);0!==(131072&e.flags)&&($a=!0)}}return Xa(e,t,n,r,i)}function Ka(e,t,n){var r=t.pendingProps,i=r.children,s=0!==(2&t.stateNode._pendingVisibility),a=null!==e?e.memoizedState:null;if(Ya(e,t),"hidden"===r.mode||s){if(0!==(128&t.flags)){if(r=null!==a?a.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Qa(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Qa(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yi(0,null!==a?a.cachePool:null),null!==a?Ei(t,a):_i(),Pi(t)}else null!==a?(Yi(0,a.cachePool),Ei(t,a),Ai(),t.memoizedState=null):(null!==e&&Yi(0,null),_i(),Ai());return Ha(e,t,i,n),t.child}function Qa(e,t,n,r){var i=Qi();return i=null===i?null:{parent:Ui._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Yi(0,null),_i(),Pi(t),null!==e&&ko(e,t,r,!0),null}function Ya(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function Xa(e,t,n,r,i){return No(t),n=ds(e,t,n,r,void 0,i),r=ms(),null===e||$a?(Yr&&r&&Wr(t),t.flags|=1,Ha(e,t,n,i),t.child):(gs(e,t,i),ho(e,t,i))}function Ja(e,t,n,r,i,s){return No(t),t.updateQueue=null,n=fs(t,r,n,i),hs(e),r=ms(),null===e||$a?(Yr&&r&&Wr(t),t.flags|=1,Ha(e,t,n,s),t.child):(gs(e,t,s),ho(e,t,s))}function Za(e,t,n,r,i){if(No(t),null===t.stateNode){var s=Ar,a=n.contextType;"object"===typeof a&&null!==a&&(s=Eo(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=ja,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},jo(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Eo(a):Ar,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(Ta(t,n,a,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&ja.enqueueReplaceState(s,s.state,null),Mo(t,r,s,i),Lo(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=Aa(n,o);s.props=l;var c=s.context,u=n.contextType;a=Ar,"object"===typeof u&&null!==u&&(a=Eo(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&Pa(t,s,r,a),To=!1;var h=t.memoizedState;s.state=h,Mo(t,r,s,i),Lo(),c=t.memoizedState,o||h!==c||To?("function"===typeof d&&(Ta(t,n,d,r),c=t.memoizedState),(l=To||Ia(t,n,l,r,h,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Io(e,t),u=Aa(n,a=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Ar,"object"===typeof c&&null!==c&&(l=Eo(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&Pa(t,s,r,l),To=!1,h=t.memoizedState,s.state=h,Mo(t,r,s,i),Lo();var f=t.memoizedState;a!==d||h!==f||To||null!==e&&null!==e.dependencies&&So(e.dependencies)?("function"===typeof o&&(Ta(t,n,o,r),f=t.memoizedState),(u=To||Ia(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&So(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ya(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,n,i)):Ha(e,t,n,i),t.memoizedState=s.state,e=t.child):e=ho(e,t,i),e}function eo(e,t,n,r){return ii(),t.flags|=256,Ha(e,t,n,r),t.child}var to={dehydrated:null,treeContext:null,retryLane:0};function no(e){return{baseLanes:e,cachePool:Xi()}}function ro(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=pc),e}function io(e,t,n){var r,i=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Oi.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(Yr){if(s?Ii(t):Ai(),Yr){var l,c=Qr;if(l=c){e:{for(l=c,c=Jr;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=od(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==zr?{id:Br,overflow:$r}:null,retryLane:536870912},(l=Rl(18,null,null,0)).stateNode=c,l.return=t,t.child=l,Kr=t,Qr=null,l=!0):l=!1}l||ei(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return"$!"===c.data?t.lanes=16:t.lanes=536870912,null;Di(t)}return c=i.children,i=i.fallback,s?(Ai(),c=ao({mode:"hidden",children:c},s=t.mode),i=Vl(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=no(n),s.childLanes=ro(e,r,n),t.memoizedState=to,i):(Ii(t),so(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(Ii(t),t.flags&=-257,t=oo(e,t,n)):null!==t.memoizedState?(Ai(),t.child=e.child,t.flags|=128,t=null):(Ai(),s=i.fallback,c=t.mode,i=ao({mode:"visible",children:i.children},c),(s=Vl(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,xi(t,e.child,null,n),(i=t.child).memoizedState=no(n),i.childLanes=ro(e,r,n),t.memoizedState=to,t=s);else if(Ii(t),"$!"===c.data){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,si({value:i,source:null,stack:null}),t=oo(e,t,n)}else if($a||ko(e,t,n,!1),r=0!==(n&e.childLanes),$a||r){if(null!==(r=tc)){if(0!==(42&(i=n&-n)))i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(0!==(i=0!==(i&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane)throw l.retryLane=i,jr(e,i),Ac(r,e,i),Ba}"$?"===c.data||Hc(),t=oo(e,t,n)}else"$?"===c.data?(t.flags|=128,t.child=e.child,t=ou.bind(null,e),c._reactRetry=t,t=null):(e=l.treeContext,Qr=od(c.nextSibling),Kr=t,Yr=!0,Xr=null,Jr=!1,null!==e&&(Ur[Vr++]=Br,Ur[Vr++]=$r,Ur[Vr++]=zr,Br=e.id,$r=e.overflow,zr=t),(t=so(t,i.children)).flags|=4096);return t}return s?(Ai(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Ml(l,{mode:"hidden",children:i.children})).subtreeFlags=31457280&l.subtreeFlags,null!==u?s=Ml(u,s):(s=Vl(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=no(n):(null!==(l=c.cachePool)?(u=Ui._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Xi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=ro(e,r,n),t.memoizedState=to,i):(Ii(t),e=(n=e.child).sibling,(n=Ml(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function so(e,t){return(t=ao({mode:"visible",children:t},e.mode)).return=e,e.child=t}function ao(e,t){return zl(e,t,0,null)}function oo(e,t,n){return xi(t,e.child,null,n),(e=so(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function lo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wo(e.return,t,n)}function co(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function uo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ha(e,t,r.children,n),0!==(2&(r=Oi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&lo(e,n,t);else if(19===e.tag)lo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(K(Oi,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ri(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),co(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ri(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}co(t,!0,n,null,s);break;case"together":co(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),dc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ko(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ml(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ml(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function fo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!So(e))}function po(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)$a=!0;else{if(!fo(e,n)&&0===(128&t.flags))return $a=!1,function(e,t,n){switch(t.tag){case 3:Z(t,t.stateNode.containerInfo),vo(t,Ui,e.memoizedState.cache),ii();break;case 27:case 5:te(t);break;case 4:Z(t,t.stateNode.containerInfo);break;case 10:vo(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ii(t),t.flags|=128,null):0!==(n&t.child.childLanes)?io(e,t,n):(Ii(t),null!==(e=ho(e,t,n))?e.sibling:null);Ii(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ko(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return uo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),K(Oi,Oi.current),r)break;return null;case 22:case 23:return t.lanes=0,Ka(e,t,n);case 24:vo(t,Ui,e.memoizedState.cache)}return ho(e,t,n)}(e,t,n);$a=0!==(131072&e.flags)}else $a=!1,Yr&&0!==(1048576&t.flags)&&qr(t,Fr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===y){t.tag=11,t=qa(null,t,r,e,n);break e}if(i===w){t.tag=14,t=Wa(null,t,r,e,n);break e}}throw t=C(r)||r,Error(a(306,t,""))}Ll(r)?(e=Aa(r,e),t.tag=1,t=Za(null,t,r,e,n)):(t.tag=0,t=Xa(null,t,r,e,n))}return t;case 0:return Xa(e,t,t.type,t.pendingProps,n);case 1:return Za(e,t,r=t.type,i=Aa(r,t.pendingProps),n);case 3:e:{if(Z(t,t.stateNode.containerInfo),null===e)throw Error(a(387));var s=t.pendingProps;r=(i=t.memoizedState).element,Io(e,t),Mo(t,s,null,n);var o=t.memoizedState;if(s=o.cache,vo(t,Ui,s),s!==i.cache&&xo(t,[Ui],n,!0),Lo(),s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=eo(e,t,s,n);break e}if(s!==r){si(r=Or(Error(a(424)),t)),t=eo(e,t,s,n);break e}for(Qr=od(t.stateNode.containerInfo.firstChild),Kr=t,Yr=!0,Xr=null,Jr=!0,n=ki(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ii(),s===r){t=ho(e,t,n);break e}Ha(e,t,s,n)}t=t.child}return t;case 26:return Ya(e,t),null===e?(n=gd(t.type,null,t.pendingProps,null))?t.memoizedState=n:Yr||(n=t.type,e=t.pendingProps,(r=Qu(X.current).createElement(n))[Fe]=t,r[Ue]=e,Wu(r,n,e),Xe(r),t.stateNode=r):t.memoizedState=gd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Yr&&(r=t.stateNode=cd(t.type,t.pendingProps,X.current),Kr=t,Jr=!0,Qr=od(r.firstChild)),r=t.pendingProps.children,null!==e||Yr?Ha(e,t,r,n):t.child=xi(t,null,r,n),Ya(e,t),t.child;case 5:return null===e&&Yr&&((i=r=Qr)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=od(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,Jr))?(t.stateNode=r,Kr=t,Qr=od(r.firstChild),Jr=!1,i=!0):i=!1),i||ei(t)),te(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,Ju(i,s)?r=null:null!==o&&Ju(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=ds(e,t,ps,null,null,n),Ld._currentValue=i),Ya(e,t),Ha(e,t,r,n),t.child;case 6:return null===e&&Yr&&((e=n=Qr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=od(e.nextSibling)))return null}return e}(n,t.pendingProps,Jr))?(t.stateNode=n,Kr=t,Qr=null,e=!0):e=!1),e||ei(t)),null;case 13:return io(e,t,n);case 4:return Z(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):Ha(e,t,r,n),t.child;case 11:return qa(e,t,t.type,t.pendingProps,n);case 7:return Ha(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ha(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,vo(t,t.type,r.value),Ha(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,No(t),r=r(i=Eo(i)),t.flags|=1,Ha(e,t,r,n),t.child;case 14:return Wa(e,t,t.type,t.pendingProps,n);case 15:return Ga(e,t,t.type,t.pendingProps,n);case 19:return uo(e,t,n);case 22:return Ka(e,t,n);case 24:return No(t),r=Eo(Ui),null===e?(null===(i=Qi())&&(i=tc,s=Vi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},jo(t),vo(t,Ui,i)):(0!==(e.lanes&n)&&(Io(e,t),Mo(t,null,null,n),Lo()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),vo(t,Ui,r)):(r=s.cache,vo(t,Ui,r),r!==i.cache&&xo(t,[Ui],n,!0))),Ha(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}var mo=W(null),go=null,yo=null;function vo(e,t,n){K(mo,t._currentValue),t._currentValue=n}function bo(e){e._currentValue=mo.current,G(mo)}function wo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xo(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var o=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),wo(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),wo(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function ko(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=i.type;Kn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===J.current){if(null===(o=i.alternate))throw Error(a(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Ld):e=[Ld])}i=i.return}null!==e&&xo(t,e,n,r),t.flags|=262144}function So(e){for(e=e.firstContext;null!==e;){if(!Kn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function No(e){go=e,yo=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Eo(e){return Co(go,e)}function _o(e,t){return null===go&&No(e),Co(e,t)}function Co(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yo){if(null===e)throw Error(a(308));yo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yo=yo.next=t;return n}var To=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Po(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ao(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ec)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Pr(e),Ir(e,null,n),t}return Cr(e,r,t,n),Pr(e)}function Do(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function Oo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ro=!1;function Lo(){if(Ro){if(null!==qi)throw qi}}function Mo(e,t,n,r){Ro=!1;var i=e.updateQueue;To=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=-536870913&o.lane,f=h!==o.lane;if(f?(rc&h)===h:(r&h)===h){0!==h&&h===Hi&&(Ro=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,m=o;h=t;var g=n;switch(m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(g,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(g,d,h):p)||void 0===h)break e;d=P({},d,h);break e;case 2:To=!0}}null!==(h=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[h]:f.push(h))}else f={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(f=o).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),dc|=a,e.lanes=a,e.memoizedState=d}}function Fo(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function Uo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Fo(n[e],t)}function Vo(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){ru(t,t.return,o)}}function zo(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n;try{o()}catch(c){ru(i,l,c)}}}r=r.next}while(r!==s)}}catch(c){ru(t,t.return,c)}}function Bo(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Uo(t,n)}catch(r){ru(e,e.return,r)}}}function $o(e,t,n){n.props=Aa(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){ru(e,t,r)}}function Ho(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=r;break;default:i=r}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(s){ru(e,t,s)}}function qo(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){ru(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){ru(e,t,s)}else n.current=null}function Wo(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){ru(e,e.return,i)}}function Go(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Hu(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&Hu(e,t,f,p,r,h)}}return void gt(e,o,l,c,u,d,s,i);case"select":for(s in p=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||Hu(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&Hu(e,t,i,s,r,c)}return t=l,n=o,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Hu(e,t,l,null,r,i)}for(o in r)if(i=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=i||null!=s))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==s&&Hu(e,t,o,i,r,s)}return void wt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Hu(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Hu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Hu(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Hu(e,t,u,f,r,p)}return;default:if(_t(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&qu(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||qu(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Hu(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Hu(e,t,h,f,r,p)}(r,e.type,n,t),r[Ue]=t}catch(i){ru(e,e.return,i)}}function Ko(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Qo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ko(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Yo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$u));else if(4!==r&&27!==r&&null!==(e=e.child))for(Yo(e,t,n),e=e.sibling;null!==e;)Yo(e,t,n),e=e.sibling}function Xo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(Xo(e,t,n),e=e.sibling;null!==e;)Xo(e,t,n),e=e.sibling}var Jo=!1,Zo=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null,rl=!1;function il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:yl(e,n),4&r&&Vo(5,n);break;case 1:if(yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){ru(n,n.return,o)}else{var i=Aa(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){ru(n,n.return,l)}}64&r&&Bo(n),512&r&&Ho(n,n.return);break;case 3:if(yl(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{Uo(r,e)}catch(o){ru(n,n.return,o)}}break;case 26:yl(e,n),512&r&&Ho(n,n.return);break;case 27:case 5:yl(e,n),null===t&&4&r&&Wo(n),512&r&&Ho(n,n.return);break;case 12:default:yl(e,n);break;case 13:yl(e,n),4&r&&ul(e,n);break;case 22:if(!(i=null!==n.memoizedState||Jo)){t=null!==t&&null!==t.memoizedState||Zo;var s=Jo,a=Zo;Jo=i,(Zo=t)&&!a?bl(e,n,0!==(8772&n.subtreeFlags)):yl(e,n),Jo=s,Zo=a}512&r&&("manual"===n.memoizedProps.mode?Ho(n,n.return):qo(n,n.return))}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var al=null,ol=!1;function ll(e,t,n){for(n=n.child;null!==n;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(a){}switch(n.tag){case 26:Zo||qo(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Zo||qo(n,t);var r=al,i=ol;for(al=n.stateNode,ll(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);We(n),al=r,ol=i;break;case 5:Zo||qo(n,t);case 6:i=al;var s=ol;if(al=null,ll(e,t,n),ol=s,null!==(al=i))if(ol)try{e=al,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(o){ru(n,t,o)}else try{al.removeChild(n.stateNode)}catch(o){ru(n,t,o)}break;case 18:null!==al&&(ol?(t=al,n=n.stateNode,8===t.nodeType?sd(t.parentNode,n):1===t.nodeType&&sd(t,n),mh(t)):sd(al,n.stateNode));break;case 4:r=al,i=ol,al=n.stateNode.containerInfo,ol=!0,ll(e,t,n),al=r,ol=i;break;case 0:case 11:case 14:case 15:Zo||zo(2,n,t),Zo||zo(4,n,t),ll(e,t,n);break;case 1:Zo||(qo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&$o(n,t,r)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:Zo||qo(n,t),Zo=(r=Zo)||null!==n.memoizedState,ll(e,t,n),Zo=r;break;default:ll(e,t,n)}}function ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{mh(e)}catch(n){ru(t,t.return,n)}}function dl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach((function(t){var r=lu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:case 5:al=l.stateNode,ol=!1;break e;case 3:case 4:al=l.stateNode.containerInfo,ol=!0;break e}l=l.return}if(null===al)throw Error(a(160));cl(s,o,i),al=null,ol=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}var fl=null;function pl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hl(t,e),ml(e),4&r&&(zo(3,e,e.return),Vo(3,e),zo(5,e,e.return));break;case 1:hl(t,e),ml(e),512&r&&(Zo||null===n||qo(n,n.return)),64&r&&Jo&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=fl;if(hl(t,e),ml(e),512&r&&(Zo||null===n||qo(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[qe]||s[Fe]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),Wu(s,r,n),s[Fe]=e,Xe(s),r=s;break e;case"link":var o=Cd("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}Wu(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(o=Cd("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}Wu(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(a(468,r))}s[Fe]=e,Xe(s),r=s}e.stateNode=r}else Td(i,e.type,e.stateNode);else e.stateNode=kd(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Td(i,e.type,e.stateNode):kd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Go(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){i=e.stateNode,s=e.memoizedProps;try{for(var c=i.firstChild;c;){var u=c.nextSibling,d=c.nodeName;c[qe]||"HEAD"===d||"BODY"===d||"SCRIPT"===d||"STYLE"===d||"LINK"===d&&"stylesheet"===c.rel.toLowerCase()||i.removeChild(c),c=u}for(var h=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Wu(i,h,s),i[Fe]=e,i[Ue]=s}catch(m){ru(e,e.return,m)}}case 5:if(hl(t,e),ml(e),512&r&&(Zo||null===n||qo(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(m){ru(e,e.return,m)}}4&r&&null!=e.stateNode&&Go(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(el=!0);break;case 6:if(hl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){ru(e,e.return,m)}}break;case 3:if(_d=null,i=fl,fl=hd(t.containerInfo),hl(t,e),fl=i,ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{mh(t.containerInfo)}catch(m){ru(e,e.return,m)}el&&(el=!1,gl(e));break;case 4:r=fl,fl=hd(e.stateNode.containerInfo),hl(t,e),ml(e),fl=r;break;case 12:hl(t,e),ml(e);break;case 13:hl(t,e),ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(bc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,dl(e,r)));break;case 22:if(512&r&&(Zo||null===n||qo(n,n.return)),c=null!==e.memoizedState,u=null!==n&&null!==n.memoizedState,Jo=(d=Jo)||c,Zo=(h=Zo)||u,hl(t,e),Zo=h,Jo=d,ml(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=c?-2&t._visibility:1|t._visibility,c&&(t=Jo||Zo,null===n||u||t||vl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){u=n=t;try{if(i=u.stateNode,c)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{o=u.stateNode;var p=void 0!==(l=u.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;o.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){ru(u,u.return,m)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){ru(u,u.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,dl(e,n))));break;case 19:hl(t,e),ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,dl(e,r)));break;case 21:break;default:hl(t,e),ml(e)}}function ml(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(Ko(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 27:var i=r.stateNode;Xo(e,Qo(e),i);break;case 5:var s=r.stateNode;32&r.flags&&(kt(s,""),r.flags&=-33),Xo(e,Qo(e),s);break;case 3:case 4:var o=r.stateNode.containerInfo;Yo(e,Qo(e),o);break;default:throw Error(a(161))}}}catch(l){ru(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;gl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)il(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:zo(4,t,t.return),vl(t);break;case 1:qo(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&$o(t,t.return,n),vl(t);break;case 26:case 27:case 5:qo(t,t.return),vl(t);break;case 22:qo(t,t.return),null===t.memoizedState&&vl(t);break;default:vl(t)}e=e.sibling}}function bl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:bl(i,s,n),Vo(4,s);break;case 1:if(bl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){ru(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Fo(l[i],o)}catch(c){ru(r,r.return,c)}}n&&64&a&&Bo(s),Ho(s,s.return);break;case 26:case 27:case 5:bl(i,s,n),n&&null===r&&4&a&&Wo(s),Ho(s,s.return);break;case 12:default:bl(i,s,n);break;case 13:bl(i,s,n),n&&4&a&&ul(i,s);break;case 22:null===s.memoizedState&&bl(i,s,n),Ho(s,s.return)}t=t.sibling}}function wl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&zi(n))}function xl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zi(e))}function kl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t,n,r),t=t.sibling}function Sl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:kl(e,t,n,r),2048&i&&Vo(9,t);break;case 3:kl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zi(e)));break;case 12:if(2048&i){kl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ru(t,t.return,l)}}else kl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,null!==t.memoizedState?4&s._visibility?kl(e,t,n,r):El(e,t):4&s._visibility?kl(e,t,n,r):(s._visibility|=4,Nl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&wl(t.alternate,t);break;case 24:kl(e,t,n,r),2048&i&&xl(t.alternate,t);break;default:kl(e,t,n,r)}}function Nl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Nl(s,a,o,l,i),Vo(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?4&u._visibility?Nl(s,a,o,l,i):El(s,a):(u._visibility|=4,Nl(s,a,o,l,i)),i&&2048&c&&wl(a.alternate,a);break;case 24:Nl(s,a,o,l,i),i&&2048&c&&xl(a.alternate,a);break;default:Nl(s,a,o,l,i)}t=t.sibling}}function El(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:El(n,r),2048&i&&wl(r.alternate,r);break;case 24:El(n,r),2048&i&&xl(r.alternate,r);break;default:El(n,r)}t=t.sibling}}var _l=8192;function Cl(e){if(e.subtreeFlags&_l)for(e=e.child;null!==e;)Tl(e),e=e.sibling}function Tl(e){switch(e.tag){case 26:Cl(e),e.flags&_l&&null!==e.memoizedState&&function(e,t,n){if(null===Id)throw Error(a(475));var r=Id;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=yd(n.href),s=e.querySelector(vd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Ad.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void Xe(s);s=e.ownerDocument||e,n=bd(n),(i=ud.get(i))&&Nd(n,i),Xe(s=s.createElement("link"));var o=s;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),Wu(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Ad.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(fl,e.memoizedState,e.memoizedProps);break;case 5:default:Cl(e);break;case 3:case 4:var t=fl;fl=hd(e.stateNode.containerInfo),Cl(e),fl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=_l,_l=16777216,Cl(e),_l=t):Cl(e))}}function jl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Il(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Dl(r,e)}jl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Pl(e),e=e.sibling}function Pl(e){switch(e.tag){case 0:case 11:case 15:Il(e),2048&e.flags&&zo(9,e,e.return);break;case 3:case 12:default:Il(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Al(e)):Il(e)}}function Al(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Dl(r,e)}jl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:zo(8,t,t.return),Al(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Al(t));break;default:Al(t)}e=e.sibling}}function Dl(e,t){for(;null!==nl;){var n=nl;switch(n.tag){case 0:case 11:case 15:zo(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:zi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,nl=r;else e:for(n=e;null!==nl;){var i=(r=nl).sibling,s=r.return;if(sl(r),r===n){nl=null;break e}if(null!==i){i.return=s,nl=i;break e}nl=s}}}function Ol(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Ol(e,t,n,r)}function Ll(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=31457280&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fl(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ul(e,t,n,r,i,s){var o=0;if(r=e,"function"===typeof e)Ll(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,Q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case d:return Vl(n.children,i,s,t);case h:o=8,i|=24;break;case f:return(e=Rl(12,n,t,2|i)).elementType=f,e.lanes=s,e;case v:return(e=Rl(13,n,t,i)).elementType=v,e.lanes=s,e;case b:return(e=Rl(19,n,t,i)).elementType=b,e.lanes=s,e;case k:return zl(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:case g:o=10;break e;case m:o=9;break e;case y:o=11;break e;case w:o=14;break e;case x:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Rl(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Vl(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function zl(e,t,n,r){(e=Rl(22,e,r,t)).elementType=k,e.lanes=n;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=i._current;if(null===e)throw Error(a(456));if(0===(2&i._pendingVisibility)){var t=jr(e,2);null!==t&&(i._pendingVisibility|=2,Ac(t,e,2))}},attach:function(){var e=i._current;if(null===e)throw Error(a(456));if(0!==(2&i._pendingVisibility)){var t=jr(e,2);null!==t&&(i._pendingVisibility&=-3,Ac(t,e,2))}}};return e.stateNode=i,e}function Bl(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function $l(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hl(e){e.flags|=4}function ql(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!jd(t)){if(null!==(t=Ti.current)&&((4194176&rc)===rc?null!==ji:(62914560&rc)!==rc&&0===(536870912&rc)||t!==ji))throw hi=li,oi;e.flags|=8192}}function Wl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ie():536870912,e.lanes|=t,mc|=t)}function Gl(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Kl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=31457280&i.subtreeFlags,r|=31457280&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ql(e,t,n){var r=t.pendingProps;switch(Gr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Kl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),bo(Ui),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ri(t)?Hl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Xr&&(Oc(Xr),Xr=null))),Kl(t),null;case 26:return n=t.memoizedState,null===e?(Hl(t),null!==n?(Kl(t),ql(t,n)):(Kl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Hl(t),Kl(t),ql(t,n)):(Kl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Hl(t),Kl(t),t.flags&=-16777217),null;case 27:ne(t),n=X.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Hl(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Kl(t),null}e=Q.current,ri(t)?ti(t):(e=cd(i,r,n),t.stateNode=e,Hl(t))}return Kl(t),null;case 5:if(ne(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Hl(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Kl(t),null}if(e=Q.current,ri(t))ti(t);else{switch(i=Qu(X.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Fe]=t,e[Ue]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(Wu(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Hl(t)}}return Kl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Hl(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=X.current,ri(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=Kr))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Fe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Bu(e.nodeValue,n)))||ei(t)}else(e=Qu(e).createTextNode(r))[Fe]=t,t.stateNode=e}return Kl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=ri(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Fe]=t}else ii(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Kl(t),i=!1}else null!==Xr&&(Oc(Xr),Xr=null),i=!0;if(!i)return 256&t.flags?(Di(t),t):(Di(t),null)}if(Di(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Wl(t,t.updateQueue),Kl(t),null;case 4:return ee(),null===e&&Au(t.stateNode.containerInfo),Kl(t),null;case 10:return bo(t.type),Kl(t),null;case 19:if(G(Oi),null===(i=t.memoizedState))return Kl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)Gl(i,!1);else{if(0!==uc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Ri(e))){for(t.flags|=128,Gl(i,!1),e=s.updateQueue,t.updateQueue=e,Wl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fl(n,e),n=n.sibling;return K(Oi,1&Oi.current|2),t.child}e=e.sibling}null!==i.tail&&le()>wc&&(t.flags|=128,r=!0,Gl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Ri(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Wl(t,e),Gl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!Yr)return Kl(t),null}else 2*le()-i.renderingStartTime>wc&&536870912!==n&&(t.flags|=128,r=!0,Gl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=le(),t.sibling=null,e=Oi.current,K(Oi,r?1&e|2:1&e),t):(Kl(t),null);case 22:case 23:return Di(t),Ci(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Kl(t),6&t.subtreeFlags&&(t.flags|=8192)):Kl(t),null!==(n=t.updateQueue)&&Wl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&G(Ki),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bo(Ui),Kl(t),null;case 25:return null}throw Error(a(156,t.tag))}function Yl(e,t){switch(Gr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bo(Ui),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ne(t),null;case 13:if(Di(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ii()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return G(Oi),null;case 4:return ee(),null;case 10:return bo(t.type),null;case 22:case 23:return Di(t),Ci(),null!==e&&G(Ki),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bo(Ui),null;default:return null}}function Xl(e,t){switch(Gr(t),t.tag){case 3:bo(Ui),ee();break;case 26:case 27:case 5:ne(t);break;case 4:ee();break;case 13:Di(t);break;case 19:G(Oi);break;case 10:bo(t.type);break;case 22:case 23:Di(t),Ci(),null!==e&&G(Ki);break;case 24:bo(Ui)}}var Jl={getCacheForType:function(e){var t=Eo(Ui),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Zl="function"===typeof WeakMap?WeakMap:Map,ec=0,tc=null,nc=null,rc=0,ic=0,sc=null,ac=!1,oc=!1,lc=!1,cc=0,uc=0,dc=0,hc=0,fc=0,pc=0,mc=0,gc=null,yc=null,vc=!1,bc=0,wc=1/0,xc=null,kc=null,Sc=!1,Nc=null,Ec=0,_c=0,Cc=null,Tc=0,jc=null;function Ic(){if(0!==(2&ec)&&0!==rc)return rc&-rc;if(null!==I.T){return 0!==Hi?Hi:xu()}return Le()}function Pc(){0===pc&&(pc=0===(536870912&rc)||Yr?je():536870912);var e=Ti.current;return null!==e&&(e.flags|=32),pc}function Ac(e,t,n){(e===tc&&2===ic||null!==e.cancelPendingCommit)&&(Vc(e,0),Mc(e,rc,pc,!1)),Ae(e,n),0!==(2&ec)&&e===tc||(e===tc&&(0===(2&ec)&&(hc|=n),4===uc&&Mc(e,rc,pc,!1)),mu(e))}function Dc(e,t,n){if(0!==(6&ec))throw Error(a(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||Ce(e,t),i=r?function(e,t){var n=ec;ec|=2;var r=Bc(),i=$c();tc!==e||rc!==t?(xc=null,wc=le()+500,Vc(e,t)):oc=Ce(e,t);e:for(;;)try{if(0!==ic&&null!==nc){t=nc;var s=sc;t:switch(ic){case 1:ic=0,sc=null,Yc(e,t,s,1);break;case 2:if(ci(s)){ic=0,sc=null,Qc(t);break}t=function(){2===ic&&tc===e&&(ic=7),mu(e)},s.then(t,t);break e;case 3:ic=7;break e;case 4:ic=5;break e;case 7:ci(s)?(ic=0,sc=null,Qc(t)):(ic=0,sc=null,Yc(e,t,s,7));break;case 5:var o=null;switch(nc.tag){case 26:o=nc.memoizedState;case 5:case 27:var l=nc;if(!o||jd(o)){ic=0,sc=null;var c=l.sibling;if(null!==c)nc=c;else{var u=l.return;null!==u?(nc=u,Xc(u)):nc=null}break t}}ic=0,sc=null,Yc(e,t,s,5);break;case 6:ic=0,sc=null,Yc(e,t,s,6);break;case 8:Uc(),uc=6;break e;default:throw Error(a(462))}}Gc();break}catch(d){zc(e,d)}return yo=go=null,I.H=r,I.A=i,ec=n,null!==nc?0:(tc=null,rc=0,_r(),uc)}(e,t):qc(e,t,!0),s=r;;){if(0===i){oc&&!r&&Mc(e,t,0,!1);break}if(6===i)Mc(e,t,0,!ac);else{if(n=e.current.alternate,s&&!Lc(n)){i=qc(e,t,!1),s=!1;continue}if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=gc;var c=l.current.memoizedState.isDehydrated;if(c&&(Vc(l,o).flags|=256),2!==(o=qc(l,o,!1))){if(lc&&!c){l.errorRecoveryDisabledLanes|=s,hc|=s,i=4;break e}s=yc,yc=i,null!==s&&Oc(s)}i=o}if(s=!1,2!==i)continue}}if(1===i){Vc(e,0),Mc(e,t,0,!0);break}e:{switch(r=e,i){case 0:case 1:throw Error(a(345));case 4:if((4194176&t)===t){Mc(r,t,pc,!ac);break e}break;case 2:yc=null;break;case 3:case 5:break;default:throw Error(a(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(s=bc+300-le())){if(Mc(r,t,pc,!ac),0!==_e(r,0))break e;r.timeoutHandle=ed(Rc.bind(null,r,n,yc,xc,vc,t,pc,hc,mc,ac,2,-0,0),s)}else Rc(r,n,yc,xc,vc,t,pc,hc,mc,ac,0,-0,0)}}break}mu(e)}function Oc(e){null===yc?yc=e:yc.push.apply(yc,e)}function Rc(e,t,n,r,i,s,o,l,c,u,d,h,f){var p=t.subtreeFlags;if((8192&p||16785408===(16785408&p))&&(Id={stylesheets:null,count:0,unsuspend:Pd},Tl(t),null!==(t=function(){if(null===Id)throw Error(a(475));var e=Id;return e.stylesheets&&0===e.count&&Od(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Od(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=t(Zc.bind(null,e,n,r,i,o,l,c,1,h,f)),void Mc(e,s,o,!u);Zc(e,n,r,i,o,l,c,d,h,f)}function Lc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Kn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mc(e,t,n,r){t&=~fc,t&=~hc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-we(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&De(e,n,t)}function Fc(){return 0!==(6&ec)||(gu(0,!1),!1)}function Uc(){if(null!==nc){if(0===ic)var e=nc.return;else yo=go=null,ys(e=nc),pi=null,mi=0,e=nc;for(;null!==e;)Xl(e.alternate,e),e=e.return;nc=null}}function Vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,td(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc(),tc=e,nc=n=Ml(e.current,null),rc=t,ic=0,sc=null,ac=!1,oc=Ce(e,t),lc=!1,mc=pc=fc=hc=dc=uc=0,yc=gc=null,vc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-we(r),s=1<<i;t|=e[i],r&=~s}return cc=t,_r(),n}function zc(e,t){Zi=null,I.H=Na,t===ai?(t=fi(),ic=3):t===oi?(t=fi(),ic=4):ic=t===Ba?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,sc=t,null===nc&&(uc=1,Ma(e,Or(t,e.current)))}function Bc(){var e=I.H;return I.H=Na,null===e?Na:e}function $c(){var e=I.A;return I.A=Jl,e}function Hc(){uc=4,ac||(4194176&rc)!==rc&&null!==Ti.current||(oc=!0),0===(134217727&dc)&&0===(134217727&hc)||null===tc||Mc(tc,rc,pc,!1)}function qc(e,t,n){var r=ec;ec|=2;var i=Bc(),s=$c();tc===e&&rc===t||(xc=null,Vc(e,t)),t=!1;var a=uc;e:for(;;)try{if(0!==ic&&null!==nc){var o=nc,l=sc;switch(ic){case 8:Uc(),a=6;break e;case 3:case 2:case 6:null===Ti.current&&(t=!0);var c=ic;if(ic=0,sc=null,Yc(e,o,l,c),n&&oc){a=0;break e}break;default:c=ic,ic=0,sc=null,Yc(e,o,l,c)}}Wc(),a=uc;break}catch(u){zc(e,u)}return t&&e.shellSuspendCounter++,yo=go=null,ec=r,I.H=i,I.A=s,null===nc&&(tc=null,rc=0,_r()),a}function Wc(){for(;null!==nc;)Kc(nc)}function Gc(){for(;null!==nc&&!ae();)Kc(nc)}function Kc(e){var t=po(e.alternate,e,cc);e.memoizedProps=e.pendingProps,null===t?Xc(e):nc=t}function Qc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ja(n,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Ja(n,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:ys(t);default:Xl(n,t),t=po(n,t=nc=Fl(t,cc),cc)}e.memoizedProps=e.pendingProps,null===t?Xc(e):nc=t}function Yc(e,t,n,r){yo=go=null,ys(t),pi=null,mi=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ko(t,n,i,!0),null!==(n=Ti.current)){switch(n.tag){case 13:return null===ji?Hc():null===n.alternate&&0===uc&&(uc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===li?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),iu(e,r,i)),!1;case 22:return n.flags|=65536,r===li?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),iu(e,r,i)),!1}throw Error(a(435,n.tag))}return iu(e,r,i),Hc(),!1}if(Yr)return null!==(t=Ti.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==Zr&&si(Or(e=Error(a(422),{cause:r}),n))):(r!==Zr&&si(Or(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Or(r,n),Oo(e,i=Ua(e.stateNode,r,i)),4!==uc&&(uc=2)),!1;var s=Error(a(520),{cause:r});if(s=Or(s,n),null===gc?gc=[s]:gc.push(s),4!==uc&&(uc=2),null===t)return!0;r=Or(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,Oo(n,e=Ua(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===kc||!kc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,za(i=Va(i),e,n,r),Oo(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,rc))return uc=1,Ma(e,Or(n,e.current)),void(nc=null)}catch(s){if(null!==i)throw nc=i,s;return uc=1,Ma(e,Or(n,e.current)),void(nc=null)}32768&t.flags?(Yr||1===r?e=!0:oc||0!==(536870912&rc)?e=!1:(ac=e=!0,(2===r||3===r||6===r)&&(null!==(r=Ti.current)&&13===r.tag&&(r.flags|=16384))),Jc(t,e)):Xc(t)}function Xc(e){var t=e;do{if(0!==(32768&t.flags))return void Jc(t,ac);e=t.return;var n=Ql(t.alternate,t,cc);if(null!==n)return void(nc=n);if(null!==(t=t.sibling))return void(nc=t);nc=t=e}while(null!==t);0===uc&&(uc=5)}function Jc(e,t){do{var n=Yl(e.alternate,e);if(null!==n)return n.flags&=32767,void(nc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nc=e);nc=e=n}while(null!==e);uc=6,nc=null}function Zc(e,t,n,r,i,s,o,l,c,u){var d=I.T,h=B.p;try{B.p=2,I.T=null,function(e,t,n,r,i,s,o,l){do{tu()}while(null!==Nc);if(0!==(6&ec))throw Error(a(327));var c=e.finishedWork;if(r=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=c.lanes|c.childLanes;if(function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-we(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&De(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,r,u|=Er,s,o,l),e===tc&&(nc=tc=null,rc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||Sc||(Sc=!0,_c=u,Cc=n,function(e,t){ie(e,t)}(he,(function(){return tu(),null}))),n=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||n?(n=I.T,I.T=null,s=B.p,B.p=2,o=ec,ec|=4,function(e,t){if(e=e.containerInfo,Gu=Hd,er(e=Zn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ku={focusedElem:e,selectionRange:n},Hd=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){switch(s=(t=nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=Aa(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){ru(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))ad(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ad(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=rl,rl=!1}(e,c),pl(c,e),tr(Ku,e.containerInfo),Hd=!!Gu,Ku=Gu=null,e.current=c,il(e,c.alternate,c),oe(),ec=o,B.p=s,I.T=n):e.current=c,Sc?(Sc=!1,Nc=e,Ec=r):eu(e,u),u=e.pendingLanes,0===u&&(kc=null),function(e){if(ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),mu(e),null!==t)for(i=e.onRecoverableError,c=0;c<t.length;c++)u=t[c],i(u.value,{componentStack:u.stack});0!==(3&Ec)&&tu(),u=e.pendingLanes,0!==(4194218&r)&&0!==(42&u)?e===jc?Tc++:(Tc=0,jc=e):Tc=0,gu(0,!1)}(e,t,n,r,h,i,s,o)}finally{I.T=d,B.p=h}}function eu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,zi(t)))}function tu(){if(null!==Nc){var e=Nc,t=_c;_c=0;var n=Re(Ec),r=I.T,i=B.p;try{if(B.p=32>n?32:n,I.T=null,null===Nc)var s=!1;else{n=Cc,Cc=null;var o=Nc,l=Ec;if(Nc=null,Ec=0,0!==(6&ec))throw Error(a(331));var c=ec;if(ec|=4,Pl(o.current),Sl(o,o.current,l,n),ec=c,gu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,o)}catch(u){}s=!0}return s}finally{B.p=i,I.T=r,eu(e,t)}}return!1}function nu(e,t,n){t=Or(n,t),null!==(e=Ao(e,t=Ua(e.stateNode,t,2),2))&&(Ae(e,2),mu(e))}function ru(e,t,n){if(3===e.tag)nu(e,e,n);else for(;null!==t;){if(3===t.tag){nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===kc||!kc.has(r))){e=Or(n,e),null!==(r=Ao(t,n=Va(2),2))&&(za(n,r,t,e),Ae(r,2),mu(r));break}}t=t.return}}function iu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Zl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(lc=!0,i.add(n),e=su.bind(null,e,t,n),t.then(e,e))}function su(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tc===e&&(rc&n)===n&&(4===uc||3===uc&&(62914560&rc)===rc&&300>le()-bc?0===(2&ec)&&Vc(e,0):fc|=n,mc===rc&&(mc=0)),mu(e)}function au(e,t){0===t&&(t=Ie()),null!==(e=jr(e,t))&&(Ae(e,t),mu(e))}function ou(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),au(e,n)}function lu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),au(e,n)}var cu=null,uu=null,du=!1,hu=!1,fu=!1,pu=0;function mu(e){var t;e!==uu&&null===e.next&&(null===uu?cu=uu=e:uu=uu.next=e),hu=!0,du||(du=!0,t=yu,rd((function(){0!==(6&ec)?ie(ue,t):t()})))}function gu(e,t){if(!fu&&hu){fu=!0;do{for(var n=!1,r=cu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-we(42|e)+1)-1,s=201326677&(s&=i&~(a&~o))?201326677&s|1:s?2|s:0}0!==s&&(n=!0,wu(r,s))}else s=rc,0===(3&(s=_e(r,r===tc?s:0)))||Ce(r,s)||(n=!0,wu(r,s));r=r.next}}while(n);fu=!1}}function yu(){hu=du=!1;var e=0;0!==pu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Zu&&(Zu=e,!0);return Zu=null,!1}()&&(e=pu),pu=0);for(var t=le(),n=null,r=cu;null!==r;){var i=r.next,s=vu(r,t);0===s?(r.next=null,null===n?cu=i:n.next=i,null===i&&(uu=n)):(n=r,(0!==e||0!==(3&s))&&(hu=!0)),r=i}gu(e,!1)}function vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-we(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=Te(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=rc,n=_e(e,e===(t=tc)?n:0),r=e.callbackNode,0===n||e===t&&2===ic||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ce(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),Re(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=bu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function bu(e,t){var n=e.callbackNode;if(tu()&&e.callbackNode!==n)return null;var r=rc;return 0===(r=_e(e,e===tc?r:0))?null:(Dc(e,r,t),vu(e,le()),null!=e.callbackNode&&e.callbackNode===n?bu.bind(null,e):null)}function wu(e,t){if(tu())return null;Dc(e,t,!0)}function xu(){return 0===pu&&(pu=je()),pu}function ku(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:jt(""+e)}function Su(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Nu=0;Nu<xr.length;Nu++){var Eu=xr[Nu];kr(Eu.toLowerCase(),"on"+(Eu[0].toUpperCase()+Eu.slice(1)))}kr(fr,"onAnimationEnd"),kr(pr,"onAnimationIteration"),kr(mr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(yr,"onTransitionStart"),kr(vr,"onTransitionCancel"),kr(br,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function Tu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){Da(u)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){Da(u)}i.currentTarget=null,s=l}}}}function ju(e,t){var n=t[ze];void 0===n&&(n=t[ze]=new Set);var r=e+"__bubble";n.has(r)||(Du(t,e,2,!1),n.add(r))}function Iu(e,t,n){var r=0;t&&(r|=4),Du(n,e,r,t)}var Pu="_reactListening"+Math.random().toString(36).slice(2);function Au(e){if(!e[Pu]){e[Pu]=!0,Je.forEach((function(t){"selectionchange"!==t&&(Cu.has(t)||Iu(t,!1,e),Iu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Pu]||(t[Pu]=!0,Iu("selectionchange",!1,t))}}function Du(e,t,n,r){switch(Xd(t)){case 2:var i=qd;break;case 8:i=Wd;break;default:i=Gd}n=i.bind(null,t,n,e),i=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ou(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=Ge(o)))return;if(5===(l=a.tag)||6===l||26===l||27===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Lt((function(){var r=s,i=Pt(n),a=[];e:{var o=wr.get(e);if(void 0!==o){var l=Jt,c=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":l=pn;break;case"focusin":c="focus",l=sn;break;case"focusout":c="blur",l=sn;break;case"beforeblur":case"afterblur":l=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=gn;break;case fr:case pr:case mr:l=an;break;case br:l=yn;break;case"scroll":case"scrollend":l=en;break;case"wheel":l=vn;break;case"copy":case"cut":case"paste":l=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mn;break;case"toggle":case"beforetoggle":l=bn}var u=0!==(4&t),d=!u&&("scroll"===e||"scrollend"===e),h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=p;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===h||null!=(m=Mt(p,h))&&u.push(Ru(p,m,f)),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===It||!(c=n.relatedTarget||n.fromElement)||!Ge(c)&&!c[Ve])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ge(c):null)&&(d=M(c),u=c.tag,c!==d||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=r),l!==c)){if(u=nn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=mn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Qe(l),f=null==c?o:Qe(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,Ge(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Mu(f))p++;for(f=0,m=h;m;m=Mu(m))f++;for(;0<p-f;)u=Mu(u),p--;for(;0<f-p;)h=Mu(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Mu(u),h=Mu(h)}u=null}else u=null;null!==l&&Fu(a,o,l,u,!1),null!==c&&null!==d&&Fu(a,d,c,u,!0)}if("select"===(l=(o=r?Qe(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Mn;else if(Pn(o))if(Fn)g=Gn;else{g=qn;var y=Hn}else!(l=o.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&_t(r.elementType)&&(g=Mn):g=Wn;switch(g&&(g=g(e,r))?An(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&vt(o,"number",o.value)),y=r?Qe(r):window,e){case"focusin":(Pn(y)||"true"===y.contentEditable)&&(rr=y,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,i)}var v;if(xn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jn?Cn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==b?"onCompositionEnd"===b&&jn&&(v=$t()):(zt="value"in(Vt=i)?Vt.value:Vt.textContent,jn=!0)),0<(y=Lu(r,b)).length&&(b=new ln(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Tn(n))&&(b.data=v))),(v=Sn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(_n=!0,En);case"textInput":return(e=t.data)===En&&_n?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!xn&&Cn(e,t)?(e=$t(),Bt=zt=Vt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Lu(r,"onBeforeInput")).length&&(y=new ln("onBeforeInput","beforeinput",null,n,i),a.push({event:y,listeners:b}),y.data=v)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=ku((i[Ue]||null).action),a=r.submitter;a&&null!==(t=(t=a[Ue]||null)?ku(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new Jt("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==pu){var e=a?Su(i,a):new FormData(i);ua(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?Su(i,a):new FormData(i),ua(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}Tu(a,t)}))}function Ru(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Mt(e,n))&&r.unshift(Ru(e,i,s)),null!=(i=Mt(e,t))&&r.push(Ru(e,i,s))),e=e.return}return r}function Mu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Fu(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Mt(n,s))&&a.unshift(Ru(n,c,l)):i||null!=(c=Mt(n,s))&&a.push(Ru(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Uu=/\r\n?/g,Vu=/\u0000|\uFFFD/g;function zu(e){return("string"===typeof e?e:""+e).replace(Uu,"\n").replace(Vu,"")}function Bu(e,t){return t=zu(t),zu(e)===t}function $u(){}function Hu(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":ot(e,"class",r);break;case"tabIndex":ot(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ot(e,n,r);break;case"style":Et(e,r,s);break;case"data":if("object"!==t){ot(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=jt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Hu(e,t,"name",i.name,i,null),Hu(e,t,"formEncType",i.formEncType,i,null),Hu(e,t,"formMethod",i.formMethod,i,null),Hu(e,t,"formTarget",i.formTarget,i,null)):(Hu(e,t,"encType",i.encType,i,null),Hu(e,t,"method",i.method,i,null),Hu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=jt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=$u);break;case"onScroll":null!=r&&ju("scroll",e);break;case"onScrollEnd":null!=r&&ju("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=jt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":ju("beforetoggle",e),ju("toggle",e),at(e,"popover",r);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":at(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&at(e,n=Ct.get(n)||n,r)}}function qu(e,t,n,r,i,s){switch(n){case"style":Et(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&ju("scroll",e);break;case"onScrollEnd":null!=r&&ju("scrollend",e);break;case"onClick":null!=r&&(e.onclick=$u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ze.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Ue]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):at(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function Wu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ju("error",e),ju("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Hu(e,t,r,o,n,null)}}return s&&Hu(e,t,"srcSet",n.srcSet,n,null),void(i&&Hu(e,t,"src",n.src,n,null));case"input":ju("invalid",e);var l=r=o=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Hu(e,t,i,d,n,null)}}return yt(e,r,l,c,u,o,s,!1),void dt(e);case"select":for(s in ju("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:Hu(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(o in ju("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Hu(e,t,o,l,n,null)}return xt(e,i,s,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Hu(e,t,c,i,n,null);return;case"dialog":ju("cancel",e),ju("close",e);break;case"iframe":case"object":ju("load",e);break;case"video":case"audio":for(i=0;i<_u.length;i++)ju(_u[i],e);break;case"image":ju("error",e),ju("load",e);break;case"details":ju("toggle",e);break;case"embed":case"source":case"link":ju("error",e),ju("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Hu(e,t,u,i,n,null)}return;default:if(_t(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&qu(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Hu(e,t,l,i,n,null))}var Gu=null,Ku=null;function Qu(e){return 9===e.nodeType?e:e.ownerDocument}function Yu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Ju(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Zu=null;var ed="function"===typeof setTimeout?setTimeout:void 0,td="function"===typeof clearTimeout?clearTimeout:void 0,nd="function"===typeof Promise?Promise:void 0,rd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nd?function(e){return nd.resolve(null).then(e).catch(id)}:ed;function id(e){setTimeout((function(){throw e}))}function sd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void mh(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);mh(t)}function ad(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ad(n),We(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function od(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function cd(e,t,n){switch(t=Qu(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}var ud=new Map,dd=new Set;function hd(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var fd=B.d;B.d={f:function(){var e=fd.f(),t=Fc();return e||t},r:function(e){var t=Ke(e);null!==t&&5===t.tag&&"form"===t.type?ha(t):fd.r(e)},D:function(e){fd.D(e),md("dns-prefetch",e,null)},C:function(e,t){fd.C(e,t),md("preconnect",e,t)},L:function(e,t,n){fd.L(e,t,n);var r=pd;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=yd(e);break;case"script":s=wd(e)}ud.has(s)||(e=P({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),ud.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(vd(s))||"script"===t&&r.querySelector(xd(s))||(Wu(t=r.createElement("link"),"link",e),Xe(t),r.head.appendChild(t)))}},m:function(e,t){fd.m(e,t);var n=pd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=wd(e)}if(!ud.has(s)&&(e=P({rel:"modulepreload",href:e},t),ud.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(xd(s)))return}Wu(r=n.createElement("link"),"link",e),Xe(r),n.head.appendChild(r)}}},X:function(e,t){fd.X(e,t);var n=pd;if(n&&e){var r=Ye(n).hoistableScripts,i=wd(e),s=r.get(i);s||((s=n.querySelector(xd(i)))||(e=P({src:e,async:!0},t),(t=ud.get(i))&&Ed(e,t),Xe(s=n.createElement("script")),Wu(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){fd.S(e,t,n);var r=pd;if(r&&e){var i=Ye(r).hoistableStyles,s=yd(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(vd(s)))o.loading=5;else{e=P({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ud.get(s))&&Nd(e,n);var l=a=r.createElement("link");Xe(l),Wu(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Sd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){fd.M(e,t);var n=pd;if(n&&e){var r=Ye(n).hoistableScripts,i=wd(e),s=r.get(i);s||((s=n.querySelector(xd(i)))||(e=P({src:e,async:!0,type:"module"},t),(t=ud.get(i))&&Ed(e,t),Xe(s=n.createElement("script")),Wu(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var pd="undefined"===typeof document?null:document;function md(e,t,n){var r=pd;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),dd.has(i)||(dd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(Wu(t=r.createElement("link"),"link",e),Xe(t),r.head.appendChild(t)))}}function gd(e,t,n,r){var i,s,o,l,c=(c=X.current)?hd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=yd(n.href),(r=(n=Ye(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=yd(n.href);var u=Ye(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(vd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),ud.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ud.set(e,n),u||(i=c,s=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),Wu(s,"link",o),Xe(s),i.head.appendChild(s))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=wd(n),(r=(n=Ye(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function yd(e){return'href="'+mt(e)+'"'}function vd(e){return'link[rel="stylesheet"]['+e+"]"}function bd(e){return P({},e,{"data-precedence":e.precedence,precedence:null})}function wd(e){return'[src="'+mt(e)+'"]'}function xd(e){return"script[async]"+e}function kd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Xe(r),r;var i=P({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Xe(r=(e.ownerDocument||e).createElement("style")),Wu(r,"style",i),Sd(r,n.precedence,e),t.instance=r;case"stylesheet":i=yd(n.href);var s=e.querySelector(vd(i));if(s)return t.state.loading|=4,t.instance=s,Xe(s),s;r=bd(n),(i=ud.get(i))&&Nd(r,i),Xe(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),Wu(s,"link",r),t.state.loading|=4,Sd(s,n.precedence,e),t.instance=s;case"script":return s=wd(n.src),(i=e.querySelector(xd(s)))?(t.instance=i,Xe(i),i):(r=n,(i=ud.get(s))&&Ed(r=P({},n),i),Xe(i=(e=e.ownerDocument||e).createElement("script")),Wu(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Sd(r,n.precedence,e));return t.instance}function Sd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Nd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var _d=null;function Cd(e,t,n){if(null===_d){var r=new Map,i=_d=new Map;i.set(n,r)}else(r=(i=_d).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[qe]||s[Fe]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function Td(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function jd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Id=null;function Pd(){}function Ad(){if(this.count--,0===this.count)if(this.stylesheets)Od(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Dd=null;function Od(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Dd=new Map,t.forEach(Rd,e),Dd=null,Ad.call(e))}function Rd(e,t){if(!(4&t.state.loading)){var n=Dd.get(e);if(n)var r=n.get(null);else{n=new Map,Dd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Ad.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Ld={$$typeof:g,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function Md(e,t,n,r,i,s,a,o){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Fd(e,t,n,r,i,s,a,o,l,c,u,d){return e=new Md(e,t,n,a,o,l,c,d),t=1,!0===s&&(t|=24),s=Rl(3,null,null,t),e.current=s,s.stateNode=e,(t=Vi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},jo(s),e}function Ud(e){return e?e=Ar:Ar}function Vd(e,t,n,r,i,s){i=Ud(i),null===r.context?r.context=i:r.pendingContext=i,(r=Po(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=Ao(e,r,t))&&(Ac(n,0,t),Do(n,e,t))}function zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Bd(e,t){zd(e,t),(e=e.alternate)&&zd(e,t)}function $d(e){if(13===e.tag){var t=jr(e,67108864);null!==t&&Ac(t,0,67108864),Bd(e,67108864)}}var Hd=!0;function qd(e,t,n,r){var i=I.T;I.T=null;var s=B.p;try{B.p=2,Gd(e,t,n,r)}finally{B.p=s,I.T=i}}function Wd(e,t,n,r){var i=I.T;I.T=null;var s=B.p;try{B.p=8,Gd(e,t,n,r)}finally{B.p=s,I.T=i}}function Gd(e,t,n,r){if(Hd){var i=Kd(r);if(null===i)Ou(e,t,r,Qd,n),ah(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Zd=oh(Zd,e,t,n,r,i),!0;case"dragenter":return eh=oh(eh,e,t,n,r,i),!0;case"mouseover":return th=oh(th,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return nh.set(s,oh(nh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rh.set(s,oh(rh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(ah(e,r),4&t&&-1<sh.indexOf(e)){for(;null!==i;){var s=Ke(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=Ee(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-we(a);o.entanglements[1]|=l,a&=~l}mu(s),0===(6&ec)&&(wc=le()+500,gu(0,!1))}}break;case 13:null!==(o=jr(s,2))&&Ac(o,0,2),Fc(),Bd(s,2)}if(null===(s=Kd(r))&&Ou(e,t,r,Qd,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Ou(e,t,r,null,n)}}function Kd(e){return Yd(e=Pt(e))}var Qd=null;function Yd(e){if(Qd=null,null!==(e=Ge(e))){var t=M(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=F(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qd=e,null}function Xd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Jd=!1,Zd=null,eh=null,th=null,nh=new Map,rh=new Map,ih=[],sh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ah(e,t){switch(e){case"focusin":case"focusout":Zd=null;break;case"dragenter":case"dragleave":eh=null;break;case"mouseover":case"mouseout":th=null;break;case"pointerover":case"pointerout":nh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rh.delete(t.pointerId)}}function oh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ke(t))&&$d(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function lh(e){var t=Ge(e.target);if(null!==t){var n=M(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=F(n)))return e.blockedOn=t,void function(e,t){var n=B.p;try{return B.p=e,t()}finally{B.p=n}}(e.priority,(function(){if(13===n.tag){var e=Ic(),t=jr(n,e);null!==t&&Ac(t,0,e),Bd(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function ch(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kd(e.nativeEvent);if(null!==n)return null!==(t=Ke(n))&&$d(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function uh(e,t,n){ch(e)&&n.delete(t)}function dh(){Jd=!1,null!==Zd&&ch(Zd)&&(Zd=null),null!==eh&&ch(eh)&&(eh=null),null!==th&&ch(th)&&(th=null),nh.forEach(uh),rh.forEach(uh)}function hh(e,t){e.blockedOn===t&&(e.blockedOn=null,Jd||(Jd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,dh)))}var fh=null;function ph(e){fh!==e&&(fh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){fh===e&&(fh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Yd(r||n))continue;break}var s=Ke(n);null!==s&&(e.splice(t,3),t-=3,ua(s,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function mh(e){function t(t){return hh(t,e)}null!==Zd&&hh(Zd,e),null!==eh&&hh(eh,e),null!==th&&hh(th,e),nh.forEach(t),rh.forEach(t);for(var n=0;n<ih.length;n++){var r=ih[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<ih.length&&null===(n=ih[0]).blockedOn;)lh(n),null===n.blockedOn&&ih.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[Ue]||null;if("function"===typeof s)a||ph(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[Ue]||null)o=a.formAction;else if(null!==Yd(i))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),ph(n)}}}function gh(e){this._internalRoot=e}function yh(e){this._internalRoot=e}yh.prototype.render=gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vd(t.current,Ic(),e,t,null,null)},yh.prototype.unmount=gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&tu(),Vd(e.current,2,null,e,null,null),Fc(),t[Ve]=null}},yh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ih.length&&0!==t&&t<ih[n].priority;n++);ih.splice(n,0,e),0===n&&lh(e)}};var vh=i.version;if("19.0.0"!==vh)throw Error(a(527,vh,"19.0.0"));B.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=M(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return U(i),e;if(s===r)return U(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?V(e):null)?null:e.stateNode};var bh={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:Ge,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{ye=wh.inject(bh),ve=wh}catch(kh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",i=Oa,s=Ra,l=La;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Fd(e,1,!1,null,0,n,r,i,s,l,0,null),e[Ve]=t.current,Au(8===e.nodeType?e.parentNode:e),new gh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,i="",s=Oa,l=Ra,c=La,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Fd(e,1,!0,t,0,r,i,s,l,c,0,u)).context=Ud(null),n=t.current,(i=Po(r=Ic())).callback=null,Ao(n,i,r),t.current.lanes=r,Ae(t,r),mu(t),e[Ve]=t.current,Au(e),new yh(t)},t.version="19.0.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(e,t,r,i,s,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(){}function j(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return j((u=e._init)(e._payload),t,i,s,a)}}if(u)return a=a(e),u=""===s?"."+C(e,0):s,x(a)?(i="",null!=u&&(i=u.replace(_,"$&/")+"/"),j(a,t,i,"",(function(e){return e}))):null!=a&&(E(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+u,a=N(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,p=""===s?".":s+":";if(x(e))for(var m=0;m<e.length;m++)u+=j(s=e[m],t,i,o=p+C(s,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=j(s=s.value,t,i,o=p+C(s,m++),a);else if("object"===o){if("function"===typeof e.then)return j(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(T,T):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function I(e,t,n){if(null==e)return e;var r=[],i=0;return j(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return N(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return N(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(D,A)}catch(s){A(s)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return k.H.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.0.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,P();else{var t=r(u);null!==t&&A(x,t.startTime-e)}}var k,S=!1,N=-1,E=5,_=-1;function C(){return!(t.unstable_now()-_<E)}function T(){if(S){var e=t.unstable_now();_=e;var n=!0;try{e:{m=!1,g&&(g=!1,v(N),N=-1),p=!0;var s=f;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===r(c)&&i(c),w(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&A(x,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?k():S=!1}}}if("function"===typeof b)k=function(){b(T)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,I=j.port2;j.port1.onmessage=T,k=function(){I.postMessage(null)}}else k=function(){y(T,0)};function P(){S||(S=!0,k())}function A(e,n){N=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(N),N=-1):g=!0,A(x,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P())),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{428:"54e20c01",453:"d5f383ac"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="business-tycoon:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/business-tycoon/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,a=r[0],o=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkbusiness_tycoon=self.webpackChunkbusiness_tycoon||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==l)throw new o;const c=t<<2|s>>4;if(r.push(c),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const u=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,d=()=>{try{return u()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/business-tycoon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},h=e=>{var t,n;return null===(n=null===(t=d())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},f=()=>{var e;return null===(e=d())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=d())||void 0===t?void 0:t[`_${e}`]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return!function(){var e;const t=null===(e=d())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v(){try{return"object"===typeof indexedDB}catch(e){return!1}}class b extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(x,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new b(n,s,t)}}const x=/\{\$([^}]+)}/g;function k(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(S(n)&&S(s)){if(!k(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function S(e){return null!==e&&"object"===typeof e}function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function E(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function _(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class C{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function T(){}function j(e){return e&&e._delegate?e._delegate:e}class I{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const P="[DEFAULT]";class A{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:P})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===P?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.component?this.component.multipleInstances?e:P:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class D{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new A(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const O=[];var R;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(R||(R={}));const L={debug:R.DEBUG,verbose:R.VERBOSE,info:R.INFO,warn:R.WARN,error:R.ERROR,silent:R.SILENT},M=R.INFO,F={[R.DEBUG]:"log",[R.VERBOSE]:"log",[R.INFO]:"info",[R.WARN]:"warn",[R.ERROR]:"error"},U=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=F[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class V{constructor(e){this.name=e,this._logLevel=M,this._logHandler=U,this._userLogHandler=null,O.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in R))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?L[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,R.DEBUG,...t),this._logHandler(this,R.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,R.VERBOSE,...t),this._logHandler(this,R.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,R.INFO,...t),this._logHandler(this,R.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,R.WARN,...t),this._logHandler(this,R.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,R.ERROR,...t),this._logHandler(this,R.ERROR,...t)}}let z,B;const $=new WeakMap,H=new WeakMap,q=new WeakMap,W=new WeakMap,G=new WeakMap;let K={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return H.get(e);if("objectStoreNames"===t)return e.objectStoreNames||q.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return X(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Q(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(J(this),n),X($.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return X(e.apply(J(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(J(this),t,...r);return q.set(s,t.sort?t.sort():[t]),X(s)}}function Y(e){return"function"===typeof e?Q(e):(e instanceof IDBTransaction&&function(e){if(H.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));H.set(e,t)}(e),t=e,(z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,K):e);var t}function X(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(X(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&$.set(t,e)})).catch((()=>{})),G.set(t,e),t}(e);if(W.has(e))return W.get(e);const t=Y(e);return t!==e&&(W.set(e,t),G.set(t,e)),t}const J=e=>G.get(e);const Z=["get","getKey","getAll","getAllKeys","count"],ee=["put","add","delete","clear"],te=new Map;function ne(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(te.get(t))return te.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ee.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Z.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return te.set(t,s),s}K=(e=>({...e,get:(t,n,r)=>ne(t,n)||e.get(t,n,r),has:(t,n)=>!!ne(t,n)||e.has(t,n)}))(K);class re{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ie="@firebase/app",se="0.10.13",ae=new V("@firebase/app"),oe="@firebase/app-compat",le="@firebase/analytics-compat",ce="@firebase/analytics",ue="@firebase/app-check-compat",de="@firebase/app-check",he="@firebase/auth",fe="@firebase/auth-compat",pe="@firebase/database",me="@firebase/data-connect",ge="@firebase/database-compat",ye="@firebase/functions",ve="@firebase/functions-compat",be="@firebase/installations",we="@firebase/installations-compat",xe="@firebase/messaging",ke="@firebase/messaging-compat",Se="@firebase/performance",Ne="@firebase/performance-compat",Ee="@firebase/remote-config",_e="@firebase/remote-config-compat",Ce="@firebase/storage",Te="@firebase/storage-compat",je="@firebase/firestore",Ie="@firebase/vertexai-preview",Pe="@firebase/firestore-compat",Ae="firebase",De="[DEFAULT]",Oe={[ie]:"fire-core",[oe]:"fire-core-compat",[ce]:"fire-analytics",[le]:"fire-analytics-compat",[de]:"fire-app-check",[ue]:"fire-app-check-compat",[he]:"fire-auth",[fe]:"fire-auth-compat",[pe]:"fire-rtdb",[me]:"fire-data-connect",[ge]:"fire-rtdb-compat",[ye]:"fire-fn",[ve]:"fire-fn-compat",[be]:"fire-iid",[we]:"fire-iid-compat",[xe]:"fire-fcm",[ke]:"fire-fcm-compat",[Se]:"fire-perf",[Ne]:"fire-perf-compat",[Ee]:"fire-rc",[_e]:"fire-rc-compat",[Ce]:"fire-gcs",[Te]:"fire-gcs-compat",[je]:"fire-fst",[Pe]:"fire-fst-compat",[Ie]:"fire-vertex","fire-js":"fire-js",[Ae]:"fire-js-all"},Re=new Map,Le=new Map,Me=new Map;function Fe(e,t){try{e.container.addComponent(t)}catch(n){ae.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ue(e){const t=e.name;if(Me.has(t))return ae.debug(`There were multiple attempts to register component ${t}.`),!1;Me.set(t,e);for(const n of Re.values())Fe(n,e);for(const n of Le.values())Fe(n,e);return!0}function Ve(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ze(e){return void 0!==e.settings}const Be=new w("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class $e{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new I("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Be.create("app-deleted",{appName:this._name})}}const He="10.14.1";function qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:De,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Be.create("bad-app-name",{appName:String(i)});if(n||(n=f()),!n)throw Be.create("no-options");const s=Re.get(i);if(s){if(k(n,s.options)&&k(r,s.config))return s;throw Be.create("duplicate-app",{appName:i})}const a=new D(i);for(const l of Me.values())a.addComponent(l);const o=new $e(n,r,a);return Re.set(i,o),o}function We(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;const t=Re.get(e);if(!t&&e===De&&f())return qe();if(!t)throw Be.create("no-app",{appName:e});return t}function Ge(e,t,n){var r;let i=null!==(r=Oe[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ae.warn(e.join(" "))}Ue(new I(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Ke="firebase-heartbeat-store";let Qe=null;function Ye(){return Qe||(Qe=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=X(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(X(a.result),e.oldVersion,e.newVersion,X(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ke)}catch(n){console.warn(n)}}}).catch((e=>{throw Be.create("idb-open",{originalErrorMessage:e.message})}))),Qe}async function Xe(e,t){try{const n=(await Ye()).transaction(Ke,"readwrite"),r=n.objectStore(Ke);await r.put(t,Je(e)),await n.done}catch(n){if(n instanceof b)ae.warn(n.message);else{const e=Be.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ae.warn(e.message)}}}function Je(e){return`${e.name}!${e.options.appId}`}class Ze{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=et();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){ae.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=et(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),nt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ae.warn(t),""}}}function et(){return(new Date).toISOString().substring(0,10)}class tt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!v()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ye()).transaction(Ke),n=await t.objectStore(Ke).get(Je(e));return await t.done,n}catch(t){if(t instanceof b)ae.warn(t.message);else{const e=Be.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ae.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function nt(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var rt;rt="",Ue(new I("platform-logger",(e=>new re(e)),"PRIVATE")),Ue(new I("heartbeat",(e=>new Ze(e)),"PRIVATE")),Ge(ie,se,rt),Ge(ie,se,"esm2017"),Ge("fire-js","");Ge("firebase","10.14.1","app");function it(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const at=st,ot=new w("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lt=new V("@firebase/auth");function ct(e){if(lt.logLevel<=R.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lt.error(`Auth (${He}): ${e}`,...n)}}function ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw mt(e,...n)}function dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mt(e,...n)}function ht(e,t,n){const r=Object.assign(Object.assign({},at()),{[t]:n});return new w("auth","Firebase",r).create(t,{appName:e.name})}function ft(e){return ht(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ut(e,"argument-error"),ht(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ot.create(e,...n)}function gt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw mt(t,...r)}}function yt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ct(t),new Error(t)}function vt(e,t){e||yt(t)}function bt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function wt(){return"http:"===xt()||"https:"===xt()}function xt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function kt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(wt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class St{constructor(e,t){this.shortDelay=e,this.longDelay=t,vt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return kt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nt(e,t){vt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Et{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ct=new St(3e4,6e4);function Tt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function jt(e,t,n,r){return It(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=N(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Et.fetch()(At(e,e.config.apiHost,n,a),l)}))}async function It(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},_t),t);try{const t=new Ot(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Rt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Rt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Rt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Rt(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw ht(e,o,a);ut(e,o)}}catch(i){if(i instanceof b)throw i;ut(e,"network-request-failed",{message:String(i)})}}async function Pt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await jt(e,t,n,r,i);return"mfaPendingCredential"in s&&ut(e,"multi-factor-auth-required",{_serverResponse:s}),s}function At(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Nt(e.config,i):`${e.config.apiScheme}://${i}`}function Dt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ot{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(dt(this.auth,"network-request-failed"))),Ct.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dt(e,t,r);return i.customData._tokenResponse=n,i}function Lt(e){return void 0!==e&&void 0!==e.enterprise}class Mt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Dt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ft(e,t){return jt(e,"GET","/v2/recaptchaConfig",Tt(e,t))}async function Ut(e,t){return jt(e,"POST","/v1/accounts:lookup",t)}function Vt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function zt(e){return 1e3*Number(e)}function Bt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(ct("Failed to decode base64 JWT payload"),null)}catch(i){return ct("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function $t(e){const t=Bt(e);return gt(t,"internal-error"),gt("undefined"!==typeof t.exp,"internal-error"),gt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Ht(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof b&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class qt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Wt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vt(this.lastLoginAt),this.creationTime=Vt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Gt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ht(e,Ut(n,{idToken:r}));gt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Kt(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Wt(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Kt(e){return e.map((e=>{var{providerId:t}=e,n=it(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Qt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gt(e.idToken,"internal-error"),gt("undefined"!==typeof e.idToken,"internal-error"),gt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):$t(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){gt(0!==e.length,"internal-error");const t=$t(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await It(e,{},(async()=>{const n=N({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=At(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Et.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Qt;return n&&(gt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(gt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(gt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qt,this.toJSON())}_performRefresh(){return yt("not implemented")}}function Yt(e,t){gt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Xt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=it(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Wt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ht(this,this.stsTokenManager.getToken(this.auth,e));return gt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=j(e),r=await n.getIdToken(t),i=Bt(r);gt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Vt(zt(i.auth_time)),issuedAtTime:Vt(zt(i.iat)),expirationTime:Vt(zt(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=j(e);await Gt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Gt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ze(this.auth.app))return Promise.reject(ft(this.auth));const e=await this.getIdToken();return await Ht(this,async function(e,t){return jt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:k}=t;gt(v&&k,e,"internal-error");const S=Qt.fromJSON(this.name,k);gt("string"===typeof v,e,"internal-error"),Yt(u,e.name),Yt(d,e.name),gt("boolean"===typeof b,e,"internal-error"),gt("boolean"===typeof w,e,"internal-error"),Yt(h,e.name),Yt(f,e.name),Yt(p,e.name),Yt(m,e.name),Yt(g,e.name),Yt(y,e.name);const N=new Xt({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(N.providerData=x.map((e=>Object.assign({},e)))),m&&(N._redirectEventId=m),N}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Qt;r.updateFromServerResponse(t);const i=new Xt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Gt(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];gt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Kt(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Qt;a.updateFromIdToken(n);const o=new Xt({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Wt(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const Jt=new Map;function Zt(e){vt(e instanceof Function,"Expected a class definition");let t=Jt.get(e);return t?(vt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Jt.set(e,t),t)}class en{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}en.type="NONE";const tn=en;function nn(e,t,n){return`firebase:${e}:${t}:${n}`}class rn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=nn(this.userKey,r.apiKey,i),this.fullPersistenceKey=nn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new rn(Zt(tn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Zt(tn);const s=nn(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Xt._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new rn(i,e,n)):new rn(i,e,n)}}function sn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(an(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dn(t))return"Blackberry";if(hn(t))return"Webos";if(on(t))return"Safari";if((t.includes("chrome/")||ln(t))&&!t.includes("edge/"))return"Chrome";if(un(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function an(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/firefox\//i.test(e)}function on(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/crios\//i.test(e)}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/iemobile/i.test(e)}function un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/android/i.test(e)}function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/blackberry/i.test(e)}function hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/webos/i.test(e)}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pn(){return function(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return fn(e)||un(e)||hn(e)||dn(e)||/windows phone/i.test(e)||cn(e)}function gn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=sn(g());break;case"Worker":t=`${sn(g())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${He}/${r}`}class yn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class vn{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class bn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xn(this),this.idTokenSubscription=new xn(this),this.beforeStateQueue=new yn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zt(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await rn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ut(this,{idToken:e}),n=await Xt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ze(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gt(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ze(this.app))return Promise.reject(ft(this));const t=e?j(e):null;return t&&gt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ze(this.app)?Promise.reject(ft(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ze(this.app)?Promise.reject(ft(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Zt(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return jt(e,"GET","/v2/passwordPolicy",Tt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new vn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new w("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return jt(e,"POST","/v2/accounts:revokeToken",Tt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zt(e)||this._popupRedirectResolver;gt(t,this,"argument-error"),this.redirectPersistenceManager=await rn.create(this,[Zt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(lt.logLevel<=R.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lt.warn(`Auth (${He}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function wn(e){return j(e)}class xn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new C(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sn(e){return kn.loadJS(e)}function Nn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class En{constructor(e){this.type="recaptcha-enterprise",this.auth=wn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Lt(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ft(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Mt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Lt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=kn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Sn(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function _n(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new En(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Cn(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await _n(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await _n(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Tn(e,t,n){const r=wn(e);gt(r._canInitEmulator,r,"emulator-config-failed"),gt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=jn(t),{host:a,port:o}=function(e){const t=jn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:In(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:In(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function jn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function In(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Pn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yt("not implemented")}_getIdTokenResponse(e){return yt("not implemented")}_linkToIdToken(e,t){return yt("not implemented")}_getReauthenticationResolver(e){return yt("not implemented")}}async function An(e,t){return jt(e,"POST","/v1/accounts:signUp",t)}async function Dn(e,t){return Pt(e,"POST","/v1/accounts:signInWithPassword",Tt(e,t))}async function On(e,t){return jt(e,"POST","/v1/accounts:sendOobCode",Tt(e,t))}async function Rn(e,t){return On(e,t)}class Ln extends Pn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ln(e,t,"password")}static _fromEmailAndCode(e,t){return new Ln(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Cn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Dn);case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",Tt(e,t))}(e,{email:this._email,oobCode:this._password});default:ut(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Cn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",An);case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",Tt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ut(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Mn(e,t){return Pt(e,"POST","/v1/accounts:signInWithIdp",Tt(e,t))}class Fn extends Pn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ut("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=it(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Fn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Mn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Mn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=N(t)}return e}}const Un={USER_NOT_FOUND:"user-not-found"};class Vn extends Pn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Vn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Vn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Tt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Tt(e,t));if(n.temporaryProof)throw Rt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Tt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Un)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Vn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class zn{constructor(e){var t,n,r,i,s,a;const o=E(_(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);gt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=E(_(e)).link,n=t?E(_(t)).deep_link_id:null,r=E(_(e)).deep_link_id;return(r?E(_(r)).link:null)||r||n||t||e}(e);try{return new zn(t)}catch(n){return null}}}class Bn{constructor(){this.providerId=Bn.PROVIDER_ID}static credential(e,t){return Ln._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=zn.parseLink(t);return gt(n,"argument-error"),Ln._fromEmailAndCode(e,n.code,n.tenantId)}}Bn.PROVIDER_ID="password",Bn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Bn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class $n{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Hn extends $n{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qn extends Hn{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return gt("providerId"in t&&"signInMethod"in t,"argument-error"),Fn._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return gt(e.idToken||e.accessToken,"argument-error"),Fn._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return qn.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return qn.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=t;if(!r&&!i&&!n&&!s)return null;if(!o)return null;try{return new qn(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch(l){return null}}}class Wn extends Hn{constructor(){super("facebook.com")}static credential(e){return Fn._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Wn.credential(t.oauthAccessToken)}catch(n){return null}}}Wn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Wn.PROVIDER_ID="facebook.com";class Gn extends Hn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fn._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Gn.credential(n,r)}catch(i){return null}}}Gn.GOOGLE_SIGN_IN_METHOD="google.com",Gn.PROVIDER_ID="google.com";class Kn extends Hn{constructor(){super("github.com")}static credential(e){return Fn._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Kn.credential(t.oauthAccessToken)}catch(n){return null}}}Kn.GITHUB_SIGN_IN_METHOD="github.com",Kn.PROVIDER_ID="github.com";class Qn extends Hn{constructor(){super("twitter.com")}static credential(e,t){return Fn._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Qn.credential(n,r)}catch(i){return null}}}async function Yn(e,t){return Pt(e,"POST","/v1/accounts:signUp",Tt(e,t))}Qn.TWITTER_SIGN_IN_METHOD="twitter.com",Qn.PROVIDER_ID="twitter.com";class Xn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Xt._fromIdTokenResponse(e,n,r),s=Jn(n);return new Xn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Jn(n);return new Xn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Jn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Zn extends b{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Zn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Zn(e,t,n,r)}}function er(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Zn._fromErrorAndOperation(e,n,t,r);throw n}))}async function tr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ht(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Xn._forOperation(e,"link",r)}async function nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ze(r.app))return Promise.reject(ft(r));const i="reauthenticate";try{const s=await Ht(e,er(r,i,t,e),n);gt(s.idToken,r,"internal-error");const a=Bt(s.idToken);gt(a,r,"internal-error");const{sub:o}=a;return gt(e.uid===o,r,"user-mismatch"),Xn._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&ut(r,"user-mismatch"),s}}async function rr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ze(e.app))return Promise.reject(ft(e));const r="signIn",i=await er(e,r,t),s=await Xn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ir(e,t){return rr(wn(e),t)}function sr(e,t,n){var r;gt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),gt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(gt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(gt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ar(e){const t=wn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function or(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=j(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Ht(i,async function(e,t){return jt(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function lr(e,t,n,r){return j(e).onAuthStateChanged(t,n,r)}new WeakMap;const cr="__sak";class ur{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cr,"1"),this.storage.removeItem(cr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class dr extends ur{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);pn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dr.type="LOCAL";const hr=dr;class fr extends ur{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fr.type="SESSION";const pr=fr;class mr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new mr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function gr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}mr.receivers=[];class yr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=gr("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function vr(){return window}function br(){return"undefined"!==typeof vr().WorkerGlobalScope&&"function"===typeof vr().importScripts}const wr="firebaseLocalStorageDb",xr="firebaseLocalStorage",kr="fbase_key";class Sr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Nr(e,t){return e.transaction([xr],t?"readwrite":"readonly").objectStore(xr)}function Er(){const e=indexedDB.open(wr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(xr,{keyPath:kr})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(xr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(wr);return new Sr(e).toPromise()}(),t(await Er()))}))}))}async function _r(e,t,n){const r=Nr(e,!0).put({[kr]:t,value:n});return new Sr(r).toPromise()}function Cr(e,t){const n=Nr(e,!0).delete(t);return new Sr(n).toPromise()}class Tr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Er()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return br()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mr._getInstance(br()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new yr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Er();return await _r(e,cr,"1"),await Cr(e,cr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>_r(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Nr(e,!1).get(t),r=await new Sr(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Cr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Nr(e,!1).getAll();return new Sr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Tr.type="LOCAL";const jr=Tr;Nn("rcb"),new St(3e4,6e4);const Ir="recaptcha";async function Pr(e,t,n){var r;const i=await n.verify();try{let s;if(gt("string"===typeof i,e,"argument-error"),gt(n.type===Ir,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){gt("enroll"===t.type,e,"internal-error");const n=await function(e,t){return jt(e,"POST","/v2/accounts/mfaEnrollment:start",Tt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{gt("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;gt(n,e,"missing-multi-factor-info");const a=await function(e,t){return jt(e,"POST","/v2/accounts/mfaSignIn:start",Tt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return jt(e,"POST","/v1/accounts:sendVerificationCode",Tt(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Ar{constructor(e){this.providerId=Ar.PROVIDER_ID,this.auth=wn(e)}verifyPhoneNumber(e,t){return Pr(this.auth,e,j(t))}static credential(e,t){return Vn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ar.credentialFromTaggedObject(t)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Vn._fromTokenResponse(n,r):null}}function Dr(e,t){return t?Zt(t):(gt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ar.PROVIDER_ID="phone",Ar.PHONE_SIGN_IN_METHOD="phone";class Or extends Pn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Rr(e){return rr(e.auth,new Or(e),e.bypassAuthState)}function Lr(e){const{auth:t,user:n}=e;return gt(n,t,"internal-error"),nr(n,new Or(e),e.bypassAuthState)}async function Mr(e){const{auth:t,user:n}=e;return gt(n,t,"internal-error"),tr(n,new Or(e),e.bypassAuthState)}class Fr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rr;case"linkViaPopup":case"linkViaRedirect":return Mr;case"reauthViaPopup":case"reauthViaRedirect":return Lr;default:ut(this.auth,"internal-error")}}resolve(e){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ur=new St(2e3,1e4);async function Vr(e,t,n){if(ze(e.app))return Promise.reject(dt(e,"operation-not-supported-in-this-environment"));const r=wn(e);pt(e,t,$n);const i=Dr(r,n);return new zr(r,"signInViaPopup",t,i).executeNotNull()}class zr extends Fr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,zr.currentPopupAction&&zr.currentPopupAction.cancel(),zr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gt(e,this.auth,"internal-error"),e}async onExecution(){vt(1===this.filter.length,"Popup operations only handle one event");const e=gr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(dt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(dt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Ur.get())};e()}}zr.currentPopupAction=null;const Br=new Map;class $r extends Fr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Br.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Wr(t),r=qr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Br.set(this.auth._key(),e)}return this.bypassAuthState||Br.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Hr(e,t){Br.set(e._key(),t)}function qr(e){return Zt(e._redirectPersistence)}function Wr(e){return nn("pendingRedirect",e.config.apiKey,e.name)}async function Gr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ze(e.app))return Promise.reject(ft(e));const r=wn(e),i=Dr(r,t),s=new $r(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Kr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Yr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(dt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qr(e))}saveEventToCache(e){this.cachedEventUids.add(Qr(e)),this.lastProcessedEventTime=Date.now()}}function Qr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Yr(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Xr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jr=/^https?/;async function Zr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return jt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ei(r))return}catch(n){}ut(e,"unauthorized-domain")}function ei(e){const t=bt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Jr.test(n))return!1;if(Xr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ti=new St(3e4,6e4);function ni(){const e=vr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ri(e){return new Promise(((t,n)=>{var r,i,s;function a(){ni(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ni(),n(dt(e,"network-request-failed"))},timeout:ti.get()})}if(null===(i=null===(r=vr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=vr().gapi)||void 0===s?void 0:s.load)){const t=Nn("iframefcb");return vr()[t]=()=>{gapi.load?a():n(dt(e,"network-request-failed"))},Sn(`${kn.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw ii=null,e}))}let ii=null;const si=new St(5e3,15e3),ai={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function li(e){const t=e.config;gt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Nt(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:He},i=oi.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${N(r).slice(1)}`}async function ci(e){const t=await function(e){return ii=ii||ri(e),ii}(e),n=vr().gapi;return gt(n,e,"internal-error"),t.open({where:document.body,url:li(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ai,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=dt(e,"network-request-failed"),s=vr().setTimeout((()=>{r(i)}),si.get());function a(){vr().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const ui={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class di{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function hi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},ui),{width:r.toString(),height:i.toString(),top:s,left:a}),c=g().toLowerCase();n&&(o=ln(c)?"_blank":n),an(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return fn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new di(null);const d=window.open(t||"",o,u);gt(d,e,"popup-blocked");try{d.focus()}catch(h){}return new di(d)}const fi="__/auth/handler",pi="emulator/auth/handler",mi=encodeURIComponent("fac");async function gi(e,t,n,r,i,s){gt(e.config.authDomain,e,"auth-domain-config-required"),gt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:He,eventId:i};if(t instanceof $n){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Hn){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${mi}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${fi}`;return Nt(t,pi)}(e)}?${N(o).slice(1)}${c}`}const yi="webStorageSupport";const vi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pr,this._completeRedirectFn=Gr,this._overrideRedirectResult=Hr}async _openPopup(e,t,n,r){var i;vt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return hi(e,await gi(e,t,n,bt(),r),gr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){vr().location.href=e}(await gi(e,t,n,bt(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(vt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ci(e),n=new Kr(e);return t.register("authEvent",(t=>{gt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yi,{type:yi},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[yi];void 0!==i&&t(!!i),ut(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Zr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mn()||on()||fn()}};var bi="@firebase/auth",wi="1.7.9";class xi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ki=p("authIdTokenMaxAge")||300;let Si=null;var Ni;kn={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=dt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ni="Browser",Ue(new I("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;gt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Ni,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gn(Ni)},c=new bn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ue(new I("auth-internal",(e=>(e=>new xi(e))(wn(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ge(bi,wi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ni)),Ge(bi,wi,"esm2017");var Ei,_i,Ci="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ti={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,_i=Ti.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},Ei=Ti.Integer=r}).apply("undefined"!==typeof Ci?Ci:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ji,Ii,Pi,Ai,Di,Oi,Ri,Li,Mi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Fi={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Mi&&Mi];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function N(){var e=j;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new _),(e=>e.reset()));class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,T=!1,j=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(P)}};var P=()=>{for(var e;e=N();){try{e.h.call(e.g)}catch(n){S(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function A(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function R(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&R.aa.h.call(this)}}d(R,D);var L={2:"touch",3:"pen",4:"mouse"};R.prototype.h=function(){R.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=$(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function W(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function X(e){return e in q?q[e]:q[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new R(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){A.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;x(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,A),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){A.call(this),this.h=e,this.g={}}d(le,A);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function be(){D.call(this,"c")}d(ve,D),d(be,D);var we={},xe=null;function ke(){return xe=xe||new ne}function Se(e){D.call(this,we.La,e)}function Ne(e){const t=ke();re(t,new Se(t))}function Ee(e,t){D.call(this,we.STAT_EVENT,e),this.stat=t}function _e(e){const t=ke();re(t,new Ee(t,e))}function Ce(e,t){D.call(this,we.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function je(){this.g=!0}function Ie(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(Se,D),we.STAT_EVENT="statevent",d(Ee,D),we.Ma="timingevent",d(Ce,D),je.prototype.xa=function(){this.g=!1},je.prototype.info=function(){};var Pe,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),$e(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ne(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Yt(n)}rn(n),_e(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(qe(o),$e(o)),r.g=a}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ne()}catch(u){}}Re.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||Ne(),qe(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var s=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),We(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ge(this),We(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,_e(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,_e(15),Ie(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),Ke(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,_e(11))}}else Ie(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),We(this)}else Ie(this.i,this.l,o,null),Ke(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ge(this),We(this)}}}catch(Ui){}},Re.prototype.cancel=function(){this.J=!0,Ge(this)},Re.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ne(),_e(17)),Ge(this),this.s=2,We(this)):He(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){kt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Nt(e,t){return kt(e),t=_t(e,t),e.g.has(t)}function Et(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Tt(){this.g=new fe}function jt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){kt(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)Nt(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,Nt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(It,pe),It.prototype.g=function(){return new Pt(this.l,this.j)},It.prototype.i=(mt={},function(){return mt}),d(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Ot(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),$t(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Ft.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){Ht(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Bi){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new je,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Re(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}dn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||I(),T||(C(),T=!0),j.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Re(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{jt(o,e,"req"+n+"_")}catch(Ui){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||I(),T||(C(),T=!0),j.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=ke(),new Ce(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new je;if(i.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new je;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),dn(e),Xt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new It({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Re(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Rt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Yt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},d(yn,ve),d(vn,be),d(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Li=Fi.createWebChannelTransport=function(){return new mn},Ri=Fi.getStatEventTarget=function(){return ke()},Oi=Fi.Event=we,Di=Fi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Ai=Fi.ErrorCode=Ae,De.COMPLETE="complete",Pi=Fi.EventType=De,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ii=Fi.WebChannel=ge,Fi.FetchXmlHttpFactory=It,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,ji=Fi.XhrIo=Mt}).apply("undefined"!==typeof Mi?Mi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ui="@firebase/firestore";class Vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vi.UNAUTHENTICATED=new Vi(null),Vi.GOOGLE_CREDENTIALS=new Vi("google-credentials-uid"),Vi.FIRST_PARTY=new Vi("first-party-uid"),Vi.MOCK_USER=new Vi("mock-user");let zi="10.14.0";const Bi=new V("@firebase/firestore");function $i(){return Bi.logLevel}function Hi(e){if(Bi.logLevel<=R.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gi);Bi.debug(`Firestore (${zi}): ${e}`,...i)}}function qi(e){if(Bi.logLevel<=R.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gi);Bi.error(`Firestore (${zi}): ${e}`,...i)}}function Wi(e){if(Bi.logLevel<=R.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gi);Bi.warn(`Firestore (${zi}): ${e}`,...i)}}function Gi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ki(){const e=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw qi(e),new Error(e)}function Qi(e,t){e||Ki()}function Yi(e,t){return e}const Xi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ji extends b{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class es{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ts{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Vi.UNAUTHENTICATED)))}shutdown(){}}class ns{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rs{constructor(e){this.t=e,this.currentUser=Vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qi(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zi,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Hi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Hi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zi)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Hi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Qi("string"==typeof t.accessToken),new es(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qi(null===e||"string"==typeof e),new Vi(e)}}class is{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Vi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ss{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new is(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Vi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class as{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class os{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qi(void 0===this.o);const n=e=>{null!=e.error&&Hi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Hi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Hi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Hi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Qi("string"==typeof e.token),this.R=e.token,new as(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ls(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class cs{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ls(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function us(e,t){return e<t?-1:e>t?1:0}function ds(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class hs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ji(Xi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ji(Xi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ji(Xi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ji(Xi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hs.fromMillis(Date.now())}static fromDate(e){return hs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new hs(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?us(this.nanoseconds,e.nanoseconds):us(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fs{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fs(e)}static min(){return new fs(new hs(0,0))}static max(){return new fs(new hs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ps{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ki(),void 0===n?n=e.length-t:n>e.length-t&&Ki(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ps.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ps?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ms extends ps{construct(e,t,n){return new ms(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ji(Xi.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new ms(e)}static emptyPath(){return new ms([])}}const gs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ys extends ps{construct(e,t,n){return new ys(e,t,n)}static isValidIdentifier(e){return gs.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ys.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ys(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ji(Xi.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ji(Xi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ji(Xi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ji(Xi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ys(t)}static emptyPath(){return new ys([])}}class vs{constructor(e){this.path=e}static fromPath(e){return new vs(ms.fromString(e))}static fromName(e){return new vs(ms.fromString(e).popFirst(5))}static empty(){return new vs(ms.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ms.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ms.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vs(new ms(e.slice()))}}class bs{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}bs.UNKNOWN_ID=-1;function ws(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=fs.fromTimestamp(1e9===r?new hs(n+1,0):new hs(n,r));return new ks(i,vs.empty(),t)}function xs(e){return new ks(e.readTime,e.key,-1)}class ks{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ks(fs.min(),vs.empty(),-1)}static max(){return new ks(fs.max(),vs.empty(),-1)}}function Ss(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=vs.comparator(e.documentKey,t.documentKey),0!==n?n:us(e.largestBatchId,t.largestBatchId))}const Ns="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Es{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function _s(e){if(e.code!==Xi.FAILED_PRECONDITION||e.message!==Ns)throw e;Hi("LocalStore","Unexpectedly lost primary lease")}class Cs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ki(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Cs(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Cs?t:Cs.resolve(t)}catch(e){return Cs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Cs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Cs.reject(t)}static resolve(e){return new Cs(((t,n)=>{t(e)}))}static reject(e){return new Cs(((t,n)=>{n(e)}))}static waitFor(e){return new Cs(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Cs.resolve(!1);for(const n of e)t=t.next((e=>e?Cs.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Cs(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Cs(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Ts(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function js(e){return"IndexedDbTransactionError"===e.name}class Is{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ps(e){return null==e}function As(e){return 0===e&&1/e==-1/0}function Ds(e){return"number"==typeof e&&Number.isInteger(e)&&!As(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Is.oe=-1;const Os=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Rs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ls=Rs,Ms=[...Ls,"indexConfiguration","indexState","indexEntries"];function Fs(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Us(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class zs{constructor(e,t){this.comparator=e,this.root=t||$s.EMPTY}insert(e,t){return new zs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$s.BLACK,null,null))}remove(e){return new zs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$s.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bs(this.root,e,this.comparator,!0)}}class Bs{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $s{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:$s.RED,this.left=null!=r?r:$s.EMPTY,this.right=null!=i?i:$s.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new $s(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $s.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return $s.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$s.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ki();if(this.right.isRed())throw Ki();const e=this.left.check();if(e!==this.right.check())throw Ki();return e+(this.isRed()?0:1)}}$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1,$s.EMPTY=new class{constructor(){this.size=0}get key(){throw Ki()}get value(){throw Ki()}get color(){throw Ki()}get left(){throw Ki()}get right(){throw Ki()}copy(e,t,n,r,i){return this}insert(e,t,n){return new $s(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hs{constructor(e){this.comparator=e,this.data=new zs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qs(this.data.getIterator())}getIteratorFrom(e){return new qs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Hs))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Hs(this.comparator);return t.data=e,t}}class qs{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ws{constructor(e){this.fields=e,e.sort(ys.comparator)}static empty(){return new Ws([])}unionWith(e){let t=new Hs(ys.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ws(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Gs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ks{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Gs("Invalid base64 string: "+e):e}}(e);return new Ks(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ks(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return us(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ks.EMPTY_BYTE_STRING=new Ks("");const Qs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(e){if(Qi(!!e),"string"==typeof e){let t=0;const n=Qs.exec(e);if(Qi(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Xs(e.seconds),nanos:Xs(e.nanos)}}function Xs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Js(e){return"string"==typeof e?Ks.fromBase64String(e):Ks.fromUint8Array(e)}function Zs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ea(e){const t=e.mapValue.fields.__previous_value__;return Zs(t)?ea(t):t}function ta(e){const t=Ys(e.mapValue.fields.__local_write_time__.timestampValue);return new hs(t.seconds,t.nanos)}class na{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class ra{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ra("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ra&&e.projectId===this.projectId&&e.database===this.database}}const ia={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zs(e)?4:wa(e)?9007199254740991:va(e)?10:11:Ki()}function aa(e,t){if(e===t)return!0;const n=sa(e);if(n!==sa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ta(e).isEqual(ta(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ys(e.timestampValue),r=Ys(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Js(e.bytesValue).isEqual(Js(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Xs(e.geoPointValue.latitude)===Xs(t.geoPointValue.latitude)&&Xs(e.geoPointValue.longitude)===Xs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Xs(e.integerValue)===Xs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Xs(e.doubleValue),r=Xs(t.doubleValue);return n===r?As(n)===As(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ds(e.arrayValue.values||[],t.arrayValue.values||[],aa);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fs(n)!==Fs(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!aa(n[i],r[i])))return!1;return!0}(e,t);default:return Ki()}}function oa(e,t){return void 0!==(e.values||[]).find((e=>aa(e,t)))}function la(e,t){if(e===t)return 0;const n=sa(e),r=sa(t);if(n!==r)return us(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return us(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Xs(e.integerValue||e.doubleValue),r=Xs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ca(e.timestampValue,t.timestampValue);case 4:return ca(ta(e),ta(t));case 5:return us(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Js(e),r=Js(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=us(n[i],r[i]);if(0!==e)return e}return us(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=us(Xs(e.latitude),Xs(t.latitude));return 0!==n?n:us(Xs(e.longitude),Xs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ua(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=us((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:ua(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ia.mapValue&&t===ia.mapValue)return 0;if(e===ia.mapValue)return 1;if(t===ia.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=us(r[a],s[a]);if(0!==e)return e;const t=la(n[r[a]],i[s[a]]);if(0!==t)return t}return us(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ki()}}function ca(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return us(e,t);const n=Ys(e),r=Ys(t),i=us(n.seconds,r.seconds);return 0!==i?i:us(n.nanos,r.nanos)}function ua(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=la(n[i],r[i]);if(e)return e}return us(n.length,r.length)}function da(e){return ha(e)}function ha(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ys(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Js(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return vs.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ha(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${ha(e.fields[i])}`;return n+"}"}(e.mapValue):Ki()}function fa(e){return!!e&&"integerValue"in e}function pa(e){return!!e&&"arrayValue"in e}function ma(e){return!!e&&"nullValue"in e}function ga(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ya(e){return!!e&&"mapValue"in e}function va(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ba(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Us(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ba(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ba(e.arrayValue.values[n]);return t}return Object.assign({},e)}function wa(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class xa{constructor(e){this.value=e}static empty(){return new xa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ya(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ba(t)}setAll(e){let t=ys.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ba(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ya(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return aa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ya(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Us(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new xa(ba(this.value))}}function ka(e){const t=[];return Us(e.fields,((e,n)=>{const r=new ys([e]);if(ya(n)){const e=ka(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ws(t)}class Sa{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Sa(e,0,fs.min(),fs.min(),fs.min(),xa.empty(),0)}static newFoundDocument(e,t,n,r){return new Sa(e,1,t,fs.min(),n,r,0)}static newNoDocument(e,t){return new Sa(e,2,t,fs.min(),fs.min(),xa.empty(),0)}static newUnknownDocument(e,t){return new Sa(e,3,t,fs.min(),fs.min(),xa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fs.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Na{constructor(e,t){this.position=e,this.inclusive=t}}function Ea(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?vs.comparator(vs.fromName(a.referenceValue),n.key):la(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function _a(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!aa(e.position[n],t.position[n]))return!1;return!0}class Ca{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ta(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ja{}class Ia extends ja{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Fa(e,t,n):"array-contains"===t?new Ba(e,n):"in"===t?new $a(e,n):"not-in"===t?new Ha(e,n):"array-contains-any"===t?new qa(e,n):new Ia(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ua(e,n):new Va(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(la(t,this.value)):null!==t&&sa(this.value)===sa(t)&&this.matchesComparison(la(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ki()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pa extends ja{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Pa(e,t)}matches(e){return Aa(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Aa(e){return"and"===e.op}function Da(e){return Oa(e)&&Aa(e)}function Oa(e){for(const t of e.filters)if(t instanceof Pa)return!1;return!0}function Ra(e){if(e instanceof Ia)return e.field.canonicalString()+e.op.toString()+da(e.value);if(Da(e))return e.filters.map((e=>Ra(e))).join(",");{const t=e.filters.map((e=>Ra(e))).join(",");return`${e.op}(${t})`}}function La(e,t){return e instanceof Ia?function(e,t){return t instanceof Ia&&e.op===t.op&&e.field.isEqual(t.field)&&aa(e.value,t.value)}(e,t):e instanceof Pa?function(e,t){return t instanceof Pa&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&La(n,t.filters[r])),!0)}(e,t):void Ki()}function Ma(e){return e instanceof Ia?function(e){return`${e.field.canonicalString()} ${e.op} ${da(e.value)}`}(e):e instanceof Pa?function(e){return e.op.toString()+" {"+e.getFilters().map(Ma).join(" ,")+"}"}(e):"Filter"}class Fa extends Ia{constructor(e,t,n){super(e,t,n),this.key=vs.fromName(n.referenceValue)}matches(e){const t=vs.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ua extends Ia{constructor(e,t){super(e,"in",t),this.keys=za("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Va extends Ia{constructor(e,t){super(e,"not-in",t),this.keys=za("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function za(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>vs.fromName(e.referenceValue)))}class Ba extends Ia{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pa(t)&&oa(t.arrayValue,this.value)}}class $a extends Ia{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&oa(this.value.arrayValue,t)}}class Ha extends Ia{constructor(e,t){super(e,"not-in",t)}matches(e){if(oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!oa(this.value.arrayValue,t)}}class qa extends Ia{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pa(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>oa(this.value.arrayValue,e)))}}class Wa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function Ga(e){return new Wa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ka(e){const t=Yi(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ra(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ps(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>da(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>da(e))).join(",")),t.ue=e}return t.ue}function Qa(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ta(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!La(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_a(e.startAt,t.startAt)&&_a(e.endAt,t.endAt)}function Ya(e){return vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Xa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ja(e,t,n,r,i,s,a,o){return new Xa(e,t,n,r,i,s,a,o)}function Za(e){return new Xa(e)}function eo(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function to(e){return null!==e.collectionGroup}function no(e){const t=Yi(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Hs(ys.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Ca(r,n))})),e.has(ys.keyField().canonicalString())||t.ce.push(new Ca(ys.keyField(),n))}return t.ce}function ro(e){const t=Yi(e);return t.le||(t.le=io(t,no(e))),t.le}function io(e,t){if("F"===e.limitType)return Ga(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Ca(e.field,t)}));const n=e.endAt?new Na(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Na(e.startAt.position,e.startAt.inclusive):null;return Ga(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function so(e,t,n){return new Xa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ao(e,t){return Qa(ro(e),ro(t))&&e.limitType===t.limitType}function oo(e){return`${Ka(ro(e))}|lt:${e.limitType}`}function lo(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Ma(e))).join(", ")}]`),Ps(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>da(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>da(e))).join(",")),`Target(${t})`}(ro(e))}; limitType=${e.limitType})`}function co(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of no(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ea(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,no(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ea(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,no(e),t))}(e,t)}function uo(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ho(e){return(t,n)=>{let r=!1;for(const i of no(e)){const e=fo(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function fo(e,t,n){const r=e.field.isKeyField()?vs.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?la(r,i):Ki()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ki()}}class po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Vs(this.inner)}size(){return this.innerSize}}const mo=new zs(vs.comparator);function go(){return mo}const yo=new zs(vs.comparator);function vo(){let e=yo;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function bo(e){let t=yo;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function wo(){return ko()}function xo(){return ko()}function ko(){return new po((e=>e.toString()),((e,t)=>e.isEqual(t)))}const So=new zs(vs.comparator),No=new Hs(vs.comparator);function Eo(){let e=No;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const _o=new Hs(us);function Co(){return _o}function To(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:As(t)?"-0":t}}function jo(e){return{integerValue:""+e}}function Io(e,t){return Ds(t)?jo(t):To(e,t)}class Po{constructor(){this._=void 0}}function Ao(e,t,n){return e instanceof Ro?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Zs(t)&&(t=ea(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Lo?Mo(e,t):e instanceof Fo?Uo(e,t):function(e,t){const n=Oo(e,t),r=zo(n)+zo(e.Pe);return fa(n)&&fa(e.Pe)?jo(r):To(e.serializer,r)}(e,t)}function Do(e,t,n){return e instanceof Lo?Mo(e,t):e instanceof Fo?Uo(e,t):n}function Oo(e,t){return e instanceof Vo?function(e){return fa(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ro extends Po{}class Lo extends Po{constructor(e){super(),this.elements=e}}function Mo(e,t){const n=Bo(t);for(const r of e.elements)n.some((e=>aa(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Fo extends Po{constructor(e){super(),this.elements=e}}function Uo(e,t){let n=Bo(t);for(const r of e.elements)n=n.filter((e=>!aa(e,r)));return{arrayValue:{values:n}}}class Vo extends Po{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function zo(e){return Xs(e.integerValue||e.doubleValue)}function Bo(e){return pa(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class $o{constructor(e,t){this.version=e,this.transformResults=t}}class Ho{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ho}static exists(e){return new Ho(void 0,e)}static updateTime(e){return new Ho(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qo(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Wo{}function Go(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new rl(e.key,Ho.none()):new Jo(e.key,e.data,Ho.none());{const n=e.data,r=xa.empty();let i=new Hs(ys.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Zo(e.key,r,new Ws(i.toArray()),Ho.none())}}function Ko(e,t,n){e instanceof Jo?function(e,t,n){const r=e.value.clone(),i=tl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Zo?function(e,t,n){if(!qo(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=tl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(el(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qo(e,t,n,r){return e instanceof Jo?function(e,t,n,r){if(!qo(e.precondition,t))return n;const i=e.value.clone(),s=nl(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Zo?function(e,t,n,r){if(!qo(e.precondition,t))return n;const i=nl(e.fieldTransforms,r,t),s=t.data;return s.setAll(el(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return qo(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Yo(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Oo(r.transform,e||null);null!=i&&(null===n&&(n=xa.empty()),n.set(r.field,i))}return n||null}function Xo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ds(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Lo&&t instanceof Lo||e instanceof Fo&&t instanceof Fo?ds(e.elements,t.elements,aa):e instanceof Vo&&t instanceof Vo?aa(e.Pe,t.Pe):e instanceof Ro&&t instanceof Ro}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Jo extends Wo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Zo extends Wo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function el(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function tl(e,t,n){const r=new Map;Qi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Do(a,o,n[i]))}return r}function nl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ao(e,s,t))}return r}class rl extends Wo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class il extends Wo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ko(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Qo(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Qo(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=xo();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Go(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(fs.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Eo())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,((e,t)=>Xo(e,t)))&&ds(this.baseMutations,e.baseMutations,((e,t)=>Xo(e,t)))}}class al{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Qi(e.mutations.length===n.length);let r=So;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new al(e,t,n,r)}}class ol{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ll{constructor(e,t){this.count=e,this.unchangedNames=t}}var cl,ul;function dl(e){switch(e){default:return Ki();case Xi.CANCELLED:case Xi.UNKNOWN:case Xi.DEADLINE_EXCEEDED:case Xi.RESOURCE_EXHAUSTED:case Xi.INTERNAL:case Xi.UNAVAILABLE:case Xi.UNAUTHENTICATED:return!1;case Xi.INVALID_ARGUMENT:case Xi.NOT_FOUND:case Xi.ALREADY_EXISTS:case Xi.PERMISSION_DENIED:case Xi.FAILED_PRECONDITION:case Xi.ABORTED:case Xi.OUT_OF_RANGE:case Xi.UNIMPLEMENTED:case Xi.DATA_LOSS:return!0}}function hl(e){if(void 0===e)return qi("GRPC error has no .code"),Xi.UNKNOWN;switch(e){case cl.OK:return Xi.OK;case cl.CANCELLED:return Xi.CANCELLED;case cl.UNKNOWN:return Xi.UNKNOWN;case cl.DEADLINE_EXCEEDED:return Xi.DEADLINE_EXCEEDED;case cl.RESOURCE_EXHAUSTED:return Xi.RESOURCE_EXHAUSTED;case cl.INTERNAL:return Xi.INTERNAL;case cl.UNAVAILABLE:return Xi.UNAVAILABLE;case cl.UNAUTHENTICATED:return Xi.UNAUTHENTICATED;case cl.INVALID_ARGUMENT:return Xi.INVALID_ARGUMENT;case cl.NOT_FOUND:return Xi.NOT_FOUND;case cl.ALREADY_EXISTS:return Xi.ALREADY_EXISTS;case cl.PERMISSION_DENIED:return Xi.PERMISSION_DENIED;case cl.FAILED_PRECONDITION:return Xi.FAILED_PRECONDITION;case cl.ABORTED:return Xi.ABORTED;case cl.OUT_OF_RANGE:return Xi.OUT_OF_RANGE;case cl.UNIMPLEMENTED:return Xi.UNIMPLEMENTED;case cl.DATA_LOSS:return Xi.DATA_LOSS;default:return Ki()}}(ul=cl||(cl={}))[ul.OK=0]="OK",ul[ul.CANCELLED=1]="CANCELLED",ul[ul.UNKNOWN=2]="UNKNOWN",ul[ul.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ul[ul.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ul[ul.NOT_FOUND=5]="NOT_FOUND",ul[ul.ALREADY_EXISTS=6]="ALREADY_EXISTS",ul[ul.PERMISSION_DENIED=7]="PERMISSION_DENIED",ul[ul.UNAUTHENTICATED=16]="UNAUTHENTICATED",ul[ul.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ul[ul.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ul[ul.ABORTED=10]="ABORTED",ul[ul.OUT_OF_RANGE=11]="OUT_OF_RANGE",ul[ul.UNIMPLEMENTED=12]="UNIMPLEMENTED",ul[ul.INTERNAL=13]="INTERNAL",ul[ul.UNAVAILABLE=14]="UNAVAILABLE",ul[ul.DATA_LOSS=15]="DATA_LOSS";let fl=null;function pl(){return new TextEncoder}const ml=new Ei([4294967295,4294967295],0);function gl(e){const t=pl().encode(e),n=new _i;return n.update(t),new Uint8Array(n.digest())}function yl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ei([n,r],0),new Ei([i,s],0)]}class vl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new bl(`Invalid padding: ${t}`);if(n<0)throw new bl(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new bl(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new bl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ei.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Ei.fromNumber(n)));return 1===r.compare(ml)&&(r=new Ei([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=gl(e),[n,r]=yl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new vl(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=gl(e),[n,r]=yl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wl{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new wl(fs.min(),r,new zs(us),go(),Eo())}}class xl{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xl(n,t,Eo(),Eo(),Eo())}}class kl{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Sl{constructor(e,t){this.targetId=e,this.me=t}}class Nl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ks.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class El{constructor(){this.fe=0,this.ge=Tl(),this.pe=Ks.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Eo(),t=Eo(),n=Eo();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ki()}})),new xl(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Tl()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _l{constructor(e){this.Le=e,this.Be=new Map,this.ke=go(),this.qe=Cl(),this.Qe=new zs(us)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ki()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Ya(i))if(0===n){const e=new vs(i.path);this.Ue(t,e,Sa.newNoDocument(e,fs.min()))}else Qi(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==fl||fl.et(function(e,t,n,r,i){var s,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Js(n).toUint8Array()}catch(e){if(e instanceof Gs)return Wi("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new vl(s,r,i)}catch(e){return Wi(e instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Ya(i.target)){const t=new vs(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Sa.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=Eo();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new wl(e,t,this.Qe,this.ke,n);return this.ke=go(),this.qe=Cl(),this.Qe=new zs(us),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new El,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Hs(us),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Hi("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new El),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Cl(){return new zs(vs.comparator)}function Tl(){return new zs(vs.comparator)}const jl={asc:"ASCENDING",desc:"DESCENDING"},Il={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pl={and:"AND",or:"OR"};class Al{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dl(e,t){return e.useProto3Json||Ps(t)?t:{value:t}}function Ol(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ll(e,t){return Ol(e,t.toTimestamp())}function Ml(e){return Qi(!!e),fs.fromTimestamp(function(e){const t=Ys(e);return new hs(t.seconds,t.nanos)}(e))}function Fl(e,t){return Ul(e,t).canonicalString()}function Ul(e,t){const n=function(e){return new ms(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Vl(e){const t=ms.fromString(e);return Qi(ac(t)),t}function zl(e,t){return Fl(e.databaseId,t.path)}function Bl(e,t){const n=Vl(t);if(n.get(1)!==e.databaseId.projectId)throw new Ji(Xi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ji(Xi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vs(Wl(n))}function $l(e,t){return Fl(e.databaseId,t)}function Hl(e){const t=Vl(e);return 4===t.length?ms.emptyPath():Wl(t)}function ql(e){return new ms(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wl(e){return Qi(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Gl(e,t,n){return{name:zl(e,t),fields:n.value.mapValue.fields}}function Kl(e,t){let n;if(t instanceof Jo)n={update:Gl(e,t.key,t.value)};else if(t instanceof rl)n={delete:zl(e,t.key)};else if(t instanceof Zo)n={update:Gl(e,t.key,t.data),updateMask:sc(t.fieldMask)};else{if(!(t instanceof il))return Ki();n={verify:zl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ro)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Lo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fo)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vo)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ki()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ll(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ki()}(e,t.precondition)),n}function Ql(e,t){return{documents:[$l(e,t.path)]}}function Yl(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$l(e,i);const s=function(e){if(0!==e.length)return ic(Pa.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:nc(e.field),direction:Zl(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Dl(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Xl(e){let t=Hl(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qi(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Jl(e);return t instanceof Pa&&Da(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Ca(rc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ps(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Na(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Na(n,t)}(n.endAt)),Ja(t,i,a,s,o,"F",l,c)}function Jl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=rc(e.unaryFilter.field);return Ia.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=rc(e.unaryFilter.field);return Ia.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=rc(e.unaryFilter.field);return Ia.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=rc(e.unaryFilter.field);return Ia.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ki()}}(e):void 0!==e.fieldFilter?function(e){return Ia.create(rc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ki()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Pa.create(e.compositeFilter.filters.map((e=>Jl(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ki()}}(e.compositeFilter.op))}(e):Ki()}function Zl(e){return jl[e]}function ec(e){return Il[e]}function tc(e){return Pl[e]}function nc(e){return{fieldPath:e.canonicalString()}}function rc(e){return ys.fromServerFormat(e.fieldPath)}function ic(e){return e instanceof Ia?function(e){if("=="===e.op){if(ga(e.value))return{unaryFilter:{field:nc(e.field),op:"IS_NAN"}};if(ma(e.value))return{unaryFilter:{field:nc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ga(e.value))return{unaryFilter:{field:nc(e.field),op:"IS_NOT_NAN"}};if(ma(e.value))return{unaryFilter:{field:nc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nc(e.field),op:ec(e.op),value:e.value}}}(e):e instanceof Pa?function(e){const t=e.getFilters().map((e=>ic(e)));return 1===t.length?t[0]:{compositeFilter:{op:tc(e.op),filters:t}}}(e):Ki()}function sc(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ac(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class oc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fs.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:fs.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ks.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new oc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lc{constructor(e){this.ct=e}}function cc(e){const t=Xl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?so(t,t.limit,"L"):t}class uc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Xs(e.integerValue));else if("doubleValue"in e){const n=Xs(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),As(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Ys(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Js(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?wa(e)?this.dt(t,Number.MAX_SAFE_INTEGER):va(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ki()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Xs(a)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),vs.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}uc.vt=new uc;class dc{constructor(){this.un=new hc}addToCollectionParentIndex(e,t){return this.un.add(t),Cs.resolve()}getCollectionParents(e,t){return Cs.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Cs.resolve()}deleteFieldIndex(e,t){return Cs.resolve()}deleteAllFieldIndexes(e){return Cs.resolve()}createTargetIndexes(e,t){return Cs.resolve()}getDocumentsMatchingTarget(e,t){return Cs.resolve(null)}getIndexType(e,t){return Cs.resolve(0)}getFieldIndexes(e,t){return Cs.resolve([])}getNextCollectionGroupToUpdate(e){return Cs.resolve(null)}getMinOffset(e,t){return Cs.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,t){return Cs.resolve(ks.min())}updateCollectionGroup(e,t,n){return Cs.resolve()}updateIndexEntries(e,t){return Cs.resolve()}}class hc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Hs(ms.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Hs(ms.comparator)).toArray()}}new Uint8Array(0);class fc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new fc(e,fc.DEFAULT_COLLECTION_PERCENTILE,fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}fc.DEFAULT_COLLECTION_PERCENTILE=10,fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fc.DEFAULT=new fc(41943040,fc.DEFAULT_COLLECTION_PERCENTILE,fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fc.DISABLED=new fc(-1,0,0);class pc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new pc(0)}static kn(){return new pc(-1)}}class mc{constructor(){this.changes=new po((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Cs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Qo(n.mutation,e,Ws.empty(),hs.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Eo()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Eo();const r=wo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=vo();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=wo();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Eo())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=go();const s=ko(),a=ko();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Zo)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Qo(a.mutation,t,a.mutation.getFieldMask(),hs.now())):s.set(t.key,Ws.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new gc(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=ko();let r=new zs(((e,t)=>e-t)),i=Eo();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Ws.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Eo()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=xo();l.forEach((e=>{if(!i.has(e)){const r=Go(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Cs.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):to(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Cs.resolve(wo());let a=-1,o=i;return s.next((t=>Cs.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Cs.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,Eo()))).next((e=>({batchId:a,changes:bo(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new vs(t)).next((e=>{let t=vo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=vo();return this.indexManager.getCollectionParents(e,i).next((a=>Cs.forEach(a,(a=>{const o=function(e,t){return new Xa(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Sa.newInvalidDocument(r)))}));let n=vo();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Qo(s.mutation,r,Ws.empty(),hs.now()),co(t,r)&&(n=n.insert(e,r))})),n}))}}class vc{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Cs.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ml(e.createTime)}}(t)),Cs.resolve()}getNamedQuery(e,t){return Cs.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:cc(e.bundledQuery),readTime:Ml(e.readTime)}}(t)),Cs.resolve()}}class bc{constructor(){this.overlays=new zs(vs.comparator),this.Ir=new Map}getOverlay(e,t){return Cs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=wo();return Cs.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Cs.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),Cs.resolve()}getOverlaysForCollection(e,t,n){const r=wo(),i=t.length+1,s=new vs(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Cs.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new zs(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=wo(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=wo(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Cs.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ol(t,n));let i=this.Ir.get(t);void 0===i&&(i=Eo(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class wc{constructor(){this.sessionToken=Ks.EMPTY_BYTE_STRING}getSessionToken(e){return Cs.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Cs.resolve()}}class xc{constructor(){this.Tr=new Hs(kc.Er),this.dr=new Hs(kc.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new kc(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new kc(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new vs(new ms([])),n=new kc(t,e),r=new kc(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new vs(new ms([])),n=new kc(t,e),r=new kc(t,e+1);let i=Eo();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new kc(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class kc{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return vs.comparator(e.key,t.key)||us(e.wr,t.wr)}static Ar(e,t){return us(e.wr,t.wr)||vs.comparator(e.key,t.key)}}class Sc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Hs(kc.Er)}checkEmpty(e){return Cs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new sl(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.br=this.br.add(new kc(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Cs.resolve(s)}lookupMutationBatch(e,t){return Cs.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Cs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Cs.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Cs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new kc(t,0),r=new kc(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),Cs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hs(us);return t.forEach((e=>{const t=new kc(e,0),r=new kc(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),Cs.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;vs.isDocumentKey(i)||(i=i.child(""));const s=new kc(new vs(i),0);let a=new Hs(us);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)}),s),Cs.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Qi(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Cs.forEach(t.mutations,(r=>{const i=new kc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new kc(t,0),r=this.br.firstAfterOrEqual(n);return Cs.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Cs.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Nc{constructor(e){this.Mr=e,this.docs=new zs(vs.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Cs.resolve(n?n.document.mutableCopy():Sa.newInvalidDocument(t))}getEntries(e,t){let n=go();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Sa.newInvalidDocument(e))})),Cs.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=go();const s=t.path,a=new vs(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ss(xs(a),n)<=0||(r.has(a.key)||co(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Cs.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ki()}Or(e,t){return Cs.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ec(this)}getSize(e){return Cs.resolve(this.size)}}class Ec extends mc{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),Cs.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class _c{constructor(e){this.persistence=e,this.Nr=new po((e=>Ka(e)),Qa),this.lastRemoteSnapshotVersion=fs.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xc,this.targetCount=0,this.kr=pc.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),Cs.resolve()}getLastRemoteSnapshotVersion(e){return Cs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Cs.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Cs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Cs.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new pc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Cs.resolve()}updateTargetData(e,t){return this.Kn(t),Cs.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Cs.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Cs.waitFor(i).next((()=>r))}getTargetCount(e){return Cs.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Cs.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Cs.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Cs.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Cs.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Cs.resolve(n)}containsKey(e,t){return Cs.resolve(this.Br.containsKey(t))}}class Cc{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Is(0),this.Kr=!1,this.Kr=!0,this.$r=new wc,this.referenceDelegate=e(this),this.Ur=new _c(this),this.indexManager=new dc,this.remoteDocumentCache=function(e){return new Nc(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new lc(t),this.Gr=new vc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Sc(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Hi("MemoryPersistence","Starting transaction:",e);const r=new Tc(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return Cs.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class Tc extends Es{constructor(e){super(),this.currentSequenceNumber=e}}class jc{constructor(e){this.persistence=e,this.Jr=new xc,this.Yr=null}static Zr(e){return new jc(e)}get Xr(){if(this.Yr)return this.Yr;throw Ki()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Cs.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Cs.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Cs.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cs.forEach(this.Xr,(n=>{const r=vs.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,fs.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Cs.or([()=>Cs.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Ic{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Eo(),r=Eo();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ic(e,t.fromCache,n,r)}}class Pc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ac{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=y()?8:Ts(g())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Pc;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?($i()<=R.DEBUG&&Hi("QueryEngine","SDK will not create cache indexes for query:",lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Cs.resolve()):($i()<=R.DEBUG&&Hi("QueryEngine","Query:",lo(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?($i()<=R.DEBUG&&Hi("QueryEngine","The SDK decides to create cache indexes for query:",lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ro(t))):Cs.resolve())}Yi(e,t){if(eo(t))return Cs.resolve(null);let n=ro(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=so(t,null,"F"),n=ro(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Eo(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,so(t,null,"F")):this.rs(e,s,t,n)}))))})))))}Zi(e,t,n,r){return eo(t)||r.isEqual(fs.min())?Cs.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Cs.resolve(null):($i()<=R.DEBUG&&Hi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lo(t)),this.rs(e,s,t,ws(r,-1)).next((e=>e)))}))}ts(e,t){let n=new Hs(ho(e));return t.forEach(((t,r)=>{co(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return $i()<=R.DEBUG&&Hi("QueryEngine","Using full collection scan to execute query:",lo(t)),this.Ji.getDocumentsMatchingQuery(e,t,ks.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Dc{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new zs(us),this._s=new po((e=>Ka(e)),Qa),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function Oc(e,t,n,r){return new Dc(e,t,n,r)}async function Rc(e,t){const n=Yi(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=Eo();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Lc(e){const t=Yi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function Mc(e,t,n){let r=Eo(),i=Eo();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=go();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(fs.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Hi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{Ps:r,Is:i}}))}function Fc(e,t){const n=Yi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Uc(e,t){const n=Yi(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,Cs.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new oc(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function Vc(e,t,n){const r=Yi(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!js(e))throw e;Hi("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function zc(e,t,n){const r=Yi(e);let i=fs.min(),s=Eo();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Yi(e),i=r._s.get(n);return void 0!==i?Cs.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,ro(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:fs.min(),n?s:Eo()))).next((e=>(Bc(r,uo(t),e),{documents:e,Ts:s})))))}function Bc(e,t,n){let r=e.us.get(t)||fs.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}class $c{constructor(){this.activeTargetIds=Co()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hc{constructor(){this.so=new $c,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $c,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qc{_o(e){}shutdown(){}}class Wc{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Hi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Hi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gc=null;function Kc(){return null===Gc?Gc=268435456+Math.round(2147483648*Math.random()):Gc++,"0x"+Gc.toString(16)}const Qc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yc{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Xc="WebChannelConnection";class Jc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=Kc(),a=this.xo(e,t.toUriEncodedString());Hi("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,i),this.No(e,a,o,n).then((t=>(Hi("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Wi("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t}))}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+zi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=Qc[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Kc();return new Promise(((s,a)=>{const o=new ji;o.setWithCredentials(!0),o.listenOnce(Pi.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Ai.NO_ERROR:const t=o.getResponseJson();Hi(Xc,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Ai.TIMEOUT:Hi(Xc,`RPC '${e}' ${i} timed out`),a(new Ji(Xi.DEADLINE_EXCEEDED,"Request time out"));break;case Ai.HTTP_ERROR:const n=o.getStatus();if(Hi(Xc,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Xi).indexOf(t)>=0?t:Xi.UNKNOWN}(t.status);a(new Ji(e,t.message))}else a(new Ji(Xi.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ji(Xi.UNAVAILABLE,"Connection failed."));break;default:Ki()}}finally{Hi(Xc,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Hi(Xc,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=Kc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Li(),a=Ri(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Hi(Xc,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);let d=!1,h=!1;const f=new Yc({Io:t=>{h?Hi(Xc,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Hi(Xc,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Hi(Xc,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ii.EventType.OPEN,(()=>{h||(Hi(Xc,`RPC '${e}' stream ${r} transport opened.`),f.yo())})),p(u,Ii.EventType.CLOSE,(()=>{h||(h=!0,Hi(Xc,`RPC '${e}' stream ${r} transport closed`),f.So())})),p(u,Ii.EventType.ERROR,(t=>{h||(h=!0,Wi(Xc,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new Ji(Xi.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ii.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Qi(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Hi(Xc,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=cl[e];if(void 0!==t)return hl(t)}(t),i=a.message;void 0===n&&(n=Xi.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Ji(n,i)),u.close()}else Hi(Xc,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}})),p(a,Oi.STAT_EVENT,(t=>{t.stat===Di.PROXY?Hi(Xc,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Di.NOPROXY&&Hi(Xc,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.wo()}),0),f}}function Zc(){return"undefined"!=typeof document?document:null}function eu(e){return new Al(e,!0)}class tu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Hi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class nu{constructor(e,t,n,r,i,s,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tu(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Xi.RESOURCE_EXHAUSTED?(qi(t.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Xi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)}),(t=>{e((()=>{const e=new Ji(Xi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Hi("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(Hi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ru extends nu{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ki()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Qi(void 0===t||"string"==typeof t),Ks.fromBase64String(t||"")):(Qi(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Ks.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Xi.UNKNOWN:hl(e.code);return new Ji(t,e.message||"")}(a);n=new Nl(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bl(e,r.document.name),s=Ml(r.document.updateTime),a=r.document.createTime?Ml(r.document.createTime):fs.min(),o=new xa({mapValue:{fields:r.document.fields}}),l=Sa.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new kl(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Bl(e,r.document),s=r.readTime?Ml(r.readTime):fs.min(),a=Sa.newNoDocument(i,s),o=r.removedTargetIds||[];n=new kl([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Bl(e,r.document),s=r.removedTargetIds||[];n=new kl([],s,i,null)}else{if(!("filter"in t))return Ki();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ll(r,i),a=e.targetId;n=new Sl(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return fs.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?fs.min():t.readTime?Ml(t.readTime):fs.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=ql(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ya(r)?{documents:Ql(e,r)}:{query:Yl(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Rl(e,t.resumeToken);const r=Dl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(fs.min())>0){n.readTime=Ol(e,t.snapshotVersion.toTimestamp());const r=Dl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ki()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=ql(this.serializer),t.removeTarget=e,this.a_(t)}}class iu extends nu{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qi(!!e.streamToken),this.lastStreamToken=e.streamToken,Qi(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Qi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Qi(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ml(e.updateTime):Ml(t);return n.isEqual(fs.min())&&(n=Ml(t)),new $o(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ml(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=ql(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Kl(this.serializer,e)))};this.a_(t)}}class su extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Ji(Xi.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,a]=i;return this.connection.Mo(e,Ul(t,n),r,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Xi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ji(Xi.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.Lo(e,Ul(t,n),r,a,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Xi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ji(Xi.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class au{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qi(t),this.D_=!1):Hi("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class ou{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{gu(this)&&(Hi("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Yi(e);t.L_.add(4),await cu(t),t.q_.set("Unknown"),t.L_.delete(4),await lu(t)}(this))}))})),this.q_=new au(n,r)}}async function lu(e){if(gu(e))for(const t of e.B_)await t(!0)}async function cu(e){for(const t of e.B_)await t(!1)}function uu(e,t){const n=Yi(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),mu(n)?pu(n):Ru(n).r_()&&hu(n,t))}function du(e,t){const n=Yi(e),r=Ru(n);n.N_.delete(t),r.r_()&&fu(n,t),0===n.N_.size&&(r.r_()?r.o_():gu(n)&&n.q_.set("Unknown"))}function hu(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(fs.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ru(e).A_(t)}function fu(e,t){e.Q_.xe(t),Ru(e).R_(t)}function pu(e){e.Q_=new _l({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Ru(e).start(),e.q_.v_()}function mu(e){return gu(e)&&!Ru(e).n_()&&e.N_.size>0}function gu(e){return 0===Yi(e).L_.size}function yu(e){e.Q_=void 0}async function vu(e){e.q_.set("Online")}async function bu(e){e.N_.forEach(((t,n)=>{hu(e,t)}))}async function wu(e,t){yu(e),mu(e)?(e.q_.M_(t),pu(e)):e.q_.set("Unknown")}async function xu(e,t,n){if(e.q_.set("Online"),t instanceof Nl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Hi("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ku(e,n)}else if(t instanceof kl?e.Q_.Ke(t):t instanceof Sl?e.Q_.He(t):e.Q_.We(t),!n.isEqual(fs.min()))try{const t=await Lc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Ks.EMPTY_BYTE_STRING,r.snapshotVersion)),fu(e,t);const i=new oc(r.target,t,n,r.sequenceNumber);hu(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Hi("RemoteStore","Failed to raise snapshot:",t),await ku(e,t)}}async function ku(e,t,n){if(!js(t))throw t;e.L_.add(1),await cu(e),e.q_.set("Offline"),n||(n=()=>Lc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Hi("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await lu(e)}))}function Su(e,t){return t().catch((n=>ku(e,n,t)))}async function Nu(e){const t=Yi(e),n=Lu(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Eu(t);)try{const e=await Fc(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,_u(t,e)}catch(e){await ku(t,e)}Cu(t)&&Tu(t)}function Eu(e){return gu(e)&&e.O_.length<10}function _u(e,t){e.O_.push(t);const n=Lu(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Cu(e){return gu(e)&&!Lu(e).n_()&&e.O_.length>0}function Tu(e){Lu(e).start()}async function ju(e){Lu(e).p_()}async function Iu(e){const t=Lu(e);for(const n of e.O_)t.m_(n.mutations)}async function Pu(e,t,n){const r=e.O_.shift(),i=al.from(r,t,n);await Su(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Nu(e)}async function Au(e,t){t&&Lu(e).V_&&await async function(e,t){if(function(e){return dl(e)&&e!==Xi.ABORTED}(t.code)){const n=e.O_.shift();Lu(e).s_(),await Su(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Nu(e)}}(e,t),Cu(e)&&Tu(e)}async function Du(e,t){const n=Yi(e);n.asyncQueue.verifyOperationInProgress(),Hi("RemoteStore","RemoteStore received new credentials");const r=gu(n);n.L_.add(3),await cu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await lu(n)}async function Ou(e,t){const n=Yi(e);t?(n.L_.delete(2),await lu(n)):t||(n.L_.add(2),await cu(n),n.q_.set("Unknown"))}function Ru(e){return e.K_||(e.K_=function(e,t,n){const r=Yi(e);return r.w_(),new ru(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:vu.bind(null,e),Ro:bu.bind(null,e),mo:wu.bind(null,e),d_:xu.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),mu(e)?pu(e):e.q_.set("Unknown")):(await e.K_.stop(),yu(e))}))),e.K_}function Lu(e){return e.U_||(e.U_=function(e,t,n){const r=Yi(e);return r.w_(),new iu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ju.bind(null,e),mo:Au.bind(null,e),f_:Iu.bind(null,e),g_:Pu.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await Nu(e)):(await e.U_.stop(),e.O_.length>0&&(Hi("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}class Mu{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Mu(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ji(Xi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fu(e,t){if(qi("AsyncQueue",`${t}: ${e}`),js(e))return new Ji(Xi.UNAVAILABLE,`${t}: ${e}`);throw e}class Uu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||vs.comparator(t.key,n.key):(e,t)=>vs.comparator(e.key,t.key),this.keyedMap=vo(),this.sortedSet=new zs(this.comparator)}static emptySet(e){return new Uu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Uu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Vu{constructor(){this.W_=new zs(vs.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ki():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class zu{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new zu(e,t,Uu.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ao(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Bu{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class $u{constructor(){this.queries=Hu(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Yi(e),r=n.queries;n.queries=Hu(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new Ji(Xi.ABORTED,"Firestore shutting down"))}}function Hu(){return new po((e=>oo(e)),ao)}async function qu(e,t){const n=Yi(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Bu,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Fu(e,`Initialization of query '${lo(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&Qu(n)}async function Wu(e,t){const n=Yi(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Gu(e,t){const n=Yi(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&Qu(n)}function Ku(e,t,n){const r=Yi(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function Qu(e){e.Y_.forEach((e=>{e.next()}))}var Yu,Xu;(Xu=Yu||(Yu={})).ea="default",Xu.Cache="cache";class Ju{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new zu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=zu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yu.Cache}}class Zu{constructor(e){this.key=e}}class ed{constructor(e){this.key=e}}class td{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Eo(),this.mutatedKeys=Eo(),this.Aa=ho(e),this.Ra=new Uu(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Vu,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=co(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ki()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new zu(this.query,e.Ra,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Eo(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new ed(e))})),this.da.forEach((n=>{e.has(n)||t.push(new Zu(n))})),t}ba(e){this.Ta=e.Ts,this.da=Eo();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return zu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class nd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class rd{constructor(e){this.key=e,this.va=!1}}class id{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new po((e=>oo(e)),ao),this.Ma=new Map,this.xa=new Set,this.Oa=new zs(vs.comparator),this.Na=new Map,this.La=new xc,this.Ba={},this.ka=new Map,this.qa=pc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function sd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=_d(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await od(r,t,n,!0),i}async function ad(e,t){const n=_d(e);await od(n,t,!0,!1)}async function od(e,t,n,r){const i=await Uc(e.localStore,ro(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await ld(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&uu(e.remoteStore,i),o}async function ld(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await zc(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,i)})));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return wd(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await zc(e.localStore,t,!0),a=new td(t,s.Ts),o=a.ma(s.documents),l=xl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);wd(e,n,c.wa);const u=new nd(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function cd(e,t,n){const r=Yi(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((e=>!ao(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Vc(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&du(r.remoteStore,i.targetId),vd(r,i.targetId)})).catch(_s)):(vd(r,i.targetId),await Vc(r.localStore,i.targetId,!0))}async function ud(e,t){const n=Yi(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),du(n.remoteStore,r.targetId))}async function dd(e,t){const n=Yi(e);try{const e=await function(e,t){const n=Yi(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach(((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Ks.EMPTY_BYTE_STRING,fs.min()).withLastLimboFreeSnapshotVersion(fs.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Ur.updateTargetData(e,c))}));let o=go(),l=Eo();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Mc(e,s,t.documentUpdates).next((e=>{o=e.Ps,l=e.Is}))),!r.isEqual(fs.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Cs.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(Qi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Qi(r.va):e.removedDocuments.size>0&&(Qi(r.va),r.va=!1))})),await Sd(n,e,t)}catch(e){await _s(e)}}function hd(e,t,n){const r=Yi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Yi(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&Qu(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function fd(e,t,n){const r=Yi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new zs(vs.comparator);e=e.insert(s,Sa.newNoDocument(s,fs.min()));const n=Eo().add(s),i=new wl(fs.min(),new Map,new zs(us),e,n);await dd(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),kd(r)}else await Vc(r.localStore,t,!1).then((()=>vd(r,t,n))).catch(_s)}async function pd(e,t){const n=Yi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Yi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Cs.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Qi(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Eo();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);yd(n,r,null),gd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sd(n,e)}catch(e){await _s(e)}}async function md(e,t,n){const r=Yi(e);try{const e=await function(e,t){const n=Yi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Qi(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);yd(r,t,n),gd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Sd(r,e)}catch(n){await _s(n)}}function gd(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function yd(e,t,n){const r=Yi(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function vd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||bd(e,t)}))}function bd(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(du(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),kd(e))}function wd(e,t,n){for(const r of n)r instanceof Zu?(e.La.addReference(r.key,t),xd(e,r)):r instanceof ed?(Hi("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||bd(e,r.key)):Ki()}function xd(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Hi("SyncEngine","New document in limbo: "+n),e.xa.add(r),kd(e))}function kd(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new vs(ms.fromString(t)),r=e.qa.next();e.Na.set(r,new rd(n)),e.Oa=e.Oa.insert(n,r),uu(e.remoteStore,new oc(ro(Za(n.path)),r,"TargetPurposeLimboResolution",Is.oe))}}async function Sd(e,t,n){const r=Yi(e),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,o)=>{a.push(r.Ka(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Ic.Wi(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=Yi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Cs.forEach(t,(t=>Cs.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Cs.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!js(e))throw e;Hi("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function Nd(e,t){const n=Yi(e);if(!n.currentUser.isEqual(t)){Hi("SyncEngine","User change. New user:",t.toKey());const e=await Rc(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new Ji(Xi.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Sd(n,e.hs)}}function Ed(e,t){const n=Yi(e),r=n.Na.get(t);if(r&&r.va)return Eo().add(r.key);{let e=Eo();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function _d(e){const t=Yi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ed.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fd.bind(null,t),t.Ca.d_=Gu.bind(null,t.eventManager),t.Ca.$a=Ku.bind(null,t.eventManager),t}function Cd(e){const t=Yi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=md.bind(null,t),t}class Td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Oc(this.persistence,new Ac,e.initialUser,this.serializer)}Ga(e){return new Cc(jc.Zr,this.serializer)}Wa(e){return new Hc}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Td.provider={build:()=>new Td};class jd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>hd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nd.bind(null,this.syncEngine),await Ou(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $u}createDatastore(e){const t=eu(e.databaseInfo.databaseId),n=function(e){return new Jc(e)}(e.databaseInfo);return function(e,t,n,r){return new su(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ou(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>hd(this.syncEngine,e,0)),Wc.D()?new Wc:new qc)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new id(e,t,n,r,i,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Yi(e);Hi("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await cu(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}jd.provider={build:()=>new jd};class Id{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Pd{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Vi.UNAUTHENTICATED,this.clientId=cs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Hi("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Hi("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Fu(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Ad(e,t){e.asyncQueue.verifyOperationInProgress(),Hi("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Rc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Dd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Od(e);Hi("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Du(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Du(t.remoteStore,n))),e._onlineComponents=t}async function Od(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Hi("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ad(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Xi.FAILED_PRECONDITION||e.code===Xi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Wi("Error using user provided cache. Falling back to memory cache: "+n),await Ad(e,new Td)}}else Hi("FirestoreClient","Using default OfflineComponentProvider"),await Ad(e,new Td);return e._offlineComponents}async function Rd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Hi("FirestoreClient","Using user provided OnlineComponentProvider"),await Dd(e,e._uninitializedComponentsProvider._online)):(Hi("FirestoreClient","Using default OnlineComponentProvider"),await Dd(e,new jd))),e._onlineComponents}function Ld(e){return Rd(e).then((e=>e.syncEngine))}async function Md(e){const t=await Rd(e),n=t.eventManager;return n.onListen=sd.bind(null,t.syncEngine),n.onUnlisten=cd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ad.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ud.bind(null,t.syncEngine),n}function Fd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zi;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Id({next:o=>{s.Za(),t.enqueueAndForget((()=>Wu(e,a)));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Ji(Xi.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Ji(Xi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Ju(Za(n.path),s,{includeMetadataChanges:!0,_a:!0});return qu(e,a)}(await Md(e),e.asyncQueue,t,n,r))),r.promise}function Ud(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Vd=new Map;function zd(e,t,n){if(!n)throw new Ji(Xi.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Bd(e){if(!vs.isDocumentKey(e))throw new Ji(Xi.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function $d(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ki()}function Hd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ji(Xi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$d(e);throw new Ji(Xi.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class qd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ji(Xi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ji(Xi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ji(Xi.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ud(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ji(Xi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ji(Xi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ji(Xi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wd{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ji(Xi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ji(Xi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ts;switch(e.type){case"firstParty":return new ss(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ji(Xi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Vd.get(e);t&&(Hi("ComponentProvider","Removing Datastore"),Vd.delete(e),t.terminate())}(this),Promise.resolve()}}function Gd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Hd(e,Wd))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&Wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Vi.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ji(Xi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Vi(s)}e._authCredentials=new ns(new es(t,n))}}class Kd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Kd(this.firestore,e,this._query)}}class Qd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qd(this.firestore,e,this._key)}}class Yd extends Kd{constructor(e,t,n){super(e,t,Za(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qd(this.firestore,null,new vs(e))}withConverter(e){return new Yd(this.firestore,e,this._path)}}function Xd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=j(e),1===arguments.length&&(t=cs.newId()),zd("doc","path",t),e instanceof Wd){const n=ms.fromString(t,...r);return Bd(n),new Qd(e,null,new vs(n))}{if(!(e instanceof Qd||e instanceof Yd))throw new Ji(Xi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ms.fromString(t,...r));return Bd(n),new Qd(e.firestore,e instanceof Yd?e.converter:null,new vs(n))}}class Jd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tu(this,"async_queue_retry"),this.Vu=()=>{const e=Zc();e&&Hi("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Zc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Zc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Zi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!js(e))throw e;Hi("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw qi("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Mu.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&Ki()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Zd extends Wd{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Jd,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jd(e),this._firestoreClient=void 0,await e}}}function eh(e){if(e._terminated)throw new Ji(Xi.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||th(e),e._firestoreClient}function th(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new na(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ud(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Pd(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class nh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nh(Ks.fromBase64String(e))}catch(e){throw new Ji(Xi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new nh(Ks.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ji(Xi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ys(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ih{constructor(e){this._methodName=e}}class sh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ji(Xi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ji(Xi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return us(this._lat,e._lat)||us(this._long,e._long)}}class ah{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const oh=/^__.*__$/;class lh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jo(e,this.data,t,this.fieldTransforms)}}class ch{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Zo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ki()}}class dh{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new dh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Eh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(uh(this.Cu)&&oh.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class hh{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||eu(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new dh({Cu:e,methodName:t,qu:n,path:ys.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fh(e){const t=e._freezeSettings(),n=eu(e._databaseId);return new hh(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ph(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);xh("Data must be an object, but it was:",a,r);const o=bh(r,a);let l,c;if(s.merge)l=new Ws(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=kh(t,r,n);if(!a.contains(i))throw new Ji(Xi.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);_h(e,i)||e.push(i)}l=new Ws(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new lh(new xa(o),l,c)}class mh extends ih{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mh}}function gh(e,t,n,r){const i=e.Qu(1,t,n);xh("Data must be an object, but it was:",i,r);const s=[],a=xa.empty();Us(r,((e,r)=>{const o=Nh(t,e,n);r=j(r);const l=i.Nu(o);if(r instanceof mh)s.push(o);else{const e=vh(r,l);null!=e&&(s.push(o),a.set(o,e))}}));const o=new Ws(s);return new ch(a,o,i.fieldTransforms)}function yh(e,t,n,r,i,s){const a=e.Qu(1,t,n),o=[kh(t,r,n)],l=[i];if(s.length%2!=0)throw new Ji(Xi.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(kh(t,s[h])),l.push(s[h+1]);const c=[],u=xa.empty();for(let h=o.length-1;h>=0;--h)if(!_h(c,o[h])){const e=o[h];let t=l[h];t=j(t);const n=a.Nu(e);if(t instanceof mh)c.push(e);else{const r=vh(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Ws(c);return new ch(u,d,a.fieldTransforms)}function vh(e,t){if(wh(e=j(e)))return xh("Unsupported field value:",t,e),bh(e,t);if(e instanceof ih)return function(e,t){if(!uh(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=vh(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=j(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Io(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=hs.fromDate(e);return{timestampValue:Ol(t.serializer,n)}}if(e instanceof hs){const n=new hs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ol(t.serializer,n)}}if(e instanceof sh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof nh)return{bytesValue:Rl(t.serializer,e._byteString)};if(e instanceof Qd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Fl(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ah)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return To(t.serializer,e)}))}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${$d(e)}`)}(e,t)}function bh(e,t){const n={};return Vs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Us(e,((e,r)=>{const i=vh(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function wh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof hs||e instanceof sh||e instanceof nh||e instanceof Qd||e instanceof ih||e instanceof ah)}function xh(e,t,n){if(!wh(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=$d(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function kh(e,t,n){if((t=j(t))instanceof rh)return t._internalPath;if("string"==typeof t)return Nh(e,t);throw Eh("Field path arguments must be of type string or ",e,!1,void 0,n)}const Sh=new RegExp("[~\\*/\\[\\]]");function Nh(e,t,n){if(t.search(Sh)>=0)throw Eh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new rh(...t.split("."))._internalPath}catch(r){throw Eh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Eh(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Ji(Xi.INVALID_ARGUMENT,o+e+l)}function _h(e,t){return e.some((e=>e.isEqual(t)))}class Ch{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Th(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Th extends Ch{data(){return super.data()}}function jh(e,t){return"string"==typeof t?Nh(e,t):t instanceof rh?t._internalPath:t._delegate._internalPath}class Ih{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ki()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Us(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Xs(e.doubleValue)));return new ah(i)}convertGeoPoint(e){return new sh(Xs(e.latitude),Xs(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ea(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ta(e));default:return null}}convertTimestamp(e){const t=Ys(e);return new hs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ms.fromString(e);Qi(ac(n));const r=new ra(n.get(1),n.get(3)),i=new vs(n.popFirst(5));return r.isEqual(t)||qi(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Ph(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ah{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dh extends Ch{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(jh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Oh extends Dh{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}function Rh(e){e=Hd(e,Qd);const t=Hd(e.firestore,Zd);return Fd(eh(t),e._key).then((n=>Uh(t,e,n)))}class Lh extends Ih{constructor(e){super(),this.firestore=e}convertBytes(e){return new nh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qd(this.firestore,null,t)}}function Mh(e,t,n){e=Hd(e,Qd);const r=Hd(e.firestore,Zd),i=Ph(e.converter,t,n);return Fh(r,[ph(fh(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ho.none())])}function Fh(e,t){return function(e,t){const n=new Zi;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Cd(e);try{const e=await function(e,t){const n=Yi(e),r=hs.now(),i=t.reduce(((e,t)=>e.add(t.key)),Eo());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=go(),l=Eo();return n.cs.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=Yo(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Zo(e.key,t,ka(t.value.mapValue),Ho.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:bo(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new zs(us)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Sd(r,e.changes),await Nu(r.remoteStore)}catch(e){const t=Fu(e,"Failed to persist write");n.reject(t)}}(await Ld(e),t,n))),n.promise}(eh(e),t)}function Uh(e,t,n){const r=n.docs.get(t._key),i=new Lh(e);return new Dh(e,i,t._key,r,new Ah(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){zi=e}(He),Ue(new I("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Zd(new rs(e.getProvider("auth-internal")),new os(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ji(Xi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ra(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Ge(Ui,"4.7.3",e),Ge(Ui,"4.7.3","esm2017")}();const Vh=qe({apiKey:"AIzaSyBVdUPrYBGbaBZzD0A6q3ncMsVL2-0ccSs",authDomain:"business-tycoon-dac45.firebaseapp.com",projectId:"business-tycoon-dac45",storageBucket:"business-tycoon-dac45.firebasestorage.app",messagingSenderId:"909777324740",appId:"1:909777324740:web:af6d9624f3d409321d1791"}),zh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();const t=Ve(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ve(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(k(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ut(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:vi,persistence:[jr,hr,pr]}),r=p("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ki)return;const r=null===t||void 0===t?void 0:t.token;Si!==r&&(Si=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){j(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){j(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=h("auth");return s&&Tn(n,`http://${s}`),n}(Vh),Bh=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Ve("object"==typeof e?e:We(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=h(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Gd(r,...e)}return r}(Vh),$h=new Gn,Hh=new qn("apple.com");$h.setCustomParameters({prompt:"select_account"});const qh=class{static async saveGameState(e,t){try{const n=Xd(Bh,"saves",e);return(await Rh(n)).exists()?await function(e,t,n){e=Hd(e,Qd);const r=Hd(e.firestore,Zd),i=fh(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=j(t))||t instanceof rh?yh(i,"updateDoc",e._key,t,n,o):gh(i,"updateDoc",e._key,t),Fh(r,[s.toMutation(e._key,Ho.exists(!0))])}(n,{gameState:t,lastSaved:new Date}):await Mh(n,{gameState:t,lastSaved:new Date,createdAt:new Date}),!0}catch(n){return console.error("Error saving game state:",n),!1}}static async loadGameState(e){try{const t=Xd(Bh,"saves",e),n=await Rh(t);return n.exists()?n.data().gameState:null}catch(t){return console.error("Error loading game state:",t),null}}static autoSaveGameState(e,t){return this.saveGameState(e,t)}static async hasSaveData(e){try{const t=Xd(Bh,"saves",e);return(await Rh(t)).exists()}catch(t){return console.error("Error checking save data:",t),!1}}static async deleteSaveData(e){try{const t=Xd(Bh,"saves",e);return await Mh(t,{deleted:!0,deletedAt:new Date}),!0}catch(t){return console.error("Error deleting save data:",t),!1}}};var Wh=n(579);const Gh=(0,r.createContext)();function Kh(){return(0,r.useContext)(Gh)}function Qh(e){let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!1);(0,r.useEffect)((()=>lr(zh,(()=>{l(!0)}))),[]),(0,r.useEffect)((()=>{o&&async function(){try{if(!o)return;const e=await async function(e,t){return await wn(e)._initializationPromise,Gr(e,t,!1)}(zh);null!==e&&void 0!==e&&e.user&&await Mh(Xd(Bh,"users",e.user.uid),{email:e.user.email,displayName:e.user.displayName||e.user.email.split("@")[0],lastLogin:new Date},{merge:!0})}catch(e){console.error("Error checking redirect result:",e)}}()}),[o]),(0,r.useEffect)((()=>lr(zh,(async e=>{if(e)try{await Mh(Xd(Bh,"users",e.uid),{lastLogin:new Date},{merge:!0})}catch(t){console.error("Error updating last login:",t)}i(e),a(!1)}))),[]);const c={currentUser:n,signup:async function(e,t,n){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");const r=await async function(e,t,n){if(ze(e.app))return Promise.reject(ft(e));const r=wn(e),i=Cn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yn),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ar(e),t})),a=await Xn._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(zh,e,t);return await or(r.user,{displayName:n}),await Mh(Xd(Bh,"users",r.user.uid),{email:e,displayName:n,createdAt:new Date,lastLogin:new Date}),r}catch(r){throw console.error("Signup error:",r),r}},login:async function(e,t){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");return await function(e,t,n){return ze(e.app)?Promise.reject(ft(e)):ir(j(e),Bn.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ar(e),t}))}(zh,e,t)}catch(n){throw console.error("Login error:",n),n}},signInWithGoogle:async function(){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");const e=await Vr(zh,$h),t=e.user;return await Mh(Xd(Bh,"users",t.uid),{email:t.email,displayName:t.displayName,lastLogin:new Date},{merge:!0}),e}catch(e){throw console.error("Google sign-in error:",e),e}},signInWithApple:async function(){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");const e=await Vr(zh,Hh),t=e.user;return await Mh(Xd(Bh,"users",t.uid),{email:t.email,displayName:t.displayName||t.email.split("@")[0],lastLogin:new Date},{merge:!0}),e}catch(e){throw console.error("Apple sign-in error:",e),e}},signInAsGuest:async function(){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");console.log("Starting guest sign in...");const e=await async function(e){var t;if(ze(e.app))return Promise.reject(ft(e));const n=wn(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Xn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Yn(n,{returnSecureToken:!0}),i=await Xn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(zh);console.log("Anonymous auth completed:",e);const t=e.user,n="Guest User";return console.log("Creating user document..."),await Mh(Xd(Bh,"users",t.uid),{isGuest:!0,displayName:n,lastLogin:new Date},{merge:!0}),console.log("Updating profile..."),await or(t,{displayName:n}),console.log("Guest sign in completed successfully"),e}catch(e){throw console.error("Guest sign-in error:",e),e}},logout:async function(){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");return await function(e){return j(e).signOut()}(zh)}catch(e){throw console.error("Logout error:",e),e}},resetPassword:async function(e){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");return await async function(e,t,n){const r=wn(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&sr(r,i,n),await Cn(r,i,"getOobCode",Rn)}(zh,e)}catch(t){throw console.error("Password reset error:",t),t}},authInitialized:o};return(0,Wh.jsx)(Gh.Provider,{value:c,children:!s&&t})}const Yh={money:1e3,lastUpdate:Date.now(),generation:1,assets:[],skills:{},experience:0,level:1,playerStatus:{job:null,jobExperience:0,housing:null,transportation:null,business:null,age:18,background:null,ascensionBonus:0,ascensionCount:0},milestones:[],currentEducation:null,educationProgress:0,workEvents:{pendingEvent:null,lastEventTime:null,notificationVisible:!1},timeSettings:{gameTimeRatio:60,lastRealTime:Date.now(),gameTime:Date.now(),totalOfflineTime:0}},Xh=(e,t)=>e*t,Jh=e=>{const t=Date.now()-e.timeSettings.lastRealTime,n=Xh(t,e.timeSettings.gameTimeRatio);return e.timeSettings.gameTime+n},Zh=e=>{let t=0;return e.assets.length>0&&(t+=e.assets.reduce(((e,t)=>e+t.income),0)),e.playerStatus.business&&(t+=e.playerStatus.business.income),t*=1+.01*(e.level-1),t*=1+e.playerStatus.ascensionBonus/100,t},ef=e=>{if(e<=0)return 0;const t=100;return e<=100?t*e:e<=200?t*e*1.5:e<=400?t*e*2:t*e*2.5},tf=e=>Math.floor(100*Math.pow(1.5,e-1)),nf=(e,t)=>{const n={food:["Cook I","Cook II","Cook III","Chef de Partie","Sous Chef","Head Chef","Executive Chef","Master Chef","Celebrity Chef","Michelin Star Chef"],retail:["Cashier I","Cashier II","Cashier III","Shift Lead","Department Lead","Assistant Manager","Store Manager","District Manager","Regional Director","VP of Operations"],technical:["Junior Developer","Developer","Senior Developer","Lead Developer","Architect","Development Manager","Director of Engineering","VP of Engineering","CTO","Chief Innovation Officer"],financial:["Accountant I","Accountant II","Accountant III","Senior Accountant","Financial Analyst","Finance Manager","Controller","Finance Director","CFO","Chief Investment Officer"],healthcare:["Nurse I","Nurse II","Nurse III","Charge Nurse","Nurse Practitioner","Department Head","Director of Nursing","Chief Nursing Officer","VP of Patient Care","Chief Medical Officer"],legal:["Paralegal I","Paralegal II","Paralegal III","Junior Associate","Associate","Senior Associate","Junior Partner","Partner","Senior Partner","Managing Partner"],management:["Associate I","Associate II","Associate III","Senior Associate I","Senior Associate II","Senior Associate III","Team Lead I","Team Lead II","Team Lead III","Assistant Supervisor","Junior Supervisor","Supervisor","Senior Supervisor","Project Supervisor","Assistant Manager","Department Manager","Senior Manager","Division Manager","General Manager","Operations Manager","Regional Manager","Director","Senior Director","Executive Director","Regional Director","Divisional Director","Vice President","Senior Vice President","Executive Vice President","Chief Operating Officer","President","Chief Executive Officer","Managing Director","Executive Chairman","Chairman of the Board","Group Chairman","Global Chairman","Chief Principal","Principal Partner","Executive Partner","Managing Partner","Entrepreneur","Venture Capitalist","Angel Investor","Business Magnate","Industry Titan","Corporate Overlord","Market Dominator","Finance Mogul","Business Emperor","Tycoon"]}[e]||["Associate I","Associate II","Associate III","Senior Associate","Team Lead","Supervisor","Manager","Senior Manager","Director","Executive"];return n[Math.min(Math.floor((t-1)/10),n.length-1)]},rf=(e,t)=>e*(1+.05*(t-1));function sf(e,t){switch(t.type){case"CLICK":{const t=e.playerStatus.job?e.playerStatus.job.payPerClick/60:.01;e.level;if(e.playerStatus.job){const n=1,r=e.playerStatus.jobExperience+n,i=ef(e.playerStatus.job.level);let s=e.playerStatus.job.level,a=e.playerStatus.job.title,o=e.playerStatus.job.payPerClick,l=e.playerStatus.job.readyForPromotion||!1;if(r>=i){s+=1;const n=0;return s%10===0?l=!0:(a=nf(e.playerStatus.job.category,s),o=rf(e.playerStatus.job.basePayPerClick||e.playerStatus.job.payPerClick,s)),{...e,money:e.money+t,playerStatus:{...e.playerStatus,jobExperience:n,job:{...e.playerStatus.job,level:s,title:a,payPerClick:o,readyForPromotion:l}}}}return{...e,money:e.money+t,playerStatus:{...e.playerStatus,jobExperience:r,job:{...e.playerStatus.job,readyForPromotion:l}}}}return{...e,money:e.money+t}}case"UPDATE_INCOME":{var n;const t=Date.now(),r=Zh(e),i=(e=>(Jh(e)-e.timeSettings.gameTime)/1e3)(e),s=e.money+r*i,a=r*i*.1;let o=e.playerStatus.jobExperience||0,l=(null===(n=e.playerStatus.job)||void 0===n?void 0:n.level)||1,c=e.playerStatus.job;if(e.playerStatus.job){o+=.1*i;const t=ef(l);o>=t&&(o-=t,l+=1,c={...e.playerStatus.job,level:l,title:e.playerStatus.job.baseTitle||e.playerStatus.job.title,payPerClick:rf(e.playerStatus.job.basePayPerClick,l)},e.playerStatus.job.category&&(c.title=nf(e.playerStatus.job.category,l)))}let u=e.experience+a,d=e.level;const h=100;u>=tf(e.level)&&e.level<h&&(u-=tf(e.level),d++);const f=Jh(e);return{...e,money:s,lastUpdate:t,experience:u,level:d,playerStatus:{...e.playerStatus,job:c,jobExperience:o},timeSettings:{...e.timeSettings,lastRealTime:t,gameTime:f}}}case"ASCEND":{const t=e.playerStatus.age+1,n=e.playerStatus.ascensionBonus+5,r=e.playerStatus.ascensionCount+1;return{...e,playerStatus:{...e.playerStatus,age:t,ascensionBonus:n,ascensionCount:r}}}case"INIT_PLAYER":{const n=t.payload||(Math.random()>.7?"rich":"poor"),r={};return[...["management","leadership","communication","technical","education","financial","business","healthcare","legal","ethics","food","creativity"]].sort((()=>.5-Math.random())).slice(0,3).forEach((e=>{r[e]=1})),{...e,playerStatus:{...e.playerStatus,background:n,jobExperience:0,job:null},skills:r}}case"REGENERATE":{const t=.2*e.money,n={};Object.entries(e.skills).forEach((e=>{let[t,r]=e;n[t]=Math.floor(.3*r)}));const r=e.playerStatus.ascensionCount>=3?5:Math.floor(3*Math.random())+1,i=e.money>=5e5?Math.random()<.7?"rich":"poor":Math.random()<.3?"rich":"poor",s="rich"===i?1.5*t:t,a=[...e.milestones,{generation:e.generation,wealth:e.money,level:e.level,ascensions:e.playerStatus.ascensionCount}];return{...Yh,money:s,generation:e.generation+1,skills:n,level:r,playerStatus:{...Yh.playerStatus,background:i},milestones:a,lastUpdate:Date.now()}}case"GET_JOB":{const{title:n,category:r,hourlyPay:i,payPerClick:s,level:a=1,basePayPerClick:o}=t.payload,l=i||s,c=o||l;return{...e,playerStatus:{...e.playerStatus,jobExperience:0,job:{title:n,category:r,payPerClick:l,basePayPerClick:c,level:a||1,readyForPromotion:!1}}}}case"ADD_JOB_EXPERIENCE":{if(!e.playerStatus.job)return e;const n=t.payload||1;let r=(e.playerStatus.jobExperience||0)+n,i=e.playerStatus.job.level||1,s=e.playerStatus.job;const a=ef(i);return r>=a&&(r-=a,i+=1,s={...e.playerStatus.job,level:i,title:e.playerStatus.job.baseTitle||e.playerStatus.job.title,payPerClick:rf(e.playerStatus.job.basePayPerClick,i)},e.playerStatus.job.category&&(s.title=nf(e.playerStatus.job.category,i))),{...e,playerStatus:{...e.playerStatus,job:s,jobExperience:r}}}case"BUY_ASSET":return e.money<t.payload.cost?e:{...e,money:e.money-t.payload.cost,assets:[...e.assets,t.payload],experience:e.experience+5};case"BUY_HOUSING":return e.money<t.payload.cost?e:{...e,money:e.money-t.payload.cost,playerStatus:{...e.playerStatus,housing:t.payload},experience:e.experience+10};case"BUY_TRANSPORTATION":return e.money<t.payload.cost?e:{...e,money:e.money-t.payload.cost,playerStatus:{...e.playerStatus,transportation:t.payload},experience:e.experience+10};case"START_BUSINESS":return e.money<t.payload.cost?e:{...e,money:e.money-t.payload.cost,playerStatus:{...e.playerStatus,business:t.payload},experience:e.experience+20};case"UPGRADE_BUSINESS":{const{business:n,upgrade:r}=t.payload;if(e.money<r.cost)return e;const i={...n,income:n.income+r.incomeBoost,level:n.level+1};return{...e,money:e.money-r.cost,playerStatus:{...e.playerStatus,business:i},experience:e.experience+15}}case"START_EDUCATION":{const n=t.payload;if(e.money<n.cost)return e;let r=1;e.skills[n.skill]&&(r=1+.2*e.skills[n.skill]);const i=6e4*r;let s=1;return e.playerStatus.background&&(s="rich"===e.playerStatus.background?n.skillMultiplier.rich:n.skillMultiplier.poor),{...e,money:e.money-n.cost,currentEducation:{...n,startTime:Date.now(),duration:i,multiplier:s},educationProgress:0}}case"UPDATE_EDUCATION_PROGRESS":{if(!e.currentEducation)return e;const t=Date.now()-e.currentEducation.startTime,n=Math.min(1,t/e.currentEducation.duration);if(n>=1){const t=e.currentEducation.value*e.currentEducation.multiplier,n=e.skills[e.currentEducation.skill]||0;return{...e,skills:{...e.skills,[e.currentEducation.skill]:n+t},currentEducation:null,educationProgress:0,experience:e.experience+5}}return{...e,educationProgress:n}}case"GAIN_SKILL":{const{skill:n,amount:r}=t.payload,i=e.skills[n]||0;return{...e,skills:{...e.skills,[n]:i+r}}}case"SHOW_WORK_EVENT_NOTIFICATION":return{...e,workEvents:{...e.workEvents,notificationVisible:!0}};case"HIDE_WORK_EVENT_NOTIFICATION":return{...e,workEvents:{...e.workEvents,notificationVisible:!1}};case"HANDLE_WORK_EVENT_CHOICE":{if(!e.workEvents.pendingEvent)return e;const{choiceIndex:n}=t.payload,r=e.workEvents.pendingEvent.choices[n];if(!r||!r.outcome)return e;const i=r.outcome,s=i.skill,a=i.gain;return{...e,skills:{...e.skills,[s]:(e.skills[s]||0)+a},workEvents:{...e.workEvents,pendingEvent:null,notificationVisible:!1}}}case"DISMISS_WORK_EVENT":return{...e,workEvents:{...e.workEvents,pendingEvent:null,notificationVisible:!1}};case"APPLY_FOR_PROMOTION":{const{job:n}=t.payload,r=e.playerStatus.job;return r&&r.readyForPromotion?n.category!==r.category||n.level<=r.level?e:{...e,playerStatus:{...e.playerStatus,job:{...n,level:r.level+1,basePayPerClick:n.payPerClick,payPerClick:n.payPerClick,baseTitle:n.title,readyForPromotion:!1}}}:e}case"SELECT_TRANSPORTATION":return{...e,playerStatus:{...e.playerStatus,transportation:t.payload}};case"UPDATE_MONEY":return{...e,money:Math.max(0,e.money+t.payload)};case"LOAD_GAME":return{...e,...t.payload};case"RESET_GAME":return{...Yh};case"CALCULATE_OFFLINE_PROGRESS":{const t=Date.now(),n=t-e.timeSettings.lastRealTime,r=Xh(n,e.timeSettings.gameTimeRatio),i=864e5,s=Math.min(r,i),a=Zh(e)*(s/1e3);return{...e,money:e.money+a,timeSettings:{...e.timeSettings,lastRealTime:t,gameTime:e.timeSettings.gameTime+s,totalOfflineTime:e.timeSettings.totalOfflineTime+n}}}default:return e}}const af=(0,r.createContext)();function of(e){let{children:t}=e;const[i,s]=(0,r.useReducer)(sf,Yh),{currentUser:a,authInitialized:o}=Kh(),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)({offlineTime:0,offlineEarnings:0});(0,r.useEffect)((()=>{!async function(){try{if(a&&o){console.log("Loading saved game state for user:",a.uid),c(!0);const t=await qh.loadGameState(a.uid);if(t){var e;console.log("Saved state found, loading into game state"),s({type:"LOAD_GAME",payload:t});const n=Date.now(),r=n-((null===(e=t.timeSettings)||void 0===e?void 0:e.lastRealTime)||n);if(r>6e4){const e=t.money;s({type:"CALCULATE_OFFLINE_PROGRESS"}),setTimeout((()=>{const t=i.money-e;t>0&&(m({offlineTime:r,offlineEarnings:t}),f(!0))}),100)}}else console.log("No saved state found, using initial state"),s({type:"INIT_PLAYER"});c(!1)}else o&&!a&&(console.log("No user logged in, using default state"),s({type:"RESET_GAME"}),c(!1))}catch(t){console.error("Error loading game state:",t),d(t.message),c(!1)}}()}),[a,o]),(0,r.useEffect)((()=>{if(!a||l||!o)return;console.log("Setting up auto-save interval");const e=setInterval((async()=>{try{console.log("Auto-saving game state..."),await qh.autoSaveGameState(a.uid,i),console.log("Auto-save completed")}catch(e){console.error("Error during auto-save:",e)}}),6e4);return()=>{console.log("Clearing auto-save interval"),clearInterval(e)}}),[a,i,l,o]);if((0,r.useEffect)((()=>{if(l)return;const e=setInterval((()=>{s({type:"UPDATE_INCOME"})}),1e3);return()=>clearInterval(e)}),[l]),(0,r.useEffect)((()=>{l||i.playerStatus.background&&0!==Object.keys(i.skills).length||(console.log("Initializing player background and skills"),s({type:"INIT_PLAYER"}))}),[l,i.playerStatus.background,i.skills]),u)return(0,Wh.jsxs)("div",{className:"game-error-container p-6 bg-red-100 text-red-800 rounded-lg m-4",children:[(0,Wh.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Game Error"}),(0,Wh.jsx)("p",{children:u}),(0,Wh.jsx)("button",{onClick:()=>d(null),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded",children:"Dismiss Error"})]});if(l)return(0,Wh.jsxs)("div",{className:"game-loading-container p-6 text-center",children:[(0,Wh.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),(0,Wh.jsx)("p",{className:"text-lg",children:"Loading Game Data..."})]});const g=r.lazy((()=>n.e(428).then(n.bind(n,428))));return(0,Wh.jsxs)(af.Provider,{value:{gameState:i,gameDispatch:s,jobExperienceNeededForLevel:ef,getJobTitleForLevel:nf,updateMoney:e=>{s({type:"UPDATE_MONEY",payload:e})},saveGame:async()=>{if(!a)return console.warn("Attempting to save game without user authentication"),!1;try{return await qh.saveGameState(a.uid,i)}catch(e){return console.error("Error saving game state:",e),d("Failed to save game: "+e.message),!1}},resetGame:async()=>{try{return a&&await qh.deleteSaveData(a.uid),s({type:"RESET_GAME"}),s({type:"INIT_PLAYER"}),!0}catch(e){return console.error("Error resetting game:",e),d("Failed to reset game: "+e.message),!1}},isLoading:l,getGameTime:()=>(e=>{const t=new Date(e);return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),fullDate:t.toLocaleDateString(),fullTime:t.toLocaleTimeString(),shortTime:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),fullDateTime:t.toLocaleString()}})(Jh(i))},children:[t,h&&(0,Wh.jsx)(r.Suspense,{fallback:(0,Wh.jsx)("div",{children:"Loading..."}),children:(0,Wh.jsx)(g,{offlineEarnings:p.offlineEarnings,offlineTime:p.offlineTime,onClose:()=>{f(!1)}})})]})}function lf(){const e=(0,r.useContext)(af);if(!e)throw new Error("useGame must be used within a GameProvider");return e}const cf=()=>{const{gameState:e,gameDispatch:t}=lf(),[n,i]=(0,r.useState)(!1);if(!e)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const s=e,a=e=>Math.floor(.3*e);return(0,Wh.jsxs)("div",{className:"regeneration-container",children:[n?(0,Wh.jsxs)("div",{className:"confirmation-message",children:[(0,Wh.jsx)("h3",{children:"Are you sure?"}),(0,Wh.jsx)("p",{children:"You'll lose all your current assets and start fresh as the next generation."}),(0,Wh.jsxs)("div",{className:"confirmation-buttons",children:[(0,Wh.jsx)("button",{className:"confirm-button",onClick:()=>{t({type:"REGENERATE"})},children:"Yes, Start New Generation"}),(0,Wh.jsx)("button",{className:"cancel-button",onClick:()=>{i(!1)},children:"No, Continue Playing"})]})]}):(0,Wh.jsxs)("div",{className:"regeneration-prompt",children:[(0,Wh.jsx)("h3",{children:"Maximum Level Reached!"}),(0,Wh.jsx)("p",{children:"You've reached Level 100, the maximum level in the game."}),(0,Wh.jsx)("p",{children:"You can continue to accumulate wealth or start a new generation with inherited advantages."}),(0,Wh.jsx)("p",{children:"Your child will inherit:"}),(0,Wh.jsxs)("ul",{children:[(0,Wh.jsxs)("li",{children:["$",Math.floor(.2*s.money).toLocaleString()," (20% of your current wealth)"]}),(0,Wh.jsxs)("li",{children:["Business: ",a(s.skills.business)," points"]}),(0,Wh.jsxs)("li",{children:["Technology: ",a(s.skills.tech)," points"]}),(0,Wh.jsxs)("li",{children:["Social: ",a(s.skills.social)," points"]}),(0,Wh.jsxs)("li",{children:["Creativity: ",a(s.skills.creativity)," points"]}),(0,Wh.jsxs)("li",{children:["Starting Level: ",s.playerStatus.ascensionCount>=3?5:"Random (1-3)"]})]}),(0,Wh.jsx)("button",{className:"regenerate-button",onClick:()=>{i(!0)},children:"Start New Generation"})]}),(0,Wh.jsxs)("div",{className:"regeneration-details",children:[(0,Wh.jsxs)("p",{children:["Your wealth: $",Math.floor(s.money).toLocaleString()]}),(0,Wh.jsxs)("p",{children:["Inheritance (20%): $",Math.floor(.2*s.money).toLocaleString()]}),(0,Wh.jsx)("p",{children:"Skills inherited: 30% of your current skills"}),(0,Wh.jsxs)("div",{className:"next-gen-info",children:[(0,Wh.jsx)("p",{className:"next-gen-title",children:"Next Generation:"}),(0,Wh.jsx)("p",{children:"Your child will have a rich or poor background, depending on your wealth"}),(0,Wh.jsxs)("p",{children:["Wealthy players ($",">","$500,000) have a 70% chance of a rich child"]}),(0,Wh.jsx)("p",{children:"Rich children get 50% more inheritance money and education bonuses"})]}),s.playerStatus.ascensionCount>=3&&(0,Wh.jsx)("p",{className:"bonus-info",children:"High Ascension Bonus: Your child will start at level 5!"})]})]})},uf=()=>{const{gameState:e,gameDispatch:t,jobExperienceNeededForLevel:n}=lf(),[i,s]=(0,r.useState)(0),[a,o]=(0,r.useState)(.01),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),p=(0,r.useRef)(null),m=(0,r.useRef)(null),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),w=(0,r.useCallback)((e=>{if(null===e||void 0===e||!e.transportation)return 0;return 1*e.transportation.clickSpeedMultiplier}),[]),x=(0,r.useCallback)((e=>{const t=w(e);return t<=0?0:1e3/t}),[w]),k=(0,r.useCallback)((e=>null!==(null===e||void 0===e?void 0:e.transportation)),[]);if((0,r.useEffect)((()=>{if(!e||!e.playerStatus)return;const t=e;let n=0,r=.01;if(t.playerStatus.job){r=(t.playerStatus.job.hourlyPay||60*t.playerStatus.job.payPerClick)/60}else r=.01;t.assets.length>0&&(n+=t.assets.reduce(((e,t)=>e+t.income),0)),t.playerStatus.business&&(n+=t.playerStatus.business.income),n*=1+.01*(t.level-1),t.playerStatus.ascensionBonus>0&&(n*=1+t.playerStatus.ascensionBonus/100),s(n),o(r)}),[e]),(0,r.useEffect)((()=>{if(e&&e.playerStatus&&u&&k(e.playerStatus)){const n=x(e.playerStatus);return n>0&&(p.current=setInterval((()=>{t({type:"CLICK"})}),n)),()=>{p.current&&(clearInterval(p.current),p.current=null)}}}),[u,t,x,k,e]),(0,r.useEffect)((()=>{if(!e)return;[10,25,50,100].includes(e.level)&&c(!0)}),[e]),(0,r.useEffect)((()=>()=>{p.current&&clearInterval(p.current)}),[]),(0,r.useEffect)((()=>{const e=()=>{d(!1),p.current&&(clearInterval(p.current),p.current=null)};return window.addEventListener("blur",e),()=>{window.removeEventListener("blur",e)}}),[]),(0,r.useEffect)((()=>{var t,n;if(e&&e.playerStatus){if(null!==(t=e.playerStatus.job)&&void 0!==t&&t.readyForPromotion&&!v){b(!0);const e=setTimeout((()=>{b(!1)}),5e3);return()=>clearTimeout(e)}null!==(n=e.playerStatus.job)&&void 0!==n&&n.readyForPromotion||!v||b(!1)}}),[e,v]),(0,r.useEffect)((()=>{function e(e){m.current&&!m.current.contains(e.target)&&null!==h&&f(null)}return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[h]),!e||!e.playerStatus)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const S=e,N=(E=S.level,Math.floor(100*Math.pow(1.5,E-1)));var E;const _=S.experience/N*100,C=e=>{e&&e.preventDefault(),d(!1)},T=e=>{e&&e.preventDefault(),d(!1)},j=e=>{f(h===e?null:e)},I=(e,t)=>{if(!S.playerStatus.job||!S.playerStatus.job.category)return;const n=S.playerStatus.job.category;y({skill:n.charAt(0).toUpperCase()+n.slice(1),x:e,y:t}),setTimeout((()=>{y(null)}),600)},P=(e,t)=>{const n=document.createElement("div");n.innerText="+$0.01",n.className="penny-gain-indicator",n.style.left=`${e}px`,n.style.top=`${t}px`,document.body.appendChild(n),setTimeout((()=>{n.style.transform="translateY(-50px)",n.style.opacity="0"}),50),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n)}),1e3)};return(0,Wh.jsxs)("div",{className:"clicker-container",children:[(0,Wh.jsxs)("div",{className:"player-info-section",children:[(0,Wh.jsxs)("div",{className:"player-name-level",children:[(0,Wh.jsx)("h2",{children:S.playerStatus.name||"Player"}),(0,Wh.jsxs)("div",{className:"player-level",children:[(0,Wh.jsxs)("span",{className:"level-badge level-beginner",children:["Level ",S.level]}),(0,Wh.jsx)("div",{className:"xp-bar",children:(0,Wh.jsx)("div",{className:"xp-progress",style:{width:`${_}%`}})})]})]}),(0,Wh.jsx)("div",{className:"job-info-panel",children:S.playerStatus.job?(0,Wh.jsxs)(Wh.Fragment,{children:[(0,Wh.jsxs)("div",{className:"job-header",children:[(0,Wh.jsxs)("div",{className:"job-title-container",children:[(0,Wh.jsxs)("div",{className:"job-title",children:[S.playerStatus.job.title,S.playerStatus.job.readyForPromotion&&(0,Wh.jsx)("span",{className:"badge badge-primary badge-promotion",children:"Ready for Promotion!"})]}),(0,Wh.jsxs)("div",{className:"job-pay",children:["$",(S.playerStatus.job.hourlyPay||60*S.playerStatus.job.payPerClick).toFixed(2),"/hr | $",a.toFixed(2),"/click"]})]}),(0,Wh.jsx)("div",{className:"job-icon",children:S.playerStatus.job.image||((e,t)=>{const n={technology:"\ud83d\udcbb",technical:"\ud83d\udda5\ufe0f",finance:"\ud83d\udcb0",financial:"\ud83d\udcb9",healthcare:"\ud83c\udfe5",education:"\ud83c\udf93",retail:"\ud83d\uded2",hospitality:"\ud83c\udfe8",service:"\ud83d\udece\ufe0f",sales:"\ud83c\udff7\ufe0f",legal:"\u2696\ufe0f",construction:"\ud83d\udd28",creative:"\ud83c\udfa8",marketing:"\ud83d\udce2",entertainment:"\ud83c\udfac",science:"\ud83d\udd2c",management:"\ud83d\udccb",food:"\ud83c\udf73"};return t&&n[t]?n[t]:{owner:"\ud83d\udc51",executive:"\ud83c\udf1f",senior:"\ud83d\udcca",mid:"\ud83d\udccb",entry:"\ud83d\udd30"}[e]||"\ud83d\udd30"})((A=S.playerStatus.job,A?A.category:null),S.playerStatus.job.category)})]}),(0,Wh.jsxs)("div",{className:"job-level-progress",children:[(0,Wh.jsxs)("div",{className:"level-display",children:[(0,Wh.jsxs)("span",{className:"level-badge level-beginner",children:["Level ",S.playerStatus.job.level]}),S.playerStatus.job.level<500&&(0,Wh.jsx)("span",{className:"next-job-level",children:S.playerStatus.job.readyForPromotion?(0,Wh.jsx)("span",{className:"badge badge-primary badge-promotion",children:"Ready for Promotion!"}):`Level ${S.playerStatus.job.level+1}`})]}),(0,Wh.jsx)("div",{className:"level-progress-bar",children:(0,Wh.jsx)("div",{className:"level-progress-filled "+(S.playerStatus.job.readyForPromotion?"promotion-ready":""),style:{width:`${Math.min(100,S.playerStatus.jobExperience/n(S.playerStatus.job.level)*100)}%`}})}),(0,Wh.jsxs)("div",{className:"level-experience-text",children:[S.playerStatus.job.readyForPromotion?(0,Wh.jsx)("span",{className:"promotion-ready-text",children:"Check Jobs tab to apply for promotion!"}):(0,Wh.jsxs)("span",{children:["XP: ",Math.round(S.playerStatus.jobExperience)," / ",n(S.playerStatus.job.level)]}),!S.playerStatus.job.readyForPromotion&&S.playerStatus.job.level<500&&(0,Wh.jsxs)("span",{children:["Next promotion at level ",10*Math.ceil(S.playerStatus.job.level/10)]})]})]})]}):(0,Wh.jsx)("div",{className:"no-job",children:"No job yet! Visit the Jobs tab to apply."})}),(0,Wh.jsxs)("div",{className:"business-stats",children:[(0,Wh.jsxs)("div",{className:"stat-box",children:[(0,Wh.jsx)("div",{className:"stat-label",children:"Businesses"}),(0,Wh.jsx)("div",{className:"stat-value",children:(()=>{let e=0;return S.assets&&(e+=S.assets.filter((e=>"business"===e.type)).length),S.playerStatus.business&&(e+=1),e})()})]}),(0,Wh.jsxs)("div",{className:"stat-box",children:[(0,Wh.jsx)("div",{className:"stat-label",children:"Passive Income"}),(0,Wh.jsxs)("div",{className:"stat-value",children:["$",(60*i).toFixed(2),"/min"]})]}),(0,Wh.jsxs)("div",{className:"stat-box",children:[(0,Wh.jsx)("div",{className:"stat-label",children:"Ascension"}),(0,Wh.jsx)("div",{className:"stat-value",children:S.generation})]})]}),(0,Wh.jsx)("div",{className:"money-display",children:(0,Wh.jsxs)("span",{className:"money-value",children:["$",S.money.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})})]}),(0,Wh.jsxs)("div",{className:"tap-pad-section",children:[(0,Wh.jsxs)("div",{className:"boost-icons-column",ref:m,children:[S.playerStatus.transportation&&(0,Wh.jsxs)("div",{className:"boost-icon-wrapper "+("transportation"===h?"tooltip-active":""),onClick:()=>j("transportation"),children:[(0,Wh.jsxs)("div",{className:"boost-icon transportation-boost",children:[(0,Wh.jsx)("span",{children:S.playerStatus.transportation.image}),(0,Wh.jsxs)("span",{className:"boost-text",children:[w(S.playerStatus),"x"]})]}),(0,Wh.jsxs)("div",{className:"boost-tooltip",children:[(0,Wh.jsx)("h4",{children:"Transportation Boost"}),(0,Wh.jsxs)("p",{children:["Your ",S.playerStatus.transportation.name," allows you to work ",w(S.playerStatus)," clicks/sec when holding down."]}),(0,Wh.jsx)("button",{className:"tooltip-close",onClick:e=>{e.stopPropagation(),f(null)},children:"\u2715"})]})]}),S.level>1&&(0,Wh.jsxs)("div",{className:"boost-icon-wrapper "+("level"===h?"tooltip-active":""),onClick:()=>j("level"),children:[(0,Wh.jsxs)("div",{className:"boost-icon level-boost",children:[(0,Wh.jsx)("span",{children:"\u2b50"}),(0,Wh.jsxs)("span",{className:"boost-text",children:["+",S.level-1,"%"]})]}),(0,Wh.jsxs)("div",{className:"boost-tooltip",children:[(0,Wh.jsx)("h4",{children:"Level Bonus"}),(0,Wh.jsxs)("p",{children:["+",S.level-1,"% to all passive income"]}),(0,Wh.jsx)("button",{className:"tooltip-close",onClick:e=>{e.stopPropagation(),f(null)},children:"\u2715"})]})]}),S.playerStatus.ascensionBonus>0&&(0,Wh.jsxs)("div",{className:"boost-icon-wrapper "+("ascension"===h?"tooltip-active":""),onClick:()=>j("ascension"),children:[(0,Wh.jsxs)("div",{className:"boost-icon ascension-boost",children:[(0,Wh.jsx)("span",{children:"\ud83d\udd04"}),(0,Wh.jsxs)("span",{className:"boost-text",children:["+",S.playerStatus.ascensionBonus,"%"]})]}),(0,Wh.jsxs)("div",{className:"boost-tooltip",children:[(0,Wh.jsx)("h4",{children:"Ascension Bonus"}),(0,Wh.jsxs)("p",{children:["+",S.playerStatus.ascensionBonus,"% to all passive income"]}),(0,Wh.jsx)("button",{className:"tooltip-close",onClick:e=>{e.stopPropagation(),f(null)},children:"\u2715"})]})]})]}),(0,Wh.jsxs)("div",{className:"tap-pad "+(k(S.playerStatus)?"":"no-auto-click"),onClick:e=>{},onMouseDown:e=>{e.preventDefault(),t({type:"CLICK"}),S.playerStatus.job&&S.playerStatus.job.category?I(e.clientX,e.clientY-20):P(e.clientX,e.clientY-20),k(S.playerStatus)&&d(!0)},onMouseUp:C,onMouseLeave:C,onTouchStart:e=>{(e.currentTarget===e.target||e.currentTarget.contains(e.target))&&e.preventDefault(),t({type:"CLICK"}),k(S.playerStatus)&&d(!0)},onTouchEnd:T,onTouchCancel:T,role:"button","aria-label":"Work button",children:[!k(S.playerStatus)&&(0,Wh.jsx)("div",{className:"auto-click-info",children:(0,Wh.jsx)("span",{children:"\ud83d\udeb2 Buy transportation to enable auto-clicking"})}),(0,Wh.jsxs)("div",{className:"tap-pad-content",children:[(0,Wh.jsx)("div",{className:"tap-icon",children:"\ud83d\udcbc"}),(0,Wh.jsx)("div",{className:"tap-text",children:"Tap to work"}),(0,Wh.jsxs)("div",{className:"tap-value",children:["+$",a.toFixed(2)]})]})]})]}),l&&(0,Wh.jsxs)("div",{className:"ascension-prompt",children:[(0,Wh.jsx)("h3",{children:"Ascension Available!"}),(0,Wh.jsxs)("p",{children:["You've reached level ",S.level,", which is an ascension milestone!"]}),(0,Wh.jsx)("p",{children:"Ascending will add 1 year to your age and grant a permanent 5% income bonus."}),(0,Wh.jsxs)("div",{className:"ascension-buttons",children:[(0,Wh.jsx)("button",{className:"ascend-button",onClick:()=>{t({type:"ASCEND"}),c(!1)},children:"Ascend"}),(0,Wh.jsx)("button",{className:"decline-button",onClick:()=>{c(!1)},children:"Continue Playing"})]})]}),S.level>=100&&(0,Wh.jsx)(cf,{}),g&&(0,Wh.jsxs)("div",{className:"skill-gain-indicator",style:{left:`${g.x}px`,top:`${g.y}px`},children:["+",g.skill]}),v&&(0,Wh.jsxs)("div",{className:"promotion-notification",onClick:()=>{b(!1)},children:[(0,Wh.jsx)("div",{className:"promotion-notification-icon",children:"\ud83c\udf89"}),(0,Wh.jsxs)("div",{className:"promotion-notification-content",children:[(0,Wh.jsx)("h4",{children:"Ready for Promotion!"}),(0,Wh.jsxs)("p",{children:["You've reached level ",S.playerStatus.job.level," and can apply for a promotion in the Jobs tab"]})]}),(0,Wh.jsx)("button",{className:"promotion-notification-dismiss",children:"\xd7"})]})]});var A},df={management:["management","leadership","communication"],technical:["technical","education"],financial:["financial","business"],healthcare:["healthcare","education"],legal:["legal","ethics","communication"],food:["food","creativity","communication"]},hf={poor:[{id:"fastfood",title:"Fast Food Worker",hourlyPay:15,payPerClick:.25,category:"food",description:"Flipping burgers for minimum wage",requirements:{food:1}},{id:"retail",title:"Retail Associate",hourlyPay:16.2,payPerClick:16.2/60,category:"sales",description:"Helping customers and stocking shelves",requirements:{communication:1}},{id:"delivery",title:"Delivery Driver",hourlyPay:19.8,payPerClick:.33,category:"service",description:"Delivering packages around town",requirements:{management:1}}],rich:[{id:"intern",title:"Corporate Intern",hourlyPay:19.8,payPerClick:.33,category:"management",description:"Getting coffee and making copies",requirements:{management:1}},{id:"assistant",title:"Executive Assistant",hourlyPay:25.2,payPerClick:.42,category:"management",description:"Managing schedules and emails",requirements:{communication:1}},{id:"sales",title:"Junior Sales Rep",hourlyPay:30,payPerClick:.5,category:"sales",description:"Making cold calls and following up leads",requirements:{business:1}}]},ff=[{id:"manager",title:"Shift Manager",hourlyPay:40.2,payPerClick:.67,category:"management",description:"Managing a team of workers",requirements:{management:2}},{id:"technician",title:"IT Technician",hourlyPay:45,payPerClick:.75,category:"technical",description:"Troubleshooting tech issues",requirements:{technical:2}},{id:"accountant",title:"Junior Accountant",hourlyPay:49.8,payPerClick:.83,category:"financial",description:"Balancing the books",requirements:{financial:2}},{id:"teacher",title:"Teaching Assistant",hourlyPay:34.8,payPerClick:.58,category:"education",description:"Helping to educate the next generation",requirements:{education:2}},{id:"nurse",title:"Nursing Assistant",hourlyPay:42.6,payPerClick:42.6/60,category:"healthcare",description:"Helping patients in healthcare facilities",requirements:{healthcare:2}},{id:"chef",title:"Line Cook",hourlyPay:36,payPerClick:.6,category:"food",description:"Preparing meals in a restaurant kitchen",requirements:{food:2}}],pf=[{id:"director",title:"Department Director",hourlyPay:109.8,payPerClick:109.8/60,category:"management",description:"Leading an entire department",requirements:{management:4,leadership:2}},{id:"developer",title:"Senior Developer",hourlyPay:120,payPerClick:2,category:"technical",description:"Building complex software systems",requirements:{technical:4,education:1}},{id:"financial_advisor",title:"Financial Advisor",hourlyPay:100.2,payPerClick:100.2/60,category:"financial",description:"Advising clients on financial matters",requirements:{financial:4,business:1}},{id:"physician",title:"Physician",hourlyPay:229.8,payPerClick:3.83,category:"healthcare",description:"Diagnosing and treating patients",requirements:{healthcare:5,education:2}},{id:"lawyer",title:"Attorney",hourlyPay:199.8,payPerClick:3.33,category:"legal",description:"Providing legal counsel",requirements:{legal:5,communication:3}},{id:"stockbroker",title:"Stock Broker",hourlyPay:160.2,payPerClick:2.67,category:"financial",description:"Trading stocks and securities for clients",requirements:{financial:3,management:2}},{id:"product_manager",title:"Product Manager",hourlyPay:150,payPerClick:2.5,category:"management",description:"Overseeing product development and launches",requirements:{management:3,technical:2}},{id:"executive_chef",title:"Executive Chef",hourlyPay:105,payPerClick:1.75,category:"food",description:"Running restaurant kitchens and creating menus",requirements:{food:4,management:2}}],mf=[{id:"ceo",title:"CEO",hourlyPay:499.8,payPerClick:8.33,category:"management",description:"Chief Executive Officer running an entire company",requirements:{management:8,leadership:6,business:5}},{id:"cto",title:"CTO",hourlyPay:424.8,payPerClick:7.08,category:"technical",description:"Chief Technology Officer overseeing all tech operations",requirements:{technical:8,leadership:4}},{id:"cfo",title:"CFO",hourlyPay:450,payPerClick:7.5,category:"financial",description:"Chief Financial Officer managing company finances",requirements:{financial:8,management:3}},{id:"surgeon",title:"Neurosurgeon",hourlyPay:649.8,payPerClick:10.83,category:"healthcare",description:"Performing complex brain surgeries",requirements:{healthcare:10,education:6}},{id:"judge",title:"Federal Judge",hourlyPay:400.2,payPerClick:6.67,category:"legal",description:"Presiding over important federal cases",requirements:{legal:10,ethics:5}},{id:"investment_banker",title:"Investment Banker",hourlyPay:529.8,payPerClick:8.83,category:"financial",description:"Managing high-profile financial transactions and mergers",requirements:{financial:7,management:5}},{id:"tech_entrepreneur",title:"Tech Entrepreneur",hourlyPay:450,payPerClick:7.5,category:"technical",description:"Founding and leading innovative tech companies",requirements:{technical:6,leadership:4,business:5}},{id:"hedge_fund_manager",title:"Hedge Fund Manager",hourlyPay:850.2,payPerClick:14.17,category:"financial",description:"Managing a portfolio of high-risk, high-reward investments",requirements:{financial:8,business:6}},{id:"celebrity_chef",title:"Celebrity Chef",hourlyPay:300,payPerClick:5,category:"food",description:"Running multiple restaurants and media enterprises",requirements:{food:8,communication:5,business:4}}],gf=[{id:"company_chairman",title:"Company Chairman",hourlyPay:1999.8,payPerClick:33.33,category:"management",description:"Chairman of the Board with controlling interest in multiple corporations",requirements:{management:10,leadership:8,business:7,ethics:3}},{id:"tech_mogul",title:"Tech Mogul",hourlyPay:2500.2,payPerClick:2500.2/60,category:"technical",description:"Owner of multiple technology companies and venture capital funds",requirements:{technical:10,business:8,leadership:6,education:4}},{id:"finance_tycoon",title:"Finance Tycoon",hourlyPay:3499.8,payPerClick:3499.8/60,category:"financial",description:"Controlling shareholder in major financial institutions and investment firms",requirements:{financial:10,business:8,ethics:4,management:6}},{id:"hospital_owner",title:"Healthcare Magnate",hourlyPay:2500.2,payPerClick:2500.2/60,category:"healthcare",description:"Owner of a network of hospitals and medical research facilities",requirements:{healthcare:12,education:8,management:6,ethics:5}},{id:"law_firm_founder",title:"Law Firm Founder",hourlyPay:3e3,payPerClick:50,category:"legal",description:"Founding partner of a prestigious international law firm",requirements:{legal:12,ethics:8,communication:6,business:5}},{id:"restaurant_mogul",title:"Restaurant Mogul",hourlyPay:1999.8,payPerClick:33.33,category:"food",description:"Owner of a global restaurant empire and food production companies",requirements:{food:10,business:8,creativity:6,management:7}}],yf=[{id:"savings",name:"Savings Account",cost:1e3,income:.05,description:"A basic savings account that generates small interest",image:"\ud83d\udcb0"},{id:"bonds",name:"Government Bonds",cost:5e3,income:.5,description:"Safe government bonds with steady returns",image:"\ud83d\udcdc"},{id:"stocks",name:"Stock Portfolio",cost:1e4,income:2,description:"Invest in the stock market",image:"\ud83d\udcc8"},{id:"crypto",name:"Cryptocurrency",cost:2e4,income:8,description:"High risk, high reward digital assets",image:"\u20bf"},{id:"realestate",name:"Rental Property",cost:15e4,income:25,description:"Generate income from tenants",image:"\ud83c\udfe2"},{id:"commercial",name:"Commercial Property",cost:5e5,income:80,description:"Prime commercial real estate with long-term leases",image:"\ud83c\udfec"},{id:"reit",name:"Real Estate Fund",cost:1e6,income:150,description:"A diversified real estate investment trust",image:"\ud83c\udfd7\ufe0f"},{id:"hedge",name:"Hedge Fund",cost:5e6,income:500,description:"Exclusive high-return investment vehicle",image:"\ud83d\udcb9"},{id:"venture",name:"Venture Capital Fund",cost:1e7,income:1200,description:"Invest in promising startups",image:"\ud83d\ude80"},{id:"island",name:"Private Island",cost:5e7,income:5e3,description:"Your own luxury paradise that generates tourism revenue",image:"\ud83c\udfdd\ufe0f"}],vf=[{id:"cafe",name:"Coffee Shop",baseCost:5e4,baseIncome:15,image:"\u2615",description:"A cozy spot for coffee lovers",upgrades:[{level:1,name:"Better Equipment",cost:2e4,incomeMultiplier:.3},{level:2,name:"Expanded Menu",cost:5e4,incomeMultiplier:.5},{level:3,name:"Second Location",cost:15e4,incomeMultiplier:1}]},{id:"store",name:"Convenience Store",baseCost:75e3,baseIncome:20,image:"\ud83c\udfea",description:"A local store selling everyday necessities",upgrades:[{level:1,name:"More Inventory",cost:3e4,incomeMultiplier:.4},{level:2,name:"Self-Checkout",cost:7e4,incomeMultiplier:.6},{level:3,name:"Expand to Supermarket",cost:2e5,incomeMultiplier:1.2}]},{id:"tech",name:"Tech Startup",baseCost:2e5,baseIncome:40,image:"\ud83d\udcbb",description:"A small company developing innovative software",upgrades:[{level:1,name:"Cloud Infrastructure",cost:5e4,incomeMultiplier:.5},{level:2,name:"Marketing Campaign",cost:1e5,incomeMultiplier:.8},{level:3,name:"Venture Capital",cost:3e5,incomeMultiplier:1.5}]},{id:"restaurant",name:"Restaurant",baseCost:25e4,baseIncome:50,image:"\ud83c\udf7d\ufe0f",description:"A mid-sized restaurant serving delicious food",upgrades:[{level:1,name:"Chef Upgrade",cost:8e4,incomeMultiplier:.6},{level:2,name:"Expanded Dining",cost:15e4,incomeMultiplier:.9},{level:3,name:"Franchise License",cost:4e5,incomeMultiplier:2}]},{id:"factory",name:"Small Factory",baseCost:1e6,baseIncome:200,image:"\ud83c\udfed",description:"A manufacturing facility producing goods",upgrades:[{level:1,name:"Automation",cost:25e4,incomeMultiplier:.7},{level:2,name:"Supply Chain Optimization",cost:5e5,incomeMultiplier:1},{level:3,name:"International Expansion",cost:15e5,incomeMultiplier:2.5}]},{id:"airline",name:"Regional Airline",baseCost:5e6,baseIncome:800,image:"\u2708\ufe0f",description:"A small airline operating regional flights",upgrades:[{level:1,name:"Fleet Expansion",cost:1e6,incomeMultiplier:.8},{level:2,name:"International Routes",cost:3e6,incomeMultiplier:1.2},{level:3,name:"Premium Service",cost:8e6,incomeMultiplier:2}]},{id:"tech_giant",name:"Tech Corporation",baseCost:1e7,baseIncome:1500,image:"\ud83d\udda5\ufe0f",description:"A large technology corporation with multiple product lines",upgrades:[{level:1,name:"R&D Department",cost:2e6,incomeMultiplier:.9},{level:2,name:"Global Expansion",cost:5e6,incomeMultiplier:1.5},{level:3,name:"Acquire Competitors",cost:15e6,incomeMultiplier:3}]},{id:"media",name:"Media Conglomerate",baseCost:25e6,baseIncome:3e3,image:"\ud83d\udcfa",description:"A massive media company owning TV networks, film studios, and streaming platforms",upgrades:[{level:1,name:"Streaming Platform",cost:5e6,incomeMultiplier:1},{level:2,name:"Original Content",cost:1e7,incomeMultiplier:1.8},{level:3,name:"Global Media Empire",cost:3e7,incomeMultiplier:3.5}]},{id:"space",name:"Aerospace Company",baseCost:5e7,baseIncome:6e3,image:"\ud83d\ude80",description:"A company developing cutting-edge aerospace technology and space exploration",upgrades:[{level:1,name:"Satellite Network",cost:1e7,incomeMultiplier:1.2},{level:2,name:"Space Tourism",cost:25e6,incomeMultiplier:2},{level:3,name:"Interplanetary Missions",cost:6e7,incomeMultiplier:4}]}],bf=(e,t)=>{const n="poor"===t?.2:0;return e.baseCost*(1-n)},wf=[{id:"online_course",name:"Online Course",cost:500,skill:"technical",value:1,image:"\ud83d\udcbb",description:"Learn programming or IT skills from the comfort of your home",skillMultiplier:{rich:1.5,poor:1}},{id:"management_seminar",name:"Management Seminar",cost:1e3,skill:"management",value:1,image:"\ud83d\udcca",description:"Learn essential management skills in this intensive seminar",skillMultiplier:{rich:1.5,poor:1}},{id:"financial_workshop",name:"Financial Workshop",cost:800,skill:"financial",value:1,image:"\ud83d\udcb9",description:"Learn about investments, accounting, and financial planning",skillMultiplier:{rich:1.5,poor:1}},{id:"communication_course",name:"Communication Workshop",cost:600,skill:"communication",value:1,image:"\ud83d\udde3\ufe0f",description:"Improve your communication and negotiation skills",skillMultiplier:{rich:1.5,poor:1}},{id:"legal_seminar",name:"Legal Basics Seminar",cost:1200,skill:"legal",value:1,image:"\u2696\ufe0f",description:"Learn the fundamentals of business and personal law",skillMultiplier:{rich:1.5,poor:1}},{id:"healthcare_course",name:"Healthcare Fundamentals",cost:1500,skill:"healthcare",value:1,image:"\ud83c\udfe5",description:"Learn basic healthcare and medical knowledge",skillMultiplier:{rich:1.5,poor:1}},{id:"culinary_workshop",name:"Culinary Workshop",cost:700,skill:"food",value:1,image:"\ud83c\udf73",description:"Learn essential cooking techniques and food preparation",skillMultiplier:{rich:1.5,poor:1}},{id:"leadership_retreat",name:"Leadership Retreat",cost:2e3,skill:"leadership",value:1,image:"\ud83d\udc51",description:"Develop your leadership and team-building abilities",skillMultiplier:{rich:1.5,poor:1}},{id:"ethics_course",name:"Ethics Course",cost:900,skill:"ethics",value:1,image:"\ud83e\udde0",description:"Learn about business ethics and moral decision making",skillMultiplier:{rich:1.5,poor:1}},{id:"business_101",name:"Business 101",cost:1200,skill:"business",value:1,image:"\ud83d\udcc8",description:"Learn the basics of running a business",skillMultiplier:{rich:1.5,poor:1}},{id:"creativity_workshop",name:"Creativity Workshop",cost:800,skill:"creativity",value:1,image:"\ud83c\udfa8",description:"Develop your creative thinking and problem-solving skills",skillMultiplier:{rich:1.5,poor:1}},{id:"community_college",name:"Community College",cost:5e3,skill:"education",value:2,image:"\ud83c\udfeb",description:"Get an associate degree or certification in your field of choice",skillMultiplier:{rich:1.5,poor:1}},{id:"university",name:"University",cost:25e3,skill:"education",value:4,image:"\ud83c\udf93",description:"Obtain a bachelor's degree in your field of choice",skillMultiplier:{rich:1.5,poor:1}},{id:"graduate_school",name:"Graduate School",cost:5e4,skill:"education",value:5,image:"\ud83d\udcda",description:"Get an advanced degree for high-level positions",skillMultiplier:{rich:1.5,poor:1}},{id:"executive_mba",name:"Executive MBA",cost:1e5,skill:"business",value:5,image:"\ud83d\udcbc",description:"Prestigious business degree for executives",skillMultiplier:{rich:1.5,poor:1}},{id:"medical_school",name:"Medical School",cost:2e5,skill:"healthcare",value:8,image:"\ud83e\ude7a",description:"Comprehensive medical education",skillMultiplier:{rich:1.5,poor:1}},{id:"law_school",name:"Law School",cost:15e4,skill:"legal",value:8,image:"\u2696\ufe0f",description:"Professional legal education",skillMultiplier:{rich:1.5,poor:1}},{id:"culinary_school",name:"Culinary School",cost:8e4,skill:"food",value:7,image:"\ud83d\udc68\u200d\ud83c\udf73",description:"Professional culinary education and technique training",skillMultiplier:{rich:1.5,poor:1}},{id:"phd_program",name:"PhD Program",cost:12e4,skill:"education",value:8,image:"\ud83c\udf93",description:"The highest level of academic achievement",skillMultiplier:{rich:1.5,poor:1}},{id:"leadership_institute",name:"Leadership Institute",cost:9e4,skill:"leadership",value:6,image:"\ud83d\udc54",description:"Elite training for executive leadership positions",skillMultiplier:{rich:1.5,poor:1}}],xf=[{id:"bicycle",name:"Bicycle",cost:200,image:"\ud83d\udeb2",description:"A basic means of transportation - enables auto-clicking at 1 click/sec",clickSpeedMultiplier:1},{id:"bus_pass",name:"Bus Pass",cost:300,image:"\ud83d\ude8c",description:"Monthly public transportation pass - 1.5 clicks/sec",clickSpeedMultiplier:1.5},{id:"usedcar_basic",name:"Basic Used Car",cost:5e3,image:"\ud83d\ude97",description:"An affordable vehicle - 2 clicks/sec",clickSpeedMultiplier:2},{id:"usedcar_mid",name:"Mid-Range Used Car",cost:15e3,image:"\ud83d\ude99",description:"A reliable used vehicle - 3 clicks/sec",clickSpeedMultiplier:3},{id:"newcar_economy",name:"New Economy Car",cost:3e4,image:"\ud83d\ude98",description:"A brand new basic vehicle - 4 clicks/sec",clickSpeedMultiplier:4},{id:"newcar_luxury",name:"New Luxury Car",cost:8e4,image:"\ud83c\udfce\ufe0f",description:"A premium new vehicle - 5 clicks/sec",clickSpeedMultiplier:5},{id:"luxury_car",name:"High-End Luxury Car",cost:2e5,image:"\ud83c\udfce\ufe0f",description:"A statement of your success - 7 clicks/sec",clickSpeedMultiplier:7},{id:"supercar",name:"Supercar",cost:5e5,image:"\ud83c\udfce\ufe0f",description:"An ultra-high performance vehicle - 10 clicks/sec",clickSpeedMultiplier:10},{id:"hypercar",name:"Hypercar",cost:2e6,image:"\ud83c\udfce\ufe0f",description:"The pinnacle of automotive engineering - 15 clicks/sec",clickSpeedMultiplier:15},{id:"helicopter",name:"Helicopter",cost:5e6,image:"\ud83d\ude81",description:"Beat the traffic with your personal helicopter - 20 clicks/sec",clickSpeedMultiplier:20},{id:"private_jet",name:"Private Jet",cost:2e7,image:"\u2708\ufe0f",description:"Travel anywhere in style and comfort - 30 clicks/sec",clickSpeedMultiplier:30}],kf=[{id:"room",name:"Shared Room",cost:1e3,image:"\ud83d\udecf\ufe0f",description:"A room in a shared apartment"},{id:"studio",name:"Studio Apartment",cost:5e3,image:"\ud83c\udfe2",description:"A small studio apartment"},{id:"apartment",name:"One-Bedroom Apartment",cost:15e3,image:"\ud83c\udfe2",description:"Your own small apartment"},{id:"condo",name:"Condominium",cost:5e4,image:"\ud83c\udfd9\ufe0f",description:"A modern condominium with amenities"},{id:"townhouse",name:"Townhouse",cost:15e4,image:"\ud83c\udfe0",description:"A modest townhouse"},{id:"house",name:"Single Family Home",cost:35e4,image:"\ud83c\udfe0",description:"A nice house in the suburbs"},{id:"luxury_condo",name:"Luxury Condominium",cost:8e5,image:"\ud83c\udfd9\ufe0f",description:"A high-end condo in a prime location"},{id:"luxury_house",name:"Luxury Home",cost:15e5,image:"\ud83c\udfe1",description:"A spacious luxury home"},{id:"mansion",name:"Mansion",cost:5e6,image:"\ud83c\udff0",description:"A luxurious mansion with extensive grounds"},{id:"estate",name:"Private Estate",cost:15e6,image:"\ud83c\udff0",description:"A vast estate with multiple buildings"},{id:"compound",name:"Luxury Compound",cost:5e7,image:"\ud83c\udfef",description:"An exclusive compound with ultimate privacy and security"}],Sf=()=>{var e;const{gameState:t,gameDispatch:n,jobExperienceNeededForLevel:i,getJobTitleForLevel:s}=lf(),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[w,x]=(0,r.useState)(!1),[k,S]=(0,r.useState)(Date.now()),[N,E]=(0,r.useState)(!1),_=r.useRef(1),[C,T]=(0,r.useState)({}),[j,I]=(0,r.useState)(30),P=(0,r.useCallback)(((e,t)=>{if(!e||!df[e])return 0;return df[e].reduce(((e,n)=>e+(t[n]||0)),0)}),[]),A=(0,r.useCallback)((e=>e.education&&e.education>=4),[]),D=((0,r.useCallback)((e=>!!(t&&t.playerStatus&&t.playerStatus.job)&&e.category===t.playerStatus.job.category),[t]),(e,t)=>e*(1+.05*t)),O=(e,n)=>!(!t||!t.skills)&&t.skills[e]>=n,R=e=>e.category||"general",L=(e,t)=>{const n={general:"\ud83d\udcbc",labor:"\ud83d\udd28",service:"\ud83d\udece\ufe0f",office:"\ud83d\udda5\ufe0f",creative:"\ud83c\udfa8",technology:"\ud83d\udcbb",finance:"\ud83d\udcb0",healthcare:"\u2695\ufe0f",education:"\ud83c\udf93",management:"\ud83d\udcca",executive:"\ud83d\udc54",owner:"\ud83c\udfe2"};return n[t]||n[e]||"\ud83d\udcbc"},M=()=>{f(!1),n({type:"DISMISS_WORK_EVENT"})},F=(0,r.useCallback)((()=>{var e;if(!t||!t.skills)return[];let n=[];if(n=1!==t.generation&&t.playerStatus.background?"rich"===t.playerStatus.background?[...hf.rich.map((e=>({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})))]:[...hf.poor.map((e=>({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})))]:[...hf.poor.map((e=>({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick}))),...hf.rich.map((e=>({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})))],null!==(e=t.playerStatus.job)&&void 0!==e&&e.readyForPromotion){const e=t.playerStatus.job,r=10*Math.ceil(e.level/10),i=s(e.category,r),a=e.hourlyPay||60*e.payPerClick||300,o={id:`promotion-${Date.now()}`,title:i,category:e.category,hourlyPay:D(a,r),payPerClick:D(a,r)/60,requirements:{[e.category]:.2*e.level},description:`A promotion opportunity at ${i} position. This is the next step in your career path.`,isPromotion:!0,level:r};n.unshift(o)}return ff.forEach((e=>{let r=!0;for(const[n,i]of Object.entries(e.requirements))if(!t.skills[n]||t.skills[n]<i){r=!1;break}if(!r&&e.category){P(e.category,t.skills)>=2&&(r=!0)}r&&n.push({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})})),A(t.skills)&&(pf.forEach((e=>{let r=!0;for(const[n,i]of Object.entries(e.requirements))if(!t.skills[n]||t.skills[n]<i){r=!1;break}if(!r&&Object.keys(e.requirements).length>=2){const n=Object.values(e.requirements).reduce(((e,t)=>e+t),0),i=Object.entries(e.requirements).reduce(((e,n)=>{let[r,i]=n;return e+(t.skills[r]||0)}),0);i>=.75*n&&(r=!0)}r&&n.push({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})})),mf.forEach((e=>{let r=!0;for(const[n,i]of Object.entries(e.requirements))if(!t.skills[n]||t.skills[n]<i){r=!1;break}r&&n.push({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})})),gf.forEach((e=>{let r=!0;for(const[n,i]of Object.entries(e.requirements))if(!t.skills[n]||t.skills[n]<i){r=!1;break}r&&n.push({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})}))),n}),[t,P,A,s]);if((0,r.useEffect)((()=>{var e;t&&t.playerStatus&&(null!==(e=t.playerStatus.job)&&void 0!==e&&e.readyForPromotion?x(!0):x(!1))}),[t]),(0,r.useEffect)((()=>{if(!t||!t.skills)return;const e=F();o(e)}),[F,t]),(0,r.useEffect)((()=>{if(!t||!t.playerStatus||!t.playerStatus.job)return;const e=t.playerStatus.job.level,n=_.current;e>n&&(b({oldLevel:n,newLevel:e,job:t.playerStatus.job.title}),y(!0),setTimeout((()=>{y(!1)}),5e3)),_.current=e}),[t]),(0,r.useEffect)((()=>{if(!t)return;const e=setInterval((()=>{I((e=>{if(e<=1){const e=F();return o(e),S(Date.now()),E(!0),setTimeout((()=>{E(!1)}),500),30}return e-1})),T((e=>{const t=Date.now(),n=Object.keys(e).filter((n=>e[n]<t));if(n.length>0){const t={...e};return n.forEach((e=>{delete t[e]})),t}return e}))}),1e3);return()=>clearInterval(e)}),[t,F]),!t||!t.skills)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const U=t,V=e=>{var r;if(C[e.id])return;if(l)return;c(e);const i=(e=>{if(!t||!t.skills)return{qualified:!1,percentQualified:0,missingSkills:[]};const n=[];let r=0,i=0;for(const[s,a]of Object.entries(e.requirements||{}))r+=a,i+=Math.min(t.skills[s]||0,a),(!t.skills[s]||t.skills[s]<a)&&n.push(s);return{qualified:0===n.length,percentQualified:r>0?i/r*100:100,missingSkills:n}})(e),s=i.qualified,a=e.isPromotion;let o=s?.85:i.percentQualified/100*.5;e.level&&e.level>=50&&(o*=.85),a&&null!==(r=U.playerStatus.job)&&void 0!==r&&r.readyForPromotion&&(o=1);const u=Math.random()<=o;setTimeout((()=>{u?a?(n({type:"APPLY_FOR_PROMOTION",payload:{job:e}}),d({success:!0,message:`Congratulations! You've been promoted to ${e.title}!`,job:e})):(n({type:"SET_JOB",payload:{id:e.id,title:e.title,hourlyPay:e.hourlyPay,payPerClick:e.payPerClick,category:e.category,level:e.level||1,image:e.image,baseTitle:e.title}}),d({success:!0,message:`Congratulations! You got the ${e.title} job!`,job:e})):d({success:!1,message:`Sorry, your application for ${e.title} was rejected.${i.missingSkills.length>0?" You need more experience in "+i.missingSkills.join(", ")+".":""}`,job:e});const t=Date.now()+3e4;T((n=>({...n,[e.id]:t}))),c(null)}),2e3)};return(0,Wh.jsxs)("div",{className:"jobs-container",children:[(0,Wh.jsx)("h2",{children:"Jobs & Career"}),(0,Wh.jsx)("div",{className:"jobs-info-panel",children:(0,Wh.jsx)("p",{className:"wage-info-note",children:"Wages shown are hourly rates. Each click represents one minute of work and earns 1/60th of the hourly wage."})}),w&&(null===(e=U.playerStatus.job)||void 0===e?void 0:e.readyForPromotion)&&(0,Wh.jsxs)("div",{className:"promotion-banner",children:[(0,Wh.jsx)("div",{className:"promotion-icon",children:"\ud83c\udf89"}),(0,Wh.jsxs)("div",{className:"promotion-message",children:[(0,Wh.jsx)("h4",{children:"Promotion Available!"}),(0,Wh.jsxs)("p",{children:["You've reached level ",U.playerStatus.job.level," and qualify for a promotion to a higher position."]})]})]}),U.workEvents.pendingEvent&&U.workEvents.notificationVisible&&(0,Wh.jsxs)("div",{className:"work-event-notification",onClick:()=>{t.workEvents.pendingEvent&&f(!0)},children:[(0,Wh.jsx)("div",{className:"notification-icon",children:"!"}),(0,Wh.jsxs)("div",{className:"notification-text",children:["Work event: ",U.workEvents.pendingEvent.title]})]}),g&&v&&(0,Wh.jsxs)("div",{className:"level-up-notification",children:[(0,Wh.jsx)("div",{className:"level-up-icon",children:"\ud83c\udf89"}),(0,Wh.jsxs)("div",{className:"level-up-text",children:[(0,Wh.jsx)("div",{className:"level-up-title",children:"Promotion!"}),(0,Wh.jsxs)("div",{className:"level-up-details",children:["You've been promoted to Level ",v.newLevel,": ",v.title]})]})]}),p&&(0,Wh.jsxs)("div",{className:"skill-gain-animation",style:{left:`${p.x}px`,top:`${p.y}px`},children:[p.skill," ",p.amount]}),h&&U.workEvents.pendingEvent&&(0,Wh.jsx)("div",{className:"modal-overlay",onClick:M,children:(0,Wh.jsxs)("div",{className:"event-modal",onClick:e=>e.stopPropagation(),children:[(0,Wh.jsx)("h3",{children:U.workEvents.pendingEvent.title}),(0,Wh.jsx)("p",{className:"event-description",children:U.workEvents.pendingEvent.description}),(0,Wh.jsx)("div",{className:"event-choices",children:U.workEvents.pendingEvent.choices.map(((e,r)=>(0,Wh.jsx)("button",{className:"event-choice-button",onClick:e=>((e,r)=>{if(r.stopPropagation(),!t.workEvents.pendingEvent)return;t.workEvents.pendingEvent.choices[e],n({type:"RESOLVE_WORK_EVENT",payload:{choiceIndex:e}}),f(!1)})(r,e),children:e.text},r)))}),(0,Wh.jsx)("button",{className:"dismiss-event-button",onClick:M,children:"Ignore this situation"})]})}),U.playerStatus.job&&(0,Wh.jsxs)("div",{className:"current-job-banner",children:[(0,Wh.jsxs)("div",{className:"current-job-header",children:[(0,Wh.jsx)("div",{className:"job-icon",children:U.playerStatus.job.image||L(R(U.playerStatus.job),U.playerStatus.job.category)}),(0,Wh.jsxs)("div",{className:"job-title",children:[(0,Wh.jsxs)("div",{className:"title-level-container",children:[(0,Wh.jsx)("h3",{children:U.playerStatus.job.title}),U.playerStatus.job.level&&(0,Wh.jsxs)("span",{className:"level-badge level-beginner",children:["Level ",U.playerStatus.job.level]})]}),(0,Wh.jsx)("div",{className:"job-category",children:U.playerStatus.job.category&&(0,Wh.jsx)("span",{className:`category-badge category-${U.playerStatus.job.category.toLowerCase()}`,children:U.playerStatus.job.category.charAt(0).toUpperCase()+U.playerStatus.job.category.slice(1)})})]}),(0,Wh.jsxs)("div",{className:"job-pay",children:["$",(U.playerStatus.job.hourlyPay||60*U.playerStatus.job.payPerClick||0).toFixed(2),"/hr"]})]}),(0,Wh.jsxs)("p",{children:["Each click earns $",(U.playerStatus.job.payPerClick||0).toFixed(2)," (representing one minute of work)"]}),(0,Wh.jsxs)("div",{className:"job-level-progress",children:[(0,Wh.jsxs)("div",{className:"level-display",children:[(0,Wh.jsxs)("span",{className:"current-job-level",children:["Level ",U.playerStatus.job.level]}),U.playerStatus.job.level<500&&(0,Wh.jsxs)("span",{className:"next-job-level",children:["Level ",U.playerStatus.job.level+1]})]}),(0,Wh.jsx)("div",{className:"level-progress-bar",children:(0,Wh.jsx)("div",{className:"level-progress-filled",style:{width:U.playerStatus.jobExperience/i(U.playerStatus.job.level)*100+"%"}})}),(0,Wh.jsxs)("div",{className:"level-experience-text",children:[(0,Wh.jsxs)("span",{children:["XP: ",Math.round(U.playerStatus.jobExperience)," / ",i(U.playerStatus.job.level)]}),U.playerStatus.job.level<500&&(0,Wh.jsxs)("span",{children:["Next promotion at level ",10*Math.ceil(U.playerStatus.job.level/10)]})]})]})]}),U.playerStatus.job&&"management"===U.playerStatus.job.category&&(0,Wh.jsxs)("div",{className:"management-progression",children:[(0,Wh.jsx)("h4",{children:"Management Class Progression"}),(0,Wh.jsxs)("div",{className:"progression-info",children:[(0,Wh.jsxs)("div",{className:"current-level",children:[(0,Wh.jsxs)("span",{className:"level-number",children:["Level ",U.playerStatus.job.level]}),(0,Wh.jsx)("span",{className:"class-title",children:U.playerStatus.job.title})]}),U.playerStatus.job.level<300&&(0,Wh.jsxs)("div",{className:"next-promotion",children:[(0,Wh.jsx)("div",{className:"promotion-bar",children:(0,Wh.jsx)("div",{className:"promotion-progress",style:{width:U.playerStatus.jobExperience/i(U.playerStatus.job.level)*100+"%"}})}),(0,Wh.jsxs)("div",{className:"promotion-info",children:[(0,Wh.jsxs)("span",{className:"next-level",children:["Level ",U.playerStatus.job.level+10]}),(0,Wh.jsx)("span",{className:"next-title",children:(()=>{const e=U.playerStatus.job.level+10;return s("management",e)})()})]})]})]}),(0,Wh.jsxs)("div",{className:"management-tiers",children:[(0,Wh.jsxs)("div",{className:"tier "+(U.playerStatus.job.level<=100?"current":"completed"),children:[(0,Wh.jsx)("h5",{children:"Entry Level (1-100)"}),(0,Wh.jsx)("p",{children:"Progress from Associate to Junior Supervisor"})]}),(0,Wh.jsxs)("div",{className:"tier "+(U.playerStatus.job.level>100&&U.playerStatus.job.level<=200?"current":U.playerStatus.job.level>200?"completed":""),children:[(0,Wh.jsx)("h5",{children:"Tier 1: Mid-Management (101-200)"}),(0,Wh.jsx)("p",{children:"Progress from Supervisor to Regional Manager"}),U.playerStatus.job.level<=100&&!A(U.skills)&&(0,Wh.jsx)("div",{className:"tier-requirement",children:(0,Wh.jsx)("span",{children:"Requires Bachelor's Degree"})})]}),(0,Wh.jsxs)("div",{className:"tier "+(U.playerStatus.job.level>200&&U.playerStatus.job.level<=400?"current":U.playerStatus.job.level>400?"completed":""),children:[(0,Wh.jsx)("h5",{children:"Tier 2: Upper Management (201-400)"}),(0,Wh.jsx)("p",{children:"Progress from Director to Managing Partner"}),U.playerStatus.job.level<=200&&!A(U.skills)&&(0,Wh.jsx)("div",{className:"tier-requirement",children:(0,Wh.jsx)("span",{children:"Requires Master's Degree"})})]}),(0,Wh.jsxs)("div",{className:"tier "+(U.playerStatus.job.level>400?"current":""),children:[(0,Wh.jsx)("h5",{children:"Tier 3: Corporate Elite (401-500)"}),(0,Wh.jsx)("p",{children:"Progress from Entrepreneur to Tycoon"}),U.playerStatus.job.level<=400&&(0,Wh.jsx)("div",{className:"tier-requirement",children:(0,Wh.jsx)("span",{children:"Requires Exceptional Performance"})})]})]})]}),(0,Wh.jsxs)("div",{className:"section-header",children:[(0,Wh.jsx)("h3",{children:"Available Jobs"}),(0,Wh.jsx)("div",{className:"job-refresh-indicator",onClick:()=>{if(N)return;E(!0);const e=F();o(e),S(Date.now()),I(30),setTimeout((()=>{E(!1)}),500)},style:{cursor:"pointer"},children:N?(0,Wh.jsx)("span",{className:"refresh-icon",children:"\u27f3"}):(0,Wh.jsxs)("span",{children:["Refreshing in ",(0,Wh.jsx)("span",{className:"refresh-timer",children:j}),"s"]})})]}),(0,Wh.jsx)("div",{className:"job-listings "+(N?"refreshing-jobs":""),children:a.length>0?a.map(((e,t)=>{const n=l===e.id,r=u&&u.jobId===e.id?u:null;return(0,Wh.jsxs)("div",{className:`job-listing ${n?"pending":""} ${e.isPromotion?"promotion-job":""}`,children:[e.isPromotion&&(0,Wh.jsx)("div",{className:"level-badge level-promotion",children:"PROMOTION"}),(0,Wh.jsxs)("div",{className:"job-header",children:[(0,Wh.jsx)("div",{className:"job-icon",children:L(R(e),e.category)}),(0,Wh.jsxs)("div",{className:"job-title",children:[(0,Wh.jsxs)("div",{className:"title-level-container",children:[(0,Wh.jsx)("h3",{children:e.title}),e.level&&(0,Wh.jsxs)("span",{className:"level-badge "+(e.isPromotion?"level-promotion":"level-beginner"),children:["Level ",e.level]})]}),(0,Wh.jsx)("div",{className:"job-category",children:e.category&&(0,Wh.jsx)("span",{className:`category-badge category-${e.category.toLowerCase()}`,children:e.category.charAt(0).toUpperCase()+e.category.slice(1)})})]}),(0,Wh.jsxs)("div",{className:"job-pay",children:["$",(e.hourlyPay||60*e.payPerClick||0).toFixed(2),"/hr"]})]}),(0,Wh.jsx)("div",{className:"job-description",children:e.description}),(0,Wh.jsx)("div",{className:"job-requirements",children:e.isPromotion?(0,Wh.jsx)("div",{className:"promotion-requirements",children:(0,Wh.jsx)("p",{children:"This promotion is available because you've reached the next milestone in your current career path."})}):(0,Wh.jsx)("ul",{children:Object.entries(e.requirements||{}).map((e=>{let[t,n]=e;return(0,Wh.jsxs)("li",{className:O(t,n)?"met":"not-met",children:[t,": ",Math.round(n)," ",O(t,n)?"\u2713":"\u2717"]},t)}))})}),r&&(0,Wh.jsx)("div",{className:"application-result "+(r.success?"success":"failure"),children:r.message}),(0,Wh.jsx)("div",{className:"job-action-buttons",children:n?(0,Wh.jsx)(Wh.Fragment,{children:(0,Wh.jsxs)("div",{className:"application-pending",children:[(0,Wh.jsx)("div",{className:"loading-bar"}),(0,Wh.jsx)("div",{className:"pending-text",children:"Application in progress..."}),(0,Wh.jsx)("button",{className:"cancel-application-button",onClick:t=>{var n;t.stopPropagation(),n=e.id,l===n&&c(null)},children:"Cancel Application"})]})}):(0,Wh.jsx)("button",{className:"apply-job-button",onClick:t=>{t.stopPropagation(),(e=>{l||V(e)})(e)},disabled:null!==l,children:e.isPromotion?"Apply for Promotion":"Apply for Job"})})]},e.id||t)})):(0,Wh.jsx)("p",{children:"No jobs available."})})]})},Nf=()=>{const{gameState:e,gameDispatch:t}=lf(),[n,i]=(0,r.useState)("assets"),[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=(0,r.useRef)(null),d=(0,r.useRef)(null),[h,f]=(0,r.useState)({}),[p,m]=(0,r.useState)({}),[g,y]=(0,r.useState)("priceAsc"),[v,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)({minPrice:0,maxPrice:1e9,minBeds:0,propertyTypes:[]});if((0,r.useEffect)((()=>()=>{c.current&&clearTimeout(c.current),d.current&&clearTimeout(d.current)}),[]),!e||!e.playerStatus)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const k=e,{money:S}=k,N=e=>{i(e)},E=(e,t)=>{d.current&&(clearTimeout(d.current),d.current=null),a({item:e,type:t})},_=()=>{a(null)},C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.stopPropagation(),n?(n.includes("bicycle")||n.includes("bus")||n.includes("car")||n.includes("helicopter")||n.includes("jet")?(e=>{m({...p,[e]:!0}),setTimeout((()=>{m({...p,[e]:!1})}),700)})(n):(e=>{f({...h,[e]:!0}),setTimeout((()=>{f({...h,[e]:!1})}),700)})(n),setTimeout((()=>{t()}),600)):t()},T=(e,t,n)=>{"BUTTON"!==n.target.tagName&&(u.current={item:e,type:t},c.current=setTimeout((()=>{l(!0),E(e,t)}),500))},j=e=>{c.current&&(clearTimeout(c.current),c.current=null),o&&(_(),l(!1)),!o&&"BUTTON"!==e.target.tagName&&u.current&&E(u.current.item,u.current.type),u.current=null},I=e=>({room:{icon:"\ud83d\udecf\ufe0f",color:"bg-fuchsia-900"},studio:{icon:"\ud83c\udfe0",color:"bg-teal-900"},apartment:{icon:"\ud83c\udfe2",color:"bg-cyan-900"},condo:{icon:"\ud83c\udfd9\ufe0f",color:"bg-blue-900"},townhouse:{icon:"\ud83c\udfd8\ufe0f",color:"bg-emerald-900"},house:{icon:"\ud83c\udfe1",color:"bg-green-900"},luxury_condo:{icon:"\u26f2",color:"bg-indigo-900"},luxury_house:{icon:"\ud83c\udff0",color:"bg-violet-900"},mansion:{icon:"\ud83c\udfdb\ufe0f",color:"bg-purple-900"},estate:{icon:"\ud83c\udf06",color:"bg-slate-900"},compound:{icon:"\ud83c\udf03",color:"bg-zinc-900"}}[e]||{icon:"\ud83c\udfe0",color:"bg-teal-900"}),P=e=>({bicycle:{icon:"\ud83d\udeb2",color:"bg-teal-900"},bus_pass:{icon:"\ud83d\ude8c",color:"bg-yellow-900"},usedcar_basic:{icon:"\ud83d\ude97",color:"bg-blue-900"},usedcar_mid:{icon:"\ud83d\ude99",color:"bg-sky-900"},newcar_economy:{icon:"\ud83d\ude98",color:"bg-green-900"},newcar_luxury:{icon:"\ud83c\udfce\ufe0f",color:"bg-red-900"},luxury_car:{icon:"\ud83d\ude93",color:"bg-gray-900"},supercar:{icon:"\ud83c\udfce\ufe0f",color:"bg-orange-900"},hypercar:{icon:"\u26a1",color:"bg-amber-900"},helicopter:{icon:"\ud83d\ude81",color:"bg-emerald-900"},private_jet:{icon:"\u2708\ufe0f",color:"bg-blue-900"}}[e]||{icon:"\ud83d\ude97",color:"bg-orange-900"});return(0,Wh.jsxs)("div",{className:"max-w-6xl mx-auto p-2 bg-white rounded-lg shadow-lg",children:[(0,Wh.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,Wh.jsxs)("button",{className:"flex items-center py-3 px-6 font-medium text-lg transition-colors border-b-2 "+("assets"===n?"text-indigo-600 border-indigo-600":"text-gray-500 border-transparent hover:text-indigo-600"),onClick:()=>N("assets"),children:[(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83c\udfe6"}),"Banking"]}),(0,Wh.jsxs)("button",{className:"flex items-center py-3 px-6 font-medium text-lg transition-colors border-b-2 "+("housing"===n?"text-teal-600 border-teal-600":"text-gray-500 border-transparent hover:text-teal-600"),onClick:()=>N("housing"),children:[(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83c\udfe0"}),"Housing"]}),(0,Wh.jsxs)("button",{className:"flex items-center py-3 px-6 font-medium text-lg transition-colors border-b-2 "+("transportation"===n?"text-orange-600 border-orange-600":"text-gray-500 border-transparent hover:text-orange-600"),onClick:()=>N("transportation"),children:[(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83d\ude97"}),"Transportation"]})]}),(0,Wh.jsxs)("div",{children:["assets"===n&&(0,Wh.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[(0,Wh.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-200 pb-4",children:[(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"text-3xl mr-3",children:"\ud83c\udfe6"}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Banking"}),(0,Wh.jsx)("p",{className:"text-gray-500 text-sm",children:"Manage your personal finances"})]})]}),(0,Wh.jsxs)("div",{className:"bg-blue-50 px-4 py-2 rounded-lg",children:[(0,Wh.jsx)("p",{className:"text-sm text-gray-600",children:"Available Funds"}),(0,Wh.jsxs)("p",{className:"text-xl font-bold text-blue-800",children:["$",S.toLocaleString()]})]})]}),(0,Wh.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,Wh.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-700 rounded-xl p-5 text-white shadow-md",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h4",{className:"text-sm font-medium opacity-80",children:"CHECKING ACCOUNT"}),(0,Wh.jsxs)("p",{className:"text-2xl font-bold",children:["$",S.toLocaleString()]})]}),(0,Wh.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb3"})]}),(0,Wh.jsx)("div",{className:"text-sm mb-4 opacity-80",children:"Available for daily transactions"}),(0,Wh.jsx)("div",{className:"mt-auto pt-2 border-t border-white border-opacity-20",children:(0,Wh.jsxs)("p",{className:"text-xs opacity-70",children:["Account Number: **** **** **** ",Math.floor(1e3+9e3*Math.random())]})})]}),(0,Wh.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-xl p-5 text-white shadow-md",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h4",{className:"text-sm font-medium opacity-80",children:"SAVINGS ACCOUNT"}),(0,Wh.jsxs)("p",{className:"text-2xl font-bold",children:["$",k.assets.filter((e=>e.id.includes("savings"))).reduce(((e,t)=>e+t.cost),0).toLocaleString()]})]}),(0,Wh.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"})]}),(0,Wh.jsxs)("div",{className:"text-sm mb-4 opacity-80",children:["Earning ",k.assets.some((e=>e.id.includes("savings")))?"0.5%":"0%"," APY"]}),(0,Wh.jsx)("div",{className:"mt-auto pt-2 border-t border-white border-opacity-20",children:(0,Wh.jsx)("p",{className:"text-xs opacity-70",children:"Grows slowly but steadily"})})]})]}),(0,Wh.jsxs)("div",{className:"mb-8",children:[(0,Wh.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,Wh.jsx)("span",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mr-2 text-xs",children:(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),"Banking Products"]}),(0,Wh.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[yf.filter((e=>"savings"===e.id)).map((e=>{const n=S>=e.cost,r=k.assets.some((t=>t.id.split("-")[0]===e.id));return(0,Wh.jsx)("div",{className:"relative rounded-xl shadow-sm overflow-hidden transition-transform hover:shadow-md hover:scale-102 border "+(r?"bg-green-50 border-green-200":"bg-white border-gray-200"),onClick:()=>E(e,"asset"),onTouchStart:t=>T(e,"asset",t),onTouchEnd:j,onTouchCancel:j,children:(0,Wh.jsxs)("div",{className:"p-4",children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Wh.jsx)("div",{className:"w-10 h-10 rounded-full mr-3 flex items-center justify-center bg-blue-100 text-blue-700",children:(0,Wh.jsx)("span",{className:"text-xl",children:"\ud83d\udcb0"})}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),(0,Wh.jsx)("p",{className:"text-xs text-gray-500",children:"Safe, steady returns"})]})]}),(0,Wh.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,Wh.jsx)("span",{className:"text-xs text-gray-500",children:"Minimum Deposit"}),(0,Wh.jsxs)("span",{className:"text-sm font-medium text-gray-800",children:["$",e.cost.toLocaleString()]})]}),(0,Wh.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,Wh.jsx)("span",{className:"text-xs text-gray-500",children:"Interest Rate"}),(0,Wh.jsx)("span",{className:"text-sm font-medium text-green-600",children:"0.5% APY"})]}),(0,Wh.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Wh.jsx)("span",{className:"text-xs text-gray-500",children:"Per Second"}),(0,Wh.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["$",e.income.toFixed(2),"/sec"]})]})]}),(0,Wh.jsx)("button",{className:"w-full py-2.5 px-4 rounded-lg font-medium transition-colors text-center shadow-sm "+(r?"bg-green-500 text-white cursor-default":n?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),onClick:n=>C(n,(()=>(e=>{k.assets.some((t=>t.id.split("-")[0]===e.id))||t({type:"BUY_ASSET",payload:{...e,id:`${e.id}-${Date.now()}`,purchasedAt:Date.now()}})})(e)),e.id),disabled:!n||r,children:r?"Account Active":n?"Open Account":"Insufficient Funds"})]})},e.id)})),(0,Wh.jsx)("div",{className:"relative rounded-xl shadow-sm overflow-hidden transition-transform hover:shadow-md hover:scale-102 border bg-white border-gray-200",children:(0,Wh.jsxs)("div",{className:"p-4",children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Wh.jsx)("div",{className:"w-10 h-10 rounded-full mr-3 flex items-center justify-center bg-purple-100 text-purple-700",children:(0,Wh.jsx)("span",{className:"text-xl",children:"\ud83d\udcb3"})}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h4",{className:"font-semibold text-gray-800",children:"Work Tap Card"}),(0,Wh.jsx)("p",{className:"text-xs text-gray-500",children:"Customize your work experience"})]})]}),(0,Wh.jsxs)("div",{className:"mb-4",children:[(0,Wh.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl p-4 shadow-sm mb-3 text-white",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-5",children:[(0,Wh.jsx)("div",{className:"text-xs opacity-80",children:"Business Tycoon Bank"}),(0,Wh.jsx)("div",{className:"text-lg",children:"\ud83d\udcb0"})]}),(0,Wh.jsxs)("div",{className:"mb-5",children:[(0,Wh.jsx)("div",{className:"inline-block w-10 h-6 bg-gold bg-opacity-50 rounded mr-1"}),(0,Wh.jsx)("div",{className:"inline-block w-10 h-6 bg-gold bg-opacity-50 rounded mr-1"}),(0,Wh.jsx)("div",{className:"inline-block w-10 h-6 bg-gold bg-opacity-50 rounded mr-1"}),(0,Wh.jsx)("div",{className:"inline-block w-10 h-6 bg-gold bg-opacity-50 rounded"})]}),(0,Wh.jsx)("div",{className:"text-xs mb-1 opacity-80",children:"CARD HOLDER"}),(0,Wh.jsx)("div",{className:"font-medium mb-2",children:"BUSINESS TYCOON"})]}),(0,Wh.jsx)("div",{className:"text-sm text-gray-600 mb-3",children:"Your Work Tap Card allows you to earn money faster in the Work tab. Customize it with different designs and bonuses!"})]}),(0,Wh.jsx)("button",{className:"w-full py-2.5 px-4 rounded-lg font-medium transition-colors text-center shadow-sm bg-purple-600 hover:bg-purple-700 text-white",onClick:()=>E({id:"tap_card",name:"Work Tap Card",description:"Customize your card to enhance your work experience. Different designs give you different bonuses!",image:"\ud83d\udcb3"},"tap_card"),children:"Customize Card"})]})})]})]}),(0,Wh.jsxs)("div",{className:"mt-8",children:[(0,Wh.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,Wh.jsx)("span",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center text-green-600 mr-2 text-xs",children:(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),"Your Banking Products"]}),k.assets.filter((e=>e.id.includes("savings"))).length>0?(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:(0,Wh.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("p",{className:"text-gray-500 text-sm",children:"Total Savings"}),(0,Wh.jsxs)("p",{className:"text-xl font-bold text-gray-800",children:["$",k.assets.filter((e=>e.id.includes("savings"))).reduce(((e,t)=>e+t.cost),0).toLocaleString()]})]}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("p",{className:"text-gray-500 text-sm",children:"Interest Income"}),(0,Wh.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["$",k.assets.filter((e=>e.id.includes("savings"))).reduce(((e,t)=>e+t.income),0).toFixed(2),"/sec"]})]})]})}),(0,Wh.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:k.assets.filter((e=>e.id.includes("savings"))).map((e=>(0,Wh.jsx)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 transition-transform hover:shadow-md hover:scale-102",onClick:()=>E(e,"asset"),onTouchStart:t=>T(e,"asset",t),onTouchEnd:j,onTouchCancel:j,children:(0,Wh.jsxs)("div",{className:"p-4",children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Wh.jsx)("div",{className:"w-10 h-10 rounded-full mr-3 flex items-center justify-center bg-blue-100 text-blue-700",children:(0,Wh.jsx)("span",{className:"text-xl",children:"\ud83d\udcb0"})}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),(0,Wh.jsx)("p",{className:"text-xs text-green-600",children:"Active Account"})]})]}),(0,Wh.jsxs)("div",{className:"rounded-lg p-3 mb-1 bg-gray-50",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Wh.jsx)("span",{className:"text-sm text-gray-500",children:"Balance"}),(0,Wh.jsxs)("span",{className:"text-lg font-semibold text-gray-800",children:["$",e.cost.toLocaleString()]})]}),(0,Wh.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Wh.jsx)("span",{className:"text-sm text-gray-500",children:"Interest"}),(0,Wh.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["$",e.income.toFixed(2),"/sec"]})]})]}),(0,Wh.jsxs)("div",{className:"text-xs text-gray-500 text-right mt-2",children:["Opened: ",new Date(e.purchasedAt).toLocaleDateString()]})]})},e.id)))})]}):(0,Wh.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[(0,Wh.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-3 flex items-center justify-center",children:(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Wh.jsx)("p",{className:"text-gray-600 font-medium",children:"You don't have any banking products yet"}),(0,Wh.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Open a savings account to start earning interest"})]})]})]}),"housing"===n&&(()=>{const e=e=>({room:{beds:"1 Room",baths:"Shared",sqft:"100 sqft"},studio:{beds:"Studio",baths:"1 Bath",sqft:"350 sqft"},apartment:{beds:"2 Bed",baths:"1 Bath",sqft:"750 sqft"},condo:{beds:"2 Bed",baths:"2 Bath",sqft:"1,200 sqft"},townhouse:{beds:"3 Bed",baths:"2.5 Bath",sqft:"1,800 sqft"},house:{beds:"3 Bed",baths:"2 Bath",sqft:"2,500 sqft"},luxury_condo:{beds:"3 Bed",baths:"3 Bath",sqft:"2,800 sqft"},luxury_house:{beds:"4 Bed",baths:"3.5 Bath",sqft:"4,500 sqft"},mansion:{beds:"5 Bed",baths:"4.5 Bath",sqft:"8,500 sqft"},estate:{beds:"6 Bed",baths:"5.5 Bath",sqft:"12,000 sqft"},compound:{beds:"8 Bed",baths:"8 Bath",sqft:"25,000 sqft"}}[e]||{beds:"2 Bed",baths:"2 Bath",sqft:"1,000 sqft"}),n=(r=(e=>{const t=[...e];switch(g){case"priceAsc":return t.sort(((e,t)=>e.cost-t.cost));case"priceDesc":return t.sort(((e,t)=>t.cost-e.cost));case"nameAsc":return t.sort(((e,t)=>e.name.localeCompare(t.name)));case"nameDesc":return t.sort(((e,t)=>t.name.localeCompare(e.name)));default:return t}})(kf),r.filter((t=>{if(t.cost<w.minPrice||t.cost>w.maxPrice)return!1;if(w.propertyTypes.length>0&&!w.propertyTypes.includes(t.id))return!1;const n=e(t.id);let r=1;return n.beds.includes("Bed")&&(r=parseInt(n.beds,10)),!(r<w.minBeds)})));var r;const i=e=>{const{name:t,value:n,type:r,checked:i}=e.target;x("checkbox"===r?i?e=>({...e,propertyTypes:[...e.propertyTypes,t]}):e=>({...e,propertyTypes:e.propertyTypes.filter((e=>e!==t))}):e=>({...e,[t]:"number"===r?Number(n):n}))};return(0,Wh.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,Wh.jsxs)("div",{className:"flex items-center justify-between mb-4 border-b pb-3",children:[(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"text-3xl mr-2",children:"\ud83c\udfe0"}),(0,Wh.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Find Your Next Home"})]}),(0,Wh.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,Wh.jsxs)("button",{className:"bg-gray-100 hover:bg-gray-200 rounded-full px-3 py-1.5 text-gray-700 font-medium transition-colors flex items-center justify-center min-w-[90px] "+("priceAsc"!==g?"bg-gray-200":""),onClick:()=>{const e=["priceAsc","priceDesc","nameAsc","nameDesc"],t=(e.indexOf(g)+1)%e.length;y(e[t])},children:[(0,Wh.jsx)("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),(0,Wh.jsx)("span",{children:(()=>{switch(g){case"priceAsc":return"Price \u2191";case"priceDesc":return"Price \u2193";case"nameAsc":return"A-Z";case"nameDesc":return"Z-A";default:return"Sort"}})()})]}),(0,Wh.jsxs)("button",{className:"bg-gray-100 hover:bg-gray-200 rounded-full px-3 py-1.5 text-gray-700 font-medium transition-colors flex items-center justify-center min-w-[90px] "+(v?"bg-gray-200":""),onClick:()=>b(!v),children:[(0,Wh.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters",(w.propertyTypes.length>0||w.minPrice>0||w.minBeds>0)&&(0,Wh.jsx)("span",{className:"ml-1 bg-teal-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:w.propertyTypes.length+(w.minPrice>0?1:0)+(w.minBeds>0?1:0)})]})]})]}),v&&(0,Wh.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 shadow-sm border border-gray-200 animate-fadeIn",children:[(0,Wh.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200",children:[(0,Wh.jsx)("h4",{className:"font-semibold text-gray-700",children:"Filter Properties"}),(0,Wh.jsxs)("button",{className:"text-sm text-teal-600 hover:text-teal-800 flex items-center",onClick:()=>{x({minPrice:0,maxPrice:1e9,minBeds:0,propertyTypes:[]})},children:[(0,Wh.jsx)("svg",{className:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset All"]})]}),(0,Wh.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Range"}),(0,Wh.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Wh.jsxs)("div",{className:"relative flex-1",children:[(0,Wh.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2 text-gray-500",children:"$"}),(0,Wh.jsx)("input",{type:"number",name:"minPrice",value:w.minPrice,onChange:i,placeholder:"Min",className:"w-full pl-6 p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-teal-500 focus:border-teal-500"})]}),(0,Wh.jsx)("span",{className:"text-gray-400",children:"to"}),(0,Wh.jsxs)("div",{className:"relative flex-1",children:[(0,Wh.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2 text-gray-500",children:"$"}),(0,Wh.jsx)("input",{type:"number",name:"maxPrice",value:w.maxPrice,onChange:i,placeholder:"Max",className:"w-full pl-6 p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-teal-500 focus:border-teal-500"})]})]})]}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Bedrooms"}),(0,Wh.jsxs)("select",{name:"minBeds",value:w.minBeds,onChange:i,className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-teal-500 focus:border-teal-500",children:[(0,Wh.jsx)("option",{value:"0",children:"Any"}),(0,Wh.jsx)("option",{value:"1",children:"1+ Bed"}),(0,Wh.jsx)("option",{value:"2",children:"2+ Beds"}),(0,Wh.jsx)("option",{value:"3",children:"3+ Beds"}),(0,Wh.jsx)("option",{value:"4",children:"4+ Beds"}),(0,Wh.jsx)("option",{value:"5",children:"5+ Beds"})]})]})]}),(0,Wh.jsxs)("div",{className:"mt-4",children:[(0,Wh.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),(0,Wh.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2",children:["room","studio","apartment","condo","townhouse","house","luxury_condo","luxury_house","mansion","estate"].map((e=>(0,Wh.jsxs)("label",{className:`\n                  flex items-center justify-center p-2 rounded-md text-sm cursor-pointer \n                  ${w.propertyTypes.includes(e)?"bg-teal-100 border border-teal-300 text-teal-800":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"}\n                `,children:[(0,Wh.jsx)("input",{type:"checkbox",name:e,checked:w.propertyTypes.includes(e),onChange:i,className:"sr-only"}),(0,Wh.jsx)("span",{children:e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})]},e)))})]}),(0,Wh.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Wh.jsxs)("button",{className:"bg-teal-600 hover:bg-teal-700 text-white py-2 px-4 rounded-md text-sm font-medium transition-colors shadow-sm flex items-center",onClick:()=>b(!1),children:[(0,Wh.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Apply Filters"]})})]}),k.playerStatus.housing&&(0,Wh.jsxs)("div",{className:"mb-6",children:[(0,Wh.jsx)("h4",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Your Current Home"}),(0,Wh.jsxs)("div",{className:"relative bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105 border border-gray-200",onClick:()=>E(k.playerStatus.housing,"housing"),onTouchStart:e=>T(k.playerStatus.housing,"housing",e),onTouchEnd:j,onTouchCancel:j,children:[(0,Wh.jsxs)("div",{className:"h-48 bg-gray-200 relative overflow-hidden",children:[(0,Wh.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-70 bg-gradient-to-br from-teal-500 to-blue-700",children:(0,Wh.jsx)("span",{className:"text-white text-9xl",children:I(k.playerStatus.housing.id).icon})}),(0,Wh.jsx)("div",{className:"absolute top-0 left-0 bg-teal-600 text-white m-2 px-3 py-1 rounded-full text-sm font-semibold",children:"CURRENT HOME"})]}),(0,Wh.jsxs)("div",{className:"p-4",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Wh.jsx)("h4",{className:"font-bold text-xl text-gray-800",children:k.playerStatus.housing.name}),(0,Wh.jsx)("div",{className:"text-2xl",children:k.playerStatus.housing.image})]}),(0,Wh.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[(0,Wh.jsxs)("span",{className:"mr-3",children:[(0,Wh.jsx)("span",{className:"text-gray-400 mr-1",children:"\ud83d\udccd"})," Business District"]}),(0,Wh.jsxs)("span",{className:"mr-3",children:[(0,Wh.jsx)("span",{className:"text-gray-400 mr-1",children:"\ud83d\udecf\ufe0f"})," ",e(k.playerStatus.housing.id).beds]}),(0,Wh.jsxs)("span",{children:[(0,Wh.jsx)("span",{className:"text-gray-400 mr-1",children:"\ud83d\udebf"})," ",e(k.playerStatus.housing.id).baths]})]}),(0,Wh.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:k.playerStatus.housing.description})]})]})]}),(0,Wh.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.length>0?n.map((n=>{const r=S>=n.cost,i=k.playerStatus.housing&&k.playerStatus.housing.id===n.id,{icon:s}=I(n.id),{beds:a,baths:o,sqft:l}=e(n.id);return(0,Wh.jsxs)("div",{className:`relative bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:shadow-lg ${r?"":"opacity-75"} ${i?"ring-2 ring-teal-500":"border border-gray-200"}`,onClick:()=>E(n,"housing"),onTouchStart:e=>T(n,"housing",e),onTouchEnd:j,onTouchCancel:j,children:[i&&(0,Wh.jsx)("div",{className:"absolute top-0 right-0 bg-teal-600 text-white m-2 px-3 py-1 rounded-full text-sm font-semibold z-20",children:"CURRENT"}),(0,Wh.jsxs)("div",{className:"h-40 bg-gray-200 relative overflow-hidden",children:[(0,Wh.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-70 bg-gradient-to-br from-teal-500 to-blue-700",children:(0,Wh.jsx)("span",{className:"text-white text-8xl",children:s})}),(0,Wh.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent h-20 opacity-70"}),(0,Wh.jsxs)("div",{className:"absolute bottom-2 left-2 text-white font-bold text-xl",children:["$",n.cost.toLocaleString()]})]}),(0,Wh.jsxs)("div",{className:"p-3",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,Wh.jsx)("h4",{className:"font-bold text-gray-800 truncate",children:n.name}),(0,Wh.jsx)("span",{className:"text-xl",children:n.image})]}),(0,Wh.jsx)("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83d\udccd Business District"})}),(0,Wh.jsxs)("div",{className:"flex items-center justify-between mb-3 text-xs text-gray-700",children:[(0,Wh.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 rounded-full",children:["\ud83d\udecf\ufe0f ",a]}),(0,Wh.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 rounded-full",children:["\ud83d\udebf ",o]}),(0,Wh.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 rounded-full",children:["\ud83d\udccf ",l]})]}),(0,Wh.jsx)("div",{className:"mt-auto",children:(0,Wh.jsxs)("div",{className:"relative w-full pr-20",children:[h[n.id]?(0,Wh.jsx)("div",{className:"absolute inset-0 bg-gray-400 rounded-full transition-all duration-700 ease-in-out"}):null,(0,Wh.jsx)("button",{className:"w-[60%] mx-auto py-2 sm:py-3 px-3 sm:px-4 rounded-full font-medium transition-colors text-center shadow-md "+(i?"bg-green-500 text-white cursor-default":r?"bg-teal-600 hover:bg-teal-700 hover:shadow-lg text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),onClick:e=>C(e,(()=>(e=>{t({type:"BUY_HOUSING",payload:{...e,purchasedAt:Date.now()}})})(n)),n.id),disabled:!r||i,children:(0,Wh.jsx)("span",{className:"block truncate",children:i?"Current Home":r?"Buy Property":"Can't Afford"})})]})})]})]},n.id)})):(0,Wh.jsx)("p",{className:"text-gray-600 italic",children:"No properties match the current filters."})})]})})(),"transportation"===n&&(0,Wh.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-orange-100 rounded-lg p-6",children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Wh.jsx)("span",{className:"text-3xl mr-2",children:"\ud83d\ude97"}),(0,Wh.jsx)("h3",{className:"text-2xl font-bold text-orange-800",children:"Transportation Options"})]}),k.playerStatus.transportation&&(0,Wh.jsxs)("div",{className:"mb-6",children:[(0,Wh.jsx)("h4",{className:"text-xl font-semibold text-orange-800 mb-3",children:"Current Transportation"}),(0,Wh.jsxs)("div",{className:`relative ${P(k.playerStatus.transportation.id).color} rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105 p-0`,onClick:()=>E(k.playerStatus.transportation,"transportation"),onTouchStart:e=>T(k.playerStatus.transportation,"transportation",e),onTouchEnd:j,onTouchCancel:j,children:[(0,Wh.jsx)("div",{className:"absolute right-0 bottom-0 w-32 h-32 opacity-20 flex items-center justify-center",children:(0,Wh.jsx)("span",{className:"text-white text-8xl",children:P(k.playerStatus.transportation.id).icon})}),(0,Wh.jsxs)("div",{className:"relative z-10 p-4",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Wh.jsx)("div",{className:"bg-black bg-opacity-30 rounded-lg p-2 shadow-sm inline-flex items-center",children:(0,Wh.jsx)("h4",{className:"font-semibold text-lg text-white",children:k.playerStatus.transportation.name})}),(0,Wh.jsx)("span",{className:"bg-yellow-500 bg-opacity-30 py-1 px-3 rounded-full text-sm font-medium shadow-sm border border-yellow-400",children:(0,Wh.jsxs)("span",{className:"text-yellow-500 drop-shadow-[0_0_2px_rgba(234,179,8,0.8)]",children:[k.playerStatus.transportation.clicksPerSecond,"x \ud83d\udc46's"]})})]}),(0,Wh.jsx)("p",{className:"text-white text-sm",children:k.playerStatus.transportation.description})]})]})]}),(0,Wh.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:xf.map((e=>{const n=S>=e.cost,r=k.playerStatus.transportation&&k.playerStatus.transportation.id===e.id,{icon:i,color:s}=P(e.id);return(0,Wh.jsxs)("div",{className:`relative ${s} rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105 ${n?"":"opacity-75"} ${r?"ring-3 ring-green-400":""} w-full h-48 md:h-56 lg:h-64`,onClick:()=>E(e,"transportation"),onTouchStart:t=>T(e,"transportation",t),onTouchEnd:j,onTouchCancel:j,children:[(0,Wh.jsx)("div",{className:"absolute right-2 bottom-4 w-20 h-20 opacity-80 flex items-center justify-center transition-all duration-500 z-10 "+(p[e.id]?"scale-150 opacity-100":""),children:(0,Wh.jsx)("span",{className:"text-white text-6xl drop-shadow-md",children:i})}),(0,Wh.jsxs)("div",{className:"relative z-0 h-full flex flex-col p-3",children:[(0,Wh.jsx)("div",{className:"bg-black bg-opacity-30 rounded-lg p-2 mb-1 shadow-sm flex items-center",children:(0,Wh.jsx)("h4",{className:"font-semibold text-base text-white truncate",children:e.name})}),(0,Wh.jsxs)("div",{className:"flex-grow flex flex-col justify-between",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("p",{className:"text-white text-xs px-1 mt-1 mb-2",children:(a=e.id,{bicycle:"Eco-friendly with bonus leg day!",bus_pass:"Public transit without exact change.",usedcar_basic:"Sunday driver special.",usedcar_mid:"Pre-loved but reliable.",newcar_economy:"New car smell included!",newcar_luxury:"Turning heads everywhere.",luxury_car:"Costs more than your first home.",supercar:"Zero to ticket in seconds.",hypercar:"A rocket with cup holders.",helicopter:"Traffic? What traffic?",private_jet:"First class is too public."}[a]||"Stylish A to B transport!")}),(0,Wh.jsx)("span",{className:"bg-yellow-500 bg-opacity-30 py-0.5 px-2 rounded-full text-xs font-medium shadow-sm border border-yellow-400 inline-block",children:(0,Wh.jsxs)("span",{className:"text-yellow-500 drop-shadow-[0_0_2px_rgba(234,179,8,0.8)]",children:[e.clickSpeedMultiplier,"x \ud83d\udc46's"]})})]}),(0,Wh.jsx)("div",{className:"mt-auto",children:(0,Wh.jsxs)("div",{className:"relative w-full",children:[h[e.id]?(0,Wh.jsx)("div",{className:"absolute inset-0 bg-gray-400 rounded-full transition-all duration-700 ease-in-out"}):null,(0,Wh.jsx)("button",{className:"w-[60%] mx-auto py-2 sm:py-3 px-3 sm:px-4 rounded-full font-bold transition-colors text-center shadow-md "+(r?"bg-green-500 text-white cursor-default":n?"bg-green-500 hover:bg-green-600 hover:shadow-lg text-white":"bg-gray-600 text-gray-300 cursor-not-allowed"),onClick:n=>C(n,(()=>(e=>{t({type:"BUY_TRANSPORTATION",payload:{...e,purchasedAt:Date.now()}}),setTimeout((()=>{const n=xf.filter((t=>k.playerStatus.transportation&&(t.id===k.playerStatus.transportation.id||t.id===e.id)));if(n.length>0){const e=[...n].sort(((e,t)=>t.clickSpeedMultiplier-e.clickSpeedMultiplier))[0];k.playerStatus.transportation.id!==e.id&&t({type:"SELECT_TRANSPORTATION",payload:e})}}),100)})(e)),e.id),disabled:!n||r,children:r?"Owned":(0,Wh.jsxs)("span",{className:"text-sm sm:text-base whitespace-nowrap overflow-hidden truncate",children:["$",e.cost.toLocaleString()]})})]})})]})]})]},e.id);var a}))})]})]}),s&&(0,Wh.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:_,children:(0,Wh.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full transform transition-all animate-fadeIn",onClick:e=>e.stopPropagation(),children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Wh.jsx)("span",{className:"text-4xl mr-3",children:s.item.image}),(0,Wh.jsx)("h4",{className:"text-xl font-bold",children:s.item.name})]}),(0,Wh.jsx)("p",{className:"text-gray-700 mb-4",children:s.item.description}),"asset"===s.type&&(0,Wh.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4 mb-4",children:[(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"Cost:"})," $",s.item.cost.toLocaleString()]}),(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"Income:"})," $",s.item.income.toFixed(2),"/sec"]}),(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"ROI:"})," ",(3600*s.item.income*24*365/s.item.cost*100).toFixed(2),"% annually"]})]}),"housing"===s.type&&(0,Wh.jsx)("div",{className:"bg-teal-50 rounded-lg p-4 mb-4",children:(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"Cost:"})," $",s.item.cost.toLocaleString()]})}),"transportation"===s.type&&(0,Wh.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 mb-4",children:[(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"Cost:"})," $",s.item.cost.toLocaleString()]}),(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"Work Speed:"}),(0,Wh.jsx)("span",{className:"bg-yellow-500 bg-opacity-30 py-1 px-3 rounded-full text-sm font-medium shadow-sm border border-yellow-400",children:(0,Wh.jsxs)("span",{className:"text-yellow-500 drop-shadow-[0_0_2px_rgba(234,179,8,0.8)]",children:[s.item.clickSpeedMultiplier,"x \ud83d\udc46's"]})})]})]}),(0,Wh.jsx)("button",{className:"w-full py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-colors font-medium",onClick:_,children:"Close"})]})})]})},Ef=()=>{const{gameState:e,gameDispatch:t}=lf(),[n,i]=(0,r.useState)("all");if(!e||!e.playerStatus)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const s=e,a=e=>{const t=bf(e,s.playerStatus.background);return s.money>=t},o=e=>s.money>=e.cost,l=()=>{if(!s.playerStatus.business)return null;const e=s.playerStatus.business,t=vf.find((t=>t.id===e.id));if(!t)return null;const n=e.level+1;return t.upgrades.find((e=>e.level===n))};return(0,Wh.jsxs)("div",{className:"business-container",children:[(0,Wh.jsx)("h2",{children:"Business Ventures"}),s.playerStatus.business?(0,Wh.jsxs)("div",{className:"owned-businesses",children:[(0,Wh.jsx)("h3",{children:"Your Business"}),(0,Wh.jsxs)("div",{className:"business-card owned",children:[(0,Wh.jsxs)("div",{className:"business-header",children:[(0,Wh.jsx)("div",{className:"business-icon",children:s.playerStatus.business.image}),(0,Wh.jsxs)("h3",{children:[s.playerStatus.business.name," ",(0,Wh.jsxs)("span",{className:"level-badge level-intermediate",children:["Level ",s.playerStatus.business.level]})]})]}),(0,Wh.jsx)("p",{className:"business-description",children:s.playerStatus.business.description}),(0,Wh.jsxs)("p",{className:"business-income",children:["Income: $",s.playerStatus.business.income.toFixed(2),"/sec"]}),l()?(0,Wh.jsxs)("div",{className:"upgrade-section",children:[(0,Wh.jsxs)("h4",{children:["Available Upgrade: ",l().name]}),(0,Wh.jsxs)("p",{children:["Cost: $",l().cost.toLocaleString()]}),(0,Wh.jsxs)("p",{children:["Income Boost: ",(0,Wh.jsxs)("span",{className:"boost-text",children:["+",(100*l().incomeMultiplier).toFixed(0),"%"]})]}),"poor"===s.playerStatus.background&&(0,Wh.jsxs)("p",{className:"bonus",children:["Poor Background Bonus: ",(0,Wh.jsx)("span",{className:"boost-text",children:"+10% income"})]}),(0,Wh.jsx)("button",{className:"upgrade-button",onClick:()=>(e=>{if(!s.playerStatus.business)return;const n=s.playerStatus.business,r=(i=e.incomeMultiplier,a=s.playerStatus.background,i+("poor"===a?.1:0));var i,a;const o=n.income*r;t({type:"UPGRADE_BUSINESS",payload:{business:n,upgrade:{...e,incomeBoost:o}}})})(l()),disabled:!o(l()),children:o(l())?"Upgrade":"Not enough money"})]}):(0,Wh.jsx)("div",{className:"max-level",children:(0,Wh.jsx)("p",{children:(0,Wh.jsx)("span",{className:"badge badge-warning",children:"Max Level Reached!"})})})]})]}):(0,Wh.jsx)("div",{className:"no-businesses",children:(0,Wh.jsx)("p",{children:"You don't own any businesses yet. Purchase one below to start generating serious income!"})}),(0,Wh.jsxs)("div",{className:"filter-controls",children:[(0,Wh.jsx)("span",{className:"filter-label",children:"Filter by price:"}),(0,Wh.jsxs)("div",{className:"filter-buttons",children:[(0,Wh.jsx)("button",{className:"all"===n?"active":"",onClick:()=>i("all"),children:(0,Wh.jsx)("span",{className:"price-badge price-all",children:"All"})}),(0,Wh.jsx)("button",{className:"affordable"===n?"active":"",onClick:()=>i("affordable"),children:(0,Wh.jsx)("span",{className:"price-badge price-affordable",children:"Affordable"})}),(0,Wh.jsx)("button",{className:"low"===n?"active":"",onClick:()=>i("low"),children:(0,Wh.jsx)("span",{className:"price-badge price-low",children:"Low (<$100k)"})}),(0,Wh.jsx)("button",{className:"medium"===n?"active":"",onClick:()=>i("medium"),children:(0,Wh.jsx)("span",{className:"price-badge price-medium",children:"Medium ($100k-$1M)"})}),(0,Wh.jsx)("button",{className:"high"===n?"active":"",onClick:()=>i("high"),children:(0,Wh.jsx)("span",{className:"price-badge price-high",children:"High (>$1M)"})})]})]}),(0,Wh.jsx)("h3",{children:"Available Businesses"}),(0,Wh.jsx)("div",{className:"available-businesses",children:(()=>{switch(n){case"affordable":return vf.filter((e=>bf(e,s.playerStatus.background)<=s.money));case"low":return vf.filter((e=>bf(e,s.playerStatus.background)<1e5));case"medium":return vf.filter((e=>{const t=bf(e,s.playerStatus.background);return t>=1e5&&t<1e6}));case"high":return vf.filter((e=>bf(e,s.playerStatus.background)>=1e6));default:return vf}})().map((e=>{const n=bf(e,s.playerStatus.background),r=s.playerStatus.business&&s.playerStatus.business.id===e.id;return(0,Wh.jsxs)("div",{className:`business-card ${a(e)?"":"cannot-afford"} ${r?"already-owned":""}`,children:[(0,Wh.jsxs)("div",{className:"business-header",children:[(0,Wh.jsx)("div",{className:"business-icon",children:e.image}),(0,Wh.jsx)("h3",{children:e.name})]}),(0,Wh.jsx)("p",{className:"business-description",children:e.description}),(0,Wh.jsxs)("div",{className:"business-details",children:[(0,Wh.jsxs)("p",{children:["Cost: $",n.toLocaleString()]}),(0,Wh.jsxs)("p",{children:["Income: $",e.baseIncome.toFixed(2),"/sec"]}),(0,Wh.jsxs)("p",{className:"roi",children:["ROI: ",(0,Wh.jsxs)("span",{className:"boost-text",children:[(3600*e.baseIncome*24*365/n*100).toFixed(2),"% annually"]})]}),"poor"===s.playerStatus.background&&(0,Wh.jsxs)("p",{className:"discount",children:["Poor Background Discount: ",(0,Wh.jsx)("span",{className:"boost-text",children:"20% off"})]})]}),(0,Wh.jsx)("button",{className:"buy-button",onClick:()=>(e=>{const n=bf(e,s.playerStatus.background);s.money>=n&&t({type:"START_BUSINESS",payload:{id:e.id,name:e.name,income:e.baseIncome,cost:n,level:1,image:e.image,description:e.description,upgrades:e.upgrades,purchasedAt:Date.now()}})})(e),disabled:!a(e)||r,children:r?"Already Owned":a(e)?"Start Business":"Not enough money"})]},e.id)}))})]})},_f=()=>{const{gameState:e,gameDispatch:t}=lf(),[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(null);if((0,r.useEffect)((()=>{if(e&&e.currentEducation){const e=setInterval((()=>{t({type:"UPDATE_EDUCATION_PROGRESS"})}),1e3);return()=>clearInterval(e)}}),[null===e||void 0===e?void 0:e.currentEducation,t]),!e||!e.skills)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const o=e,l=e=>e.charAt(0).toUpperCase()+e.slice(1),c=e=>o.skills[e]||0===o.skills[e]?parseFloat(o.skills[e].toFixed(1)):0,u=()=>o.skills.education&&o.skills.education>=4,d=()=>o.playerStatus.job?o.playerStatus.job.category:null,h=e=>{a(s===e?null:e)},f=(e,t)=>{if(!e)return"Job";const n={food:{1:"Cook 1",10:"Cook 2",20:"Head Chef",30:"Sous Chef",40:"Chef de Partie",50:"Kitchen Manager",60:"Executive Chef",70:"Culinary Director",80:"Restaurant Manager",90:"General Manager",100:"Regional Director"},retail:{1:"Cashier 1",10:"Cashier 2",20:"Supervisor",30:"Shift Lead",40:"Department Manager",50:"Assistant Store Manager",60:"Store Manager",70:"Multi-Store Manager",80:"District Manager",90:"Regional Manager",100:"Operations Director"},technical:{1:"Junior Developer",10:"Developer",20:"Senior Developer",30:"Team Lead",40:"Project Manager",50:"Development Manager",60:"Director of Engineering",70:"VP of Engineering",80:"CTO",90:"Chief Architect",100:"Technology Director"},financial:{1:"Financial Analyst",10:"Senior Analyst",20:"Finance Manager",30:"Senior Finance Manager",40:"Controller",50:"Finance Director",60:"VP of Finance",70:"Chief Financial Officer",80:"Investment Director",90:"Treasury Director",100:"Finance Executive"},healthcare:{1:"Nurse Assistant",10:"Registered Nurse",20:"Charge Nurse",30:"Nurse Manager",40:"Nurse Practitioner",50:"Department Head",60:"Clinical Director",70:"Chief Nursing Officer",80:"Medical Director",90:"Hospital Administrator",100:"Healthcare Executive"},management:{1:"Management Trainee",10:"Junior Manager",20:"Manager",30:"Senior Manager",40:"Department Head",50:"Director",60:"Senior Director",70:"Vice President",80:"Senior VP",90:"Executive VP",100:"Chief Operating Officer"},legal:{1:"Legal Assistant",10:"Paralegal",20:"Junior Attorney",30:"Associate Attorney",40:"Senior Associate",50:"Managing Attorney",60:"Partner",70:"Senior Partner",80:"Managing Partner",90:"Practice Head",100:"Chief Legal Officer"}}[e]||{1:"Associate 1",10:"Associate 2",20:"Senior Associate",30:"Team Lead",40:"Supervisor",50:"Assistant Manager",60:"Manager",70:"Senior Manager",80:"Department Head",90:"Director",100:"Senior Director"},r=Object.keys(n).map(Number).sort(((e,t)=>e-t));let i=r[0];for(const s of r){if(!(s<=t))break;i=s}if(t>i){const e=Math.floor((t-i)/10)+1;return`${n[i]} ${e}`}return n[i]},p=e=>e<100||e<300?10*Math.ceil(e/10):null,m=(e,t)=>{const n=1+.05*t;return Math.round(e*n)},g=(e,t)=>{if(!e)return[];const n=[];for(let r=1;r<=100;r+=10)n.push({level:r,title:f(e,r),pay:m(t,r),tier:1});for(let r=110;r<=300;r+=10)n.push({level:r,title:f(e,r),pay:m(2*t,r-100),tier:2,requiresDegree:!0});return n},y=()=>{var e;return(null===(e=o.playerStatus.job)||void 0===e?void 0:e.level)||1};return(0,Wh.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,Wh.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 pb-2 border-b border-gray-200",children:"Education & Skills"}),o.currentEducation&&(0,Wh.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6 shadow border border-blue-200",children:[(0,Wh.jsxs)("h3",{className:"text-center text-blue-700 font-medium mb-3",children:["Currently Learning: ",o.currentEducation.name]}),(0,Wh.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden border border-gray-300",children:(0,Wh.jsx)("div",{className:"h-full bg-green-500 rounded-full animate-progress-bar",style:{width:100*o.educationProgress+"%"}})}),(0,Wh.jsxs)("div",{className:"flex justify-between flex-wrap mt-2",children:[(0,Wh.jsxs)("p",{className:"text-sm text-gray-700 m-1",children:["Skill: ",l(o.currentEducation.skill)]}),(0,Wh.jsxs)("p",{className:"text-sm text-gray-700 m-1",children:["Progress: ",Math.round(100*o.educationProgress),"%"]}),(0,Wh.jsx)("p",{className:"text-sm font-bold text-blue-700 m-1",children:(()=>{if(!o.currentEducation)return null;const e=Date.now()-o.currentEducation.startTime,t=o.currentEducation.duration-e;if(t<=0)return"Completing...";return`${Math.ceil(t/1e3)} seconds remaining`})()})]})]}),(0,Wh.jsxs)("div",{className:"bg-white rounded-lg p-5 mb-8 shadow-md",children:[(0,Wh.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Your Skills"}),(0,Wh.jsx)("div",{className:"flex flex-wrap gap-4 p-2",children:Object.keys(o.skills).length>0?Object.entries(o.skills).map((e=>{let[t,n]=e;return(0,Wh.jsxs)("div",{className:"bg-blue-50 rounded-full py-2 px-4 text-sm flex items-center border-l-3 border-green-500",children:[(0,Wh.jsxs)("span",{className:"font-bold text-gray-800 mr-2",children:[l(t),":"]}),(0,Wh.jsxs)("span",{className:"text-green-600 font-bold",children:["Level ",c(t)]})]},t)})):(0,Wh.jsx)("p",{className:"text-gray-500",children:"You don't have any skills yet. Get some education!"})})]}),(0,Wh.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Wh.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Job Training & Career Path"})}),(0,Wh.jsx)("div",{className:"bg-white rounded-lg p-5 mb-8 shadow-md",children:o.playerStatus.job?(0,Wh.jsxs)(Wh.Fragment,{children:[(0,Wh.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Wh.jsxs)("h4",{className:"font-semibold text-lg text-gray-800 mb-2",children:["Current Position: ",o.playerStatus.job.title]}),(0,Wh.jsxs)("p",{className:"text-gray-700 mb-1",children:["Career: ",l(o.playerStatus.job.category)]}),(0,Wh.jsxs)("p",{className:"text-gray-700 mb-1",children:["Current Level: ",y()]}),(0,Wh.jsxs)("p",{className:"text-gray-700 mb-2",children:["Tier: ",(()=>{if(!o.playerStatus.job)return 0;const e=o.playerStatus.job.id;return gf.some((t=>t.id===e))?3:mf.some((t=>t.id===e))||pf.some((t=>t.id===e))?2:(ff.some((t=>t.id===e)),1)})()]}),p(y())&&(0,Wh.jsxs)("div",{className:"mt-4",children:[(0,Wh.jsxs)("p",{className:"text-gray-700",children:["Next promotion at level ",p(y()),":",(0,Wh.jsx)("span",{className:"font-medium text-blue-600 ml-1",children:f(o.playerStatus.job.category,p(y()))})]}),(0,Wh.jsx)("div",{className:"h-2 bg-gray-200 rounded-full mt-2 overflow-hidden",children:(0,Wh.jsx)("div",{className:"h-full bg-blue-500 rounded-full",style:{width:Math.floor(y()-1)%10*10+"%"}})})]}),y()<100&&!u()&&(0,Wh.jsx)("p",{className:"mt-3 text-sm text-amber-700 bg-amber-50 p-2 rounded-md",children:"You need a Bachelor's Degree to advance to Tier 2 (Corporate Management)"})]}),(0,Wh.jsxs)("div",{className:"mb-6",children:[(0,Wh.jsx)("h4",{className:"font-medium text-gray-800 mb-3",children:"Explore Career Paths"}),(0,Wh.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:(()=>{const e=new Set;return[...hf.poor,...hf.rich,...ff,...pf,...mf,...gf].forEach((t=>{t.category&&e.add(t.category)})),Array.from(e)})().map((e=>(0,Wh.jsx)("button",{className:"px-3 py-1.5 rounded-full text-sm transition-colors "+(e===n?"bg-primary-600 text-white":e===d()?"bg-primary-100 text-primary-800 border border-primary-300":"bg-gray-100 text-gray-800 hover:bg-gray-200"),onClick:()=>(e=>{i(e),a(null)})(e),children:l(e)},e)))})]}),n&&(0,Wh.jsxs)("div",{className:"career-progression",children:[(0,Wh.jsxs)("h4",{children:[l(n)," Career Progression"]}),(0,Wh.jsxs)("div",{className:"tier-container expandable",onClick:()=>h("tier1"),children:[(0,Wh.jsxs)("div",{className:"tier-header",children:[(0,Wh.jsxs)("h5",{children:[(0,Wh.jsx)("span",{className:"level-badge level-beginner",children:"Tier 1"})," Entry Level to Management (Levels 1-100)"]}),(0,Wh.jsx)("div",{className:"tier-expand-icon",children:"tier1"===s?"\u25bc":"\u25b6"})]}),"tier1"===s&&(0,Wh.jsx)("div",{className:"career-progression-path",children:g(n,10).filter((e=>1===e.tier)).map((e=>(0,Wh.jsxs)("div",{className:`progression-item ${y()===e.level?"current-level":""} ${y()>e.level?"completed-level":""}`,children:[(0,Wh.jsx)("div",{className:"progression-level",children:(0,Wh.jsxs)("span",{className:"level-badge level-beginner",children:["Level ",e.level]})}),(0,Wh.jsx)("div",{className:"progression-title",children:e.title}),(0,Wh.jsxs)("div",{className:"progression-pay",children:["$",e.pay,"/hr"]})]},e.level)))}),!s&&d()===n&&(0,Wh.jsxs)("div",{className:"tier-current-status",children:[(0,Wh.jsxs)("p",{children:["Current Level: ",y(),"/100"]}),(0,Wh.jsx)("div",{className:"tier-progress-container",children:(0,Wh.jsx)("div",{className:"tier-progress-bar",style:{width:10*Math.floor((y()-1)/10)+"%"}})})]})]}),(0,Wh.jsxs)("div",{className:"tier-container expandable "+(u()?"":"locked-tier"),onClick:()=>u()&&h("tier2"),children:[(0,Wh.jsxs)("div",{className:"tier-header",children:[(0,Wh.jsxs)("h5",{children:[(0,Wh.jsx)("span",{className:"level-badge level-intermediate",children:"Tier 2"})," Corporate Management (Levels 101-300)"]}),u()?(0,Wh.jsx)("div",{className:"tier-expand-icon",children:"tier2"===s?"\u25bc":"\u25b6"}):(0,Wh.jsx)("div",{className:"tier-requirement",children:(0,Wh.jsx)("span",{className:"badge badge-warning badge-sm",children:"Requires Bachelor's Degree"})})]}),"tier2"===s&&u()&&(0,Wh.jsx)("div",{className:"career-progression-path",children:g(n,20).filter((e=>2===e.tier)).map((e=>(0,Wh.jsxs)("div",{className:`progression-item ${y()===e.level?"current-level":""} ${y()>e.level?"completed-level":""}`,children:[(0,Wh.jsx)("div",{className:"progression-level",children:(0,Wh.jsxs)("span",{className:"level-badge level-intermediate",children:["Level ",e.level]})}),(0,Wh.jsx)("div",{className:"progression-title",children:e.title}),(0,Wh.jsxs)("div",{className:"progression-pay",children:["$",e.pay,"/hr"]})]},e.level)))}),!s&&u()&&d()===n&&y()>100&&(0,Wh.jsxs)("div",{className:"tier-current-status",children:[(0,Wh.jsxs)("p",{children:["Current Level: ",y(),"/300"]}),(0,Wh.jsx)("div",{className:"tier-progress-container",children:(0,Wh.jsx)("div",{className:"tier-progress-bar",style:{width:10*Math.floor((y()-101)/20)+"%"}})})]})]}),(0,Wh.jsxs)("div",{className:"tier-container",children:[(0,Wh.jsx)("div",{className:"tier-header",children:(0,Wh.jsxs)("h5",{children:[(0,Wh.jsx)("span",{className:"level-badge level-advanced",children:"Tier 3"})," Company Ownership (Level 300+)"]})}),(0,Wh.jsx)("div",{className:"tier-description",children:(0,Wh.jsxs)("p",{children:["After reaching level 300 in your career path, you can become a company owner in the ",l(n)," industry."]})})]}),(0,Wh.jsxs)("div",{className:"career-tips",children:[(0,Wh.jsx)("h5",{children:"Career Progression Tips:"}),(0,Wh.jsxs)("ul",{children:[(0,Wh.jsx)("li",{children:"Gain job experience by working to advance levels"}),(0,Wh.jsx)("li",{children:"Every 10 levels earns you a promotion with higher pay"}),(0,Wh.jsx)("li",{children:"You need a Bachelor's Degree to advance to Tier 2 (Level 100+)"}),(0,Wh.jsx)("li",{children:"Tier 1 spans levels 1-100 (Entry level to Management)"}),(0,Wh.jsx)("li",{children:"Tier 2 spans levels 101-300 (Corporate positions)"}),(0,Wh.jsx)("li",{children:"Tier 3 begins at level 300+ (Company Ownership)"})]})]})]})]}):(0,Wh.jsx)("div",{className:"text-center p-6 bg-gray-50 rounded-lg border border-gray-200",children:(0,Wh.jsx)("p",{className:"text-gray-600",children:"You don't have a job yet. Visit the Jobs tab to find one first!"})})}),(0,Wh.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Wh.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Available Education"})}),(0,Wh.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:wf.map((e=>{const n=(e=>o.money>=e.cost)(e),r=(e=>o.playerStatus.background?"rich"===o.playerStatus.background?e.skillMultiplier.rich:e.skillMultiplier.poor:1)(e);let i=1;o.skills[e.skill]&&(i=1+.2*c(e.skill));const s=Math.round(60*i),a="university"===e.id;return(0,Wh.jsxs)("div",{className:`bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:-translate-y-1 hover:shadow-lg ${n?"":"opacity-60"} ${o.currentEducation?"opacity-50":""} ${a?"border-2 border-blue-400":""}`,children:[(0,Wh.jsx)("div",{className:"flex items-start p-4 bg-gray-50 border-b border-gray-200",children:(0,Wh.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Wh.jsx)("div",{className:"text-2xl",children:e.image}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h3",{className:"font-semibold text-gray-800 text-lg",children:e.name}),e.difficulty&&(0,Wh.jsx)("span",{className:"inline-block px-2 py-0.5 text-xs font-medium rounded-full "+("beginner"===e.difficulty.toLowerCase()?"bg-green-100 text-green-800":"intermediate"===e.difficulty.toLowerCase()?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.difficulty})]})]})}),(0,Wh.jsxs)("div",{className:"p-4",children:[(0,Wh.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,Wh.jsxs)("div",{className:"flex justify-between items-end",children:[(0,Wh.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Wh.jsxs)("p",{className:"text-gray-700",children:["Cost: $",e.cost.toLocaleString()]}),(0,Wh.jsxs)("p",{className:"text-gray-700",children:["Skill:",(0,Wh.jsx)("span",{className:"inline-block ml-1 px-2 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:l(e.skill)})]}),(0,Wh.jsxs)("p",{className:"text-gray-700",children:["Skill gain: +",(e.value*r).toFixed(1)," points"]}),(0,Wh.jsxs)("p",{className:"text-gray-700",children:["Duration: ",s," seconds"]}),c(e.skill)>0&&(0,Wh.jsx)("p",{className:"text-xs text-gray-500 italic",children:"Duration increased due to current skill level"}),"rich"===o.playerStatus.background&&(0,Wh.jsx)("p",{className:"text-green-600 text-xs font-medium",children:"Rich Background Bonus: +50% skill gain"}),a&&(0,Wh.jsx)("p",{className:"bg-blue-50 text-blue-700 p-2 rounded-md text-xs mt-2",children:"Required for management positions"})]}),(0,Wh.jsx)("button",{className:"px-4 py-1.5 rounded-lg font-medium text-sm transition ml-4 flex-shrink-0 "+(!n||o.currentEducation?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow"),onClick:()=>(e=>{t({type:"START_EDUCATION",payload:e})})(e),disabled:!n||null!==o.currentEducation,children:n?o.currentEducation?"Already in education":"Enroll":"Not enough money"})]})]})]},e.id)}))})]})},Cf={MARKET_SENTIMENT:{min:-.008,max:.008},NEWS_EVENTS:{min:-.05,max:.05},EARNINGS_IMPACT:{min:-.1,max:.08},PLAYER_ACTIONS:{min:-.02,max:.02},SECTOR_TRENDS:{tech:{min:-.015,max:.018},retail:{min:-.01,max:.011},finance:{min:-.008,max:.009},auto:{min:-.013,max:.014},media:{min:-.014,max:.015},energy:{min:-.016,max:.013},health:{min:-.009,max:.011},food:{min:-.007,max:.008},telecom:{min:-.008,max:.009},aerospace:{min:-.018,max:.015}}},Tf=[{headline:"Fed announces surprise interest rate hike",impact:"negative",sectors:["finance","retail"],magnitude:.03},{headline:"Breakthrough in quantum computing announced",impact:"positive",sectors:["tech"],magnitude:.04},{headline:"Data privacy scandal rocks social media companies",impact:"negative",sectors:["tech","media"],magnitude:.05},{headline:"New renewable energy tax credits approved",impact:"positive",sectors:["energy"],magnitude:.03},{headline:"Automotive chip shortage worsens",impact:"negative",sectors:["auto","tech"],magnitude:.035},{headline:"Streaming services see record subscriber growth",impact:"positive",sectors:["media"],magnitude:.04},{headline:"Healthcare reform bill passes",impact:"mixed",sectors:["health"],magnitude:.025},{headline:"Global supply chain disruptions continue",impact:"negative",sectors:["retail","auto","food"],magnitude:.03},{headline:"New AI breakthrough announced",impact:"positive",sectors:["tech"],magnitude:.045},{headline:"Consumer spending reaches all-time high",impact:"positive",sectors:["retail","food"],magnitude:.025},{headline:"Major cybersecurity breach reported",impact:"negative",sectors:["tech","finance"],magnitude:.04},{headline:"Space tourism takes off",impact:"positive",sectors:["aerospace"],magnitude:.055},{headline:"Fast food workers announce nationwide strike",impact:"negative",sectors:["food"],magnitude:.025},{headline:"Mobile payment usage skyrockets",impact:"positive",sectors:["finance","tech"],magnitude:.03},{headline:"Self-driving car achieves safety milestone",impact:"positive",sectors:["auto","tech"],magnitude:.035},{headline:"Streaming price wars intensify",impact:"mixed",sectors:["media"],magnitude:.02},{headline:"Generic drug approvals accelerate",impact:"negative",sectors:["health"],magnitude:.025},{headline:"5G rollout exceeds expectations",impact:"positive",sectors:["telecom","tech"],magnitude:.03},{headline:"Oil reserves discovery announced",impact:"positive",sectors:["energy"],magnitude:.035},{headline:"Record inflation reported",impact:"negative",sectors:["retail","food","finance"],magnitude:.035}],jf=[{id:"MSOFT",name:"MicroWeave",fullName:"MicroWeave Technologies, Inc.",sector:"tech",basePrice:337.5,volatility:.012,description:"Leading software company known for office productivity tools and operating systems.",logo:"\ud83e\ude9f",marketCap:2507e9,totalShares:74284e5,pe:35.8,revenue:2119e8,dividendYield:.73,beta:.94,events:{earnings:{day:25,month:[1,4,7,10]},dividend:{day:10,month:[2,5,8,11],amount:.62}},news:[{headline:"MicroWeave announces new cloud partnership",impact:.018,probability:.05},{headline:"MicroWeave OS security flaw discovered",impact:-.025,probability:.03},{headline:"MicroWeave acquires AI startup",impact:.022,probability:.04}]},{id:"APLE",name:"Pear",fullName:"Pear Inc.",sector:"tech",basePrice:182.85,volatility:.014,description:"Consumer electronics, software and services company with a dedicated following.",logo:"\ud83c\udf50",marketCap:2876e9,totalShares:15729e6,pe:30.2,revenue:3833e8,dividendYield:.52,beta:1.15,events:{earnings:{day:15,month:[2,5,8,11]},dividend:{day:5,month:[2,5,8,11],amount:.24}},news:[{headline:"Pear unveils next-gen smartphone",impact:.032,probability:.05},{headline:"Pear production delays reported",impact:-.028,probability:.03},{headline:"Pear services growth exceeds expectations",impact:.024,probability:.04}]},{id:"GOOG",name:"Boogle",fullName:"Boogle LLC",sector:"tech",basePrice:143.65,volatility:.013,description:"Search engine and digital advertising giant with diverse technology interests.",logo:"\ud83d\udd0d",marketCap:1832e9,totalShares:12754e6,pe:26.3,revenue:2828e8,dividendYield:0,beta:1.08,events:{earnings:{day:20,month:[1,4,7,10]},dividend:null},news:[{headline:"Boogle facing new antitrust lawsuit",impact:-.031,probability:.035},{headline:"Boogle AI assistant capabilities expanded",impact:.027,probability:.04},{headline:"Boogle ad revenue hits record high",impact:.024,probability:.045}]},{id:"AMZN",name:"Jungle",fullName:"Jungle Marketplace, Inc.",sector:"retail",basePrice:128.75,volatility:.016,description:"E-commerce and cloud computing giant with expanding interests in various industries.",logo:"\ud83d\udce6",marketCap:1324e9,totalShares:10284e6,pe:59.5,revenue:5139e8,dividendYield:0,beta:1.22,events:{earnings:{day:28,month:[1,4,7,10]},dividend:null},news:[{headline:"Jungle opens new fulfillment centers",impact:.021,probability:.04},{headline:"Jungle cloud division reports record growth",impact:.032,probability:.05},{headline:"Jungle workers plan strike at multiple locations",impact:-.027,probability:.03}]},{id:"MTBK",name:"FaceScroll",fullName:"MetaBook, Inc.",sector:"media",basePrice:312.75,volatility:.018,description:"Social media conglomerate focusing on virtual reality and connectivity.",logo:"\ud83d\udc65",marketCap:807e9,totalShares:2581e6,pe:28.1,revenue:1349e8,dividendYield:0,beta:1.35,events:{earnings:{day:22,month:[1,4,7,10]},dividend:null},news:[{headline:"FaceScroll faces new privacy regulations",impact:-.024,probability:.04},{headline:"FaceScroll virtual reality sales surge",impact:.031,probability:.035},{headline:"FaceScroll user growth stagnates",impact:-.022,probability:.03}]},{id:"NFLX",name:"Webflix",fullName:"Webflix Streaming Services, Inc.",sector:"media",basePrice:417.25,volatility:.019,description:"Streaming entertainment service with global reach and original content production.",logo:"\ud83c\udfac",marketCap:1855e8,totalShares:4446e5,pe:44.8,revenue:337e8,dividendYield:0,beta:1.27,events:{earnings:{day:18,month:[1,4,7,10]},dividend:null},news:[{headline:"Webflix subscriber numbers exceed expectations",impact:.043,probability:.04},{headline:"Webflix raises subscription prices",impact:-.024,probability:.045},{headline:"Webflix original series wins major awards",impact:.027,probability:.035}]},{id:"TSLA",name:"Coil",fullName:"Coil Motors, Inc.",sector:"auto",basePrice:235.45,volatility:.028,description:"Electric vehicle manufacturer also involved in renewable energy and space exploration.",logo:"\u26a1",marketCap:7486e8,totalShares:3179e6,pe:78.4,revenue:968e8,dividendYield:0,beta:1.92,events:{earnings:{day:26,month:[1,4,7,10]},dividend:null},news:[{headline:"Coil announces revolutionary new battery technology",impact:.052,probability:.03},{headline:"Coil production misses targets",impact:-.046,probability:.04},{headline:"Coil expands charging network globally",impact:.038,probability:.035}]},{id:"VZN",name:"Horizon",fullName:"Horizon Communications",sector:"telecom",basePrice:41.3,volatility:.012,description:"Telecommunications company providing cellular, broadband and digital services.",logo:"\ud83d\udce1",marketCap:1735e8,totalShares:420097e4,events:{earnings:{day:19,month:[1,4,7,10]},dividend:{day:15,month:[2,5,8,11],amount:.65}},news:[{headline:"Horizon completes largest 5G rollout to date",impact:.031,probability:.04},{headline:"Horizon faces network outage in major markets",impact:-.028,probability:.025},{headline:"Horizon to acquire regional fiber provider",impact:.024,probability:.03}]},{id:"PFE",name:"Fizor",fullName:"Fizor Pharmaceuticals",sector:"health",basePrice:36.85,volatility:.014,description:"Global pharmaceutical corporation developing vaccines and medications.",logo:"\ud83d\udc8a",marketCap:2075e8,totalShares:5631206e3,events:{earnings:{day:15,month:[2,5,8,11]},dividend:{day:10,month:[3,6,9,12],amount:.4}},news:[{headline:"Fizor drug receives FDA approval",impact:.055,probability:.035},{headline:"Fizor recalls treatment after safety concerns",impact:-.048,probability:.02},{headline:"Fizor vaccine shows promising trial results",impact:.043,probability:.03}]},{id:"XOM",name:"PetroCorp",fullName:"PetroCorp Energy",sector:"energy",basePrice:106.4,volatility:.017,description:"Multinational oil and gas corporation with exploration, production and distribution operations.",logo:"\u26fd",marketCap:4326e8,totalShares:406767e4,events:{earnings:{day:28,month:[1,4,7,10]},dividend:{day:10,month:[3,6,9,12],amount:.91}},news:[{headline:"PetroCorp discovers major new oil reserves",impact:.042,probability:.03},{headline:"PetroCorp faces new environmental regulations",impact:-.035,probability:.045},{headline:"PetroCorp expands renewable energy division",impact:.028,probability:.035}]},{id:"DIS",name:"Kingsley",fullName:"Kingsley Entertainment",sector:"media",basePrice:90.15,volatility:.018,description:"Entertainment conglomerate operating theme parks, movie studios, and streaming services.",logo:"\ud83c\udff0",marketCap:1648e8,totalShares:1828841e3,events:{earnings:{day:10,month:[2,5,8,11]},dividend:{day:20,month:[1,4,7,10],amount:.3}},news:[{headline:"Kingsley+ streaming subscribers surge",impact:.046,probability:.04},{headline:"Kingsley announces new theme park expansion",impact:.035,probability:.035},{headline:"Kingsley movie underperforms at box office",impact:-.032,probability:.03}]},{id:"SBUX",name:"MoonDollars",fullName:"MoonDollars Coffee Co.",sector:"food",basePrice:98.7,volatility:.016,description:"Global coffee chain with locations in hundreds of countries.",logo:"\u2615",marketCap:1131e8,totalShares:1146e6,events:{earnings:{day:5,month:[2,5,8,11]},dividend:{day:25,month:[2,5,8,11],amount:.53}},news:[{headline:"MoonDollars launches innovative new beverage line",impact:.038,probability:.045},{headline:"MoonDollars same-store sales decline",impact:-.033,probability:.03},{headline:"MoonDollars accelerates global expansion",impact:.036,probability:.035}]},{id:"PYPL",name:"BuddyPay",fullName:"BuddyPay Holdings",sector:"finance",basePrice:63.8,volatility:.019,description:"Digital payment platform enabling online money transfers and purchases.",logo:"\ud83d\udcb8",marketCap:711e8,totalShares:111442e4,events:{earnings:{day:12,month:[2,5,8,11]},dividend:null},news:[{headline:"BuddyPay expands cryptocurrency support",impact:.048,probability:.035},{headline:"BuddyPay transaction volume hits record high",impact:.043,probability:.04},{headline:"BuddyPay faces new regulatory scrutiny",impact:-.037,probability:.03}]},{id:"NKE",name:"Swoosh",fullName:"Swoosh Athletics",sector:"retail",basePrice:102.5,volatility:.015,description:"Athletic footwear and apparel multinational with iconic branding.",logo:"\ud83d\udc5f",marketCap:1579e8,totalShares:154048e4,events:{earnings:{day:28,month:[3,6,9,12]},dividend:{day:15,month:[1,4,7,10],amount:.34}},news:[{headline:"Swoosh signs record-breaking athlete endorsement",impact:.041,probability:.03},{headline:"Swoosh factory workers strike in Southeast Asia",impact:-.035,probability:.025},{headline:"Swoosh direct-to-consumer sales surge",impact:.039,probability:.04}]},{id:"SONO",name:"AudioWave",fullName:"AudioWave Sound Systems",sector:"tech",basePrice:15.4,volatility:.022,description:"Premium audio equipment manufacturer specializing in wireless speaker systems.",logo:"\ud83d\udd0a",marketCap:197e7,totalShares:12792e4,events:{earnings:{day:8,month:[2,5,8,11]},dividend:null},news:[{headline:"AudioWave releases revolutionary new speaker technology",impact:.058,probability:.03},{headline:"AudioWave faces component shortage",impact:-.042,probability:.035},{headline:"AudioWave partners with major streaming services",impact:.045,probability:.03}]},{id:"CRPT",name:"CoinDash",fullName:"CoinDash Crypto Exchange",sector:"finance",basePrice:128.65,volatility:.045,description:"Leading cryptocurrency exchange platform and blockchain technology company.",logo:"\ud83e\ude99",marketCap:242e8,totalShares:18811e4,events:{earnings:{day:20,month:[2,5,8,11]},dividend:null},news:[{headline:"CoinDash adds support for emerging cryptocurrencies",impact:.062,probability:.04},{headline:"CoinDash faces security breach",impact:-.075,probability:.02},{headline:"CoinDash expands institutional services",impact:.054,probability:.035}]},{id:"RBLX",name:"BlockWorld",fullName:"BlockWorld Interactive",sector:"tech",basePrice:38.7,volatility:.028,description:"Online gaming platform allowing users to develop and play games in a virtual universe.",logo:"\ud83c\udfae",marketCap:234e8,totalShares:60465e4,events:{earnings:{day:15,month:[2,5,8,11]},dividend:null},news:[{headline:"BlockWorld daily active users reach all-time high",impact:.056,probability:.04},{headline:"BlockWorld introduces new developer monetization features",impact:.042,probability:.035},{headline:"BlockWorld faces increased scrutiny over child safety",impact:-.047,probability:.025}]},{id:"DASH",name:"SwiftBite",fullName:"SwiftBite Delivery Services",sector:"food",basePrice:82.9,volatility:.026,description:"Food delivery platform connecting restaurants with customers via mobile app.",logo:"\ud83c\udf54",marketCap:322e8,totalShares:38842e4,events:{earnings:{day:10,month:[2,5,8,11]},dividend:null},news:[{headline:"SwiftBite expands into grocery delivery",impact:.047,probability:.035},{headline:"SwiftBite driver protests impact major markets",impact:-.039,probability:.03},{headline:"SwiftBite partners with major restaurant chains",impact:.043,probability:.04}]},{id:"RIVN",name:"FlowEV",fullName:"FlowEV Motors",sector:"auto",basePrice:17.3,volatility:.032,description:"Electric vehicle startup focused on trucks and SUVs with advanced autonomous features.",logo:"\ud83d\ude99",marketCap:163e8,totalShares:9422e5,events:{earnings:{day:10,month:[3,6,9,12]},dividend:null},news:[{headline:"FlowEV production capacity doubles with new factory",impact:.065,probability:.03},{headline:"FlowEV delays vehicle launch",impact:-.058,probability:.035},{headline:"FlowEV secures major fleet order",impact:.072,probability:.025}]},{id:"ABNB",name:"StayCation",fullName:"StayCation Rentals, Inc.",sector:"retail",basePrice:126.8,volatility:.023,description:"Online marketplace for short and long-term home and experience rentals worldwide.",logo:"\ud83c\udfe1",marketCap:815e8,totalShares:64274e4,events:{earnings:{day:5,month:[2,5,8,11]},dividend:null},news:[{headline:"StayCation bookings surge to record levels",impact:.054,probability:.04},{headline:"StayCation faces new rental regulations in major cities",impact:-.046,probability:.035},{headline:"StayCation introduces innovative new booking features",impact:.038,probability:.03}]},{id:"SPCE",name:"GalaxyTours",fullName:"GalaxyTours Holdings",sector:"aerospace",basePrice:2.7,volatility:.038,description:"Space tourism company developing spacecraft for commercial suborbital flights.",logo:"\ud83d\ude80",marketCap:99e7,totalShares:36667e4,events:{earnings:{day:22,month:[2,5,8,11]},dividend:null},news:[{headline:"GalaxyTours completes successful test flight",impact:.085,probability:.03},{headline:"GalaxyTours delays commercial launch schedule",impact:-.074,probability:.035},{headline:"GalaxyTours secures major partnership with aerospace giant",impact:.068,probability:.025}]}],If=[{id:"BTTC",name:"BizTycoon Composite",description:"Tracks all stocks in the market",companies:jf.map((e=>e.id)),baseValue:12845.63,volatility:.01,logo:"\ud83d\udcca"},{id:"TECH",name:"Technology Index",description:"Tracks technology sector stocks",companies:jf.filter((e=>"tech"===e.sector)).map((e=>e.id)),baseValue:15720.48,volatility:.015,logo:"\ud83d\udcbb"},{id:"RETA",name:"Retail & Consumer",description:"Tracks retail and consumer goods companies",companies:jf.filter((e=>"retail"===e.sector)).map((e=>e.id)),baseValue:8652.17,volatility:.012,logo:"\ud83d\uded2"},{id:"FINS",name:"Financial Services",description:"Tracks financial sector companies",companies:jf.filter((e=>"finance"===e.sector)).map((e=>e.id)),baseValue:5290.36,volatility:.011,logo:"\ud83d\udcb0"},{id:"TRNP",name:"Transportation & Auto",description:"Tracks transportation and automotive companies",companies:jf.filter((e=>"auto"===e.sector)).map((e=>e.id)),baseValue:4387.92,volatility:.018,logo:"\ud83d\ude97"}],Pf=e=>e>=2?"Market Surging: Enthusiastic buying pushes stocks to significant gains":e>=1?"Market Up: Positive sentiment drives broad market gains":e>=.2?"Market Positive: Modest gains across most sectors":e>-.2?"Market Flat: Sideways trading with minimal movement":e>-1?"Market Dipping: Slight selling pressure across stocks":e>-2?"Market Down: Broad selling pushes most stocks lower":"Market Plunging: Significant selling pressure across all sectors",Af=[{action:"Stock Buyback",description:"Company repurchases shares to return value to shareholders",impact:.03},{action:"Dividend Increase",description:"Company raises dividend payout to shareholders",impact:.025},{action:"Expansion Announcement",description:"Company announces new markets or products",impact:.035},{action:"Cost-Cutting",description:"Company implements efficiency measures to reduce expenses",impact:.02},{action:"Layoffs",description:"Company reduces workforce to lower costs",impact:-.015},{action:"Executive Change",description:"Company announces new leadership",impact:.01},{action:"Product Recall",description:"Company recalls product due to defects or safety concerns",impact:-.04},{action:"Missed Earnings",description:"Company reports earnings below expectations",impact:-.06},{action:"Earnings Beat",description:"Company reports earnings above expectations",impact:.05},{action:"Strategic Partnership",description:"Company forms alliance with another business",impact:.03},{action:"Acquisition",description:"Company purchases another business",impact:.02},{action:"Legal Settlement",description:"Company resolves legal dispute",impact:.015},{action:"Data Breach",description:"Company suffers security incident exposing data",impact:-.05},{action:"New Patent",description:"Company secures intellectual property protection",impact:.025},{action:"Research Breakthrough",description:"Company makes significant technological advancement",impact:.045}],Df={APPL:"AAPL",GOOG:"GOOGL",MCSF:"MSFT",AMZN:"AMZN",FCBK:"META",NFLX:"NFLX",TSLA:"TSLA",JPMG:"JPM",BNKA:"BAC",VISA:"V",MSTR:"MA",COCA:"KO",PEPS:"PEP",NIKE:"NKE",SBUX:"SBUX",WLMT:"WMT",TARG:"TGT",COST:"COST",FORD:"F",GENM:"GM",BOEN:"BA",CTRP:"CAT",EXON:"XOM",CHVR:"CVX",JNSN:"JNJ",PFIZ:"PFE",MRCK:"MRK",default_tech:"QQQ",default_finance:"XLF",default_energy:"XLE",default_healthcare:"XLV",default_consumer:"XLP",default_retail:"XRT",default_industrial:"XLI",default:"SPY"},Of=(e,t)=>{if(Df[e])return Df[e];const n=`default_${null===t||void 0===t?void 0:t.toLowerCase()}`;return Df[n]?Df[n]:Df.default},Rf=e=>{if(!e||0===e.length)return 0;return e.reduce(((e,t)=>e+t.currentPrice),0)/e.length},Lf={},Mf=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;const n=`${e}_${t}`,r=Lf[n];if(r&&Date.now()-r.timestamp<36e5)return r.data;try{const r=await fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${e}&apikey=demo`);if(!r.ok)throw new Error(`Failed to fetch data: ${r.statusText}`);const i=await r.json();if(i["Error Message"])throw new Error(i["Error Message"]);const s=i["Time Series (Daily)"];if(!s)return Ff(e);const a=Object.keys(s).slice(0,t).map((e=>parseFloat(s[e]["4. close"]))).reverse();return Lf[n]={data:a,timestamp:Date.now()},a}catch(i){return console.error(`Error fetching real-world data for ${e}:`,i),Ff(e)}},Ff=e=>{const t=50+10*e.length,n=.01+.02*Math.random();let r=t;const i=[r];for(let s=1;s<30;s++){r=r*(1+.003*Math.sin(s/5))+(Math.random()-.5)*n*r,r=Math.max(r,.5*t),i.push(r)}return i},Uf=(e,t)=>{switch(t.type){case"UPDATE_STOCK_PRICES":return{...e,companies:t.payload.companies,indices:t.payload.indices,nowAverage:t.payload.nowAverage,lastUpdate:(new Date).toLocaleTimeString(),marketStatus:t.payload.marketStatus,marketTrend:t.payload.marketTrend,marketMood:t.payload.marketMood};case"ADD_NEWS":return{...e,news:[t.payload,...e.news].slice(0,15)};case"BUY_STOCK":const n=t.payload,r=e.companies.map((e=>{if(e.id===n.stockId){const t=e.owned+n.shares,r=n.shares/e.totalShares,i=e.buyPressure+5*r;return{...e,owned:t,transactions:[{type:"buy",shares:n.shares,price:n.price,total:n.total,date:(new Date).toISOString()},...e.transactions],companyOwned:t>.51*e.totalShares,buyPressure:i,sellPressure:Math.max(0,e.sellPressure-2*r)}}return e})),i={id:Date.now(),type:"buy",stockId:n.stockId,shares:n.shares,price:n.price,total:n.total,date:(new Date).toISOString()};let s=[...e.playerOwnedStocks];const a=s.findIndex((e=>e.stockId===n.stockId));return a>=0?s[a]={...s[a],shares:s[a].shares+n.shares,averagePrice:(s[a].totalInvested+n.total)/(s[a].shares+n.shares),totalInvested:s[a].totalInvested+n.total}:s.push({stockId:n.stockId,shares:n.shares,averagePrice:n.price,totalInvested:n.total,purchaseDate:(new Date).toISOString()}),{...e,companies:r,transactionHistory:[i,...e.transactionHistory],playerOwnedStocks:s};case"SELL_STOCK":const o=t.payload,l=e.companies.map((e=>{if(e.id===o.stockId){const t=e.owned-o.shares,n=o.shares/e.totalShares,r=e.sellPressure+5*n;return{...e,owned:t,transactions:[{type:"sell",shares:o.shares,price:o.price,total:o.total,date:(new Date).toISOString()},...e.transactions],companyOwned:t>.51*e.totalShares,sellPressure:r,buyPressure:Math.max(0,e.buyPressure-2*n)}}return e})),c={id:Date.now(),type:"sell",stockId:o.stockId,shares:o.shares,price:o.price,total:o.total,date:(new Date).toISOString()};let u=[...e.playerOwnedStocks];const d=u.findIndex((e=>e.stockId===o.stockId));return d>=0&&(u[d].shares===o.shares?u=u.filter(((e,t)=>t!==d)):u[d]={...u[d],shares:u[d].shares-o.shares,totalInvested:u[d].totalInvested-u[d].averagePrice*o.shares}),{...e,companies:l,transactionHistory:[c,...e.transactionHistory],playerOwnedStocks:u};case"ADD_TO_WATCHLIST":return e.watchlist.includes(t.payload)?e:{...e,watchlist:[...e.watchlist,t.payload]};case"REMOVE_FROM_WATCHLIST":return{...e,watchlist:e.watchlist.filter((e=>e!==t.payload))};case"COMPANY_ACTION":const{companyId:h,action:f,impact:p}=t.payload,m={id:Date.now(),headline:`${e.companies.find((e=>e.id===h)).name} ${f.action}`,content:f.description,impact:p>0?"positive":"negative",timestamp:(new Date).toISOString(),companyId:h};return{...e,news:[m,...e.news].slice(0,15),companies:e.companies.map((e=>{if(e.id===h){const t=e.currentPrice*(1+p);return{...e,previousPrice:e.currentPrice,currentPrice:t,priceHistory:[...e.priceHistory,t].slice(-50),percentChange:100*(t/e.previousPrice-1),trending:p>0?"up":"down",recentNews:m}}return e}))};case"ADVANCE_MARKET_TIME":const{newHour:g,newMinute:y,newDay:v,isOpen:b}=t.payload;return{...e,marketHour:g,marketMinute:y,marketDay:v||e.marketDay,marketOpen:b};case"SET_REAL_WORLD_PRICE_HISTORY":return{...e,companies:e.companies.map((e=>e.id===t.payload.id?{...e,realWorldPriceHistory:t.payload.priceHistory,lastRealWorldUpdate:Date.now()}:e))};case"RECORD_PRICE_CHANGES":return{...e,companies:t.payload.companies,lastPriceRecordTime:t.payload.timestamp};case"REFRESH_PRICES":const w=Date.now(),x=e.marketMood,k=e.companies.map((e=>{const t=e.volatility||.02,n="bullish"===x?.3:"bearish"===x?-.3:0,r=(Math.random()-.5)*t*2+n*t+.01*(e.buyPressure-e.sellPressure),i=Math.max(.01,e.currentPrice*(1+r)),s=i>e.lastRecordedPrice?"up":i<e.lastRecordedPrice?"down":"neutral";return{...e,previousPrice:e.currentPrice,currentPrice:i,lastRecordedPrice:i,priceHistory:[...e.priceHistory,i].slice(-50),percentChange:100*(i/e.previousPrice-1),trending:s,priceDirection:s,priceChangeTime:w,buyPressure:.95*e.buyPressure,sellPressure:.95*e.sellPressure}})),S=Rf(k),N=e.nowAverage.currentValue,E=100*(S/N-1);let _="neutral";E>.05?_="up":E<-.05&&(_="down");const C={...e.nowAverage,previousValue:N,currentValue:S,valueHistory:[...e.nowAverage.valueHistory,S],percentChange:E,trending:_,description:Pf(E)};return{...e,companies:k,nowAverage:C,lastPriceRecordTime:w,lastUpdate:(new Date).toLocaleTimeString()};case"INTERNAL_CLOCK_UPDATE":return{...e,companies:t.payload.companies,nowAverage:t.payload.nowAverage,lastPriceRecordTime:t.payload.timestamp,lastUpdate:(new Date).toLocaleTimeString()};case"MARKET_DAY_ADVANCE":const T=e.nowAverage.currentValue,j={...e.nowAverage,valueHistory:[T]};return{...e,marketDay:e.marketDay+1,marketHour:9,marketMinute:30,nowAverage:j};case"UPDATE_MARKET_TIME":return{...e,marketHour:t.payload.hour,marketMinute:t.payload.minute};default:return e}},Vf=(0,r.createContext)(),zf=e=>{var t;let{children:n}=e;const[i,s]=(0,r.useReducer)(Uf,(()=>{const e=jf.map((e=>({...e,currentPrice:e.basePrice,previousPrice:e.basePrice,priceHistory:Array(50).fill(e.basePrice).map((e=>e*(.1*Math.random()-.05+1))),percentChange:0,volume:Math.floor(1e7*Math.random()),dayHigh:1.01*e.basePrice,dayLow:.99*e.basePrice,weekHigh:1.05*e.basePrice,weekLow:.95*e.basePrice,trending:"neutral",owned:0,transactions:[],companyOwned:!1,recentNews:null,lastRecordedPrice:e.basePrice,priceDirection:"neutral",priceChangeTime:Date.now(),buyPressure:0,sellPressure:0,priceTrend:0}))),t=If.map((e=>({...e,currentValue:e.baseValue,previousValue:e.baseValue,valueHistory:Array(50).fill(e.baseValue).map((e=>e*(.08*Math.random()-.04+1))),percentChange:0,trending:"neutral"}))),n=Rf(e);return{companies:e,indices:t,news:[],marketStatus:"Market Opening: Trading begins for the day",lastUpdate:(new Date).toLocaleTimeString(),playerOwnedStocks:[],transactionHistory:[],watchlist:[],marketDay:1,marketHour:9,marketMinute:30,marketOpen:!0,marketTrend:"neutral",marketMood:0,nowAverage:{currentValue:n,previousValue:n,valueHistory:[n],percentChange:0,trending:"neutral",name:"NOW Average",description:"Average of all stocks currently trading on the market"},lastPriceRecordTime:Date.now()}})()),{state:a,dispatch:o}=lf(),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),h=(0,r.useRef)(Date.now()),f=(0,r.useRef)(null),p=(0,r.useRef)(null),[m,g]=(0,r.useState)(0),y=()=>{let e=i.marketHour,t=i.marketMinute+1,n=i.marketDay,r=!0;t>=60&&(t=0,e++),e>=16?(r=!1,e>=24&&(e=9,t=30,n++,r=!0)):(e<9||9===e&&t<30)&&(r=!1),s({type:"ADVANCE_MARKET_TIME",payload:{newHour:e,newMinute:t,newDay:n,isOpen:r}})};(0,r.useEffect)((()=>(f.current=setInterval((()=>{i.marketOpen&&b()}),5e3),()=>{f.current&&clearInterval(f.current)})),[]),(0,r.useEffect)((()=>{const e=setInterval((()=>{(()=>{if(s({type:"UPDATE_PRICES_START"}),!i.marketOpen)return;const e=.7*(Math.random()*(Cf.MARKET_SENTIMENT.max-Cf.MARKET_SENTIMENT.min)+Cf.MARKET_SENTIMENT.min)+i.marketMood/100*.3,t=Math.random()<.05?Tf[Math.floor(Math.random()*Tf.length)]:null,n={};Object.keys(Cf.SECTOR_TRENDS).forEach((r=>{const i=Cf.SECTOR_TRENDS[r],s=Math.random()*(i.max-i.min)+i.min;if(n[r]=.6*e+.4*s,t&&t.sectors.includes(r)){const e="positive"===t.impact?1:"negative"===t.impact?-1:Math.random()>.5?1:-1;n[r]+=e*t.magnitude}}));const r=i.companies.map((e=>{let t=n[e.sector]||0;const r=e.beta||1;t+=(2*Math.random()-1)*e.volatility*r*.4;let i=e.priceTrend||0;i=.95*i+.05*t,i=Math.max(-.5,Math.min(.5,i));const a=.15*(e.buyPressure-e.sellPressure);if(t+=a,t=.5*t+.3*i+.2*a,Math.random()<.01&&e.news&&e.news.length>0){const n=e.news[Math.floor(Math.random()*e.news.length)];Math.random()<n.probability&&(t+=n.impact,s({type:"ADD_NEWS",payload:{id:Date.now(),headline:n.headline,content:`News specific to ${e.name}.`,impact:n.impact>0?"positive":"negative",timestamp:(new Date).toISOString(),companyId:e.id}}))}const l=new Date,c=l.getDate(),u=l.getMonth()+1;if(e.events.earnings&&e.events.earnings.day===c&&e.events.earnings.month.includes(u)){const n=Math.random();let r=0,i="";const a=e.pe?Math.min(Math.sqrt(e.pe/20),1.5):1;n>.6?(r=(.05*Math.random()+.02)/a,i=`${e.name} beats earnings expectations`):n>.25?(r=.02*Math.random()-.01,i=`${e.name} meets earnings expectations`):(r=-(.06*Math.random()+.03)*a,i=`${e.name} misses earnings expectations`),t+=r,s({type:"ADD_NEWS",payload:{id:Date.now(),headline:i,content:`${e.name} reported quarterly earnings.`,impact:r>0?"positive":r<0?"negative":"neutral",timestamp:(new Date).toISOString(),companyId:e.id}})}if(e.events.dividend&&e.events.dividend.day===c&&e.events.dividend.month.includes(u)){t+=.003,s({type:"ADD_NEWS",payload:{id:Date.now(),headline:`${e.name} pays quarterly dividend of $${e.events.dividend.amount} per share`,content:"Shareholders of record received dividends today.",impact:"positive",timestamp:(new Date).toISOString(),companyId:e.id}});const n=e.owned;if(n>0){const t=n*e.events.dividend.amount;o({type:"UPDATE_MONEY",payload:t}),s({type:"ADD_NEWS",payload:{id:Date.now(),headline:`You received $${t.toFixed(2)} in dividends from ${e.name}`,content:`Dividend payment for ${n} shares at $${e.events.dividend.amount} per share.`,impact:"positive",timestamp:(new Date).toISOString(),companyId:e.id,isPersonal:!0}})}}const d=.995*e.buyPressure,h=.995*e.sellPressure;t=Math.max(Math.min(t,.09),-.09);const f=e.currentPrice*(1+t);let p="neutral";t>.0025?p="up":t<-.0025&&(p="down");const m=Math.abs(t)*e.totalShares*.05,g=.75+.5*Math.random(),y=Math.floor(e.volume+m*g),v=Math.max(.01,f),b=(e.priceHistory,Math.max(e.dayHigh,v)),w=Math.min(e.dayLow,v),x=Math.max(e.weekHigh,v),k=Math.min(e.weekLow,v),S=[...e.priceHistory||[],v].slice(-60);return{...e,previousPrice:e.currentPrice,currentPrice:v,priceHistory:S,percentChange:100*(v/e.previousPrice-1),trending:p,volume:y,dayHigh:b,dayLow:w,weekHigh:x,weekLow:k,priceTrend:i,buyPressure:d,sellPressure:h}})),a=i.indices.map((e=>{const t=r.filter((t=>e.companies.includes(t.id))).map((e=>({id:e.id,price:e.currentPrice,prevPrice:e.previousPrice}))),n=t.reduce(((e,t)=>e+t.price),0)/t.length*e.baseValue/100,i=t.reduce(((e,t)=>e+t.prevPrice),0)/t.length*e.baseValue/100;let s="neutral";const a=n/i-1;return a>.001?s="up":a<-.001&&(s="down"),{...e,previousValue:e.currentValue,currentValue:n,valueHistory:[...e.valueHistory,n],percentChange:100*(n/e.previousValue-1),trending:s}})),l=r.reduce(((e,t)=>e+t.marketCap),0),c=100*r.reduce(((e,t)=>{const n=t.marketCap/l;return e+t.currentPrice*n}),0),u=i.nowAverage.currentValue,d=100*(c/u-1);let f="neutral";d>.08?f="up":d<-.08&&(f="down");const p=[...i.nowAverage.valueHistory,c],m={...i.nowAverage,previousValue:u,currentValue:c,valueHistory:p,percentChange:d,trending:f,description:Pf(d)};let g=i.marketMood;d>.5?g+=.5:d>.1?g+=.2:d<-.5?g-=.5:d<-.1&&(g-=.2),g*=.95,g=Math.max(-10,Math.min(10,g));let v="neutral";if(g>3?v="bullish":g>1?v="positive":g<-3?v="bearish":g<-1&&(v="negative"),Math.abs(d)>1.5){const e={id:Date.now(),headline:d>0?`Markets surge ${d.toFixed(1)}% on strong buying pressure`:`Markets plunge ${Math.abs(d).toFixed(1)}% amid broad selling`,content:Pf(d),impact:d>0?"positive":"negative",timestamp:(new Date).toISOString(),isMarketWide:!0};s({type:"ADD_NEWS",payload:e})}t&&s({type:"ADD_NEWS",payload:{id:Date.now(),headline:t.headline,content:`This event is affecting ${t.sectors.join(", ")} sectors.`,impact:t.impact,timestamp:(new Date).toISOString(),sectors:t.sectors}});const w=Pf(d);s({type:"UPDATE_STOCK_PRICES",payload:{companies:r,indices:a,nowAverage:m,marketStatus:w,marketTrend:v,marketMood:g}}),Date.now()-h.current>=5e3&&b(),y()})()}),1e3);return c(e),()=>clearInterval(e)}),[]);(0,r.useEffect)((()=>{const e=async()=>{if(i.companies&&i.companies.length>0){const e=5;for(let t=0;t<i.companies.length;t+=e){const n=i.companies.slice(t,t+e).map((async e=>{if(!e.lastRealWorldUpdate||Date.now()-e.lastRealWorldUpdate>36e5){const t=Of(e.id,e.sector),n=await Mf(t);n&&n.length>0&&s({type:"SET_REAL_WORLD_PRICE_HISTORY",payload:{id:e.id,priceHistory:n}})}}));await Promise.all(n),t+e<i.companies.length&&await new Promise((e=>setTimeout(e,1500)))}}};e();const t=setInterval(e,36e5);return()=>clearInterval(t)}),[null===(t=i.companies)||void 0===t?void 0:t.length]);const v=(0,r.useCallback)((()=>{if(g((e=>e+1)),i.marketOpen){const e=Date.now(),t=i.companies.map((t=>{const n=.012*((t.buyPressure||0)-(t.sellPressure||0)),r=t.volatility||.01,i=.7*n+.3*((2*Math.random()-1)*r*.5),s=Math.max(.01,t.currentPrice*(1+i)),a=s>t.currentPrice?"up":s<t.currentPrice?"down":"neutral";return{...t,previousPrice:t.currentPrice,currentPrice:s,lastRecordedPrice:s,priceHistory:[...t.priceHistory,s].slice(-50),percentChange:100*(s/t.previousPrice-1),trending:a,priceDirection:a,priceChangeTime:e,buyPressure:.98*t.buyPressure,sellPressure:.98*t.sellPressure}})),n=Rf(t),r=i.nowAverage.currentValue,a=100*(n/r-1);let o="neutral";a>.05?o="up":a<-.05&&(o="down");const l={...i.nowAverage,previousValue:r,currentValue:n,valueHistory:[...i.nowAverage.valueHistory,n],percentChange:a,trending:o,description:Pf(a)};s({type:"INTERNAL_CLOCK_UPDATE",payload:{companies:t,nowAverage:l,timestamp:e,clockTick:m}})}}),[i.companies,i.marketOpen,i.nowAverage,m]);(0,r.useEffect)((()=>(!p.current&&v&&(p.current=setInterval((()=>{if(g((e=>e+1)),v(),i.marketOpen){const e=(i.marketMinute+1)%60;let t=i.marketHour;0===e&&(t=(i.marketHour+1)%24),s(16===t&&0===e?{type:"MARKET_DAY_ADVANCE"}:{type:"UPDATE_MARKET_TIME",payload:{hour:t,minute:e}})}}),5e3)),()=>{p.current&&clearInterval(p.current)})),[v,i.marketHour,i.marketMinute,i.marketOpen]);const b=()=>{if(!i.marketOpen)return;const e=Date.now(),t=i.companies.map((t=>{const n=t.currentPrice>t.lastRecordedPrice?"up":t.currentPrice<t.lastRecordedPrice?"down":"neutral";return{...t,lastRecordedPrice:t.currentPrice,priceDirection:n,priceChangeTime:e}}));s({type:"RECORD_PRICE_CHANGES",payload:{companies:t,timestamp:e}}),h.current=e},w={stockMarket:i,buyStock:(e,t)=>{const n=i.companies.find((t=>t.id===e));if(!n)throw new Error(`Company with ID ${e} not found`);if(t<=0)throw new Error("Cannot buy zero or negative shares");const r=n.currentPrice,l=r*t;return a.money<l?{success:!1,message:"Insufficient funds"}:(o({type:"UPDATE_MONEY",payload:-l}),s({type:"BUY_STOCK",payload:{stockId:e,shares:t,price:r,total:l}}),{success:!0,message:`Successfully purchased ${t} shares of ${n.name} for $${l.toFixed(2)}`})},sellStock:(e,t)=>{const n=i.companies.find((t=>t.id===e));if(!n)throw new Error(`Company with ID ${e} not found`);if(t<=0)throw new Error("Cannot sell zero or negative shares");const r=i.playerOwnedStocks.find((t=>t.stockId===e));if(!r||r.shares<t)throw new Error(`You only own ${r?r.shares:0} shares of ${n.name}`);const a=n.currentPrice,l=a*t;return o({type:"UPDATE_MONEY",payload:l}),s({type:"SELL_STOCK",payload:{stockId:e,shares:t,price:a,total:l}}),{success:!0,message:`Successfully sold ${t} shares of ${n.name} for $${l.toFixed(2)}`}},toggleWatchlist:e=>{i.watchlist.includes(e)?s({type:"REMOVE_FROM_WATCHLIST",payload:e}):s({type:"ADD_TO_WATCHLIST",payload:e})},takeCompanyAction:e=>{const t=i.companies.find((t=>t.id===e));if(!t||!t.companyOwned)return{success:!1,message:"You don't control this company"};const n=Af[Math.floor(Math.random()*Af.length)];return s({type:"COMPANY_ACTION",payload:{companyId:e,action:n,impact:n.impact}}),{success:!0,message:`Successfully executed ${n.action}`}},dispatch:s};return(0,Wh.jsx)(Vf.Provider,{value:w,children:n})},Bf=()=>{const{stockMarket:e,buyStock:t,sellStock:n,toggleWatchlist:i,dispatch:s}=(()=>{const e=(0,r.useContext)(Vf);if(void 0===e)throw new Error("useStockMarket must be used within a StockMarketProvider");return e})(),{gameState:a,gameDispatch:o}=lf(),[l,c]=(0,r.useState)(0),[u,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(Date.now()),[p,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)("buy"),[w,x]=(0,r.useState)(0),[k,S]=(0,r.useState)({}),[N,E]=(0,r.useState)(null),[_,C]=(0,r.useState)(null),[T,j]=(0,r.useState)(1),[I,P]=(0,r.useState)("buy"),[A,D]=(0,r.useState)(null),[O,R]=(0,r.useState)(!1),[L,M]=(0,r.useState)(""),[F,U]=(0,r.useState)({key:"name",direction:"ascending"}),[V,z]=(0,r.useState)("all"),[B,$]=(0,r.useState)([]),[H,q]=(0,r.useState)(!1),[W,G]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(null),[Y,X]=(0,r.useState)(null),[J,Z]=(0,r.useState)({}),[ee,te]=(0,r.useState)(window.innerWidth),[ne,re]=(0,r.useState)(Date.now()),[ie,se]=(0,r.useState)(0),[ae,oe]=(0,r.useState)(!1),[le,ce]=(0,r.useState)(!1),[ue,de]=(0,r.useState)(Date.now()),[he,fe]=(0,r.useState)(!1),pe=(0,r.useRef)(null),me=(0,r.useRef)(null),ge=(0,r.useRef)(null),ye=(0,r.useRef)(null);(0,r.useMemo)((()=>{if(!e.companies)return["all"];const t=new Set(e.companies.map((e=>e.sector)));return["all",...Array.from(t)]}),[e.companies]);(0,r.useEffect)((()=>{j(1)}),[p]),(0,r.useEffect)((()=>{if(A){const e=setTimeout((()=>{D(null)}),3e3);return()=>clearTimeout(e)}}),[A]),(0,r.useEffect)((()=>{const e=e=>{ge.current&&!ge.current.contains(e.target)&&R(!1)};return O?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[O]),(0,r.useEffect)((()=>{const e=()=>{te(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,r.useEffect)((()=>{if(p&&O)return ye.current=setInterval((()=>{re(Date.now()),se((e=>e+1)),ce(!0),setTimeout((()=>{ce(!1)}),500)}),3e4),()=>{ye.current&&clearInterval(ye.current)}}),[p,O]),(0,r.useEffect)((()=>{p&&p.id!==Y&&(Ce(p),X(p.id))}),[p,Y]),(0,r.useEffect)((()=>{if(!a)return;const t=Date.now();if(t-h<6e4)return;const n=e.playerOwnedStocks.reduce(((t,n)=>{const r=e.companies.find((e=>e.id===n.stockId));return r?t+r.currentPrice*n.shares:t}),0),r=a.money+n;c(r),d((e=>{const n=[...e,{timestamp:t,value:r}];return n.length>100?n.slice(-100):n})),f(t)}),[e,a,h]),(0,r.useEffect)((()=>{const e=setInterval((()=>{Date.now()-ue>3e5&&(fe(!0),s({type:"REFRESH_PRICES"}),de(Date.now()),setTimeout((()=>{fe(!1)}),1e3))}),6e4);return()=>{clearInterval(e)}}),[ue,s]);const ve=(0,r.useCallback)((()=>{if(!ue)return"5:00";const e=Date.now()-ue,t=Math.max(0,3e5-e),n=Math.floor(t/6e4),r=Math.floor(t%6e4/1e3);return`${n}:${r<10?"0":""}${r}`}),[ue]);if(!a)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const be=a,{money:we}=be,xe=e=>{let t="ascending";F.key===e&&"ascending"===F.direction&&(t="descending"),U({key:e,direction:t})},ke=()=>{if(!e.companies)return[];const t=[...e.companies.filter((e=>("all"===V||e.sector===V)&&(e.name.toLowerCase().includes(L.toLowerCase())||e.id.toLowerCase().includes(L.toLowerCase()))))].sort(((e,t)=>e[F.key]<t[F.key]?"ascending"===F.direction?-1:1:e[F.key]>t[F.key]?"ascending"===F.direction?1:-1:0));return t},Se=e=>F.key!==e?null:(0,Wh.jsx)("span",{className:"ml-1",children:"ascending"===F.direction?"\u2191":"\u2193"});(0,r.useEffect)((()=>{const t={...J};let n=!1;e.companies.forEach((e=>{if(!J[e.id]){n=!0;const r=20;let i;i=e.realWorldPriceHistory&&e.realWorldPriceHistory.length>0?e.realWorldPriceHistory.slice(-r):e.priceHistory.length>=r?e.priceHistory.slice(-r):Ne(e,r),t[e.id]=i}})),n&&Z(t)}),[e.companies.length]);const Ne=(e,t)=>{const n=e.currentPrice,r=.5*(e.volatility||.02);let i=[n];for(let s=1;s<t;s++){const s=r*(.8*Math.random()+.6),a=2*(Math.random()-.5)*s*i[0],o=e.percentChange/100*n*(.01/t),l=i[0]-o+a;i.unshift(Math.max(l,.9*n))}return i},Ee=e=>{const t=50,n=180;let r;if(J[e.id])r=J[e.id];else{const t=20;r=e.realWorldPriceHistory&&e.realWorldPriceHistory.length>0?e.realWorldPriceHistory.slice(-t):e.priceHistory.length>=t?e.priceHistory.slice(-t):Ne(e,t),Z((t=>({...t,[e.id]:r})))}const i=Math.min(...r),s=Math.max(...r)-i||1,a=r.map(((e,a)=>`${a/(r.length-1)*n},${t-(e-i)/s*t}`)).join(" "),o=e.percentChange>=0?"#10B981":"#EF4444",l=t-(r[r.length-1]-i)/s*t;return(0,Wh.jsxs)("svg",{width:"100%",height:t,className:"stock-chart",viewBox:"0 0 180 50",preserveAspectRatio:"xMidYMid meet","data-company-id":e.id,children:[(0,Wh.jsx)("polygon",{points:a+" 180,50 0,50",fill:e.percentChange>=0?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)"}),(0,Wh.jsx)("polyline",{points:a,fill:"none",stroke:o,strokeWidth:"2"}),(0,Wh.jsx)("circle",{cx:180,cy:l,r:"3",fill:o}),(0,Wh.jsx)("rect",{x:"0",y:"0",width:n,height:t,fill:"transparent",className:"chart-hover-area","data-points":a,"data-color":o,"data-min-price":i,"data-price-range":s})]})},_e=e=>{if(m(e),j(1),P("buy"),R(!0),X(e.id),re(Date.now()),se(0),e.priceHistory&&e.priceHistory.length>0){const t=Math.min(60,e.priceHistory.length);Q(e.priceHistory.slice(-t))}else Q([e.currentPrice])},Ce=e=>{if(!e)return;const t=e.currentPrice;if(K&&K.length>0&&Y===e.id){if(K[K.length-1]!==t){const e=[...K,t];e.length>60?Q(e.slice(-60)):Q(e)}}else if(e.priceHistory&&e.priceHistory.length>0){const n=Math.min(60,e.priceHistory.length);Q([...e.priceHistory.slice(-n),t])}else Q([t])},Te=()=>{if(p&&!(T<=0))try{if("buy"===I){if(p.currentPrice*T>we)return void D({type:"error",message:"Insufficient funds for this purchase"});const e=t(p.id,T);if(!e.success)return void D({type:"error",message:e.message||"Transaction failed"});D({type:"success",message:e.message})}else{const t=e.playerOwnedStocks.find((e=>e.stockId===p.id));if(!t||t.shares<T)return void D({type:"error",message:"You don't own enough shares to sell"});const r=n(p.id,T);if(!r.success)return void D({type:"error",message:r.message||"Transaction failed"});D({type:"success",message:r.message})}j(1),R(!1)}catch(r){D({type:"error",message:"Transaction failed: "+r.message})}},je=t=>{if(!t)return null;const n=200,r=Math.min(450,ee-60);let i;Y===t.id&&K&&0!==K.length?i=K:(Ce(t),i=[t.currentPrice]),1===i.length&&(i=[i[0],i[0]]);const s=Math.min(...i),a=Math.max(...i),o=a-s||1,l=Math.floor(.998*s),c=Math.ceil(1.002*a),u=i.map(((e,t)=>`${t/(i.length-1)*r},${n-(e-s)/o*n}`)).join(" "),d=i[i.length-1]>=i[0],h=d?"#10B981":"#EF4444",f=d?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",p=u+` ${r},200 0,200`,m=r,g=n-(i[i.length-1]-s)/o*n;let y=[];for(let v=0;v<6;v++){const t=Math.floor(v*(i.length-1)/5),n=Math.floor(.5*(i.length-1-t)),r=e.marketMinute,s=e.marketHour;let a=(r-n+60)%60,o=s;n>r&&(o=(s-Math.ceil(n/60)+24)%24,a=(a+60)%60);const l=a.toString().padStart(2,"0");y.push(`${o}:${l}`)}return(0,Wh.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,Wh.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Price History"}),(0,Wh.jsxs)("div",{className:"relative chart-container",children:[(0,Wh.jsxs)("svg",{width:"100%",height:230,className:"detailed-stock-chart",id:"detailed-chart",viewBox:`0 0 ${r} 230`,preserveAspectRatio:"xMidYMid meet",children:[(0,Wh.jsx)("polygon",{points:p,fill:f}),(0,Wh.jsx)("polyline",{points:u,fill:"none",stroke:h,strokeWidth:"2",className:"price-line"}),(0,Wh.jsx)("circle",{cx:m,cy:g,r:"4",fill:h,className:"end-point"}),(0,Wh.jsx)("circle",{cx:"0",cy:"0",r:"0",fill:h,className:"hover-point",opacity:"0"}),(0,Wh.jsxs)("g",{className:"price-tooltip",opacity:"0",transform:"translate(0,0)",children:[(0,Wh.jsx)("rect",{x:"-40",y:"-30",width:"80",height:"22",rx:"4",fill:"rgba(0,0,0,0.7)"}),(0,Wh.jsx)("text",{x:"0",y:"-15",fill:"white","text-anchor":"middle","font-size":"12",className:"tooltip-text",children:"$0.00"})]}),(0,Wh.jsx)("line",{x1:"0",y1:n,x2:r,y2:n,stroke:"#e5e7eb",strokeWidth:"1"}),y.map(((e,t)=>{const n=t/(y.length-1)*r;return(0,Wh.jsx)("text",{x:n,y:220,textAnchor:0===t?"start":t===y.length-1?"end":"middle",fill:"#6b7280",fontSize:"12",children:e},t)})),(0,Wh.jsxs)("text",{x:"5",y:"15",textAnchor:"start",fill:"#6b7280",fontSize:"12",children:["$",c.toFixed(2)]}),(0,Wh.jsxs)("text",{x:"5",y:195,textAnchor:"start",fill:"#6b7280",fontSize:"12",children:["$",l.toFixed(2)]}),(0,Wh.jsx)("line",{x1:"0",y1:n-(t.currentPrice-s)/o*n,x2:r,y2:n-(t.currentPrice-s)/o*n,stroke:h,strokeWidth:"1",strokeDasharray:"2,2"}),(0,Wh.jsx)("rect",{x:"0",y:"0",width:r,height:n,fill:"transparent",className:"detailed-chart-hover-area","data-points":u,"data-color":h,"data-min-price":s,"data-price-range":o,"data-price-data":JSON.stringify(i)})]}),(0,Wh.jsx)("div",{className:"absolute top-1/2 right-2 transform -translate-y-1/2",children:(0,Wh.jsx)("div",{className:"px-2 py-1 rounded "+(d?"bg-green-100":"bg-red-100"),children:(0,Wh.jsxs)("span",{className:"text-sm font-medium "+(d?"text-green-700":"text-red-700"),children:["$",t.currentPrice.toFixed(2)]})})})]}),(0,Wh.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 mt-4 text-sm",children:[(0,Wh.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,Wh.jsx)("span",{className:"block text-gray-500",children:"First Point"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",i[0].toFixed(2)]})]}),(0,Wh.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,Wh.jsx)("span",{className:"block text-gray-500",children:"Current"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",t.currentPrice.toFixed(2)]})]}),(0,Wh.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,Wh.jsx)("span",{className:"block text-gray-500",children:"High"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",a.toFixed(2)]})]}),(0,Wh.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,Wh.jsx)("span",{className:"block text-gray-500",children:"Low"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",s.toFixed(2)]})]})]})]})};(0,r.useEffect)((()=>{const t=(e,t)=>{if(!e||0===e.length)return null;const n=e.split(" ").map((e=>{const[t,n]=e.split(",").map(parseFloat);return{x:t,y:n}}));let r=null,i=1/0;return n.forEach((e=>{const n=Math.abs(e.x-t);n<i&&(i=n,r=e)})),r},n=e=>{const n=e.currentTarget,r=n.parentNode,i=n.getAttribute("data-points"),s=n.getAttribute("data-color");let a=r.querySelector(".hover-dot");a||(a=document.createElementNS("http://www.w3.org/2000/svg","circle"),a.setAttribute("class","hover-dot"),a.setAttribute("r","3"),a.setAttribute("fill",s),r.appendChild(a));const o=r.getBoundingClientRect(),l=e.clientX-o.left,c=t(i,l);c&&(a.setAttribute("cx",c.x),a.setAttribute("cy",c.y),a.style.opacity="1")},r=e=>{const t=e.currentTarget.parentNode.querySelector(".hover-dot");t&&(t.style.opacity="0")},i=n=>{const r=n.currentTarget,i=r.parentNode,s=r.getAttribute("data-points"),a=(parseFloat(r.getAttribute("data-min-price")),parseFloat(r.getAttribute("data-price-range")),JSON.parse(r.getAttribute("data-price-data"))),o=i.querySelector(".hover-point"),l=i.querySelector(".price-tooltip"),c=i.querySelector(".tooltip-text"),u=i.getBoundingClientRect(),d=n.clientX-u.left,h=t(s,d);if(h){o.setAttribute("cx",h.x),o.setAttribute("cy",h.y),o.setAttribute("r","5"),o.style.opacity="1";const t=h.x/u.width,n=Math.round(t*(a.length-1)),r=a[n],i=Math.round((a.length-1-n)*(60/a.length)),s=e.marketMinute,d=e.marketHour;let f=d;s<i&&(f=(d-1+24)%24);const p=`${f}:${((s-i+60)%60).toString().padStart(2,"0")}`;c.textContent=`$${r.toFixed(2)} @ ${p}`,l.setAttribute("transform",`translate(${h.x},${h.y-5})`),l.style.opacity="1";const m=l.querySelector("rect");m&&(m.setAttribute("width","120"),m.setAttribute("x","-60"))}},s=e=>{const t=e.currentTarget.parentNode,n=t.querySelector(".hover-point"),r=t.querySelector(".price-tooltip");n&&(n.style.opacity="0"),r&&(r.style.opacity="0")},a=document.querySelectorAll(".chart-hover-area");a.forEach((e=>{e.addEventListener("mousemove",n),e.addEventListener("mouseleave",r)}));const o=document.querySelector(".detailed-chart-hover-area");return o&&(o.addEventListener("mousemove",i),o.addEventListener("mouseleave",s)),()=>{a.forEach((e=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseleave",r)})),o&&(o.removeEventListener("mousemove",i),o.removeEventListener("mouseleave",s))}}),[O,ke().length,e.marketHour,e.marketMinute]),(0,r.useEffect)((()=>{if(e.companies){const t={};e.companies.forEach((e=>{if(k[e.id]?t[e.id]=Array.isArray(k[e.id])?[...k[e.id]]:[]:t[e.id]=[],e.priceDirection&&e.priceChangeTime){t[e.id].find((t=>t.timestamp===e.priceChangeTime))||(t[e.id].push({price:e.lastRecordedPrice,direction:e.priceDirection,timestamp:e.priceChangeTime}),t[e.id].length>10&&(t[e.id]=t[e.id].slice(-10)))}})),S(t)}}),[e.companies,e.lastPriceRecordTime]),(0,r.useEffect)((()=>{if(!O)return;const e=setInterval((()=>{re((e=>e))}),1e3);return()=>clearInterval(e)}),[O]),(0,r.useEffect)((()=>(pe.current&&clearInterval(pe.current),pe.current=setInterval((()=>{fe(!0),s({type:"REFRESH_PRICES"}),de(Date.now()),setTimeout((()=>fe(!1)),800)}),5e3),()=>{pe.current&&(clearInterval(pe.current),pe.current=null)})),[s]),(0,r.useEffect)((()=>{const e=setInterval((()=>{de((e=>e))}),1e3);return()=>clearInterval(e)}),[]);const Ie=(0,r.useCallback)((()=>{let t=we;return t+=e.playerOwnedStocks.reduce(((t,n)=>{const r=e.companies.find((e=>e.id===n.stockId));return r?t+n.shares*r.currentPrice:t}),0),t}),[we,e.playerOwnedStocks,e.companies]);(0,r.useEffect)((()=>{const e=Date.now();if(e-h>1e3){const t=Ie();if(t!==l){c(t);const n=document.querySelector(".net-worth-value");n&&(n.classList.add("net-worth-pulse"),setTimeout((()=>{n.classList.remove("net-worth-pulse")}),500)),d((n=>{const r=[...n,{value:t,timestamp:e}];return r.length>100?r.slice(-100):r}))}f(e)}}),[we,e.playerOwnedStocks,e.companies,Ie,h,l]);const Pe=()=>{const e=60,t=u.length>1?u:1===u.length?[...u,...u]:[{value:we,timestamp:Date.now()-1e4},{value:we,timestamp:Date.now()}],n=t.map((e=>e.value)),r=Math.min(...n),i=Math.max(...n)-r||1,s=t.map(((n,s)=>`${s/(t.length-1)*300},${e-(n.value-r)/i*e*.8+6}`)).join(" "),a=t[t.length-1].value>=t[0].value,o=a?"#10B981":"#EF4444",l=a?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",c=s+" 300,60 0,60";return(0,Wh.jsxs)("svg",{width:"100%",height:e,className:"net-worth-chart",viewBox:"0 0 300 60",preserveAspectRatio:"xMidYMid meet",children:[(0,Wh.jsx)("polygon",{points:c,fill:l}),(0,Wh.jsx)("polyline",{points:s,fill:"none",stroke:o,strokeWidth:"2"})]})},Ae=()=>{const{nowAverage:t}=e;if(!t||!t.valueHistory||t.valueHistory.length<2)return(0,Wh.jsx)("div",{className:"flex items-center justify-center h-full text-xs text-gray-400",children:"Collecting market data..."});const n=t.valueHistory.filter((e=>Number.isFinite(e)));if(n.length<2)return(0,Wh.jsx)("div",{className:"flex items-center justify-center h-full text-xs text-gray-400",children:"Waiting for valid data..."});const r=n,i=Math.min(...r),s=Math.max(...r)-i||1,a=r.map(((e,t)=>{const n=t/(r.length-1)*100;let a=60-(e-i)/s*60;return Number.isFinite(a)||(a=30),`${0===t?"M":"L"} ${n}% ${a.toFixed(2)}`})).join(" "),o=r[r.length-1]>=r[0]?"#22c55e":"#ef4444";return(0,Wh.jsx)("svg",{width:"100%",height:60,preserveAspectRatio:"none",className:"overflow-visible",children:(0,Wh.jsx)("path",{d:a,fill:"none",stroke:o,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})},De=()=>{const{nowAverage:t}=e;if(!t||"undefined"===typeof t.currentValue)return(0,Wh.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 text-center text-gray-500",children:"Loading Market Data..."});const n=t.currentValue.toFixed(2),r=(t.percentChange>=0?"+":"")+t.percentChange.toFixed(2),i=t.percentChange>=0,s=i?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400";return(0,Wh.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden mb-6 border border-gray-200 dark:border-gray-700",children:(0,Wh.jsxs)("div",{className:"p-5",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"NOW Average"}),(0,Wh.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Overall Market Indicator"})]}),(0,Wh.jsxs)("div",{className:"text-right",children:[(0,Wh.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n}),(0,Wh.jsxs)("p",{className:`text-sm font-medium ${s} flex items-center justify-end`,children:[r,"%",i?(0,Wh.jsx)("svg",{className:"ml-1 w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):(0,Wh.jsx)("svg",{className:"ml-1 w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]}),(0,Wh.jsx)("div",{className:"h-16 -mx-5 -mb-5 mt-2 opacity-80",children:(0,Wh.jsx)(Ae,{})})]})})};return(0,Wh.jsxs)("div",{className:"bg-gray-50 min-h-screen p-4",children:[(0,Wh.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Wh.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Stock Market"}),(0,Wh.jsx)("p",{className:"text-gray-600",children:"Invest in companies and build your portfolio"})]}),(0,Wh.jsxs)("div",{className:"mt-4 md:mt-0 bg-white px-4 py-3 rounded-lg shadow border border-gray-200",children:[(0,Wh.jsx)("p",{className:"text-gray-500 text-sm",children:"Available Funds"}),(0,Wh.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",we.toLocaleString()]})]})]}),(0,Wh.jsx)("div",{className:"bg-gray-900 overflow-hidden rounded-lg mb-6",children:(0,Wh.jsx)("div",{className:"ticker-wrapper",children:(0,Wh.jsx)("div",{className:"ticker",ref:me,children:e.companies.map((e=>(0,Wh.jsxs)("div",{className:"ticker-item",children:[(0,Wh.jsx)("span",{className:"ticker-symbol",children:e.id}),(0,Wh.jsxs)("span",{className:"ticker-price "+("up"===e.trending?"text-green-400":"down"===e.trending?"text-red-400":"text-gray-300"),children:["$",e.currentPrice.toFixed(2)]}),(0,Wh.jsxs)("span",{className:"ticker-change "+(e.percentChange>=0?"text-green-400":"text-red-400"),children:[e.percentChange>=0?"+":"",e.percentChange.toFixed(2),"%"]})]},e.id)))})})}),(0,Wh.jsx)(De,{}),(()=>{const e=l,t=u.length>24?u[u.length-25].value:u.length>0?u[0].value:e,n=e-t,r=0!==t?n/t*100:0,i=n>=0,s=i?"from-green-500/10 to-blue-500/5":"from-red-500/10 to-orange-500/5",a=i?"text-green-500":"text-red-500",o=i?"\ud83d\udcc8":"\ud83d\udcc9";return(0,Wh.jsxs)("div",{className:`bg-gradient-to-br ${s} rounded-lg shadow-md overflow-hidden border border-gray-200 mb-6 relative transition-all duration-500`,children:[(0,Wh.jsx)("div",{className:"absolute inset-0 opacity-30",children:Pe()}),(0,Wh.jsxs)("div",{className:"p-4 relative z-10",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-1",children:[(0,Wh.jsx)("span",{className:`mr-2 ${a}`,children:o}),(0,Wh.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Net Worth"})]}),(0,Wh.jsxs)("p",{className:"text-2xl font-bold text-gray-800 net-worth-value",children:["$",e.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,Wh.jsxs)("div",{className:"flex flex-col items-end",children:[(0,Wh.jsxs)("div",{className:"text-sm font-medium "+(n>=0?"text-green-600":"text-red-600"),children:[n>=0?"+":"-","$",Math.abs(n).toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,Wh.jsxs)("div",{className:"text-xs "+(n>=0?"text-green-600":"text-red-600"),children:["(",n>=0?"+":"",r.toFixed(2),"%)"]})]})]}),(0,Wh.jsxs)("div",{className:"mt-2 text-xs text-gray-500 flex items-center justify-between",children:[(0,Wh.jsx)("span",{children:"Includes cash, stocks, and other assets"}),(0,Wh.jsx)("span",{className:"text-xs text-gray-400",children:(new Date).toLocaleDateString()})]})]})]})})(),(0,Wh.jsxs)("div",{className:"mb-8",children:[(()=>{const e=ve();return(0,Wh.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsxs)("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83d\udcca"})," Stock Market"]}),(0,Wh.jsx)("span",{className:"ml-4 text-sm text-gray-500",children:he?(0,Wh.jsx)("span",{className:"text-blue-500",children:"Refreshing..."}):(0,Wh.jsxs)("span",{children:["Next update in ",(0,Wh.jsx)("span",{className:"font-semibold",children:e}),"s (5 min in-game)"]})})]}),(0,Wh.jsx)("button",{onClick:()=>q(!H),className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:H?(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]})})(),!H&&(0,Wh.jsxs)(Wh.Fragment,{children:[(0,Wh.jsx)("div",{className:"bg-white p-4 rounded-t-lg border border-gray-200 border-b-0",children:(0,Wh.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0",children:[(0,Wh.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,Wh.jsx)("input",{type:"text",placeholder:"Search by name or ticker...",value:L,onChange:e=>M(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md pl-10"}),(0,Wh.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Wh.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,Wh.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,Wh.jsx)("label",{className:"text-gray-600 text-sm",children:"Sector:"}),(0,Wh.jsxs)("select",{value:V,onChange:e=>z(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Wh.jsx)("option",{value:"all",children:"All Sectors"}),B.map((e=>(0,Wh.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))]})]})]})}),(0,Wh.jsx)("div",{className:"bg-white rounded-b-lg shadow border border-gray-200 overflow-hidden "+(he?"data-refreshed":""),children:(0,Wh.jsx)("div",{className:"overflow-x-auto max-w-full mobile-table-container",children:(0,Wh.jsxs)("table",{className:"w-full min-w-[640px] stock-table",children:[(0,Wh.jsx)("thead",{children:(0,Wh.jsxs)("tr",{className:"bg-gray-50 text-left",children:[(0,Wh.jsxs)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm cursor-pointer w-[15%]",onClick:()=>xe("id"),children:["Ticker ",Se("id")]}),(0,Wh.jsxs)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm cursor-pointer w-[30%]",onClick:()=>xe("name"),children:["Name ",Se("name")]}),(0,Wh.jsxs)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm cursor-pointer w-[15%]",onClick:()=>xe("currentPrice"),children:["Price ",Se("currentPrice")]}),(0,Wh.jsxs)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm cursor-pointer w-[15%]",onClick:()=>xe("percentChange"),children:["Change ",Se("percentChange")]}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[25%]",children:"Last Day"})]})}),(0,Wh.jsx)("tbody",{children:ke().map((e=>(0,Wh.jsxs)("tr",{className:"border-t border-gray-100 hover:bg-gray-50 cursor-pointer",onClick:()=>_e(e),children:[(0,Wh.jsx)("td",{className:"px-2 py-2 font-medium",children:e.id}),(0,Wh.jsx)("td",{className:"px-2 py-2",children:(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"text-xl mr-2",children:e.logo}),(0,Wh.jsx)("span",{className:"truncate",children:e.name})]})}),(0,Wh.jsx)("td",{className:"px-2 py-2 font-medium",children:(0,Wh.jsxs)("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full inline-block",children:["$",e.currentPrice.toFixed(2)]})}),(0,Wh.jsxs)("td",{className:"px-2 py-2 font-medium "+(e.percentChange>=0?"text-green-600":"text-red-600"),children:[e.percentChange>=0?"+":"",e.percentChange.toFixed(2),"%"]}),(0,Wh.jsx)("td",{className:"px-2 py-2",children:Ee(e)})]},e.id)))})]})})})]})]}),(0,Wh.jsxs)("div",{className:"mt-8",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Wh.jsxs)("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83d\udcbc"})," Your Portfolio"]}),(0,Wh.jsx)("button",{onClick:()=>G(!W),className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:W?(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]}),!W&&(0,Wh.jsxs)(Wh.Fragment,{children:[(0,Wh.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,Wh.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 border border-gray-200",children:[(0,Wh.jsx)("p",{className:"text-sm text-gray-500",children:"Total Holdings"}),(0,Wh.jsxs)("p",{className:"text-2xl font-bold text-gray-800",children:["$",e.playerOwnedStocks.reduce(((t,n)=>{const r=e.companies.find((e=>e.id===n.stockId));return t+n.shares*r.currentPrice}),0).toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,Wh.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 border border-gray-200",children:[(0,Wh.jsx)("p",{className:"text-sm text-gray-500",children:"Total Stocks Owned"}),(0,Wh.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:e.playerOwnedStocks.reduce(((e,t)=>e+t.shares),0)})]}),(0,Wh.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 border border-gray-200",children:[(0,Wh.jsx)("p",{className:"text-sm text-gray-500",children:"Different Companies"}),(0,Wh.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:e.playerOwnedStocks.length})]})]}),(0,Wh.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:e.playerOwnedStocks.length>0?(0,Wh.jsx)("div",{className:"overflow-x-auto max-w-full mobile-table-container",children:(0,Wh.jsxs)("table",{className:"w-full min-w-[640px] stock-table",children:[(0,Wh.jsx)("thead",{children:(0,Wh.jsxs)("tr",{className:"bg-gray-50 text-left",children:[(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[25%]",children:"Company"}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[10%]",children:"Shares"}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[15%]",children:"Current Value"}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[20%]",children:"Daily Change"}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[20%]",children:"Chart"}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[10%]",children:"Action"})]})}),(0,Wh.jsx)("tbody",{children:e.playerOwnedStocks.map((t=>{const n=e.companies.find((e=>e.id===t.stockId)),r=t.shares*n.currentPrice,i=t.shares*n.previousPrice,s=r-i,a=s/i*100;return(0,Wh.jsxs)("tr",{className:"border-t border-gray-100 hover:bg-gray-50 cursor-pointer",onClick:()=>_e(n),children:[(0,Wh.jsx)("td",{className:"px-2 py-2",children:(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"text-xl mr-2",children:n.logo}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("span",{className:"font-medium block",children:n.name}),(0,Wh.jsx)("span",{className:"text-xs text-gray-500",children:n.id})]})]})}),(0,Wh.jsx)("td",{className:"px-2 py-2 font-medium",children:t.shares}),(0,Wh.jsx)("td",{className:"px-2 py-2 font-medium",children:(0,Wh.jsxs)("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full inline-block",children:["$",r.toLocaleString(void 0,{maximumFractionDigits:2})]})}),(0,Wh.jsxs)("td",{className:"px-2 py-2 font-medium "+(s>=0?"text-green-600":"text-red-600"),children:[s>=0?"+":"","$",Math.abs(s).toLocaleString(void 0,{maximumFractionDigits:2}),"(",a>=0?"+":"",a.toFixed(2),"%)"]}),(0,Wh.jsx)("td",{className:"px-2 py-2",children:Ee(n)}),(0,Wh.jsx)("td",{className:"px-2 py-2",children:(0,Wh.jsx)("button",{onClick:e=>{e.stopPropagation(),_e(n),P("sell")},className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Sell"})})]},n.id)}))})]})}):(0,Wh.jsxs)("div",{className:"p-8 text-center",children:[(0,Wh.jsx)("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,Wh.jsx)("span",{className:"text-2xl text-gray-400",children:"\ud83d\udcc8"})}),(0,Wh.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No Stocks Owned Yet"}),(0,Wh.jsx)("p",{className:"text-gray-500 max-w-md mx-auto",children:"Start building your portfolio by investing in companies from the market list above."})]})})]})]}),(0,Wh.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-500",children:[(0,Wh.jsxs)("p",{children:["Market Day: ",e.marketDay," | Time: ",e.marketHour,":",e.marketMinute.toString().padStart(2,"0")]}),(0,Wh.jsx)("p",{className:"mt-2",children:e.marketOpen?(0,Wh.jsx)("span",{className:"text-green-600",children:"Market Open"}):(0,Wh.jsx)("span",{className:"text-red-600",children:"Market Closed"})})]})]}),(()=>{if(!A)return null;const e="success"===A.type?"bg-green-100 border-green-400":"bg-red-100 border-red-400",t="success"===A.type?"text-green-700":"text-red-700";return(0,Wh.jsx)("div",{className:`fixed bottom-4 right-4 px-4 py-3 rounded border ${e} ${t} max-w-md`,children:(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"mr-2",children:"success"===A.type?"\u2705":"\u274c"}),(0,Wh.jsx)("p",{children:A.message})]})})})(),(()=>{if(!O||!p)return null;const t=p,n=t.currentPrice*T,r="buy"===I?Math.floor(we/t.currentPrice):(()=>{const t=e.playerOwnedStocks.find((e=>e.stockId===p.id));return t?t.shares:0})(),i=Date.now()-ne,s=Math.max(0,Math.ceil((5e3-i)/1e3));return(0,Wh.jsx)("div",{className:"modal-overlay",children:(0,Wh.jsxs)("div",{ref:ge,className:"modal-content max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,Wh.jsxs)("div",{className:"bg-gray-800 text-white p-4 flex items-center justify-between ${showRefreshAnimation ? 'data-refreshed' : ''}",children:[(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"text-2xl mr-3",children:t.logo}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h3",{className:"font-bold text-lg",children:t.name}),(0,Wh.jsxs)("div",{className:"text-sm text-gray-300 flex items-center",children:[(0,Wh.jsx)("span",{className:"font-mono",children:t.id}),(0,Wh.jsx)("span",{className:"mx-2",children:"\u2022"}),(0,Wh.jsx)("span",{children:t.sector.toUpperCase()})]})]})]}),(0,Wh.jsxs)("div",{className:"text-right",children:[(0,Wh.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,Wh.jsxs)("div",{className:"text-2xl font-bold",children:["$",t.currentPrice.toFixed(2)]})}),(0,Wh.jsxs)("div",{className:"text-sm "+(t.percentChange>=0?"text-green-400":"text-red-400"),children:[t.percentChange>=0?"+":"",t.percentChange.toFixed(2),"%"]}),(0,Wh.jsxs)("div",{className:"text-xs text-gray-400 mt-1 flex items-center justify-end",children:[(0,Wh.jsx)("span",{children:s>0?`Next update in ${s}s`:"Updating..."}),ie>0&&(0,Wh.jsxs)("span",{className:"ml-2 text-gray-500",children:["(",ie," update",1!==ie?"s":"",")"]})]})]})]}),(0,Wh.jsx)("div",{className:"p-4 border-b border-gray-200 "+(le?"data-refreshed":""),children:je(t)}),(0,Wh.jsx)("div",{className:"px-4 pt-4 pb-2 flex justify-center",children:(0,Wh.jsxs)("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[(0,Wh.jsx)("button",{type:"button",onClick:()=>R(!1),className:"px-4 py-2 text-sm font-medium rounded-l-lg "+(O?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-600 text-white"),children:"Cancel"}),(0,Wh.jsxs)("button",{onClick:()=>Te(),className:"px-4 py-2 text-sm font-medium rounded-r-lg "+(O?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["buy"===I?"Buy":"Sell"," ",T," Shares"]})]})}),(0,Wh.jsxs)("div",{className:"p-4 "+(le?"data-refreshed":""),children:[(0,Wh.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Wh.jsxs)("div",{className:"flex",children:[(0,Wh.jsx)("button",{className:"px-4 py-2 rounded-l-lg "+("buy"===I?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>P("buy"),children:"Buy"}),(0,Wh.jsx)("button",{className:"px-4 py-2 rounded-r-lg "+("sell"===I?"bg-red-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>P("sell"),disabled:(()=>{const t=e.playerOwnedStocks.find((e=>e.stockId===p.id));return!t||t.shares<=0})(),children:"Sell"})]}),(0,Wh.jsx)("div",{className:"text-sm text-gray-500",children:"buy"===I?`Max: ${r} shares`:`Owned: ${(()=>{const t=e.playerOwnedStocks.find((e=>e.stockId===p.id));return t?t.shares:0})()} shares`})]}),(0,Wh.jsxs)("div",{className:"mb-4",children:[(0,Wh.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,Wh.jsxs)("div",{className:"quantity-input",children:[(0,Wh.jsx)("button",{className:"quantity-button",onClick:()=>j(Math.max(1,T-1)),children:"\u2212"}),(0,Wh.jsx)("input",{type:"number",min:"1",max:r,value:T,onChange:e=>j(Math.min(r,Math.max(1,parseInt(e.target.value)||1))),className:"flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 text-center"}),(0,Wh.jsx)("button",{className:"quantity-button",onClick:()=>j(Math.min(r,T+1)),children:"+"})]})]}),(0,Wh.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md mb-4 "+(le?"data-refreshed":""),children:[(0,Wh.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Share Price:"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",t.currentPrice.toFixed(2)]})]}),(0,Wh.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Quantity:"}),(0,Wh.jsx)("span",{className:"font-medium",children:T})]}),(0,Wh.jsxs)("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[(0,Wh.jsx)("span",{className:"text-gray-700 font-medium",children:"Total Value:"}),(0,Wh.jsxs)("span",{className:"font-bold",children:["$",n.toFixed(2)]})]})]}),(0,Wh.jsxs)("div",{className:"flex space-x-3",children:[(0,Wh.jsx)("button",{className:"flex-1 py-2 px-4 rounded-md font-medium bg-gray-300 hover:bg-gray-400 text-gray-800 cancel-button",onClick:()=>R(!1),children:"Cancel"}),(0,Wh.jsxs)("button",{className:"flex-1 py-2 px-4 rounded-md font-medium "+("buy"===I?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"),onClick:Te,disabled:"buy"===I&&n>we||"sell"===I&&(()=>{const t=e.playerOwnedStocks.find((e=>e.stockId===p.id));return!t||t.shares<T})(),children:["buy"===I?"Buy":"Sell"," ",T," Shares"]})]}),"buy"===I&&(0,Wh.jsxs)("div",{className:"mt-4 text-sm "+(le?"data-refreshed":""),children:[(0,Wh.jsxs)("div",{className:"flex justify-between",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Available Cash:"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",we.toLocaleString()]})]}),(0,Wh.jsxs)("div",{className:"flex justify-between",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Remaining After Purchase:"}),(0,Wh.jsxs)("span",{className:"font-medium "+(we-n<0?"text-red-600":""),children:["$",(we-n).toLocaleString()]})]})]}),"sell"===I&&(()=>{const t=e.playerOwnedStocks.find((e=>e.stockId===p.id));return t&&t.shares>0})()&&(0,Wh.jsxs)("div",{className:"mt-4 text-sm "+(le?"data-refreshed":""),children:[(0,Wh.jsxs)("div",{className:"flex justify-between",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Current Position:"}),(0,Wh.jsx)("span",{className:"font-medium",children:(()=>{const n=e.playerOwnedStocks.find((e=>e.stockId===p.id)),r=n?n.shares:0;return`${r} shares (${(r*t.currentPrice).toLocaleString()})`})()})]}),(0,Wh.jsxs)("div",{className:"flex justify-between",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Remaining After Sale:"}),(0,Wh.jsx)("span",{className:"font-medium",children:(()=>{const n=e.playerOwnedStocks.find((e=>e.stockId===p.id)),r=(n?n.shares:0)-T;return`${r} shares (${(r*t.currentPrice).toLocaleString()})`})()})]})]})]})]})})})()]})},$f=(0,r.createContext)(),Hf=e=>{let{children:t}=e;const[n,i]=(0,r.useState)((()=>{const e=localStorage.getItem("theme");return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}));return(0,r.useEffect)((()=>{document.documentElement.removeAttribute("data-theme"),"dark"===n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),[n]),(0,Wh.jsx)($f.Provider,{value:{theme:n,toggleTheme:()=>{i((e=>{const t="light"===e?"dark":"light";return localStorage.setItem("theme",t),t}))}},children:t})},qf=()=>{const{theme:e,toggleTheme:t}=(()=>{const e=(0,r.useContext)($f);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})();return(0,Wh.jsxs)("button",{onClick:t,className:"theme-toggle-btn "+("dark"===e?"dark-mode":"light-mode"),"aria-label":`Switch to ${"light"===e?"dark":"light"} mode`,children:[(0,Wh.jsx)("div",{className:"toggle-wrapper",children:"light"===e?(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"theme-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Wh.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}):(0,Wh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"theme-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Wh.jsx)("circle",{cx:"12",cy:"12",r:"5"}),(0,Wh.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),(0,Wh.jsx)("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),(0,Wh.jsx)("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),(0,Wh.jsx)("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),(0,Wh.jsx)("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),(0,Wh.jsx)("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),(0,Wh.jsx)("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),(0,Wh.jsx)("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})}),(0,Wh.jsx)("span",{className:"sr-only",children:"light"===e?"Dark mode":"Light mode"})]})};function Wf(e){let{setShowRegister:t,onLoginSuccess:n}=e;const[i,s]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),{login:h,signInWithGoogle:f,signInWithApple:p,signInAsGuest:m,authInitialized:g}=Kh();return(0,r.useEffect)((()=>{g&&l.includes("not initialized")&&c("")}),[g,l]),(0,Wh.jsxs)("div",{className:"auth-form-container",children:[(0,Wh.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Login"}),!g&&(0,Wh.jsx)("div",{className:"info-message mb-4 p-2 bg-blue-100 text-blue-700 rounded",children:"Initializing authentication... Please wait."}),l&&(0,Wh.jsx)("div",{className:"error-message mb-4 p-2 bg-red-100 text-red-700 rounded",children:l}),(0,Wh.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),g)try{c(""),d(!0),await h(i,a),n()}catch(l){c("Failed to log in: "+l.message)}finally{d(!1)}else c("Authentication is still initializing. Please wait a moment and try again.")},className:"flex flex-col gap-4",children:[(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Wh.jsx)("input",{type:"email",id:"email",value:i,onChange:e=>s(e.target.value),required:!0,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!g||u})]}),(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Wh.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>o(e.target.value),required:!0,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!g||u})]}),(0,Wh.jsx)("button",{type:"submit",disabled:!g||u,className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50",children:u?"Logging in...":"Login"})]}),(0,Wh.jsxs)("div",{className:"social-login-divider my-6 flex items-center",children:[(0,Wh.jsx)("div",{className:"flex-grow border-t border-gray-300"}),(0,Wh.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,Wh.jsx)("div",{className:"flex-grow border-t border-gray-300"})]}),(0,Wh.jsxs)("div",{className:"social-login-buttons flex flex-col gap-3",children:[(0,Wh.jsxs)("button",{onClick:async function(){if(g)try{c(""),d(!0),await f(),n()}catch(l){c("Failed to sign in with Google: "+l.message)}finally{d(!1)}else c("Authentication is still initializing. Please wait a moment and try again.")},disabled:!g||u,className:"bg-white border border-gray-300 py-2 px-4 rounded hover:bg-gray-50 flex items-center justify-center disabled:opacity-50",children:[(0,Wh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 48 48",className:"mr-2",children:[(0,Wh.jsx)("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,Wh.jsx)("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,Wh.jsx)("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,Wh.jsx)("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Sign in with Google"]}),(0,Wh.jsxs)("button",{onClick:async function(){if(g)try{c(""),d(!0),await p(),n()}catch(l){c("Failed to sign in with Apple: "+l.message)}finally{d(!1)}else c("Authentication is still initializing. Please wait a moment and try again.")},disabled:!g||u,className:"bg-black text-white py-2 px-4 rounded hover:bg-gray-900 flex items-center justify-center disabled:opacity-50",children:[(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"white",className:"mr-2",children:(0,Wh.jsx)("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.53 4.08zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.26 2.31-2.15 4.2-3.74 4.25z"})}),"Sign in with Apple"]}),(0,Wh.jsxs)("button",{onClick:async function(){if(g)try{c(""),d(!0),console.log("Login component: Starting guest sign in..."),await m(),console.log("Login component: Guest sign in completed"),n()}catch(l){console.error("Guest sign-in error in Login component:",l),c("Failed to sign in as guest: "+l.message)}finally{d(!1)}else c("Authentication is still initializing. Please wait a moment and try again.")},disabled:!g||u,className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 flex items-center justify-center disabled:opacity-50",children:[(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"white",className:"mr-2",children:(0,Wh.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Continue as Guest"]})]}),(0,Wh.jsx)("div",{className:"mt-6 text-center",children:(0,Wh.jsxs)("p",{children:["Don't have an account?"," ",(0,Wh.jsx)("button",{onClick:()=>t(!0),className:"text-blue-600 hover:underline",disabled:!g||u,children:"Register"})]})})]})}function Gf(e){let{setShowRegister:t,onRegisterSuccess:n}=e;const[i,s]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!1),{signup:g,signInWithGoogle:y,signInWithApple:v}=Kh();return(0,Wh.jsxs)("div",{className:"auth-form-container",children:[(0,Wh.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Register"}),h&&(0,Wh.jsx)("div",{className:"error-message mb-4 p-2 bg-red-100 text-red-700 rounded",children:h}),(0,Wh.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),a!==l)return f("Passwords do not match");try{f(""),m(!0),await g(i,a,u),n()}catch(h){f("Failed to create an account: "+h.message)}finally{m(!1)}},className:"flex flex-col gap-4",children:[(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"displayName",children:"Display Name"}),(0,Wh.jsx)("input",{type:"text",id:"displayName",value:u,onChange:e=>d(e.target.value),required:!0,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Wh.jsx)("input",{type:"email",id:"email",value:i,onChange:e=>s(e.target.value),required:!0,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Wh.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>o(e.target.value),required:!0,minLength:6,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,Wh.jsx)("input",{type:"password",id:"confirmPassword",value:l,onChange:e=>c(e.target.value),required:!0,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Wh.jsx)("button",{type:"submit",disabled:p,className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50",children:p?"Creating Account...":"Register"})]}),(0,Wh.jsxs)("div",{className:"social-login-divider my-6 flex items-center",children:[(0,Wh.jsx)("div",{className:"flex-grow border-t border-gray-300"}),(0,Wh.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,Wh.jsx)("div",{className:"flex-grow border-t border-gray-300"})]}),(0,Wh.jsxs)("div",{className:"social-login-buttons flex flex-col gap-3",children:[(0,Wh.jsxs)("button",{onClick:async function(){try{f(""),m(!0),await y(),n()}catch(h){f("Failed to sign in with Google: "+h.message)}finally{m(!1)}},disabled:p,className:"bg-white border border-gray-300 py-2 px-4 rounded hover:bg-gray-50 flex items-center justify-center",children:[(0,Wh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 48 48",className:"mr-2",children:[(0,Wh.jsx)("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,Wh.jsx)("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,Wh.jsx)("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,Wh.jsx)("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Sign up with Google"]}),(0,Wh.jsxs)("button",{onClick:async function(){try{f(""),m(!0),await v(),n()}catch(h){f("Failed to sign in with Apple: "+h.message)}finally{m(!1)}},disabled:p,className:"bg-black text-white py-2 px-4 rounded hover:bg-gray-900 flex items-center justify-center",children:[(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"white",className:"mr-2",children:(0,Wh.jsx)("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.53 4.08zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.26 2.31-2.15 4.2-3.74 4.25z"})}),"Sign up with Apple"]})]}),(0,Wh.jsx)("div",{className:"mt-6 text-center",children:(0,Wh.jsxs)("p",{children:["Already have an account?"," ",(0,Wh.jsx)("button",{onClick:()=>t(!1),className:"text-blue-600 hover:underline",children:"Login"})]})})]})}function Kf(e){let{onAuthSuccess:t}=e;const[n,i]=(0,r.useState)(!1);return(0,Wh.jsx)("div",{className:"auth-container p-6 max-w-md mx-auto bg-white rounded-lg shadow-md",children:n?(0,Wh.jsx)(Gf,{setShowRegister:i,onRegisterSuccess:()=>{t()}}):(0,Wh.jsx)(Wf,{setShowRegister:i,onLoginSuccess:()=>{t()}})})}function Qf(e){let{onClose:t}=e;const{currentUser:n,logout:i}=Kh(),{saveGame:s,resetGame:a}=lf(),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1);return(0,Wh.jsxs)("div",{className:"profile-container p-6 bg-white rounded-lg shadow-md",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Wh.jsx)("h2",{className:"text-2xl font-bold",children:"Profile"}),(0,Wh.jsx)("button",{onClick:t,className:"text-gray-600 hover:text-gray-900",children:"\u2715"})]}),o&&(0,Wh.jsx)("div",{className:"error-message mb-4 p-2 bg-red-100 text-red-700 rounded",children:o}),c&&(0,Wh.jsx)("div",{className:"success-message mb-4 p-2 bg-green-100 text-green-700 rounded",children:c}),(0,Wh.jsxs)("div",{className:"user-info mb-6",children:[(0,Wh.jsxs)("div",{className:"mb-2",children:[(0,Wh.jsx)("strong",{children:"Email:"})," ",null===n||void 0===n?void 0:n.email]}),(0,Wh.jsxs)("div",{className:"mb-2",children:[(0,Wh.jsx)("strong",{children:"Display Name:"})," ",(null===n||void 0===n?void 0:n.displayName)||"N/A"]})]}),(0,Wh.jsxs)("div",{className:"profile-actions flex flex-col gap-3",children:[(0,Wh.jsx)("button",{onClick:async function(){try{h(!0);await s()?(u("Game saved successfully!"),setTimeout((()=>u("")),3e3)):l("Failed to save game")}catch(o){l("Error saving game: "+o.message)}finally{h(!1)}},disabled:d,className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50",children:d?"Saving...":"Save Game"}),(0,Wh.jsx)("button",{onClick:async function(){if(window.confirm("Are you sure you want to start a new game? Your current progress will be lost."))try{await a(),u("New game started!"),setTimeout((()=>u("")),3e3)}catch(o){l("Error starting new game: "+o.message)}},className:"bg-yellow-600 text-white py-2 px-4 rounded hover:bg-yellow-700",children:"Start New Game"}),(0,Wh.jsx)("button",{onClick:async function(){try{await s(),await i()}catch(o){l("Failed to log out: "+o.message)}},className:"bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 mt-3",children:"Logout"})]})]})}const Yf=()=>{const{gameState:e,getGameTime:t}=lf(),[n,i]=(0,r.useState)(t());(0,r.useEffect)((()=>{const e=setInterval((()=>{i(t())}),1e3);return()=>clearInterval(e)}),[t]);const s=n.fullDate,a=n.shortTime,o=60===e.timeSettings.gameTimeRatio?"1 real second = 1 game minute":`1 real second = ${e.timeSettings.gameTimeRatio} game seconds`;return(0,Wh.jsx)("div",{className:"game-clock bg-gradient-to-r from-slate-800 to-slate-700 text-white px-3 py-2 rounded-lg shadow-lg",children:(0,Wh.jsx)("div",{className:"flex items-center justify-between",children:(0,Wh.jsxs)("div",{className:"flex flex-col",children:[(0,Wh.jsx)("div",{className:"text-sm opacity-80",children:s}),(0,Wh.jsx)("div",{className:"text-xl font-bold",children:a}),(0,Wh.jsx)("div",{className:"text-xs opacity-60 mt-1",children:o})]})})})};function Xf(){var e,t;const{currentUser:n,authInitialized:i,loading:s}=Kh(),[a,o]=(0,r.useState)("clicker"),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null);if((0,r.useEffect)((()=>{console.log("Auth state:",{currentUser:n,authInitialized:i,loading:s})}),[n,i,s]),s||!i)return(0,Wh.jsx)(Hf,{children:(0,Wh.jsx)("div",{className:"app-container flex items-center justify-center min-h-screen",children:(0,Wh.jsxs)("div",{className:"text-center",children:[(0,Wh.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),(0,Wh.jsx)("p",{className:"text-lg",children:"Loading... Please wait"})]})})});if(!n)return(0,Wh.jsx)(Hf,{children:(0,Wh.jsx)("div",{className:"app-container flex items-center justify-center min-h-screen",children:(0,Wh.jsxs)("div",{className:"auth-page-container",children:[(0,Wh.jsx)("h1",{className:"text-4xl font-bold text-center mb-6",children:"Business Tycoon"}),(0,Wh.jsx)(Kf,{onAuthSuccess:()=>{console.log("Auth success called")}})]})})});return(0,Wh.jsx)(Hf,{children:(0,Wh.jsx)(of,{children:(0,Wh.jsx)(zf,{children:(0,Wh.jsxs)("div",{className:"app-container",children:[l&&(0,Wh.jsx)("div",{className:"profile-modal-overlay",children:(0,Wh.jsx)("div",{className:"profile-modal",children:(0,Wh.jsx)(Qf,{onClose:()=>c(!1)})})}),(0,Wh.jsxs)("div",{className:"app-content",children:[(0,Wh.jsxs)("div",{className:"header-container flex justify-between items-center p-2",children:[(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("div",{className:"theme-toggle-container mr-3",children:(0,Wh.jsx)(qf,{})}),(0,Wh.jsx)("div",{className:"game-clock-container",children:(0,Wh.jsx)(Yf,{})})]}),(0,Wh.jsx)("div",{className:"user-info-container",children:(0,Wh.jsxs)("button",{onClick:()=>c(!0),className:"profile-button flex items-center",children:[(0,Wh.jsx)("span",{className:"user-display-name mr-2",children:(null===n||void 0===n?void 0:n.displayName)||(null===n||void 0===n?void 0:n.email)||"Guest"}),(0,Wh.jsx)("span",{className:"user-avatar bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center",children:((null===n||void 0===n||null===(e=n.displayName)||void 0===e?void 0:e[0])||(null===n||void 0===n||null===(t=n.email)||void 0===t?void 0:t[0])||"G").toUpperCase()})]})})]}),u?(0,Wh.jsxs)("div",{className:"p-6 bg-red-100 text-red-800 rounded-lg m-4",children:[(0,Wh.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Error"}),(0,Wh.jsx)("p",{children:u}),(0,Wh.jsx)("button",{onClick:()=>d(null),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded",children:"Dismiss"})]}):(()=>{try{switch(a){case"clicker":default:return(0,Wh.jsx)(uf,{});case"jobs":return(0,Wh.jsx)(Sf,{});case"assets":return(0,Wh.jsx)(Nf,{});case"business":return(0,Wh.jsx)(Ef,{});case"education":return(0,Wh.jsx)(_f,{});case"finance":return(0,Wh.jsx)(Bf,{})}}catch(e){return console.error("Error rendering tab content:",e),d(e.message),(0,Wh.jsxs)("div",{className:"p-6 bg-red-100 text-red-800 rounded-lg",children:[(0,Wh.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Error Loading Content"}),(0,Wh.jsx)("p",{children:e.message}),(0,Wh.jsx)("button",{onClick:()=>d(null),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded",children:"Dismiss"})]})}})()]}),(0,Wh.jsx)("nav",{className:"app-navigation",children:(0,Wh.jsxs)("ul",{className:"nav-list",children:[(0,Wh.jsx)("li",{className:"nav-item "+("clicker"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("clicker"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Work",children:"\ud83d\udcbc"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Work"})]})}),(0,Wh.jsx)("li",{className:"nav-item "+("jobs"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("jobs"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Jobs",children:"\ud83d\udd0d"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Jobs"})]})}),(0,Wh.jsx)("li",{className:"nav-item "+("assets"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("assets"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Banking",children:"\ud83c\udfe6"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Banking"})]})}),(0,Wh.jsx)("li",{className:"nav-item "+("finance"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("finance"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Invest",children:"\ud83d\udcc8"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Invest"})]})}),(0,Wh.jsx)("li",{className:"nav-item "+("business"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("business"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Business",children:"\ud83c\udfe2"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Business"})]})}),(0,Wh.jsx)("li",{className:"nav-item "+("education"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("education"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Education",children:"\ud83c\udf93"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Education"})]})})]})})]})})})})}const Jf=function(){return(0,Wh.jsx)(Qh,{children:(0,Wh.jsx)(Xf,{})})},Zf=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:a}=t;n(e),r(e),i(e),s(e),a(e)}))};function ep(){const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{try{console.log("Initializing Firebase and waiting for auth state...");const e=lr(zh,(()=>{console.log("Firebase auth initialized successfully"),t(!0)}),(e=>{console.error("Firebase auth initialization error:",e),i(e.message)}));return()=>e()}catch(e){console.error("Error during Firebase initialization:",e),i(e.message)}})()}),[]),n?(0,Wh.jsxs)("div",{className:"firebase-error-container",style:{padding:"20px",margin:"20px",backgroundColor:"#fee2e2",color:"#b91c1c",borderRadius:"8px",textAlign:"center"},children:[(0,Wh.jsx)("h2",{children:"Firebase Initialization Error"}),(0,Wh.jsx)("p",{children:n}),(0,Wh.jsx)("p",{children:"Please refresh the page or check your connection."})]}):e?(0,Wh.jsx)(Jf,{}):(0,Wh.jsxs)("div",{className:"firebase-loading",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw"},children:[(0,Wh.jsx)("div",{className:"loading-spinner",style:{width:"50px",height:"50px",border:"5px solid #f3f3f3",borderTop:"5px solid #3498db",borderRadius:"50%",animation:"spin 2s linear infinite",marginBottom:"20px"}}),(0,Wh.jsx)("style",{children:"@keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }"}),(0,Wh.jsx)("p",{children:"Initializing Firebase..."})]})}i.createRoot(document.getElementById("root")).render((0,Wh.jsx)(r.StrictMode,{children:(0,Wh.jsx)(ep,{})})),Zf()})();
//# sourceMappingURL=main.a7ba3f42.js.map