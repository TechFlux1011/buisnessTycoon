/*! For license information please see main.add591fd.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!N.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function j(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+T(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),j(a,t,i,"",(function(e){return e}))):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+T(o=e[c],c);l+=j(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=j(o=o.value,t,i,u=s+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return j(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},D={transition:null},R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!N.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(_),_=-1),f=!0;var s=p;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!j());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,N=!1,E=null,_=-1,C=5,T=-1;function j(){return!(t.unstable_now()-T<C)}function I(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?k():(N=!1,E=null)}}else N=!1}if("function"===typeof b)k=function(){b(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=I,k=function(){A.postMessage(null)}}else k=function(){y(I,0)};function D(e){E=e,N||(N=!0,k())}function R(e,n){_=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(_),_=-1):g=!0,R(w,s-a))):(e.sortIndex=o,n(c,e),m||f||(m=!0,D(S))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,L=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case E:return"Profiler";case N:return"StrictMode";case j:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(zi){return e.body}}function Q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ne=null;function Ee(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function _e(e){ke?Ne?Ne.push(e):Ne=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Ne;if(Ne=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function je(){}var Ie=!1;function Pe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==ke||null!==Ne)&&(je(),Ce())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){De=!1}function Me(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Le=null,Fe=!1,Ue=null,Ve={onError:function(e){Oe=!0,Le=e}};function Be(e,t,n,r,i,s,a,o,l){Oe=!1,Le=null,Me.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(s(188))}function qe(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,kt,Nt,Et,_t=!1,Ct=[],Tt=null,jt=null,It=null,Pt=new Map,At=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Ot(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){_t=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==jt&&Ft(jt)&&(jt=null),null!==It&&Ft(It)&&(It=null),Pt.forEach(Ut),At.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==jt&&Bt(jt,e),null!==It&&Bt(It,e),Pt.forEach(t),At.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Dt.shift()}var $t=x.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Wt(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Gt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Ot(Tt,e,t,n,r,i),!0;case"dragenter":return jt=Ot(jt,e,t,n,r,i),!0;case"mouseover":return It=Ot(It,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Ot(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,At.set(s,Ot(At.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&wt(s),null===(s=Qt(e,t,n,r))&&Hr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=vi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=L({},cn,{view:0,detail:0}),hn=sn(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(pn),mn=sn(L({},pn,{dataTransfer:0})),gn=sn(L({},dn,{relatedTarget:0})),yn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Nn}var _n=L({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(_n),Tn=sn(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=sn(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),In=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Pn),Dn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var On=u&&"TextEvent"in window&&!Mn,Ln=u&&(!Rn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function qn(e,t,n,r){_e(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Kn(e){Fr(e,0)}function Qn(e){if(G(xi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];qn(t,Gn,e,we(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function sr(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Nr={};function Er(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return kr[e]=n[t];return e}u&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var _r=Er("animationend"),Cr=Er("animationiteration"),Tr=Er("animationstart"),jr=Er("transitionend"),Ir=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Ir.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Rr=Pr[Dr];Ar(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ar(_r,"onAnimationEnd"),Ar(Cr,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(jr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(Be.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var u=Le;Oe=!1,Le=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,a.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Yt(t)){case 1:var i=qt;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pe((function(){var r=s,i=we(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=jn;break;case _r:case Cr:case Tr:l=yn;break;case jr:l=In;break;case"scroll":l=hn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ae(f,h))&&u.push(qr(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:xi(l),p=null==c?o:xi(c),(o=new u(m,f+"leave",l,n,i)).target=d,o.relatedTarget=p,m=null,vi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gr(p))f++;for(p=0,m=h;m;m=Gr(m))p++;for(;0<f-p;)u=Gr(u),f--;for(;0<p-f;)h=Gr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Kr(a,o,l,u,!1),null!==c&&null!==d&&Kr(a,d,c,u,!0)}if("select"===(l=(o=r?xi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Hn(o))if(Jn)g=ar;else{g=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?qn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Wr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Fr(a,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ae(e,n))&&r.unshift(qr(e,s,i)),null!=(s=Ae(e,t))&&r.push(qr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Ae(n,s))&&a.unshift(qr(n,l,o)):i||null!=(l=Ae(n,s))&&a.push(qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[pi]||null}var Si=[],ki=-1;function Ni(e){return{current:e}}function Ei(e){0>ki||(e.current=Si[ki],Si[ki]=null,ki--)}function _i(e,t){ki++,Si[ki]=e.current,e.current=t}var Ci={},Ti=Ni(Ci),ji=Ni(!1),Ii=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(ji),Ei(Ti)}function Ri(e,t,n){if(Ti.current!==Ci)throw Error(s(168));_i(Ti,t),_i(ji,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return L({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ii=Ti.current,_i(Ti,e),_i(ji,ji.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Ei(ji),Ei(Ti),_i(Ti,e)):Ei(ji),_i(ji,n)}var Fi=null,Ui=!1,Vi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function $i(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,$i),i}finally{bt=t,Vi=!1}}return null}var Hi=[],qi=0,Wi=null,Gi=0,Ki=[],Qi=0,Yi=null,Ji=1,Xi="";function Zi(e,t){Hi[qi++]=Gi,Hi[qi++]=Wi,Wi=e,Gi=t}function es(e,t,n){Ki[Qi++]=Ji,Ki[Qi++]=Xi,Ki[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Ji=1<<s|n<<i|r,Xi=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===Wi;)Wi=Hi[--qi],Hi[qi]=null,Gi=Hi[--qi],Hi[qi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null}var rs=null,is=null,ss=!1,as=null;function os(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,is=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,is=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(ss){var t=is;if(t){var n=t;if(!ls(e,t)){if(cs(e))throw Error(s(418));t=ci(n.nextSibling);var r=rs;t&&ls(e,t)?os(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function hs(e){if(e!==rs)return!1;if(!ss)return ds(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=is)){if(cs(e))throw ps(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=rs?ci(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=is;e;)e=ci(e.nextSibling)}function fs(){is=rs=null,ss=!1}function ms(e){null===as?as=[e]:as.push(e)}var gs=x.ReactCurrentBatchConfig;function ys(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&bs(s)===t.type)?((r=i(t,n.props)).ref=ys(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=ys(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=ys(e,null,t),n.return=e,n;case S:return(t=Uc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case A:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(i,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(i,d),ss&&Zi(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return ss&&Zi(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=f(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),ss&&Zi(i,m),c}function g(i,o,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),ss&&Zi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return ss&&Zi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),ss&&Zi(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&bs(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=ys(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((s=Oc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Mc(a.type,a.key,a.props,null,r.mode,l)).ref=ys(r,s,a),l.return=r,r=l)}return o(r);case S:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(a,r.mode,l)).return=r,r=s}return o(r);case A:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(M(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Fc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=xs(!0),Ss=xs(!1),ks=Ni(null),Ns=null,Es=null,_s=null;function Cs(){_s=Es=Ns=null}function Ts(e){var t=ks.current;Ei(ks),e._currentValue=t}function js(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){Ns=e,_s=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===Ns)throw Error(s(308));Es=e,Ns.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var As=null;function Ds(e){null===As?As=[e]:As.push(e)}function Rs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ms(e,r)}function Ms(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ms(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ms(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $s(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:Os=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Ws=Ni(qs),Gs=Ni(qs),Ks=Ni(qs);function Qs(e){if(e===qs)throw Error(s(174));return e}function Ys(e,t){switch(_i(Ks,t),_i(Gs,e),_i(Ws,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ws),_i(Ws,t)}function Js(){Ei(Ws),Ei(Gs),Ei(Ks)}function Xs(e){Qs(Ks.current);var t=Qs(Ws.current),n=le(t,e.type);t!==n&&(_i(Gs,e),_i(Ws,n))}function Zs(e){Gs.current===e&&(Ei(Ws),Ei(Gs))}var ea=Ni(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ca=null,ua=!1,da=!1,ha=0,pa=0;function fa(){throw Error(s(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:eo,e=n(r,i),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(s(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=to,e=n(r,i)}while(da)}if(ia.current=Xa,t=null!==la&&null!==la.next,aa=0,ca=la=oa=null,ua=!1,t)throw Error(s(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?oa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?oa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(s(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?oa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,oa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,oa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=ba(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ka(){}function Na(e,t){var n=oa,r=ba(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,xo=!0),r=r.queue,Oa(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Pa(9,_a.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(s(349));0!==(30&aa)||Ea(n,t,i)}return i}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&ja(e)}function Ca(e,t,n){return n((function(){Ta(t)&&ja(e)}))}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function ja(e){var t=Ms(e,1);null!==t&&rc(t,e,1,-1)}function Ia(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,oa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return ba().memoizedState}function Da(e,t,n,r){var i=va();oa.flags|=e,i.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var i=ba();r=void 0===r?null:r;var s=void 0;if(null!==la){var a=la.memoizedState;if(s=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Pa(t,n,s,r))}oa.flags|=e,i.memoizedState=Pa(1|t,n,s,r)}function Ma(e,t){return Da(8390656,8,e,t)}function Oa(e,t){return Ra(2048,8,e,t)}function La(e,t){return Ra(4,2,e,t)}function Fa(e,t){return Ra(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,Ua.bind(null,t,e),n)}function Ba(){}function za(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $a(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),oa.lanes|=n,Ll|=n,e.baseState=!0),t)}function qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Wa(){return ba().memoizedState}function Ga(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ya(t,n);else if(null!==(n=Rs(e,t,n,r))){rc(n,e,r,tc()),Ja(n,t,r)}}function Ka(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Rs(e,t,i,r))&&(rc(n,e,r,i=tc()),Ja(n,t,r))}}function Qa(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function Ya(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xa={readContext:Ps,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Za={readContext:Ps,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Ma,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,oa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ia,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ia(!1),t=e[0];return e=qa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oa,i=va();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&aa)||Ea(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ma(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Il.identifierPrefix;if(ss){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:za,useContext:Ps,useEffect:Oa,useImperativeHandle:Va,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:$a,useReducer:wa,useRef:Aa,useState:function(){return wa(xa)},useDebugValue:Ba,useDeferredValue:function(e){return Ha(ba(),la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:ka,useSyncExternalStore:Na,useId:Wa,unstable_isNewReconciler:!1},to={readContext:Ps,useCallback:za,useContext:Ps,useEffect:Oa,useImperativeHandle:Va,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:$a,useReducer:Sa,useRef:Aa,useState:function(){return Sa(xa)},useDebugValue:Ba,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[Sa(xa)[0],ba().memoizedState]},useMutableSource:ka,useSyncExternalStore:Na,useId:Wa,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(rc(t,e,i,r),Bs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(rc(t,e,i,r),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(rc(t,e,r,n),Bs(t,e,r))}};function so(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function ao(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=Ai(t)?Ii:Ti.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function oo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=Ai(t)?Ii:Ti.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&io.enqueueReplaceState(i,i.state,null),$s(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var po="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Wl=r),ho(0,t)},n}function mo(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new po;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bo=x.ReactCurrentOwner,xo=!1;function wo(e,t,n,r){t.child=null===e?Ss(t,null,n,r):ws(t,e.child,n,r)}function So(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=ga(e,t,n,r,s,i),n=ya(),null===e||xo?(ss&&n&&ts(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function ko(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return qo(e,t,i)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qo(e,t,i);0!==(131072&e.flags)&&(xo=!0)}}return Co(e,t,n,r,i)}function Eo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Rl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Rl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,_i(Rl,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,_i(Rl,Dl),Dl|=r;return wo(e,t,i,n),t.child}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,i){var s=Ai(n)?Ii:Ti.current;return s=Pi(t,s),Is(t,i),n=ga(e,t,n,r,s,i),r=ya(),null===e||xo?(ss&&r&&ts(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function To(e,t,n,r,i){if(Ai(n)){var s=!0;Oi(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ho(e,t),ao(t,n,r),lo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Pi(t,c=Ai(n)?Ii:Ti.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,a,r,c),Os=!1;var h=t.memoizedState;a.state=h,$s(t,r,a,i),l=t.memoizedState,o!==r||h!==l||ji.current||Os?("function"===typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Os||so(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Pi(t,l=Ai(n)?Ii:Ti.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,a,r,l),Os=!1,h=t.memoizedState,a.state=h,$s(t,r,a,i);var f=t.memoizedState;o!==d||h!==f||ji.current||Os?("function"===typeof p&&(ro(t,n,p,r),f=t.memoizedState),(c=Os||so(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return jo(e,t,n,r,s,i)}function jo(e,t,n,r,i,s){_o(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Li(t,n,!1),qo(e,t,s);r=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Ys(e,t.containerInfo)}function Po(e,t,n,r,i){return fs(),ms(i),t.flags|=256,wo(e,t,n,r),t.child}var Ao,Do,Ro,Mo,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,i=t.pendingProps,a=ea.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_i(ea,1&a),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Oc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=Oc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=uo(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=Il)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ms(e,i),rc(r,e,i,-1))}return gc(),Vo(e,t,o,r=uo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,is=ci(i.nextSibling),rs=t,ss=!0,as=null,null!==e&&(Ki[Qi++]=Ji,Ki[Qi++]=Xi,Ki[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Rc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Rc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&ms(r),ws(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),js(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $o(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Ai(t.type)&&Di(),Go(t),null;case 3:return r=t.stateNode,Js(),Ei(ji),Ei(Ti),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==as&&(oc(as),as=null))),Do(e,t),Go(t),null;case 5:Zs(t);var i=Qs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=Qs(Ws.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ks.current),Qs(Ws.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Go(t),null;case 13:if(Ei(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))ps(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==as&&(oc(as),as=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ml&&(Ml=3):gc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Js(),Do(e,t),null===e&&zr(t.stateNode.containerInfo),Go(t),null;case 10:return Ts(t.type._context),Go(t),null;case 19:if(Ei(ea),null===(a=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Wo(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Wo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>$l&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ss)return Go(t),null}else 2*Je()-a.renderingStartTime>$l&&1073741824!==n&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ea.current,_i(ea,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ns(t),t.tag){case 1:return Ai(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),Ei(ji),Ei(Ti),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ei(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ea),null;case 4:return Js(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Ro=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ws.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Mo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Jo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Jo||el(n,t);case 6:var r=dl,i=hl;dl=null,pl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,t,a),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Jo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ec(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,pl(e,t,n),Jo=r):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));fl(a,o,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Ec(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":X(i,a);break;case"textarea":se(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Ec(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ec(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Je())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||d,gl(t,e),Jo=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(f=(p=Zo).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Sl(h);continue}}null!==f?(f.return=p,Zo=f):Sl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Ec(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(s(161))}}catch(o){Ec(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zo=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var i=Zo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Yo;var c=Jo;if(Yo=a,(Jo=l)&&!c)for(Zo=i;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?kl(i):null!==l?(l.return=a,Zo=l):kl(i);for(;null!==s;)Zo=s,xl(s,t,n),s=s.sibling;Zo=i,Yo=o,Jo=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Zo=s):wl(e)}}function wl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(s(163))}Jo||512&t.flags&&sl(t)}catch(p){Ec(t,t.return,p)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function Sl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function kl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Ec(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Nl,El=Math.ceil,_l=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Tl=x.ReactCurrentBatchConfig,jl=0,Il=null,Pl=null,Al=0,Dl=0,Rl=Ni(0),Ml=0,Ol=null,Ll=0,Fl=0,Ul=0,Vl=null,Bl=null,zl=0,$l=1/0,Hl=null,ql=!1,Wl=null,Gl=null,Kl=!1,Ql=null,Yl=0,Jl=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&jl)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Al?Al&-Al:null!==gs.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));yt(e,n,r),0!==(2&jl)&&e===Il||(e===Il&&(0===(2&jl)&&(Fl|=n),4===Ml&&lc(e,Al)),ic(e,r),1===n&&0===jl&&0===(1&t.mode)&&($l=Je()+500,Ui&&$i()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Il?Al:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),ai((function(){0===(6&jl)&&$i()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&jl))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=jl;jl|=2;var a=mc();for(Il===e&&Al===t||(Hl=null,$l=Je()+500,pc(e,t));;)try{bc();break}catch(l){fc(e,l)}Cs(),_l.current=a,jl=i,null!==Pl?t=0:(Il=null,Al=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ol,pc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(a=ft(e))&&(r=a,t=ac(e,a))),1===t))throw n=Ol,pc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Bl,Hl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Bl,Hl),t);break}Sc(e,Bl,Hl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Bl,Hl),r);break}Sc(e,Bl,Hl);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&jl))throw Error(s(327));kc();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ol,pc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Bl,Hl),ic(e,Je()),null}function uc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&($l=Je()+500,Ui&&$i())}}function dc(e){null!==Ql&&0===Ql.tag&&0===(6&jl)&&kc();var t=jl;jl|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(jl=t))&&$i()}}function hc(){Dl=Rl.current,Ei(Rl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Js(),Ei(ji),Ei(Ti),ra();break;case 5:Zs(r);break;case 4:Js();break;case 13:case 19:Ei(ea);break;case 10:Ts(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Il=e,Pl=e=Rc(e.current,null),Al=Dl=t,Ml=0,Ol=null,Ul=Fl=Ll=0,Bl=Vl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}As=null}return e}function fc(e,t){for(;;){var n=Pl;try{if(Cs(),ia.current=Xa,ua){for(var r=oa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=oa=null,da=!1,ha=0,Cl.current=null,null===n||null===n.return){Ml=1,Ol=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=yo(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&go(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(s(426))}else if(ss&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),ms(co(c,l));break e}}a=c=co(c,l),4!==Ml&&(Ml=2),null===Vl?Vl=[a]:Vl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(x){t=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function mc(){var e=_l.current;return _l.current=Xa,null===e?Xa:e}function gc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Il||0===(268435455&Ll)&&0===(268435455&Fl)||lc(Il,Al)}function yc(e,t){var n=jl;jl|=2;var r=mc();for(Il===e&&Al===t||(Hl=null,pc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(Cs(),jl=n,_l.current=r,null!==Pl)throw Error(s(261));return Il=null,Al=0,Ml}function vc(){for(;null!==Pl;)xc(Pl)}function bc(){for(;null!==Pl&&!Qe();)xc(Pl)}function xc(e){var t=Nl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?wc(e):Pl=t,Cl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Dl)))return void(Pl=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ml=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ml&&(Ml=5)}function Sc(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Ql);if(0!==(6&jl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Il&&(Pl=Il=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ic(tt,(function(){return kc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var o=bt;bt=1;var l=jl;jl|=4,Cl.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=o),p===a&&++d===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),yl(n,e),fr(ti),Ht=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Ye(),jl=l,bt=o,Tl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Ql=e,Yl=i),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&kc(),a=e.pendingLanes,0!==(1&a)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,$i()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function kc(){if(null!==Ql){var e=xt(Yl),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&jl))throw Error(s(331));var i=jl;for(jl|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var p=(d=Zo).sibling,f=d.return;if(al(d),d===u){Zo=null;break}if(null!==p){p.return=f,Zo=p;break}Zo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zo=v;break e}Zo=a.return}}var b=e.current;for(Zo=b;null!==Zo;){var x=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Zo=x;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Ec(l,l.return,S)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(jl=i,$i(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Nc(e,t,n){e=Vs(e,t=fo(0,t=co(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Vs(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Al&n)===n&&(4===Ml||3===Ml&&(130023424&Al)===Al&&500>Je()-zl?pc(e,0):Ul|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ms(e,t))&&(yt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Ic(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Pc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Oc(n.children,i,a,t);case N:o=8,i|=8;break;case E:return(e=Ac(12,n,t,2|i)).elementType=E,e.lanes=a,e;case j:return(e=Ac(13,n,t,i)).elementType=j,e.lanes=a,e;case I:return(e=Ac(19,n,t,i)).elementType=I,e.lanes=a,e;case D:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case C:o=9;break e;case T:o=11;break e;case P:o=14;break e;case A:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,a,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function zc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Mi(e,n,t)}return t}function $c(e,t,n,r,i,s,a,o,l){return(e=Bc(n,r,!0,e,0,s,0,o,l)).context=zc(null),n=e.current,(s=Us(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,s=tc(),a=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,a))&&(rc(e,i,a,s),Bs(e,i,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ji.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),fs();break;case 5:Xs(t);break;case 1:Ai(t.type)&&Oi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(ks,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(_i(ea,1&ea.current),null!==(e=qo(e,t,n))?e.sibling:null);_i(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return $o(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return qo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,ss&&0!==(1048576&t.flags)&&es(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var i=Pi(t,Ti.current);Is(t,n),i=ga(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(a=!0,Oi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=io,t.stateNode=i,i._reactInternals=t,lo(t,r,e,n),t=jo(null,t,r,!0,a,n)):(t.tag=0,ss&&a&&ts(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=no(r,e),i){case 0:t=Co(null,t,r,e,n);break e;case 1:t=To(null,t,r,e,n);break e;case 11:t=So(null,t,r,e,n);break e;case 14:t=ko(null,t,r,no(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:no(r,i),n);case 1:return r=t.type,i=t.pendingProps,To(e,t,r,i=t.elementType===r?i:no(r,i),n);case 3:e:{if(Io(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fs(e,t),$s(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,r,n,i=co(Error(s(423)),t));break e}if(r!==i){t=Po(e,t,r,n,i=co(Error(s(424)),t));break e}for(is=ci(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,as=null,n=Ss(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=qo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&us(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),_o(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&us(t),null;case 13:return Fo(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:no(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,_i(ks,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!ji.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Us(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),js(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),js(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=Ps(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=no(r=t.type,t.pendingProps),ko(e,t,r,i=no(r.type,i),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:no(r,i),Ho(e,t),t.tag=1,Ai(r)?(e=!0,Oi(t)):e=!1,Is(t,n),ao(t,r,i),lo(t,r,i,n),jo(null,t,r,!0,e,n);case 19:return $o(e,t,n);case 22:return Eo(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=qc(a);o.call(e)}}Hc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qc(a);s.call(e)}}var a=$c(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[fi]=a.current,zr(8===e.nodeType?e.parentNode:e),dc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fi]=l.current,zr(8===e.nodeType?e.parentNode:e),dc((function(){Hc(t,l,n,r)})),l}(n,t,e,i,r);return qc(a)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Hc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Je()),0===(6&jl)&&($l=Je()+500,$i()))}break;case 13:dc((function(){var t=Ms(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},St=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Ms(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},Nt=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,je=dc;var tu={usingClientEntryPoint:!1,Events:[bi,xi,wi,_e,Ce,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=$c(t,null,e,1,null!=n?n:null,i,0,a,o),e[fi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{428:"54e20c01",453:"d5f383ac"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="business-tycoon:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="https://techflux1011.github.io/buisnessTycoon-1/business-tycoon/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,a=r[0],o=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkbusiness_tycoon=self.webpackChunkbusiness_tycoon||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==l)throw new o;const c=t<<2|s>>4;if(r.push(c),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const u=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,d=()=>{try{return u()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"https://techflux1011.github.io/buisnessTycoon-1/business-tycoon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},h=e=>{var t,n;return null===(n=null===(t=d())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},p=()=>{var e;return null===(e=d())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=d())||void 0===t?void 0:t[`_${e}`]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return!function(){var e;const t=null===(e=d())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v(){try{return"object"===typeof indexedDB}catch(e){return!1}}class b extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x.prototype.create)}}class x{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(w,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new b(n,s,t)}}const w=/\{\$([^}]+)}/g;function S(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(k(n)&&k(s)){if(!S(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function k(e){return null!==e&&"object"===typeof e}function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function E(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function _(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class C{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function T(){}function j(e){return e&&e._delegate?e._delegate:e}class I{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const P="[DEFAULT]";class A{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:P})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===P?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.component?this.component.multipleInstances?e:P:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class D{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new A(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const R=[];var M;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(M||(M={}));const O={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},L=M.INFO,F={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},U=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=F[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class V{constructor(e){this.name=e,this._logLevel=L,this._logHandler=U,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in M))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?O[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...t),this._logHandler(this,M.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...t),this._logHandler(this,M.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.INFO,...t),this._logHandler(this,M.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.WARN,...t),this._logHandler(this,M.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.ERROR,...t),this._logHandler(this,M.ERROR,...t)}}let B,z;const $=new WeakMap,H=new WeakMap,q=new WeakMap,W=new WeakMap,G=new WeakMap;let K={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return H.get(e);if("objectStoreNames"===t)return e.objectStoreNames||q.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return J(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Q(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(X(this),n),J($.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return J(e.apply(X(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(X(this),t,...r);return q.set(s,t.sort?t.sort():[t]),J(s)}}function Y(e){return"function"===typeof e?Q(e):(e instanceof IDBTransaction&&function(e){if(H.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));H.set(e,t)}(e),t=e,(B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,K):e);var t}function J(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(J(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&$.set(t,e)})).catch((()=>{})),G.set(t,e),t}(e);if(W.has(e))return W.get(e);const t=Y(e);return t!==e&&(W.set(e,t),G.set(t,e)),t}const X=e=>G.get(e);const Z=["get","getKey","getAll","getAllKeys","count"],ee=["put","add","delete","clear"],te=new Map;function ne(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(te.get(t))return te.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ee.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Z.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return te.set(t,s),s}K=(e=>({...e,get:(t,n,r)=>ne(t,n)||e.get(t,n,r),has:(t,n)=>!!ne(t,n)||e.has(t,n)}))(K);class re{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ie="@firebase/app",se="0.10.13",ae=new V("@firebase/app"),oe="@firebase/app-compat",le="@firebase/analytics-compat",ce="@firebase/analytics",ue="@firebase/app-check-compat",de="@firebase/app-check",he="@firebase/auth",pe="@firebase/auth-compat",fe="@firebase/database",me="@firebase/data-connect",ge="@firebase/database-compat",ye="@firebase/functions",ve="@firebase/functions-compat",be="@firebase/installations",xe="@firebase/installations-compat",we="@firebase/messaging",Se="@firebase/messaging-compat",ke="@firebase/performance",Ne="@firebase/performance-compat",Ee="@firebase/remote-config",_e="@firebase/remote-config-compat",Ce="@firebase/storage",Te="@firebase/storage-compat",je="@firebase/firestore",Ie="@firebase/vertexai-preview",Pe="@firebase/firestore-compat",Ae="firebase",De="[DEFAULT]",Re={[ie]:"fire-core",[oe]:"fire-core-compat",[ce]:"fire-analytics",[le]:"fire-analytics-compat",[de]:"fire-app-check",[ue]:"fire-app-check-compat",[he]:"fire-auth",[pe]:"fire-auth-compat",[fe]:"fire-rtdb",[me]:"fire-data-connect",[ge]:"fire-rtdb-compat",[ye]:"fire-fn",[ve]:"fire-fn-compat",[be]:"fire-iid",[xe]:"fire-iid-compat",[we]:"fire-fcm",[Se]:"fire-fcm-compat",[ke]:"fire-perf",[Ne]:"fire-perf-compat",[Ee]:"fire-rc",[_e]:"fire-rc-compat",[Ce]:"fire-gcs",[Te]:"fire-gcs-compat",[je]:"fire-fst",[Pe]:"fire-fst-compat",[Ie]:"fire-vertex","fire-js":"fire-js",[Ae]:"fire-js-all"},Me=new Map,Oe=new Map,Le=new Map;function Fe(e,t){try{e.container.addComponent(t)}catch(n){ae.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ue(e){const t=e.name;if(Le.has(t))return ae.debug(`There were multiple attempts to register component ${t}.`),!1;Le.set(t,e);for(const n of Me.values())Fe(n,e);for(const n of Oe.values())Fe(n,e);return!0}function Ve(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Be(e){return void 0!==e.settings}const ze=new x("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class $e{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new I("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ze.create("app-deleted",{appName:this._name})}}const He="10.14.1";function qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:De,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ze.create("bad-app-name",{appName:String(i)});if(n||(n=p()),!n)throw ze.create("no-options");const s=Me.get(i);if(s){if(S(n,s.options)&&S(r,s.config))return s;throw ze.create("duplicate-app",{appName:i})}const a=new D(i);for(const l of Le.values())a.addComponent(l);const o=new $e(n,r,a);return Me.set(i,o),o}function We(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;const t=Me.get(e);if(!t&&e===De&&p())return qe();if(!t)throw ze.create("no-app",{appName:e});return t}function Ge(e,t,n){var r;let i=null!==(r=Re[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ae.warn(e.join(" "))}Ue(new I(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Ke="firebase-heartbeat-store";let Qe=null;function Ye(){return Qe||(Qe=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=J(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(J(a.result),e.oldVersion,e.newVersion,J(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ke)}catch(n){console.warn(n)}}}).catch((e=>{throw ze.create("idb-open",{originalErrorMessage:e.message})}))),Qe}async function Je(e,t){try{const n=(await Ye()).transaction(Ke,"readwrite"),r=n.objectStore(Ke);await r.put(t,Xe(e)),await n.done}catch(n){if(n instanceof b)ae.warn(n.message);else{const e=ze.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ae.warn(e.message)}}}function Xe(e){return`${e.name}!${e.options.appId}`}class Ze{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=et();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){ae.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=et(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),nt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ae.warn(t),""}}}function et(){return(new Date).toISOString().substring(0,10)}class tt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!v()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ye()).transaction(Ke),n=await t.objectStore(Ke).get(Xe(e));return await t.done,n}catch(t){if(t instanceof b)ae.warn(t.message);else{const e=ze.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ae.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Je(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Je(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function nt(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var rt;rt="",Ue(new I("platform-logger",(e=>new re(e)),"PRIVATE")),Ue(new I("heartbeat",(e=>new Ze(e)),"PRIVATE")),Ge(ie,se,rt),Ge(ie,se,"esm2017"),Ge("fire-js","");Ge("firebase","10.14.1","app");function it(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const at=st,ot=new x("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lt=new V("@firebase/auth");function ct(e){if(lt.logLevel<=M.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lt.error(`Auth (${He}): ${e}`,...n)}}function ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw mt(e,...n)}function dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mt(e,...n)}function ht(e,t,n){const r=Object.assign(Object.assign({},at()),{[t]:n});return new x("auth","Firebase",r).create(t,{appName:e.name})}function pt(e){return ht(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ft(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ut(e,"argument-error"),ht(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ot.create(e,...n)}function gt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw mt(t,...r)}}function yt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ct(t),new Error(t)}function vt(e,t){e||yt(t)}function bt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function xt(){return"http:"===wt()||"https:"===wt()}function wt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function St(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(xt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class kt{constructor(e,t){this.shortDelay=e,this.longDelay=t,vt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return St()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nt(e,t){vt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Et{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ct=new kt(3e4,6e4);function Tt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function jt(e,t,n,r){return It(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=N(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Et.fetch()(At(e,e.config.apiHost,n,a),l)}))}async function It(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},_t),t);try{const t=new Rt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Mt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Mt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Mt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Mt(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw ht(e,o,a);ut(e,o)}}catch(i){if(i instanceof b)throw i;ut(e,"network-request-failed",{message:String(i)})}}async function Pt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await jt(e,t,n,r,i);return"mfaPendingCredential"in s&&ut(e,"multi-factor-auth-required",{_serverResponse:s}),s}function At(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Nt(e.config,i):`${e.config.apiScheme}://${i}`}function Dt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Rt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(dt(this.auth,"network-request-failed"))),Ct.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dt(e,t,r);return i.customData._tokenResponse=n,i}function Ot(e){return void 0!==e&&void 0!==e.enterprise}class Lt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Dt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ft(e,t){return jt(e,"GET","/v2/recaptchaConfig",Tt(e,t))}async function Ut(e,t){return jt(e,"POST","/v1/accounts:lookup",t)}function Vt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Bt(e){return 1e3*Number(e)}function zt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(ct("Failed to decode base64 JWT payload"),null)}catch(i){return ct("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function $t(e){const t=zt(e);return gt(t,"internal-error"),gt("undefined"!==typeof t.exp,"internal-error"),gt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Ht(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof b&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class qt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Wt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vt(this.lastLoginAt),this.creationTime=Vt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Gt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ht(e,Ut(n,{idToken:r}));gt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Kt(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Wt(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function Kt(e){return e.map((e=>{var{providerId:t}=e,n=it(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Qt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gt(e.idToken,"internal-error"),gt("undefined"!==typeof e.idToken,"internal-error"),gt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):$t(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){gt(0!==e.length,"internal-error");const t=$t(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await It(e,{},(async()=>{const n=N({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=At(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Et.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Qt;return n&&(gt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(gt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(gt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qt,this.toJSON())}_performRefresh(){return yt("not implemented")}}function Yt(e,t){gt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Jt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=it(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Wt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ht(this,this.stsTokenManager.getToken(this.auth,e));return gt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=j(e),r=await n.getIdToken(t),i=zt(r);gt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Vt(Bt(i.auth_time)),issuedAtTime:Vt(Bt(i.iat)),expirationTime:Vt(Bt(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=j(e);await Gt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Gt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Be(this.auth.app))return Promise.reject(pt(this.auth));const e=await this.getIdToken();return await Ht(this,async function(e,t){return jt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:S}=t;gt(v&&S,e,"internal-error");const k=Qt.fromJSON(this.name,S);gt("string"===typeof v,e,"internal-error"),Yt(u,e.name),Yt(d,e.name),gt("boolean"===typeof b,e,"internal-error"),gt("boolean"===typeof x,e,"internal-error"),Yt(h,e.name),Yt(p,e.name),Yt(f,e.name),Yt(m,e.name),Yt(g,e.name),Yt(y,e.name);const N=new Jt({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:k,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(N.providerData=w.map((e=>Object.assign({},e)))),m&&(N._redirectEventId=m),N}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Qt;r.updateFromServerResponse(t);const i=new Jt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Gt(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];gt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Kt(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Qt;a.updateFromIdToken(n);const o=new Jt({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Wt(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const Xt=new Map;function Zt(e){vt(e instanceof Function,"Expected a class definition");let t=Xt.get(e);return t?(vt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xt.set(e,t),t)}class en{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}en.type="NONE";const tn=en;function nn(e,t,n){return`firebase:${e}:${t}:${n}`}class rn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=nn(this.userKey,r.apiKey,i),this.fullPersistenceKey=nn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new rn(Zt(tn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Zt(tn);const s=nn(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Jt._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new rn(i,e,n)):new rn(i,e,n)}}function sn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(an(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dn(t))return"Blackberry";if(hn(t))return"Webos";if(on(t))return"Safari";if((t.includes("chrome/")||ln(t))&&!t.includes("edge/"))return"Chrome";if(un(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function an(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/firefox\//i.test(e)}function on(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/crios\//i.test(e)}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/iemobile/i.test(e)}function un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/android/i.test(e)}function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/blackberry/i.test(e)}function hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/webos/i.test(e)}function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fn(){return function(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return pn(e)||un(e)||hn(e)||dn(e)||/windows phone/i.test(e)||cn(e)}function gn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=sn(g());break;case"Worker":t=`${sn(g())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${He}/${r}`}class yn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class vn{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class bn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wn(this),this.idTokenSubscription=new wn(this),this.beforeStateQueue=new yn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zt(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await rn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ut(this,{idToken:e}),n=await Jt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Be(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gt(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Be(this.app))return Promise.reject(pt(this));const t=e?j(e):null;return t&&gt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Be(this.app)?Promise.reject(pt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Be(this.app)?Promise.reject(pt(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Zt(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return jt(e,"GET","/v2/passwordPolicy",Tt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new vn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new x("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return jt(e,"POST","/v2/accounts:revokeToken",Tt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zt(e)||this._popupRedirectResolver;gt(t,this,"argument-error"),this.redirectPersistenceManager=await rn.create(this,[Zt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(lt.logLevel<=M.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lt.warn(`Auth (${He}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function xn(e){return j(e)}class wn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new C(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Sn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kn(e){return Sn.loadJS(e)}function Nn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class En{constructor(e){this.type="recaptcha-enterprise",this.auth=xn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ot(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ft(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Lt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Ot(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Sn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),kn(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function _n(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new En(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Cn(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await _n(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await _n(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Tn(e,t,n){const r=xn(e);gt(r._canInitEmulator,r,"emulator-config-failed"),gt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=jn(t),{host:a,port:o}=function(e){const t=jn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:In(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:In(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function jn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function In(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Pn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yt("not implemented")}_getIdTokenResponse(e){return yt("not implemented")}_linkToIdToken(e,t){return yt("not implemented")}_getReauthenticationResolver(e){return yt("not implemented")}}async function An(e,t){return jt(e,"POST","/v1/accounts:signUp",t)}async function Dn(e,t){return Pt(e,"POST","/v1/accounts:signInWithPassword",Tt(e,t))}async function Rn(e,t){return jt(e,"POST","/v1/accounts:sendOobCode",Tt(e,t))}async function Mn(e,t){return Rn(e,t)}class On extends Pn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new On(e,t,"password")}static _fromEmailAndCode(e,t){return new On(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Cn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Dn);case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",Tt(e,t))}(e,{email:this._email,oobCode:this._password});default:ut(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Cn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",An);case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",Tt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ut(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ln(e,t){return Pt(e,"POST","/v1/accounts:signInWithIdp",Tt(e,t))}class Fn extends Pn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ut("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=it(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Fn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ln(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ln(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ln(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=N(t)}return e}}const Un={USER_NOT_FOUND:"user-not-found"};class Vn extends Pn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Vn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Vn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Tt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Tt(e,t));if(n.temporaryProof)throw Mt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Tt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Un)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Vn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Bn{constructor(e){var t,n,r,i,s,a;const o=E(_(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);gt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=E(_(e)).link,n=t?E(_(t)).deep_link_id:null,r=E(_(e)).deep_link_id;return(r?E(_(r)).link:null)||r||n||t||e}(e);try{return new Bn(t)}catch(n){return null}}}class zn{constructor(){this.providerId=zn.PROVIDER_ID}static credential(e,t){return On._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Bn.parseLink(t);return gt(n,"argument-error"),On._fromEmailAndCode(e,n.code,n.tenantId)}}zn.PROVIDER_ID="password",zn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",zn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class $n{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Hn extends $n{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qn extends Hn{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return gt("providerId"in t&&"signInMethod"in t,"argument-error"),Fn._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return gt(e.idToken||e.accessToken,"argument-error"),Fn._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return qn.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return qn.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=t;if(!r&&!i&&!n&&!s)return null;if(!o)return null;try{return new qn(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch(l){return null}}}class Wn extends Hn{constructor(){super("facebook.com")}static credential(e){return Fn._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Wn.credential(t.oauthAccessToken)}catch(n){return null}}}Wn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Wn.PROVIDER_ID="facebook.com";class Gn extends Hn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fn._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Gn.credential(n,r)}catch(i){return null}}}Gn.GOOGLE_SIGN_IN_METHOD="google.com",Gn.PROVIDER_ID="google.com";class Kn extends Hn{constructor(){super("github.com")}static credential(e){return Fn._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Kn.credential(t.oauthAccessToken)}catch(n){return null}}}Kn.GITHUB_SIGN_IN_METHOD="github.com",Kn.PROVIDER_ID="github.com";class Qn extends Hn{constructor(){super("twitter.com")}static credential(e,t){return Fn._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Qn.credential(n,r)}catch(i){return null}}}async function Yn(e,t){return Pt(e,"POST","/v1/accounts:signUp",Tt(e,t))}Qn.TWITTER_SIGN_IN_METHOD="twitter.com",Qn.PROVIDER_ID="twitter.com";class Jn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Jt._fromIdTokenResponse(e,n,r),s=Xn(n);return new Jn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Xn(n);return new Jn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Xn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Zn extends b{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Zn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Zn(e,t,n,r)}}function er(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Zn._fromErrorAndOperation(e,n,t,r);throw n}))}async function tr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ht(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Jn._forOperation(e,"link",r)}async function nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Be(r.app))return Promise.reject(pt(r));const i="reauthenticate";try{const s=await Ht(e,er(r,i,t,e),n);gt(s.idToken,r,"internal-error");const a=zt(s.idToken);gt(a,r,"internal-error");const{sub:o}=a;return gt(e.uid===o,r,"user-mismatch"),Jn._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&ut(r,"user-mismatch"),s}}async function rr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Be(e.app))return Promise.reject(pt(e));const r="signIn",i=await er(e,r,t),s=await Jn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ir(e,t){return rr(xn(e),t)}function sr(e,t,n){var r;gt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),gt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(gt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(gt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ar(e){const t=xn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function or(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=j(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Ht(i,async function(e,t){return jt(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function lr(e,t,n,r){return j(e).onAuthStateChanged(t,n,r)}new WeakMap;const cr="__sak";class ur{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cr,"1"),this.storage.removeItem(cr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class dr extends ur{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);fn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dr.type="LOCAL";const hr=dr;class pr extends ur{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pr.type="SESSION";const fr=pr;class mr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new mr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function gr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}mr.receivers=[];class yr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=gr("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function vr(){return window}function br(){return"undefined"!==typeof vr().WorkerGlobalScope&&"function"===typeof vr().importScripts}const xr="firebaseLocalStorageDb",wr="firebaseLocalStorage",Sr="fbase_key";class kr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Nr(e,t){return e.transaction([wr],t?"readwrite":"readonly").objectStore(wr)}function Er(){const e=indexedDB.open(xr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(wr,{keyPath:Sr})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(wr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(xr);return new kr(e).toPromise()}(),t(await Er()))}))}))}async function _r(e,t,n){const r=Nr(e,!0).put({[Sr]:t,value:n});return new kr(r).toPromise()}function Cr(e,t){const n=Nr(e,!0).delete(t);return new kr(n).toPromise()}class Tr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Er()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return br()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mr._getInstance(br()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new yr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Er();return await _r(e,cr,"1"),await Cr(e,cr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>_r(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Nr(e,!1).get(t),r=await new kr(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Cr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Nr(e,!1).getAll();return new kr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Tr.type="LOCAL";const jr=Tr;Nn("rcb"),new kt(3e4,6e4);const Ir="recaptcha";async function Pr(e,t,n){var r;const i=await n.verify();try{let s;if(gt("string"===typeof i,e,"argument-error"),gt(n.type===Ir,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){gt("enroll"===t.type,e,"internal-error");const n=await function(e,t){return jt(e,"POST","/v2/accounts/mfaEnrollment:start",Tt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{gt("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;gt(n,e,"missing-multi-factor-info");const a=await function(e,t){return jt(e,"POST","/v2/accounts/mfaSignIn:start",Tt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return jt(e,"POST","/v1/accounts:sendVerificationCode",Tt(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Ar{constructor(e){this.providerId=Ar.PROVIDER_ID,this.auth=xn(e)}verifyPhoneNumber(e,t){return Pr(this.auth,e,j(t))}static credential(e,t){return Vn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ar.credentialFromTaggedObject(t)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Vn._fromTokenResponse(n,r):null}}function Dr(e,t){return t?Zt(t):(gt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ar.PROVIDER_ID="phone",Ar.PHONE_SIGN_IN_METHOD="phone";class Rr extends Pn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ln(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ln(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ln(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Mr(e){return rr(e.auth,new Rr(e),e.bypassAuthState)}function Or(e){const{auth:t,user:n}=e;return gt(n,t,"internal-error"),nr(n,new Rr(e),e.bypassAuthState)}async function Lr(e){const{auth:t,user:n}=e;return gt(n,t,"internal-error"),tr(n,new Rr(e),e.bypassAuthState)}class Fr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mr;case"linkViaPopup":case"linkViaRedirect":return Lr;case"reauthViaPopup":case"reauthViaRedirect":return Or;default:ut(this.auth,"internal-error")}}resolve(e){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ur=new kt(2e3,1e4);async function Vr(e,t,n){if(Be(e.app))return Promise.reject(dt(e,"operation-not-supported-in-this-environment"));const r=xn(e);ft(e,t,$n);const i=Dr(r,n);return new Br(r,"signInViaPopup",t,i).executeNotNull()}class Br extends Fr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Br.currentPopupAction&&Br.currentPopupAction.cancel(),Br.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gt(e,this.auth,"internal-error"),e}async onExecution(){vt(1===this.filter.length,"Popup operations only handle one event");const e=gr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(dt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Br.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(dt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Ur.get())};e()}}Br.currentPopupAction=null;const zr=new Map;class $r extends Fr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=zr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Wr(t),r=qr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}zr.set(this.auth._key(),e)}return this.bypassAuthState||zr.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Hr(e,t){zr.set(e._key(),t)}function qr(e){return Zt(e._redirectPersistence)}function Wr(e){return nn("pendingRedirect",e.config.apiKey,e.name)}async function Gr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Be(e.app))return Promise.reject(pt(e));const r=xn(e),i=Dr(r,t),s=new $r(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Kr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Yr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(dt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qr(e))}saveEventToCache(e){this.cachedEventUids.add(Qr(e)),this.lastProcessedEventTime=Date.now()}}function Qr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Yr(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Jr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xr=/^https?/;async function Zr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return jt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ei(r))return}catch(n){}ut(e,"unauthorized-domain")}function ei(e){const t=bt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Xr.test(n))return!1;if(Jr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ti=new kt(3e4,6e4);function ni(){const e=vr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ri(e){return new Promise(((t,n)=>{var r,i,s;function a(){ni(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ni(),n(dt(e,"network-request-failed"))},timeout:ti.get()})}if(null===(i=null===(r=vr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=vr().gapi)||void 0===s?void 0:s.load)){const t=Nn("iframefcb");return vr()[t]=()=>{gapi.load?a():n(dt(e,"network-request-failed"))},kn(`${Sn.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw ii=null,e}))}let ii=null;const si=new kt(5e3,15e3),ai={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function li(e){const t=e.config;gt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Nt(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:He},i=oi.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${N(r).slice(1)}`}async function ci(e){const t=await function(e){return ii=ii||ri(e),ii}(e),n=vr().gapi;return gt(n,e,"internal-error"),t.open({where:document.body,url:li(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ai,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=dt(e,"network-request-failed"),s=vr().setTimeout((()=>{r(i)}),si.get());function a(){vr().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const ui={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class di{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function hi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},ui),{width:r.toString(),height:i.toString(),top:s,left:a}),c=g().toLowerCase();n&&(o=ln(c)?"_blank":n),an(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return pn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new di(null);const d=window.open(t||"",o,u);gt(d,e,"popup-blocked");try{d.focus()}catch(h){}return new di(d)}const pi="__/auth/handler",fi="emulator/auth/handler",mi=encodeURIComponent("fac");async function gi(e,t,n,r,i,s){gt(e.config.authDomain,e,"auth-domain-config-required"),gt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:He,eventId:i};if(t instanceof $n){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Hn){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${mi}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${pi}`;return Nt(t,fi)}(e)}?${N(o).slice(1)}${c}`}const yi="webStorageSupport";const vi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fr,this._completeRedirectFn=Gr,this._overrideRedirectResult=Hr}async _openPopup(e,t,n,r){var i;vt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return hi(e,await gi(e,t,n,bt(),r),gr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){vr().location.href=e}(await gi(e,t,n,bt(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(vt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ci(e),n=new Kr(e);return t.register("authEvent",(t=>{gt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yi,{type:yi},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[yi];void 0!==i&&t(!!i),ut(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Zr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mn()||on()||pn()}};var bi="@firebase/auth",xi="1.7.9";class wi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Si=f("authIdTokenMaxAge")||300;let ki=null;var Ni;Sn={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=dt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ni="Browser",Ue(new I("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;gt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Ni,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gn(Ni)},c=new bn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ue(new I("auth-internal",(e=>(e=>new wi(e))(xn(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ge(bi,xi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ni)),Ge(bi,xi,"esm2017");var Ei,_i,Ci="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ti={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=p(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=p(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,p=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=p*g,f(n,2*i+2*s),n[2*i+2*s+1]+=l*g,f(n,2*i+2*s+1),n[2*i+2*s+1]+=p*m,f(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,f(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,_i=Ti.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},Ei=Ti.Integer=r}).apply("undefined"!==typeof Ci?Ci:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ji,Ii,Pi,Ai,Di,Ri,Mi,Oi,Li="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Fi={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Li&&Li];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function N(){var e=j;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new _),(e=>e.reset()));class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,T=!1,j=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(P)}};var P=()=>{for(var e;e=N();){try{e.h.call(e.g)}catch(n){k(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function A(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}d(M,D);var O={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=$(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function W(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[L]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new B(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[L]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function J(e){return e in q?q[e]:q[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){A.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;w(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&z(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,A),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){A.call(this),this.h=e,this.g={}}d(le,A);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function be(){D.call(this,"c")}d(ve,D),d(be,D);var xe={},we=null;function Se(){return we=we||new ne}function ke(e){D.call(this,xe.La,e)}function Ne(e){const t=Se();re(t,new ke(t))}function Ee(e,t){D.call(this,xe.STAT_EVENT,e),this.stat=t}function _e(e){const t=Se();re(t,new Ee(t,e))}function Ce(e,t){D.call(this,xe.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function je(){this.g=!0}function Ie(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}xe.La="serverreachability",d(ke,D),xe.STAT_EVENT="statevent",d(Ee,D),xe.Ma="timingevent",d(Ce,D),je.prototype.xa=function(){this.g=!1},je.prototype.info=function(){};var Pe,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}d(Re,fe),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Pe=new Re;var Le={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),$e(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=pn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ne(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Yt(n)}rn(n),_e(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(qe(o),$e(o)),r.g=a}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ne()}catch(u){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||Ne(),qe(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=Wt(this.g);e="";var s=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),We(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ge(this),We(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=ze(this,o),e==Fe){4==h&&(this.s=4,_e(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,_e(15),Ie(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),Ke(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,_e(11))}}else Ie(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),We(this)}else Ie(this.i,this.l,o,null),Ke(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ge(this),We(this)}}}catch(Ui){}},Me.prototype.cancel=function(){this.J=!0,Ge(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ne(),_e(17)),Ge(this),this.s=2,We(this)):He(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(St(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,xt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,xt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function St(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kt(e,t){St(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Nt(e,t){return St(e),t=_t(e,t),e.g.has(t)}function Et(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Tt(){this.g=new pe}function jt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Lt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){St(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){St(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){St(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){St(this);let t=[];if("string"===typeof e)Nt(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return St(this),this.i=null,Nt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(It,fe),It.prototype.g=function(){return new Pt(this.l,this.j)},It.prototype.i=(mt={},function(){return mt}),d(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Rt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Lt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),$t(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Ft.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Bt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){Ht(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(zi){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new je,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Jt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Me(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=pn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}dn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||I(),T||(C(),T=!0),j.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{jt(o,e,"req"+n+"_")}catch(Ui){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||I(),T||(C(),T=!0),j.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Ce(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new je;if(i.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new je;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),dn(e),Jt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function pn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new It({eb:n})):new Lt(e.pa)).Ha(e.J),t}function fn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Ot(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Yt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},d(yn,ve),d(vn,be),d(bn,fn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Oi=Fi.createWebChannelTransport=function(){return new mn},Mi=Fi.getStatEventTarget=function(){return Se()},Ri=Fi.Event=xe,Di=Fi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Ai=Fi.ErrorCode=Ae,De.COMPLETE="complete",Pi=Fi.EventType=De,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ii=Fi.WebChannel=ge,Fi.FetchXmlHttpFactory=It,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,ji=Fi.XhrIo=Lt}).apply("undefined"!==typeof Li?Li:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ui="@firebase/firestore";class Vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vi.UNAUTHENTICATED=new Vi(null),Vi.GOOGLE_CREDENTIALS=new Vi("google-credentials-uid"),Vi.FIRST_PARTY=new Vi("first-party-uid"),Vi.MOCK_USER=new Vi("mock-user");let Bi="10.14.0";const zi=new V("@firebase/firestore");function $i(){return zi.logLevel}function Hi(e){if(zi.logLevel<=M.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gi);zi.debug(`Firestore (${Bi}): ${e}`,...i)}}function qi(e){if(zi.logLevel<=M.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gi);zi.error(`Firestore (${Bi}): ${e}`,...i)}}function Wi(e){if(zi.logLevel<=M.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gi);zi.warn(`Firestore (${Bi}): ${e}`,...i)}}function Gi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ki(){const e=`FIRESTORE (${Bi}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw qi(e),new Error(e)}function Qi(e,t){e||Ki()}function Yi(e,t){return e}const Ji={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xi extends b{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class es{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ts{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Vi.UNAUTHENTICATED)))}shutdown(){}}class ns{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rs{constructor(e){this.t=e,this.currentUser=Vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qi(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zi,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Hi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Hi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zi)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Hi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Qi("string"==typeof t.accessToken),new es(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qi(null===e||"string"==typeof e),new Vi(e)}}class is{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Vi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ss{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new is(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Vi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class as{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class os{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qi(void 0===this.o);const n=e=>{null!=e.error&&Hi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Hi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Hi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Hi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Qi("string"==typeof e.token),this.R=e.token,new as(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ls(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class cs{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ls(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function us(e,t){return e<t?-1:e>t?1:0}function ds(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class hs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xi(Ji.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xi(Ji.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xi(Ji.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xi(Ji.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hs.fromMillis(Date.now())}static fromDate(e){return hs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new hs(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?us(this.nanoseconds,e.nanoseconds):us(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ps{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ps(e)}static min(){return new ps(new hs(0,0))}static max(){return new ps(new hs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class fs{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ki(),void 0===n?n=e.length-t:n>e.length-t&&Ki(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===fs.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fs?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ms extends fs{construct(e,t,n){return new ms(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Xi(Ji.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new ms(e)}static emptyPath(){return new ms([])}}const gs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ys extends fs{construct(e,t,n){return new ys(e,t,n)}static isValidIdentifier(e){return gs.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ys.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ys(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xi(Ji.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xi(Ji.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xi(Ji.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Xi(Ji.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ys(t)}static emptyPath(){return new ys([])}}class vs{constructor(e){this.path=e}static fromPath(e){return new vs(ms.fromString(e))}static fromName(e){return new vs(ms.fromString(e).popFirst(5))}static empty(){return new vs(ms.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ms.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ms.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vs(new ms(e.slice()))}}class bs{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}bs.UNKNOWN_ID=-1;function xs(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ps.fromTimestamp(1e9===r?new hs(n+1,0):new hs(n,r));return new Ss(i,vs.empty(),t)}function ws(e){return new Ss(e.readTime,e.key,-1)}class Ss{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ss(ps.min(),vs.empty(),-1)}static max(){return new Ss(ps.max(),vs.empty(),-1)}}function ks(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=vs.comparator(e.documentKey,t.documentKey),0!==n?n:us(e.largestBatchId,t.largestBatchId))}const Ns="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Es{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function _s(e){if(e.code!==Ji.FAILED_PRECONDITION||e.message!==Ns)throw e;Hi("LocalStore","Unexpectedly lost primary lease")}class Cs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ki(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Cs(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Cs?t:Cs.resolve(t)}catch(e){return Cs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Cs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Cs.reject(t)}static resolve(e){return new Cs(((t,n)=>{t(e)}))}static reject(e){return new Cs(((t,n)=>{n(e)}))}static waitFor(e){return new Cs(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Cs.resolve(!1);for(const n of e)t=t.next((e=>e?Cs.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Cs(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Cs(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Ts(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function js(e){return"IndexedDbTransactionError"===e.name}class Is{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ps(e){return null==e}function As(e){return 0===e&&1/e==-1/0}function Ds(e){return"number"==typeof e&&Number.isInteger(e)&&!As(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Is.oe=-1;const Rs=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ms=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Os=Ms,Ls=[...Os,"indexConfiguration","indexState","indexEntries"];function Fs(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Us(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Bs{constructor(e,t){this.comparator=e,this.root=t||$s.EMPTY}insert(e,t){return new Bs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$s.BLACK,null,null))}remove(e){return new Bs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$s.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zs(this.root,e,this.comparator,!1)}getReverseIterator(){return new zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zs(this.root,e,this.comparator,!0)}}class zs{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $s{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:$s.RED,this.left=null!=r?r:$s.EMPTY,this.right=null!=i?i:$s.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new $s(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $s.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return $s.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$s.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ki();if(this.right.isRed())throw Ki();const e=this.left.check();if(e!==this.right.check())throw Ki();return e+(this.isRed()?0:1)}}$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1,$s.EMPTY=new class{constructor(){this.size=0}get key(){throw Ki()}get value(){throw Ki()}get color(){throw Ki()}get left(){throw Ki()}get right(){throw Ki()}copy(e,t,n,r,i){return this}insert(e,t,n){return new $s(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hs{constructor(e){this.comparator=e,this.data=new Bs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qs(this.data.getIterator())}getIteratorFrom(e){return new qs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Hs))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Hs(this.comparator);return t.data=e,t}}class qs{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ws{constructor(e){this.fields=e,e.sort(ys.comparator)}static empty(){return new Ws([])}unionWith(e){let t=new Hs(ys.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ws(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Gs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ks{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Gs("Invalid base64 string: "+e):e}}(e);return new Ks(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ks(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return us(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ks.EMPTY_BYTE_STRING=new Ks("");const Qs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(e){if(Qi(!!e),"string"==typeof e){let t=0;const n=Qs.exec(e);if(Qi(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Js(e.seconds),nanos:Js(e.nanos)}}function Js(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xs(e){return"string"==typeof e?Ks.fromBase64String(e):Ks.fromUint8Array(e)}function Zs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ea(e){const t=e.mapValue.fields.__previous_value__;return Zs(t)?ea(t):t}function ta(e){const t=Ys(e.mapValue.fields.__local_write_time__.timestampValue);return new hs(t.seconds,t.nanos)}class na{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class ra{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ra("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ra&&e.projectId===this.projectId&&e.database===this.database}}const ia={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zs(e)?4:xa(e)?9007199254740991:va(e)?10:11:Ki()}function aa(e,t){if(e===t)return!0;const n=sa(e);if(n!==sa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ta(e).isEqual(ta(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ys(e.timestampValue),r=Ys(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xs(e.bytesValue).isEqual(Xs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Js(e.geoPointValue.latitude)===Js(t.geoPointValue.latitude)&&Js(e.geoPointValue.longitude)===Js(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Js(e.integerValue)===Js(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Js(e.doubleValue),r=Js(t.doubleValue);return n===r?As(n)===As(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ds(e.arrayValue.values||[],t.arrayValue.values||[],aa);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fs(n)!==Fs(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!aa(n[i],r[i])))return!1;return!0}(e,t);default:return Ki()}}function oa(e,t){return void 0!==(e.values||[]).find((e=>aa(e,t)))}function la(e,t){if(e===t)return 0;const n=sa(e),r=sa(t);if(n!==r)return us(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return us(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Js(e.integerValue||e.doubleValue),r=Js(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ca(e.timestampValue,t.timestampValue);case 4:return ca(ta(e),ta(t));case 5:return us(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Xs(e),r=Xs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=us(n[i],r[i]);if(0!==e)return e}return us(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=us(Js(e.latitude),Js(t.latitude));return 0!==n?n:us(Js(e.longitude),Js(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ua(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=us((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:ua(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ia.mapValue&&t===ia.mapValue)return 0;if(e===ia.mapValue)return 1;if(t===ia.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=us(r[a],s[a]);if(0!==e)return e;const t=la(n[r[a]],i[s[a]]);if(0!==t)return t}return us(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ki()}}function ca(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return us(e,t);const n=Ys(e),r=Ys(t),i=us(n.seconds,r.seconds);return 0!==i?i:us(n.nanos,r.nanos)}function ua(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=la(n[i],r[i]);if(e)return e}return us(n.length,r.length)}function da(e){return ha(e)}function ha(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ys(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Xs(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return vs.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ha(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${ha(e.fields[i])}`;return n+"}"}(e.mapValue):Ki()}function pa(e){return!!e&&"integerValue"in e}function fa(e){return!!e&&"arrayValue"in e}function ma(e){return!!e&&"nullValue"in e}function ga(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ya(e){return!!e&&"mapValue"in e}function va(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ba(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Us(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ba(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ba(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xa(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class wa{constructor(e){this.value=e}static empty(){return new wa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ya(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ba(t)}setAll(e){let t=ys.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ba(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ya(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return aa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ya(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Us(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new wa(ba(this.value))}}function Sa(e){const t=[];return Us(e.fields,((e,n)=>{const r=new ys([e]);if(ya(n)){const e=Sa(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ws(t)}class ka{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ka(e,0,ps.min(),ps.min(),ps.min(),wa.empty(),0)}static newFoundDocument(e,t,n,r){return new ka(e,1,t,ps.min(),n,r,0)}static newNoDocument(e,t){return new ka(e,2,t,ps.min(),ps.min(),wa.empty(),0)}static newUnknownDocument(e,t){return new ka(e,3,t,ps.min(),ps.min(),wa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ps.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ps.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ka&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ka(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Na{constructor(e,t){this.position=e,this.inclusive=t}}function Ea(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?vs.comparator(vs.fromName(a.referenceValue),n.key):la(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function _a(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!aa(e.position[n],t.position[n]))return!1;return!0}class Ca{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ta(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ja{}class Ia extends ja{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Fa(e,t,n):"array-contains"===t?new za(e,n):"in"===t?new $a(e,n):"not-in"===t?new Ha(e,n):"array-contains-any"===t?new qa(e,n):new Ia(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ua(e,n):new Va(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(la(t,this.value)):null!==t&&sa(this.value)===sa(t)&&this.matchesComparison(la(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ki()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pa extends ja{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Pa(e,t)}matches(e){return Aa(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Aa(e){return"and"===e.op}function Da(e){return Ra(e)&&Aa(e)}function Ra(e){for(const t of e.filters)if(t instanceof Pa)return!1;return!0}function Ma(e){if(e instanceof Ia)return e.field.canonicalString()+e.op.toString()+da(e.value);if(Da(e))return e.filters.map((e=>Ma(e))).join(",");{const t=e.filters.map((e=>Ma(e))).join(",");return`${e.op}(${t})`}}function Oa(e,t){return e instanceof Ia?function(e,t){return t instanceof Ia&&e.op===t.op&&e.field.isEqual(t.field)&&aa(e.value,t.value)}(e,t):e instanceof Pa?function(e,t){return t instanceof Pa&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Oa(n,t.filters[r])),!0)}(e,t):void Ki()}function La(e){return e instanceof Ia?function(e){return`${e.field.canonicalString()} ${e.op} ${da(e.value)}`}(e):e instanceof Pa?function(e){return e.op.toString()+" {"+e.getFilters().map(La).join(" ,")+"}"}(e):"Filter"}class Fa extends Ia{constructor(e,t,n){super(e,t,n),this.key=vs.fromName(n.referenceValue)}matches(e){const t=vs.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ua extends Ia{constructor(e,t){super(e,"in",t),this.keys=Ba("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Va extends Ia{constructor(e,t){super(e,"not-in",t),this.keys=Ba("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ba(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>vs.fromName(e.referenceValue)))}class za extends Ia{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fa(t)&&oa(t.arrayValue,this.value)}}class $a extends Ia{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&oa(this.value.arrayValue,t)}}class Ha extends Ia{constructor(e,t){super(e,"not-in",t)}matches(e){if(oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!oa(this.value.arrayValue,t)}}class qa extends Ia{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fa(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>oa(this.value.arrayValue,e)))}}class Wa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function Ga(e){return new Wa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ka(e){const t=Yi(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ma(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ps(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>da(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>da(e))).join(",")),t.ue=e}return t.ue}function Qa(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ta(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Oa(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_a(e.startAt,t.startAt)&&_a(e.endAt,t.endAt)}function Ya(e){return vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ja{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Xa(e,t,n,r,i,s,a,o){return new Ja(e,t,n,r,i,s,a,o)}function Za(e){return new Ja(e)}function eo(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function to(e){return null!==e.collectionGroup}function no(e){const t=Yi(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Hs(ys.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Ca(r,n))})),e.has(ys.keyField().canonicalString())||t.ce.push(new Ca(ys.keyField(),n))}return t.ce}function ro(e){const t=Yi(e);return t.le||(t.le=io(t,no(e))),t.le}function io(e,t){if("F"===e.limitType)return Ga(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Ca(e.field,t)}));const n=e.endAt?new Na(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Na(e.startAt.position,e.startAt.inclusive):null;return Ga(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function so(e,t,n){return new Ja(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ao(e,t){return Qa(ro(e),ro(t))&&e.limitType===t.limitType}function oo(e){return`${Ka(ro(e))}|lt:${e.limitType}`}function lo(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>La(e))).join(", ")}]`),Ps(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>da(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>da(e))).join(",")),`Target(${t})`}(ro(e))}; limitType=${e.limitType})`}function co(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of no(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ea(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,no(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ea(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,no(e),t))}(e,t)}function uo(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ho(e){return(t,n)=>{let r=!1;for(const i of no(e)){const e=po(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function po(e,t,n){const r=e.field.isKeyField()?vs.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?la(r,i):Ki()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ki()}}class fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Vs(this.inner)}size(){return this.innerSize}}const mo=new Bs(vs.comparator);function go(){return mo}const yo=new Bs(vs.comparator);function vo(){let e=yo;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function bo(e){let t=yo;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function xo(){return So()}function wo(){return So()}function So(){return new fo((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ko=new Bs(vs.comparator),No=new Hs(vs.comparator);function Eo(){let e=No;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const _o=new Hs(us);function Co(){return _o}function To(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:As(t)?"-0":t}}function jo(e){return{integerValue:""+e}}function Io(e,t){return Ds(t)?jo(t):To(e,t)}class Po{constructor(){this._=void 0}}function Ao(e,t,n){return e instanceof Mo?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Zs(t)&&(t=ea(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Oo?Lo(e,t):e instanceof Fo?Uo(e,t):function(e,t){const n=Ro(e,t),r=Bo(n)+Bo(e.Pe);return pa(n)&&pa(e.Pe)?jo(r):To(e.serializer,r)}(e,t)}function Do(e,t,n){return e instanceof Oo?Lo(e,t):e instanceof Fo?Uo(e,t):n}function Ro(e,t){return e instanceof Vo?function(e){return pa(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Mo extends Po{}class Oo extends Po{constructor(e){super(),this.elements=e}}function Lo(e,t){const n=zo(t);for(const r of e.elements)n.some((e=>aa(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Fo extends Po{constructor(e){super(),this.elements=e}}function Uo(e,t){let n=zo(t);for(const r of e.elements)n=n.filter((e=>!aa(e,r)));return{arrayValue:{values:n}}}class Vo extends Po{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Bo(e){return Js(e.integerValue||e.doubleValue)}function zo(e){return fa(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class $o{constructor(e,t){this.version=e,this.transformResults=t}}class Ho{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ho}static exists(e){return new Ho(void 0,e)}static updateTime(e){return new Ho(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qo(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Wo{}function Go(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new rl(e.key,Ho.none()):new Xo(e.key,e.data,Ho.none());{const n=e.data,r=wa.empty();let i=new Hs(ys.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Zo(e.key,r,new Ws(i.toArray()),Ho.none())}}function Ko(e,t,n){e instanceof Xo?function(e,t,n){const r=e.value.clone(),i=tl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Zo?function(e,t,n){if(!qo(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=tl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(el(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qo(e,t,n,r){return e instanceof Xo?function(e,t,n,r){if(!qo(e.precondition,t))return n;const i=e.value.clone(),s=nl(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Zo?function(e,t,n,r){if(!qo(e.precondition,t))return n;const i=nl(e.fieldTransforms,r,t),s=t.data;return s.setAll(el(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return qo(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Yo(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ro(r.transform,e||null);null!=i&&(null===n&&(n=wa.empty()),n.set(r.field,i))}return n||null}function Jo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ds(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Oo&&t instanceof Oo||e instanceof Fo&&t instanceof Fo?ds(e.elements,t.elements,aa):e instanceof Vo&&t instanceof Vo?aa(e.Pe,t.Pe):e instanceof Mo&&t instanceof Mo}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Xo extends Wo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Zo extends Wo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function el(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function tl(e,t,n){const r=new Map;Qi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Do(a,o,n[i]))}return r}function nl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ao(e,s,t))}return r}class rl extends Wo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class il extends Wo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ko(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Qo(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Qo(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=wo();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Go(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(ps.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Eo())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,((e,t)=>Jo(e,t)))&&ds(this.baseMutations,e.baseMutations,((e,t)=>Jo(e,t)))}}class al{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Qi(e.mutations.length===n.length);let r=ko;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new al(e,t,n,r)}}class ol{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ll{constructor(e,t){this.count=e,this.unchangedNames=t}}var cl,ul;function dl(e){switch(e){default:return Ki();case Ji.CANCELLED:case Ji.UNKNOWN:case Ji.DEADLINE_EXCEEDED:case Ji.RESOURCE_EXHAUSTED:case Ji.INTERNAL:case Ji.UNAVAILABLE:case Ji.UNAUTHENTICATED:return!1;case Ji.INVALID_ARGUMENT:case Ji.NOT_FOUND:case Ji.ALREADY_EXISTS:case Ji.PERMISSION_DENIED:case Ji.FAILED_PRECONDITION:case Ji.ABORTED:case Ji.OUT_OF_RANGE:case Ji.UNIMPLEMENTED:case Ji.DATA_LOSS:return!0}}function hl(e){if(void 0===e)return qi("GRPC error has no .code"),Ji.UNKNOWN;switch(e){case cl.OK:return Ji.OK;case cl.CANCELLED:return Ji.CANCELLED;case cl.UNKNOWN:return Ji.UNKNOWN;case cl.DEADLINE_EXCEEDED:return Ji.DEADLINE_EXCEEDED;case cl.RESOURCE_EXHAUSTED:return Ji.RESOURCE_EXHAUSTED;case cl.INTERNAL:return Ji.INTERNAL;case cl.UNAVAILABLE:return Ji.UNAVAILABLE;case cl.UNAUTHENTICATED:return Ji.UNAUTHENTICATED;case cl.INVALID_ARGUMENT:return Ji.INVALID_ARGUMENT;case cl.NOT_FOUND:return Ji.NOT_FOUND;case cl.ALREADY_EXISTS:return Ji.ALREADY_EXISTS;case cl.PERMISSION_DENIED:return Ji.PERMISSION_DENIED;case cl.FAILED_PRECONDITION:return Ji.FAILED_PRECONDITION;case cl.ABORTED:return Ji.ABORTED;case cl.OUT_OF_RANGE:return Ji.OUT_OF_RANGE;case cl.UNIMPLEMENTED:return Ji.UNIMPLEMENTED;case cl.DATA_LOSS:return Ji.DATA_LOSS;default:return Ki()}}(ul=cl||(cl={}))[ul.OK=0]="OK",ul[ul.CANCELLED=1]="CANCELLED",ul[ul.UNKNOWN=2]="UNKNOWN",ul[ul.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ul[ul.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ul[ul.NOT_FOUND=5]="NOT_FOUND",ul[ul.ALREADY_EXISTS=6]="ALREADY_EXISTS",ul[ul.PERMISSION_DENIED=7]="PERMISSION_DENIED",ul[ul.UNAUTHENTICATED=16]="UNAUTHENTICATED",ul[ul.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ul[ul.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ul[ul.ABORTED=10]="ABORTED",ul[ul.OUT_OF_RANGE=11]="OUT_OF_RANGE",ul[ul.UNIMPLEMENTED=12]="UNIMPLEMENTED",ul[ul.INTERNAL=13]="INTERNAL",ul[ul.UNAVAILABLE=14]="UNAVAILABLE",ul[ul.DATA_LOSS=15]="DATA_LOSS";let pl=null;function fl(){return new TextEncoder}const ml=new Ei([4294967295,4294967295],0);function gl(e){const t=fl().encode(e),n=new _i;return n.update(t),new Uint8Array(n.digest())}function yl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ei([n,r],0),new Ei([i,s],0)]}class vl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new bl(`Invalid padding: ${t}`);if(n<0)throw new bl(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new bl(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new bl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ei.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Ei.fromNumber(n)));return 1===r.compare(ml)&&(r=new Ei([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=gl(e),[n,r]=yl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new vl(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=gl(e),[n,r]=yl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xl{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new xl(ps.min(),r,new Bs(us),go(),Eo())}}class wl{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new wl(n,t,Eo(),Eo(),Eo())}}class Sl{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class kl{constructor(e,t){this.targetId=e,this.me=t}}class Nl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ks.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class El{constructor(){this.fe=0,this.ge=Tl(),this.pe=Ks.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Eo(),t=Eo(),n=Eo();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ki()}})),new wl(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Tl()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _l{constructor(e){this.Le=e,this.Be=new Map,this.ke=go(),this.qe=Cl(),this.Qe=new Bs(us)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ki()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Ya(i))if(0===n){const e=new vs(i.path);this.Ue(t,e,ka.newNoDocument(e,ps.min()))}else Qi(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==pl||pl.et(function(e,t,n,r,i){var s,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Xs(n).toUint8Array()}catch(e){if(e instanceof Gs)return Wi("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new vl(s,r,i)}catch(e){return Wi(e instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Ya(i.target)){const t=new vs(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,ka.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=Eo();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new xl(e,t,this.Qe,this.ke,n);return this.ke=go(),this.qe=Cl(),this.Qe=new Bs(us),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new El,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Hs(us),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Hi("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new El),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Cl(){return new Bs(vs.comparator)}function Tl(){return new Bs(vs.comparator)}const jl={asc:"ASCENDING",desc:"DESCENDING"},Il={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pl={and:"AND",or:"OR"};class Al{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dl(e,t){return e.useProto3Json||Ps(t)?t:{value:t}}function Rl(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ml(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ol(e,t){return Rl(e,t.toTimestamp())}function Ll(e){return Qi(!!e),ps.fromTimestamp(function(e){const t=Ys(e);return new hs(t.seconds,t.nanos)}(e))}function Fl(e,t){return Ul(e,t).canonicalString()}function Ul(e,t){const n=function(e){return new ms(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Vl(e){const t=ms.fromString(e);return Qi(ac(t)),t}function Bl(e,t){return Fl(e.databaseId,t.path)}function zl(e,t){const n=Vl(t);if(n.get(1)!==e.databaseId.projectId)throw new Xi(Ji.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xi(Ji.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vs(Wl(n))}function $l(e,t){return Fl(e.databaseId,t)}function Hl(e){const t=Vl(e);return 4===t.length?ms.emptyPath():Wl(t)}function ql(e){return new ms(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wl(e){return Qi(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Gl(e,t,n){return{name:Bl(e,t),fields:n.value.mapValue.fields}}function Kl(e,t){let n;if(t instanceof Xo)n={update:Gl(e,t.key,t.value)};else if(t instanceof rl)n={delete:Bl(e,t.key)};else if(t instanceof Zo)n={update:Gl(e,t.key,t.data),updateMask:sc(t.fieldMask)};else{if(!(t instanceof il))return Ki();n={verify:Bl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Mo)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Oo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fo)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vo)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ki()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ol(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ki()}(e,t.precondition)),n}function Ql(e,t){return{documents:[$l(e,t.path)]}}function Yl(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$l(e,i);const s=function(e){if(0!==e.length)return ic(Pa.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:nc(e.field),direction:Zl(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Dl(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Jl(e){let t=Hl(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qi(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Xl(e);return t instanceof Pa&&Da(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Ca(rc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ps(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Na(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Na(n,t)}(n.endAt)),Xa(t,i,a,s,o,"F",l,c)}function Xl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=rc(e.unaryFilter.field);return Ia.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=rc(e.unaryFilter.field);return Ia.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=rc(e.unaryFilter.field);return Ia.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=rc(e.unaryFilter.field);return Ia.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ki()}}(e):void 0!==e.fieldFilter?function(e){return Ia.create(rc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ki()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Pa.create(e.compositeFilter.filters.map((e=>Xl(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ki()}}(e.compositeFilter.op))}(e):Ki()}function Zl(e){return jl[e]}function ec(e){return Il[e]}function tc(e){return Pl[e]}function nc(e){return{fieldPath:e.canonicalString()}}function rc(e){return ys.fromServerFormat(e.fieldPath)}function ic(e){return e instanceof Ia?function(e){if("=="===e.op){if(ga(e.value))return{unaryFilter:{field:nc(e.field),op:"IS_NAN"}};if(ma(e.value))return{unaryFilter:{field:nc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ga(e.value))return{unaryFilter:{field:nc(e.field),op:"IS_NOT_NAN"}};if(ma(e.value))return{unaryFilter:{field:nc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nc(e.field),op:ec(e.op),value:e.value}}}(e):e instanceof Pa?function(e){const t=e.getFilters().map((e=>ic(e)));return 1===t.length?t[0]:{compositeFilter:{op:tc(e.op),filters:t}}}(e):Ki()}function sc(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ac(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class oc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ps.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ps.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ks.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new oc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lc{constructor(e){this.ct=e}}function cc(e){const t=Jl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?so(t,t.limit,"L"):t}class uc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Js(e.integerValue));else if("doubleValue"in e){const n=Js(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),As(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Ys(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Xs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?xa(e)?this.dt(t,Number.MAX_SAFE_INTEGER):va(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ki()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Js(a)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),vs.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}uc.vt=new uc;class dc{constructor(){this.un=new hc}addToCollectionParentIndex(e,t){return this.un.add(t),Cs.resolve()}getCollectionParents(e,t){return Cs.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Cs.resolve()}deleteFieldIndex(e,t){return Cs.resolve()}deleteAllFieldIndexes(e){return Cs.resolve()}createTargetIndexes(e,t){return Cs.resolve()}getDocumentsMatchingTarget(e,t){return Cs.resolve(null)}getIndexType(e,t){return Cs.resolve(0)}getFieldIndexes(e,t){return Cs.resolve([])}getNextCollectionGroupToUpdate(e){return Cs.resolve(null)}getMinOffset(e,t){return Cs.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return Cs.resolve(Ss.min())}updateCollectionGroup(e,t,n){return Cs.resolve()}updateIndexEntries(e,t){return Cs.resolve()}}class hc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Hs(ms.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Hs(ms.comparator)).toArray()}}new Uint8Array(0);class pc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new pc(e,pc.DEFAULT_COLLECTION_PERCENTILE,pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}pc.DEFAULT_COLLECTION_PERCENTILE=10,pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pc.DEFAULT=new pc(41943040,pc.DEFAULT_COLLECTION_PERCENTILE,pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pc.DISABLED=new pc(-1,0,0);class fc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fc(0)}static kn(){return new fc(-1)}}class mc{constructor(){this.changes=new fo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ka.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Cs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Qo(n.mutation,e,Ws.empty(),hs.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Eo()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Eo();const r=xo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=vo();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=xo();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Eo())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=go();const s=So(),a=So();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Zo)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Qo(a.mutation,t,a.mutation.getFieldMask(),hs.now())):s.set(t.key,Ws.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new gc(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=So();let r=new Bs(((e,t)=>e-t)),i=Eo();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Ws.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Eo()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=wo();l.forEach((e=>{if(!i.has(e)){const r=Go(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Cs.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):to(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Cs.resolve(xo());let a=-1,o=i;return s.next((t=>Cs.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Cs.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,Eo()))).next((e=>({batchId:a,changes:bo(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new vs(t)).next((e=>{let t=vo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=vo();return this.indexManager.getCollectionParents(e,i).next((a=>Cs.forEach(a,(a=>{const o=function(e,t){return new Ja(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ka.newInvalidDocument(r)))}));let n=vo();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Qo(s.mutation,r,Ws.empty(),hs.now()),co(t,r)&&(n=n.insert(e,r))})),n}))}}class vc{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Cs.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ll(e.createTime)}}(t)),Cs.resolve()}getNamedQuery(e,t){return Cs.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:cc(e.bundledQuery),readTime:Ll(e.readTime)}}(t)),Cs.resolve()}}class bc{constructor(){this.overlays=new Bs(vs.comparator),this.Ir=new Map}getOverlay(e,t){return Cs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xo();return Cs.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Cs.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),Cs.resolve()}getOverlaysForCollection(e,t,n){const r=xo(),i=t.length+1,s=new vs(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Cs.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Bs(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=xo(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=xo(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Cs.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ol(t,n));let i=this.Ir.get(t);void 0===i&&(i=Eo(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class xc{constructor(){this.sessionToken=Ks.EMPTY_BYTE_STRING}getSessionToken(e){return Cs.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Cs.resolve()}}class wc{constructor(){this.Tr=new Hs(Sc.Er),this.dr=new Hs(Sc.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Sc(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new Sc(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new vs(new ms([])),n=new Sc(t,e),r=new Sc(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new vs(new ms([])),n=new Sc(t,e),r=new Sc(t,e+1);let i=Eo();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Sc(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Sc{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return vs.comparator(e.key,t.key)||us(e.wr,t.wr)}static Ar(e,t){return us(e.wr,t.wr)||vs.comparator(e.key,t.key)}}class kc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Hs(Sc.Er)}checkEmpty(e){return Cs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new sl(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.br=this.br.add(new Sc(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Cs.resolve(s)}lookupMutationBatch(e,t){return Cs.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Cs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Cs.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Cs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Sc(t,0),r=new Sc(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),Cs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hs(us);return t.forEach((e=>{const t=new Sc(e,0),r=new Sc(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),Cs.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;vs.isDocumentKey(i)||(i=i.child(""));const s=new Sc(new vs(i),0);let a=new Hs(us);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)}),s),Cs.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Qi(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Cs.forEach(t.mutations,(r=>{const i=new Sc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new Sc(t,0),r=this.br.firstAfterOrEqual(n);return Cs.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Cs.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Nc{constructor(e){this.Mr=e,this.docs=new Bs(vs.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Cs.resolve(n?n.document.mutableCopy():ka.newInvalidDocument(t))}getEntries(e,t){let n=go();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ka.newInvalidDocument(e))})),Cs.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=go();const s=t.path,a=new vs(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ks(ws(a),n)<=0||(r.has(a.key)||co(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Cs.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ki()}Or(e,t){return Cs.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ec(this)}getSize(e){return Cs.resolve(this.size)}}class Ec extends mc{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),Cs.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class _c{constructor(e){this.persistence=e,this.Nr=new fo((e=>Ka(e)),Qa),this.lastRemoteSnapshotVersion=ps.min(),this.highestTargetId=0,this.Lr=0,this.Br=new wc,this.targetCount=0,this.kr=fc.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),Cs.resolve()}getLastRemoteSnapshotVersion(e){return Cs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Cs.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Cs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Cs.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new fc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Cs.resolve()}updateTargetData(e,t){return this.Kn(t),Cs.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Cs.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Cs.waitFor(i).next((()=>r))}getTargetCount(e){return Cs.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Cs.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Cs.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Cs.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Cs.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Cs.resolve(n)}containsKey(e,t){return Cs.resolve(this.Br.containsKey(t))}}class Cc{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Is(0),this.Kr=!1,this.Kr=!0,this.$r=new xc,this.referenceDelegate=e(this),this.Ur=new _c(this),this.indexManager=new dc,this.remoteDocumentCache=function(e){return new Nc(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new lc(t),this.Gr=new vc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new kc(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Hi("MemoryPersistence","Starting transaction:",e);const r=new Tc(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return Cs.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class Tc extends Es{constructor(e){super(),this.currentSequenceNumber=e}}class jc{constructor(e){this.persistence=e,this.Jr=new wc,this.Yr=null}static Zr(e){return new jc(e)}get Xr(){if(this.Yr)return this.Yr;throw Ki()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Cs.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Cs.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Cs.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cs.forEach(this.Xr,(n=>{const r=vs.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,ps.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Cs.or([()=>Cs.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Ic{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Eo(),r=Eo();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ic(e,t.fromCache,n,r)}}class Pc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ac{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=y()?8:Ts(g())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Pc;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?($i()<=M.DEBUG&&Hi("QueryEngine","SDK will not create cache indexes for query:",lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Cs.resolve()):($i()<=M.DEBUG&&Hi("QueryEngine","Query:",lo(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?($i()<=M.DEBUG&&Hi("QueryEngine","The SDK decides to create cache indexes for query:",lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ro(t))):Cs.resolve())}Yi(e,t){if(eo(t))return Cs.resolve(null);let n=ro(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=so(t,null,"F"),n=ro(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Eo(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,so(t,null,"F")):this.rs(e,s,t,n)}))))})))))}Zi(e,t,n,r){return eo(t)||r.isEqual(ps.min())?Cs.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Cs.resolve(null):($i()<=M.DEBUG&&Hi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lo(t)),this.rs(e,s,t,xs(r,-1)).next((e=>e)))}))}ts(e,t){let n=new Hs(ho(e));return t.forEach(((t,r)=>{co(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return $i()<=M.DEBUG&&Hi("QueryEngine","Using full collection scan to execute query:",lo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ss.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Dc{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Bs(us),this._s=new fo((e=>Ka(e)),Qa),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function Rc(e,t,n,r){return new Dc(e,t,n,r)}async function Mc(e,t){const n=Yi(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=Eo();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Oc(e){const t=Yi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function Lc(e,t,n){let r=Eo(),i=Eo();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=go();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ps.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Hi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{Ps:r,Is:i}}))}function Fc(e,t){const n=Yi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Uc(e,t){const n=Yi(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,Cs.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new oc(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function Vc(e,t,n){const r=Yi(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!js(e))throw e;Hi("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function Bc(e,t,n){const r=Yi(e);let i=ps.min(),s=Eo();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Yi(e),i=r._s.get(n);return void 0!==i?Cs.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,ro(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:ps.min(),n?s:Eo()))).next((e=>(zc(r,uo(t),e),{documents:e,Ts:s})))))}function zc(e,t,n){let r=e.us.get(t)||ps.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}class $c{constructor(){this.activeTargetIds=Co()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hc{constructor(){this.so=new $c,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $c,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qc{_o(e){}shutdown(){}}class Wc{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Hi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Hi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gc=null;function Kc(){return null===Gc?Gc=268435456+Math.round(2147483648*Math.random()):Gc++,"0x"+Gc.toString(16)}const Qc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yc{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Jc="WebChannelConnection";class Xc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=Kc(),a=this.xo(e,t.toUriEncodedString());Hi("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,i),this.No(e,a,o,n).then((t=>(Hi("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Wi("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t}))}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=Qc[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Kc();return new Promise(((s,a)=>{const o=new ji;o.setWithCredentials(!0),o.listenOnce(Pi.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Ai.NO_ERROR:const t=o.getResponseJson();Hi(Jc,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Ai.TIMEOUT:Hi(Jc,`RPC '${e}' ${i} timed out`),a(new Xi(Ji.DEADLINE_EXCEEDED,"Request time out"));break;case Ai.HTTP_ERROR:const n=o.getStatus();if(Hi(Jc,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ji).indexOf(t)>=0?t:Ji.UNKNOWN}(t.status);a(new Xi(e,t.message))}else a(new Xi(Ji.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Xi(Ji.UNAVAILABLE,"Connection failed."));break;default:Ki()}}finally{Hi(Jc,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Hi(Jc,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=Kc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Oi(),a=Mi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Hi(Jc,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);let d=!1,h=!1;const p=new Yc({Io:t=>{h?Hi(Jc,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Hi(Jc,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Hi(Jc,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,Ii.EventType.OPEN,(()=>{h||(Hi(Jc,`RPC '${e}' stream ${r} transport opened.`),p.yo())})),f(u,Ii.EventType.CLOSE,(()=>{h||(h=!0,Hi(Jc,`RPC '${e}' stream ${r} transport closed`),p.So())})),f(u,Ii.EventType.ERROR,(t=>{h||(h=!0,Wi(Jc,`RPC '${e}' stream ${r} transport errored:`,t),p.So(new Xi(Ji.UNAVAILABLE,"The operation could not be completed")))})),f(u,Ii.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Qi(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Hi(Jc,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=cl[e];if(void 0!==t)return hl(t)}(t),i=a.message;void 0===n&&(n=Ji.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,p.So(new Xi(n,i)),u.close()}else Hi(Jc,`RPC '${e}' stream ${r} received:`,i),p.bo(i)}})),f(a,Ri.STAT_EVENT,(t=>{t.stat===Di.PROXY?Hi(Jc,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Di.NOPROXY&&Hi(Jc,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.wo()}),0),p}}function Zc(){return"undefined"!=typeof document?document:null}function eu(e){return new Al(e,!0)}class tu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Hi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class nu{constructor(e,t,n,r,i,s,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tu(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Ji.RESOURCE_EXHAUSTED?(qi(t.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Ji.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)}),(t=>{e((()=>{const e=new Xi(Ji.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Hi("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(Hi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ru extends nu{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ki()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Qi(void 0===t||"string"==typeof t),Ks.fromBase64String(t||"")):(Qi(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Ks.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Ji.UNKNOWN:hl(e.code);return new Xi(t,e.message||"")}(a);n=new Nl(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=zl(e,r.document.name),s=Ll(r.document.updateTime),a=r.document.createTime?Ll(r.document.createTime):ps.min(),o=new wa({mapValue:{fields:r.document.fields}}),l=ka.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Sl(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=zl(e,r.document),s=r.readTime?Ll(r.readTime):ps.min(),a=ka.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Sl([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=zl(e,r.document),s=r.removedTargetIds||[];n=new Sl([],s,i,null)}else{if(!("filter"in t))return Ki();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ll(r,i),a=e.targetId;n=new kl(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ps.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ps.min():t.readTime?Ll(t.readTime):ps.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=ql(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ya(r)?{documents:Ql(e,r)}:{query:Yl(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ml(e,t.resumeToken);const r=Dl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ps.min())>0){n.readTime=Rl(e,t.snapshotVersion.toTimestamp());const r=Dl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ki()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=ql(this.serializer),t.removeTarget=e,this.a_(t)}}class iu extends nu{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qi(!!e.streamToken),this.lastStreamToken=e.streamToken,Qi(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Qi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Qi(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ll(e.updateTime):Ll(t);return n.isEqual(ps.min())&&(n=Ll(t)),new $o(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ll(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=ql(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Kl(this.serializer,e)))};this.a_(t)}}class su extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Xi(Ji.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,a]=i;return this.connection.Mo(e,Ul(t,n),r,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ji.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xi(Ji.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.Lo(e,Ul(t,n),r,a,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ji.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xi(Ji.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class au{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qi(t),this.D_=!1):Hi("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class ou{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{gu(this)&&(Hi("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Yi(e);t.L_.add(4),await cu(t),t.q_.set("Unknown"),t.L_.delete(4),await lu(t)}(this))}))})),this.q_=new au(n,r)}}async function lu(e){if(gu(e))for(const t of e.B_)await t(!0)}async function cu(e){for(const t of e.B_)await t(!1)}function uu(e,t){const n=Yi(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),mu(n)?fu(n):Mu(n).r_()&&hu(n,t))}function du(e,t){const n=Yi(e),r=Mu(n);n.N_.delete(t),r.r_()&&pu(n,t),0===n.N_.size&&(r.r_()?r.o_():gu(n)&&n.q_.set("Unknown"))}function hu(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ps.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Mu(e).A_(t)}function pu(e,t){e.Q_.xe(t),Mu(e).R_(t)}function fu(e){e.Q_=new _l({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Mu(e).start(),e.q_.v_()}function mu(e){return gu(e)&&!Mu(e).n_()&&e.N_.size>0}function gu(e){return 0===Yi(e).L_.size}function yu(e){e.Q_=void 0}async function vu(e){e.q_.set("Online")}async function bu(e){e.N_.forEach(((t,n)=>{hu(e,t)}))}async function xu(e,t){yu(e),mu(e)?(e.q_.M_(t),fu(e)):e.q_.set("Unknown")}async function wu(e,t,n){if(e.q_.set("Online"),t instanceof Nl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Hi("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Su(e,n)}else if(t instanceof Sl?e.Q_.Ke(t):t instanceof kl?e.Q_.He(t):e.Q_.We(t),!n.isEqual(ps.min()))try{const t=await Oc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Ks.EMPTY_BYTE_STRING,r.snapshotVersion)),pu(e,t);const i=new oc(r.target,t,n,r.sequenceNumber);hu(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Hi("RemoteStore","Failed to raise snapshot:",t),await Su(e,t)}}async function Su(e,t,n){if(!js(t))throw t;e.L_.add(1),await cu(e),e.q_.set("Offline"),n||(n=()=>Oc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Hi("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await lu(e)}))}function ku(e,t){return t().catch((n=>Su(e,n,t)))}async function Nu(e){const t=Yi(e),n=Ou(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Eu(t);)try{const e=await Fc(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,_u(t,e)}catch(e){await Su(t,e)}Cu(t)&&Tu(t)}function Eu(e){return gu(e)&&e.O_.length<10}function _u(e,t){e.O_.push(t);const n=Ou(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Cu(e){return gu(e)&&!Ou(e).n_()&&e.O_.length>0}function Tu(e){Ou(e).start()}async function ju(e){Ou(e).p_()}async function Iu(e){const t=Ou(e);for(const n of e.O_)t.m_(n.mutations)}async function Pu(e,t,n){const r=e.O_.shift(),i=al.from(r,t,n);await ku(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Nu(e)}async function Au(e,t){t&&Ou(e).V_&&await async function(e,t){if(function(e){return dl(e)&&e!==Ji.ABORTED}(t.code)){const n=e.O_.shift();Ou(e).s_(),await ku(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Nu(e)}}(e,t),Cu(e)&&Tu(e)}async function Du(e,t){const n=Yi(e);n.asyncQueue.verifyOperationInProgress(),Hi("RemoteStore","RemoteStore received new credentials");const r=gu(n);n.L_.add(3),await cu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await lu(n)}async function Ru(e,t){const n=Yi(e);t?(n.L_.delete(2),await lu(n)):t||(n.L_.add(2),await cu(n),n.q_.set("Unknown"))}function Mu(e){return e.K_||(e.K_=function(e,t,n){const r=Yi(e);return r.w_(),new ru(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:vu.bind(null,e),Ro:bu.bind(null,e),mo:xu.bind(null,e),d_:wu.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),mu(e)?fu(e):e.q_.set("Unknown")):(await e.K_.stop(),yu(e))}))),e.K_}function Ou(e){return e.U_||(e.U_=function(e,t,n){const r=Yi(e);return r.w_(),new iu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ju.bind(null,e),mo:Au.bind(null,e),f_:Iu.bind(null,e),g_:Pu.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await Nu(e)):(await e.U_.stop(),e.O_.length>0&&(Hi("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}class Lu{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Lu(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xi(Ji.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fu(e,t){if(qi("AsyncQueue",`${t}: ${e}`),js(e))return new Xi(Ji.UNAVAILABLE,`${t}: ${e}`);throw e}class Uu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||vs.comparator(t.key,n.key):(e,t)=>vs.comparator(e.key,t.key),this.keyedMap=vo(),this.sortedSet=new Bs(this.comparator)}static emptySet(e){return new Uu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Uu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Vu{constructor(){this.W_=new Bs(vs.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ki():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Bu{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Bu(e,t,Uu.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ao(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class zu{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class $u{constructor(){this.queries=Hu(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Yi(e),r=n.queries;n.queries=Hu(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new Xi(Ji.ABORTED,"Firestore shutting down"))}}function Hu(){return new fo((e=>oo(e)),ao)}async function qu(e,t){const n=Yi(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new zu,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Fu(e,`Initialization of query '${lo(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&Qu(n)}async function Wu(e,t){const n=Yi(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Gu(e,t){const n=Yi(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&Qu(n)}function Ku(e,t,n){const r=Yi(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function Qu(e){e.Y_.forEach((e=>{e.next()}))}var Yu,Ju;(Ju=Yu||(Yu={})).ea="default",Ju.Cache="cache";class Xu{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Bu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Bu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yu.Cache}}class Zu{constructor(e){this.key=e}}class ed{constructor(e){this.key=e}}class td{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Eo(),this.mutatedKeys=Eo(),this.Aa=ho(e),this.Ra=new Uu(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Vu,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=co(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.ga(c,u)||(n.track({type:2,doc:u}),p=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(o||l)&&(a=!0)),p&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ki()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new Bu(this.query,e.Ra,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Eo(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new ed(e))})),this.da.forEach((n=>{e.has(n)||t.push(new Zu(n))})),t}ba(e){this.Ta=e.Ts,this.da=Eo();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Bu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class nd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class rd{constructor(e){this.key=e,this.va=!1}}class id{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new fo((e=>oo(e)),ao),this.Ma=new Map,this.xa=new Set,this.Oa=new Bs(vs.comparator),this.Na=new Map,this.La=new wc,this.Ba={},this.ka=new Map,this.qa=fc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function sd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=_d(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await od(r,t,n,!0),i}async function ad(e,t){const n=_d(e);await od(n,t,!0,!1)}async function od(e,t,n,r){const i=await Uc(e.localStore,ro(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await ld(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&uu(e.remoteStore,i),o}async function ld(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Bc(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,i)})));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return xd(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await Bc(e.localStore,t,!0),a=new td(t,s.Ts),o=a.ma(s.documents),l=wl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);xd(e,n,c.wa);const u=new nd(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function cd(e,t,n){const r=Yi(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((e=>!ao(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Vc(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&du(r.remoteStore,i.targetId),vd(r,i.targetId)})).catch(_s)):(vd(r,i.targetId),await Vc(r.localStore,i.targetId,!0))}async function ud(e,t){const n=Yi(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),du(n.remoteStore,r.targetId))}async function dd(e,t){const n=Yi(e);try{const e=await function(e,t){const n=Yi(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach(((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Ks.EMPTY_BYTE_STRING,ps.min()).withLastLimboFreeSnapshotVersion(ps.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Ur.updateTargetData(e,c))}));let o=go(),l=Eo();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Lc(e,s,t.documentUpdates).next((e=>{o=e.Ps,l=e.Is}))),!r.isEqual(ps.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Cs.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(Qi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Qi(r.va):e.removedDocuments.size>0&&(Qi(r.va),r.va=!1))})),await kd(n,e,t)}catch(e){await _s(e)}}function hd(e,t,n){const r=Yi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Yi(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&Qu(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pd(e,t,n){const r=Yi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new Bs(vs.comparator);e=e.insert(s,ka.newNoDocument(s,ps.min()));const n=Eo().add(s),i=new xl(ps.min(),new Map,new Bs(us),e,n);await dd(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),Sd(r)}else await Vc(r.localStore,t,!1).then((()=>vd(r,t,n))).catch(_s)}async function fd(e,t){const n=Yi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Yi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Cs.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Qi(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Eo();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);yd(n,r,null),gd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kd(n,e)}catch(e){await _s(e)}}async function md(e,t,n){const r=Yi(e);try{const e=await function(e,t){const n=Yi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Qi(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);yd(r,t,n),gd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await kd(r,e)}catch(n){await _s(n)}}function gd(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function yd(e,t,n){const r=Yi(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function vd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||bd(e,t)}))}function bd(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(du(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Sd(e))}function xd(e,t,n){for(const r of n)r instanceof Zu?(e.La.addReference(r.key,t),wd(e,r)):r instanceof ed?(Hi("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||bd(e,r.key)):Ki()}function wd(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Hi("SyncEngine","New document in limbo: "+n),e.xa.add(r),Sd(e))}function Sd(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new vs(ms.fromString(t)),r=e.qa.next();e.Na.set(r,new rd(n)),e.Oa=e.Oa.insert(n,r),uu(e.remoteStore,new oc(ro(Za(n.path)),r,"TargetPurposeLimboResolution",Is.oe))}}async function kd(e,t,n){const r=Yi(e),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,o)=>{a.push(r.Ka(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Ic.Wi(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=Yi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Cs.forEach(t,(t=>Cs.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Cs.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!js(e))throw e;Hi("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function Nd(e,t){const n=Yi(e);if(!n.currentUser.isEqual(t)){Hi("SyncEngine","User change. New user:",t.toKey());const e=await Mc(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new Xi(Ji.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await kd(n,e.hs)}}function Ed(e,t){const n=Yi(e),r=n.Na.get(t);if(r&&r.va)return Eo().add(r.key);{let e=Eo();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function _d(e){const t=Yi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ed.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pd.bind(null,t),t.Ca.d_=Gu.bind(null,t.eventManager),t.Ca.$a=Ku.bind(null,t.eventManager),t}function Cd(e){const t=Yi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=md.bind(null,t),t}class Td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Rc(this.persistence,new Ac,e.initialUser,this.serializer)}Ga(e){return new Cc(jc.Zr,this.serializer)}Wa(e){return new Hc}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Td.provider={build:()=>new Td};class jd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>hd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nd.bind(null,this.syncEngine),await Ru(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $u}createDatastore(e){const t=eu(e.databaseInfo.databaseId),n=function(e){return new Xc(e)}(e.databaseInfo);return function(e,t,n,r){return new su(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ou(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>hd(this.syncEngine,e,0)),Wc.D()?new Wc:new qc)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new id(e,t,n,r,i,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Yi(e);Hi("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await cu(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}jd.provider={build:()=>new jd};class Id{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Pd{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Vi.UNAUTHENTICATED,this.clientId=cs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Hi("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Hi("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Fu(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Ad(e,t){e.asyncQueue.verifyOperationInProgress(),Hi("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Mc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Dd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Rd(e);Hi("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Du(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Du(t.remoteStore,n))),e._onlineComponents=t}async function Rd(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Hi("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ad(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ji.FAILED_PRECONDITION||e.code===Ji.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Wi("Error using user provided cache. Falling back to memory cache: "+n),await Ad(e,new Td)}}else Hi("FirestoreClient","Using default OfflineComponentProvider"),await Ad(e,new Td);return e._offlineComponents}async function Md(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Hi("FirestoreClient","Using user provided OnlineComponentProvider"),await Dd(e,e._uninitializedComponentsProvider._online)):(Hi("FirestoreClient","Using default OnlineComponentProvider"),await Dd(e,new jd))),e._onlineComponents}function Od(e){return Md(e).then((e=>e.syncEngine))}async function Ld(e){const t=await Md(e),n=t.eventManager;return n.onListen=sd.bind(null,t.syncEngine),n.onUnlisten=cd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ad.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ud.bind(null,t.syncEngine),n}function Fd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zi;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Id({next:o=>{s.Za(),t.enqueueAndForget((()=>Wu(e,a)));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Xi(Ji.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Xi(Ji.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Xu(Za(n.path),s,{includeMetadataChanges:!0,_a:!0});return qu(e,a)}(await Ld(e),e.asyncQueue,t,n,r))),r.promise}function Ud(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Vd=new Map;function Bd(e,t,n){if(!n)throw new Xi(Ji.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function zd(e){if(!vs.isDocumentKey(e))throw new Xi(Ji.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function $d(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ki()}function Hd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xi(Ji.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$d(e);throw new Xi(Ji.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class qd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Xi(Ji.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xi(Ji.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Xi(Ji.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ud(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xi(Ji.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Xi(Ji.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Xi(Ji.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wd{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xi(Ji.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xi(Ji.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ts;switch(e.type){case"firstParty":return new ss(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xi(Ji.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Vd.get(e);t&&(Hi("ComponentProvider","Removing Datastore"),Vd.delete(e),t.terminate())}(this),Promise.resolve()}}function Gd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Hd(e,Wd))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&Wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Vi.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Xi(Ji.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Vi(s)}e._authCredentials=new ns(new es(t,n))}}class Kd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Kd(this.firestore,e,this._query)}}class Qd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qd(this.firestore,e,this._key)}}class Yd extends Kd{constructor(e,t,n){super(e,t,Za(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qd(this.firestore,null,new vs(e))}withConverter(e){return new Yd(this.firestore,e,this._path)}}function Jd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=j(e),1===arguments.length&&(t=cs.newId()),Bd("doc","path",t),e instanceof Wd){const n=ms.fromString(t,...r);return zd(n),new Qd(e,null,new vs(n))}{if(!(e instanceof Qd||e instanceof Yd))throw new Xi(Ji.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ms.fromString(t,...r));return zd(n),new Qd(e.firestore,e instanceof Yd?e.converter:null,new vs(n))}}class Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tu(this,"async_queue_retry"),this.Vu=()=>{const e=Zc();e&&Hi("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Zc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Zc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Zi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!js(e))throw e;Hi("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw qi("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Lu.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&Ki()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Zd extends Wd{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Xd,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xd(e),this._firestoreClient=void 0,await e}}}function eh(e){if(e._terminated)throw new Xi(Ji.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||th(e),e._firestoreClient}function th(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new na(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ud(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Pd(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class nh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nh(Ks.fromBase64String(e))}catch(e){throw new Xi(Ji.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new nh(Ks.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Xi(Ji.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ys(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ih{constructor(e){this._methodName=e}}class sh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xi(Ji.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xi(Ji.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return us(this._lat,e._lat)||us(this._long,e._long)}}class ah{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const oh=/^__.*__$/;class lh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xo(e,this.data,t,this.fieldTransforms)}}class ch{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Zo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ki()}}class dh{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new dh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Eh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(uh(this.Cu)&&oh.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class hh{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||eu(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new dh({Cu:e,methodName:t,qu:n,path:ys.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ph(e){const t=e._freezeSettings(),n=eu(e._databaseId);return new hh(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fh(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);wh("Data must be an object, but it was:",a,r);const o=bh(r,a);let l,c;if(s.merge)l=new Ws(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Sh(t,r,n);if(!a.contains(i))throw new Xi(Ji.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);_h(e,i)||e.push(i)}l=new Ws(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new lh(new wa(o),l,c)}class mh extends ih{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mh}}function gh(e,t,n,r){const i=e.Qu(1,t,n);wh("Data must be an object, but it was:",i,r);const s=[],a=wa.empty();Us(r,((e,r)=>{const o=Nh(t,e,n);r=j(r);const l=i.Nu(o);if(r instanceof mh)s.push(o);else{const e=vh(r,l);null!=e&&(s.push(o),a.set(o,e))}}));const o=new Ws(s);return new ch(a,o,i.fieldTransforms)}function yh(e,t,n,r,i,s){const a=e.Qu(1,t,n),o=[Sh(t,r,n)],l=[i];if(s.length%2!=0)throw new Xi(Ji.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(Sh(t,s[h])),l.push(s[h+1]);const c=[],u=wa.empty();for(let h=o.length-1;h>=0;--h)if(!_h(c,o[h])){const e=o[h];let t=l[h];t=j(t);const n=a.Nu(e);if(t instanceof mh)c.push(e);else{const r=vh(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Ws(c);return new ch(u,d,a.fieldTransforms)}function vh(e,t){if(xh(e=j(e)))return wh("Unsupported field value:",t,e),bh(e,t);if(e instanceof ih)return function(e,t){if(!uh(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=vh(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=j(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Io(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=hs.fromDate(e);return{timestampValue:Rl(t.serializer,n)}}if(e instanceof hs){const n=new hs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Rl(t.serializer,n)}}if(e instanceof sh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof nh)return{bytesValue:Ml(t.serializer,e._byteString)};if(e instanceof Qd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Fl(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ah)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return To(t.serializer,e)}))}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${$d(e)}`)}(e,t)}function bh(e,t){const n={};return Vs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Us(e,((e,r)=>{const i=vh(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof hs||e instanceof sh||e instanceof nh||e instanceof Qd||e instanceof ih||e instanceof ah)}function wh(e,t,n){if(!xh(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=$d(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Sh(e,t,n){if((t=j(t))instanceof rh)return t._internalPath;if("string"==typeof t)return Nh(e,t);throw Eh("Field path arguments must be of type string or ",e,!1,void 0,n)}const kh=new RegExp("[~\\*/\\[\\]]");function Nh(e,t,n){if(t.search(kh)>=0)throw Eh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new rh(...t.split("."))._internalPath}catch(r){throw Eh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Eh(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Xi(Ji.INVALID_ARGUMENT,o+e+l)}function _h(e,t){return e.some((e=>e.isEqual(t)))}class Ch{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Th(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Th extends Ch{data(){return super.data()}}function jh(e,t){return"string"==typeof t?Nh(e,t):t instanceof rh?t._internalPath:t._delegate._internalPath}class Ih{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Js(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ki()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Us(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Js(e.doubleValue)));return new ah(i)}convertGeoPoint(e){return new sh(Js(e.latitude),Js(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ea(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ta(e));default:return null}}convertTimestamp(e){const t=Ys(e);return new hs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ms.fromString(e);Qi(ac(n));const r=new ra(n.get(1),n.get(3)),i=new vs(n.popFirst(5));return r.isEqual(t)||qi(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Ph(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ah{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dh extends Ch{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(jh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Rh extends Dh{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}function Mh(e){e=Hd(e,Qd);const t=Hd(e.firestore,Zd);return Fd(eh(t),e._key).then((n=>Uh(t,e,n)))}class Oh extends Ih{constructor(e){super(),this.firestore=e}convertBytes(e){return new nh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qd(this.firestore,null,t)}}function Lh(e,t,n){e=Hd(e,Qd);const r=Hd(e.firestore,Zd),i=Ph(e.converter,t,n);return Fh(r,[fh(ph(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ho.none())])}function Fh(e,t){return function(e,t){const n=new Zi;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Cd(e);try{const e=await function(e,t){const n=Yi(e),r=hs.now(),i=t.reduce(((e,t)=>e.add(t.key)),Eo());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=go(),l=Eo();return n.cs.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=Yo(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Zo(e.key,t,Sa(t.value.mapValue),Ho.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:bo(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Bs(us)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await kd(r,e.changes),await Nu(r.remoteStore)}catch(e){const t=Fu(e,"Failed to persist write");n.reject(t)}}(await Od(e),t,n))),n.promise}(eh(e),t)}function Uh(e,t,n){const r=n.docs.get(t._key),i=new Oh(e);return new Dh(e,i,t._key,r,new Ah(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Bi=e}(He),Ue(new I("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Zd(new rs(e.getProvider("auth-internal")),new os(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xi(Ji.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ra(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Ge(Ui,"4.7.3",e),Ge(Ui,"4.7.3","esm2017")}();const Vh=qe({apiKey:"AIzaSyBVdUPrYBGbaBZzD0A6q3ncMsVL2-0ccSs",authDomain:"business-tycoon-dac45.firebaseapp.com",projectId:"business-tycoon-dac45",storageBucket:"business-tycoon-dac45.firebasestorage.app",messagingSenderId:"909777324740",appId:"1:909777324740:web:af6d9624f3d409321d1791"}),Bh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();const t=Ve(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ve(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(S(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ut(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:vi,persistence:[jr,hr,fr]}),r=f("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Si)return;const r=null===t||void 0===t?void 0:t.token;ki!==r&&(ki=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){j(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){j(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=h("auth");return s&&Tn(n,`http://${s}`),n}(Vh),zh=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Ve("object"==typeof e?e:We(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=h(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Gd(r,...e)}return r}(Vh),$h=new Gn,Hh=new qn("apple.com");$h.setCustomParameters({prompt:"select_account"});const qh=class{static async saveGameState(e,t){try{const n=Jd(zh,"saves",e);return(await Mh(n)).exists()?await function(e,t,n){e=Hd(e,Qd);const r=Hd(e.firestore,Zd),i=ph(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=j(t))||t instanceof rh?yh(i,"updateDoc",e._key,t,n,o):gh(i,"updateDoc",e._key,t),Fh(r,[s.toMutation(e._key,Ho.exists(!0))])}(n,{gameState:t,lastSaved:new Date}):await Lh(n,{gameState:t,lastSaved:new Date,createdAt:new Date}),!0}catch(n){return console.error("Error saving game state:",n),!1}}static async loadGameState(e){try{const t=Jd(zh,"saves",e),n=await Mh(t);return n.exists()?n.data().gameState:null}catch(t){return console.error("Error loading game state:",t),null}}static autoSaveGameState(e,t){return this.saveGameState(e,t)}static async hasSaveData(e){try{const t=Jd(zh,"saves",e);return(await Mh(t)).exists()}catch(t){return console.error("Error checking save data:",t),!1}}static async deleteSaveData(e){try{const t=Jd(zh,"saves",e);return await Lh(t,{deleted:!0,deletedAt:new Date}),!0}catch(t){return console.error("Error deleting save data:",t),!1}}};var Wh=n(579);const Gh=(0,r.createContext)();function Kh(){return(0,r.useContext)(Gh)}function Qh(e){let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!1);(0,r.useEffect)((()=>lr(Bh,(()=>{l(!0)}))),[]),(0,r.useEffect)((()=>{o&&async function(){try{if(!o)return;const e=await async function(e,t){return await xn(e)._initializationPromise,Gr(e,t,!1)}(Bh);null!==e&&void 0!==e&&e.user&&await Lh(Jd(zh,"users",e.user.uid),{email:e.user.email,displayName:e.user.displayName||e.user.email.split("@")[0],lastLogin:new Date},{merge:!0})}catch(e){console.error("Error checking redirect result:",e)}}()}),[o]),(0,r.useEffect)((()=>lr(Bh,(async e=>{if(e)try{await Lh(Jd(zh,"users",e.uid),{lastLogin:new Date},{merge:!0})}catch(t){console.error("Error updating last login:",t)}i(e),a(!1)}))),[]);const c={currentUser:n,signup:async function(e,t,n){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");const r=await async function(e,t,n){if(Be(e.app))return Promise.reject(pt(e));const r=xn(e),i=Cn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yn),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ar(e),t})),a=await Jn._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(Bh,e,t);return await or(r.user,{displayName:n}),await Lh(Jd(zh,"users",r.user.uid),{email:e,displayName:n,createdAt:new Date,lastLogin:new Date}),r}catch(r){throw console.error("Signup error:",r),r}},login:async function(e,t){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");return await function(e,t,n){return Be(e.app)?Promise.reject(pt(e)):ir(j(e),zn.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ar(e),t}))}(Bh,e,t)}catch(n){throw console.error("Login error:",n),n}},signInWithGoogle:async function(){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");const e=await Vr(Bh,$h),t=e.user;return await Lh(Jd(zh,"users",t.uid),{email:t.email,displayName:t.displayName,lastLogin:new Date},{merge:!0}),e}catch(e){throw console.error("Google sign-in error:",e),e}},signInWithApple:async function(){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");const e=await Vr(Bh,Hh),t=e.user;return await Lh(Jd(zh,"users",t.uid),{email:t.email,displayName:t.displayName||t.email.split("@")[0],lastLogin:new Date},{merge:!0}),e}catch(e){throw console.error("Apple sign-in error:",e),e}},signInAsGuest:async function(){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");console.log("Starting guest sign in...");const e=await async function(e){var t;if(Be(e.app))return Promise.reject(pt(e));const n=xn(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Jn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Yn(n,{returnSecureToken:!0}),i=await Jn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(Bh);console.log("Anonymous auth completed:",e);const t=e.user,n="Guest User";return console.log("Creating user document..."),await Lh(Jd(zh,"users",t.uid),{isGuest:!0,displayName:n,lastLogin:new Date},{merge:!0}),console.log("Updating profile..."),await or(t,{displayName:n}),console.log("Guest sign in completed successfully"),e}catch(e){throw console.error("Guest sign-in error:",e),e}},logout:async function(){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");return await function(e){return j(e).signOut()}(Bh)}catch(e){throw console.error("Logout error:",e),e}},resetPassword:async function(e){try{if(!o)throw new Error("Authentication not initialized yet. Please try again.");return await async function(e,t,n){const r=xn(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&sr(r,i,n),await Cn(r,i,"getOobCode",Mn)}(Bh,e)}catch(t){throw console.error("Password reset error:",t),t}},authInitialized:o};return(0,Wh.jsx)(Gh.Provider,{value:c,children:!s&&t})}const Yh={money:1e3,lastUpdate:Date.now(),generation:1,assets:[],skills:{},experience:0,level:1,playerStatus:{job:null,jobExperience:0,housing:null,transportation:null,business:null,age:18,background:null,ascensionBonus:0,ascensionCount:0},milestones:[],currentEducation:null,educationProgress:0,workEvents:{pendingEvent:null,lastEventTime:null,notificationVisible:!1},timeSettings:{gameTimeRatio:60,lastRealTime:Date.now(),gameTime:Date.now(),totalOfflineTime:0}},Jh=(e,t)=>e*t,Xh=e=>{const t=Date.now()-e.timeSettings.lastRealTime,n=Jh(t,e.timeSettings.gameTimeRatio);return e.timeSettings.gameTime+n},Zh=e=>{let t=0;return e.assets.length>0&&(t+=e.assets.reduce(((e,t)=>e+t.income),0)),e.playerStatus.business&&(t+=e.playerStatus.business.income),t*=1+.01*(e.level-1),t*=1+e.playerStatus.ascensionBonus/100,t},ep=e=>{if(e<=0)return 0;const t=100;return e<=100?t*e:e<=200?t*e*1.5:e<=400?t*e*2:t*e*2.5},tp=e=>Math.floor(100*Math.pow(1.5,e-1)),np=(e,t)=>{const n={food:["Cook I","Cook II","Cook III","Chef de Partie","Sous Chef","Head Chef","Executive Chef","Master Chef","Celebrity Chef","Michelin Star Chef"],retail:["Cashier I","Cashier II","Cashier III","Shift Lead","Department Lead","Assistant Manager","Store Manager","District Manager","Regional Director","VP of Operations"],technical:["Junior Developer","Developer","Senior Developer","Lead Developer","Architect","Development Manager","Director of Engineering","VP of Engineering","CTO","Chief Innovation Officer"],financial:["Accountant I","Accountant II","Accountant III","Senior Accountant","Financial Analyst","Finance Manager","Controller","Finance Director","CFO","Chief Investment Officer"],healthcare:["Nurse I","Nurse II","Nurse III","Charge Nurse","Nurse Practitioner","Department Head","Director of Nursing","Chief Nursing Officer","VP of Patient Care","Chief Medical Officer"],legal:["Paralegal I","Paralegal II","Paralegal III","Junior Associate","Associate","Senior Associate","Junior Partner","Partner","Senior Partner","Managing Partner"],management:["Associate I","Associate II","Associate III","Senior Associate I","Senior Associate II","Senior Associate III","Team Lead I","Team Lead II","Team Lead III","Assistant Supervisor","Junior Supervisor","Supervisor","Senior Supervisor","Project Supervisor","Assistant Manager","Department Manager","Senior Manager","Division Manager","General Manager","Operations Manager","Regional Manager","Director","Senior Director","Executive Director","Regional Director","Divisional Director","Vice President","Senior Vice President","Executive Vice President","Chief Operating Officer","President","Chief Executive Officer","Managing Director","Executive Chairman","Chairman of the Board","Group Chairman","Global Chairman","Chief Principal","Principal Partner","Executive Partner","Managing Partner","Entrepreneur","Venture Capitalist","Angel Investor","Business Magnate","Industry Titan","Corporate Overlord","Market Dominator","Finance Mogul","Business Emperor","Tycoon"]}[e]||["Associate I","Associate II","Associate III","Senior Associate","Team Lead","Supervisor","Manager","Senior Manager","Director","Executive"];return n[Math.min(Math.floor((t-1)/10),n.length-1)]},rp=(e,t)=>e*(1+.05*(t-1));function ip(e,t){switch(t.type){case"CLICK":{const t=e.playerStatus.job?e.playerStatus.job.payPerClick/60:.01;e.level;if(e.playerStatus.job){const n=1,r=e.playerStatus.jobExperience+n,i=ep(e.playerStatus.job.level);let s=e.playerStatus.job.level,a=e.playerStatus.job.title,o=e.playerStatus.job.payPerClick,l=e.playerStatus.job.readyForPromotion||!1;if(r>=i){s+=1;const n=0;return s%10===0?l=!0:(a=np(e.playerStatus.job.category,s),o=rp(e.playerStatus.job.basePayPerClick||e.playerStatus.job.payPerClick,s)),{...e,money:e.money+t,playerStatus:{...e.playerStatus,jobExperience:n,job:{...e.playerStatus.job,level:s,title:a,payPerClick:o,readyForPromotion:l}}}}return{...e,money:e.money+t,playerStatus:{...e.playerStatus,jobExperience:r,job:{...e.playerStatus.job,readyForPromotion:l}}}}return{...e,money:e.money+t}}case"UPDATE_INCOME":{var n;const t=Date.now(),r=Zh(e),i=(e=>(Xh(e)-e.timeSettings.gameTime)/1e3)(e),s=e.money+r*i,a=r*i*.1;let o=e.playerStatus.jobExperience||0,l=(null===(n=e.playerStatus.job)||void 0===n?void 0:n.level)||1,c=e.playerStatus.job;if(e.playerStatus.job){o+=.1*i;const t=ep(l);o>=t&&(o-=t,l+=1,c={...e.playerStatus.job,level:l,title:e.playerStatus.job.baseTitle||e.playerStatus.job.title,payPerClick:rp(e.playerStatus.job.basePayPerClick,l)},e.playerStatus.job.category&&(c.title=np(e.playerStatus.job.category,l)))}let u=e.experience+a,d=e.level;const h=100;u>=tp(e.level)&&e.level<h&&(u-=tp(e.level),d++);const p=Xh(e);return{...e,money:s,lastUpdate:t,experience:u,level:d,playerStatus:{...e.playerStatus,job:c,jobExperience:o},timeSettings:{...e.timeSettings,lastRealTime:t,gameTime:p}}}case"ASCEND":{const t=e.playerStatus.age+1,n=e.playerStatus.ascensionBonus+5,r=e.playerStatus.ascensionCount+1;return{...e,playerStatus:{...e.playerStatus,age:t,ascensionBonus:n,ascensionCount:r}}}case"INIT_PLAYER":{const n=t.payload||(Math.random()>.7?"rich":"poor"),r={};return[...["management","leadership","communication","technical","education","financial","business","healthcare","legal","ethics","food","creativity"]].sort((()=>.5-Math.random())).slice(0,3).forEach((e=>{r[e]=1})),{...e,playerStatus:{...e.playerStatus,background:n,jobExperience:0,job:null},skills:r}}case"REGENERATE":{const t=.2*e.money,n={};Object.entries(e.skills).forEach((e=>{let[t,r]=e;n[t]=Math.floor(.3*r)}));const r=e.playerStatus.ascensionCount>=3?5:Math.floor(3*Math.random())+1,i=e.money>=5e5?Math.random()<.7?"rich":"poor":Math.random()<.3?"rich":"poor",s="rich"===i?1.5*t:t,a=[...e.milestones,{generation:e.generation,wealth:e.money,level:e.level,ascensions:e.playerStatus.ascensionCount}];return{...Yh,money:s,generation:e.generation+1,skills:n,level:r,playerStatus:{...Yh.playerStatus,background:i},milestones:a,lastUpdate:Date.now()}}case"GET_JOB":{const{title:n,category:r,hourlyPay:i,payPerClick:s,level:a=1,basePayPerClick:o}=t.payload,l=i||s,c=o||l;return{...e,playerStatus:{...e.playerStatus,jobExperience:0,job:{title:n,category:r,payPerClick:l,basePayPerClick:c,level:a||1,readyForPromotion:!1}}}}case"ADD_JOB_EXPERIENCE":{if(!e.playerStatus.job)return e;const n=t.payload||1;let r=(e.playerStatus.jobExperience||0)+n,i=e.playerStatus.job.level||1,s=e.playerStatus.job;const a=ep(i);return r>=a&&(r-=a,i+=1,s={...e.playerStatus.job,level:i,title:e.playerStatus.job.baseTitle||e.playerStatus.job.title,payPerClick:rp(e.playerStatus.job.basePayPerClick,i)},e.playerStatus.job.category&&(s.title=np(e.playerStatus.job.category,i))),{...e,playerStatus:{...e.playerStatus,job:s,jobExperience:r}}}case"BUY_ASSET":return e.money<t.payload.cost?e:{...e,money:e.money-t.payload.cost,assets:[...e.assets,t.payload],experience:e.experience+5};case"BUY_HOUSING":return e.money<t.payload.cost?e:{...e,money:e.money-t.payload.cost,playerStatus:{...e.playerStatus,housing:t.payload},experience:e.experience+10};case"BUY_TRANSPORTATION":return e.money<t.payload.cost?e:{...e,money:e.money-t.payload.cost,playerStatus:{...e.playerStatus,transportation:t.payload},experience:e.experience+10};case"START_BUSINESS":return e.money<t.payload.cost?e:{...e,money:e.money-t.payload.cost,playerStatus:{...e.playerStatus,business:t.payload},experience:e.experience+20};case"UPGRADE_BUSINESS":{const{business:n,upgrade:r}=t.payload;if(e.money<r.cost)return e;const i={...n,income:n.income+r.incomeBoost,level:n.level+1};return{...e,money:e.money-r.cost,playerStatus:{...e.playerStatus,business:i},experience:e.experience+15}}case"START_EDUCATION":{const n=t.payload;if(e.money<n.cost)return e;let r=1;e.skills[n.skill]&&(r=1+.2*e.skills[n.skill]);const i=6e4*r;let s=1;return e.playerStatus.background&&(s="rich"===e.playerStatus.background?n.skillMultiplier.rich:n.skillMultiplier.poor),{...e,money:e.money-n.cost,currentEducation:{...n,startTime:Date.now(),duration:i,multiplier:s},educationProgress:0}}case"UPDATE_EDUCATION_PROGRESS":{if(!e.currentEducation)return e;const t=Date.now()-e.currentEducation.startTime,n=Math.min(1,t/e.currentEducation.duration);if(n>=1){const t=e.currentEducation.value*e.currentEducation.multiplier,n=e.skills[e.currentEducation.skill]||0;return{...e,skills:{...e.skills,[e.currentEducation.skill]:n+t},currentEducation:null,educationProgress:0,experience:e.experience+5}}return{...e,educationProgress:n}}case"GAIN_SKILL":{const{skill:n,amount:r}=t.payload,i=e.skills[n]||0;return{...e,skills:{...e.skills,[n]:i+r}}}case"SHOW_WORK_EVENT_NOTIFICATION":return{...e,workEvents:{...e.workEvents,notificationVisible:!0}};case"HIDE_WORK_EVENT_NOTIFICATION":return{...e,workEvents:{...e.workEvents,notificationVisible:!1}};case"HANDLE_WORK_EVENT_CHOICE":{if(!e.workEvents.pendingEvent)return e;const{choiceIndex:n}=t.payload,r=e.workEvents.pendingEvent.choices[n];if(!r||!r.outcome)return e;const i=r.outcome,s=i.skill,a=i.gain;return{...e,skills:{...e.skills,[s]:(e.skills[s]||0)+a},workEvents:{...e.workEvents,pendingEvent:null,notificationVisible:!1}}}case"DISMISS_WORK_EVENT":return{...e,workEvents:{...e.workEvents,pendingEvent:null,notificationVisible:!1}};case"APPLY_FOR_PROMOTION":{const{job:n}=t.payload,r=e.playerStatus.job;return r&&r.readyForPromotion?n.category!==r.category||n.level<=r.level?e:{...e,playerStatus:{...e.playerStatus,job:{...n,level:r.level+1,basePayPerClick:n.payPerClick,payPerClick:n.payPerClick,baseTitle:n.title,readyForPromotion:!1}}}:e}case"SELECT_TRANSPORTATION":return{...e,playerStatus:{...e.playerStatus,transportation:t.payload}};case"UPDATE_MONEY":return{...e,money:Math.max(0,e.money+t.payload)};case"LOAD_GAME":return{...e,...t.payload};case"RESET_GAME":return{...Yh};case"CALCULATE_OFFLINE_PROGRESS":{const t=Date.now(),n=t-e.timeSettings.lastRealTime,r=Jh(n,e.timeSettings.gameTimeRatio),i=864e5,s=Math.min(r,i),a=Zh(e)*(s/1e3);return{...e,money:e.money+a,timeSettings:{...e.timeSettings,lastRealTime:t,gameTime:e.timeSettings.gameTime+s,totalOfflineTime:e.timeSettings.totalOfflineTime+n}}}default:return e}}const sp=(0,r.createContext)();function ap(e){let{children:t}=e;const[i,s]=(0,r.useReducer)(ip,Yh),{currentUser:a,authInitialized:o}=Kh(),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)({offlineTime:0,offlineEarnings:0});(0,r.useEffect)((()=>{!async function(){try{if(a&&o){console.log("Loading saved game state for user:",a.uid),c(!0);const t=await qh.loadGameState(a.uid);if(t){var e;console.log("Saved state found, loading into game state"),s({type:"LOAD_GAME",payload:t});const n=Date.now(),r=n-((null===(e=t.timeSettings)||void 0===e?void 0:e.lastRealTime)||n);if(r>6e4){const e=t.money;s({type:"CALCULATE_OFFLINE_PROGRESS"}),setTimeout((()=>{const t=i.money-e;t>0&&(m({offlineTime:r,offlineEarnings:t}),p(!0))}),100)}}else console.log("No saved state found, using initial state"),s({type:"INIT_PLAYER"});c(!1)}else o&&!a&&(console.log("No user logged in, using default state"),s({type:"RESET_GAME"}),c(!1))}catch(t){console.error("Error loading game state:",t),d(t.message),c(!1)}}()}),[a,o]),(0,r.useEffect)((()=>{if(!a||l||!o)return;console.log("Setting up auto-save interval");const e=setInterval((async()=>{try{console.log("Auto-saving game state..."),await qh.autoSaveGameState(a.uid,i),console.log("Auto-save completed")}catch(e){console.error("Error during auto-save:",e)}}),6e4);return()=>{console.log("Clearing auto-save interval"),clearInterval(e)}}),[a,i,l,o]);if((0,r.useEffect)((()=>{if(l)return;const e=setInterval((()=>{s({type:"UPDATE_INCOME"})}),1e3);return()=>clearInterval(e)}),[l]),(0,r.useEffect)((()=>{l||i.playerStatus.background&&0!==Object.keys(i.skills).length||(console.log("Initializing player background and skills"),s({type:"INIT_PLAYER"}))}),[l,i.playerStatus.background,i.skills]),u)return(0,Wh.jsxs)("div",{className:"game-error-container p-6 bg-red-100 text-red-800 rounded-lg m-4",children:[(0,Wh.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Game Error"}),(0,Wh.jsx)("p",{children:u}),(0,Wh.jsx)("button",{onClick:()=>d(null),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded",children:"Dismiss Error"})]});if(l)return(0,Wh.jsxs)("div",{className:"game-loading-container p-6 text-center",children:[(0,Wh.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),(0,Wh.jsx)("p",{className:"text-lg",children:"Loading Game Data..."})]});const g=r.lazy((()=>n.e(428).then(n.bind(n,428))));return(0,Wh.jsxs)(sp.Provider,{value:{gameState:i,gameDispatch:s,jobExperienceNeededForLevel:ep,getJobTitleForLevel:np,updateMoney:e=>{s({type:"UPDATE_MONEY",payload:e})},saveGame:async()=>{if(!a)return console.warn("Attempting to save game without user authentication"),!1;try{return await qh.saveGameState(a.uid,i)}catch(e){return console.error("Error saving game state:",e),d("Failed to save game: "+e.message),!1}},resetGame:async()=>{try{return a&&await qh.deleteSaveData(a.uid),s({type:"RESET_GAME"}),s({type:"INIT_PLAYER"}),!0}catch(e){return console.error("Error resetting game:",e),d("Failed to reset game: "+e.message),!1}},isLoading:l,getGameTime:()=>(e=>{const t=new Date(e);return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),fullDate:t.toLocaleDateString(),fullTime:t.toLocaleTimeString(),shortTime:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),fullDateTime:t.toLocaleString()}})(Xh(i))},children:[t,h&&(0,Wh.jsx)(r.Suspense,{fallback:(0,Wh.jsx)("div",{children:"Loading..."}),children:(0,Wh.jsx)(g,{offlineEarnings:f.offlineEarnings,offlineTime:f.offlineTime,onClose:()=>{p(!1)}})})]})}function op(){const e=(0,r.useContext)(sp);if(!e)throw new Error("useGame must be used within a GameProvider");return e}const lp=()=>{const{gameState:e,gameDispatch:t}=op(),[n,i]=(0,r.useState)(!1);if(!e)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const s=e,a=e=>Math.floor(.3*e);return(0,Wh.jsxs)("div",{className:"regeneration-container",children:[n?(0,Wh.jsxs)("div",{className:"confirmation-message",children:[(0,Wh.jsx)("h3",{children:"Are you sure?"}),(0,Wh.jsx)("p",{children:"You'll lose all your current assets and start fresh as the next generation."}),(0,Wh.jsxs)("div",{className:"confirmation-buttons",children:[(0,Wh.jsx)("button",{className:"confirm-button",onClick:()=>{t({type:"REGENERATE"})},children:"Yes, Start New Generation"}),(0,Wh.jsx)("button",{className:"cancel-button",onClick:()=>{i(!1)},children:"No, Continue Playing"})]})]}):(0,Wh.jsxs)("div",{className:"regeneration-prompt",children:[(0,Wh.jsx)("h3",{children:"Maximum Level Reached!"}),(0,Wh.jsx)("p",{children:"You've reached Level 100, the maximum level in the game."}),(0,Wh.jsx)("p",{children:"You can continue to accumulate wealth or start a new generation with inherited advantages."}),(0,Wh.jsx)("p",{children:"Your child will inherit:"}),(0,Wh.jsxs)("ul",{children:[(0,Wh.jsxs)("li",{children:["$",Math.floor(.2*s.money).toLocaleString()," (20% of your current wealth)"]}),(0,Wh.jsxs)("li",{children:["Business: ",a(s.skills.business)," points"]}),(0,Wh.jsxs)("li",{children:["Technology: ",a(s.skills.tech)," points"]}),(0,Wh.jsxs)("li",{children:["Social: ",a(s.skills.social)," points"]}),(0,Wh.jsxs)("li",{children:["Creativity: ",a(s.skills.creativity)," points"]}),(0,Wh.jsxs)("li",{children:["Starting Level: ",s.playerStatus.ascensionCount>=3?5:"Random (1-3)"]})]}),(0,Wh.jsx)("button",{className:"regenerate-button",onClick:()=>{i(!0)},children:"Start New Generation"})]}),(0,Wh.jsxs)("div",{className:"regeneration-details",children:[(0,Wh.jsxs)("p",{children:["Your wealth: $",Math.floor(s.money).toLocaleString()]}),(0,Wh.jsxs)("p",{children:["Inheritance (20%): $",Math.floor(.2*s.money).toLocaleString()]}),(0,Wh.jsx)("p",{children:"Skills inherited: 30% of your current skills"}),(0,Wh.jsxs)("div",{className:"next-gen-info",children:[(0,Wh.jsx)("p",{className:"next-gen-title",children:"Next Generation:"}),(0,Wh.jsx)("p",{children:"Your child will have a rich or poor background, depending on your wealth"}),(0,Wh.jsxs)("p",{children:["Wealthy players ($",">","$500,000) have a 70% chance of a rich child"]}),(0,Wh.jsx)("p",{children:"Rich children get 50% more inheritance money and education bonuses"})]}),s.playerStatus.ascensionCount>=3&&(0,Wh.jsx)("p",{className:"bonus-info",children:"High Ascension Bonus: Your child will start at level 5!"})]})]})},cp=()=>{const{gameState:e,gameDispatch:t,jobExperienceNeededForLevel:n}=op(),[i,s]=(0,r.useState)(0),[a,o]=(0,r.useState)(.01),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),f=(0,r.useRef)(null),m=(0,r.useRef)(null),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),x=(0,r.useCallback)((e=>{if(null===e||void 0===e||!e.transportation)return 0;return 1*e.transportation.clickSpeedMultiplier}),[]),w=(0,r.useCallback)((e=>{const t=x(e);return t<=0?0:1e3/t}),[x]),S=(0,r.useCallback)((e=>null!==(null===e||void 0===e?void 0:e.transportation)),[]);if((0,r.useEffect)((()=>{if(!e||!e.playerStatus)return;const t=e;let n=0,r=.01;if(t.playerStatus.job){r=(t.playerStatus.job.hourlyPay||60*t.playerStatus.job.payPerClick)/60}else r=.01;t.assets.length>0&&(n+=t.assets.reduce(((e,t)=>e+t.income),0)),t.playerStatus.business&&(n+=t.playerStatus.business.income),n*=1+.01*(t.level-1),t.playerStatus.ascensionBonus>0&&(n*=1+t.playerStatus.ascensionBonus/100),s(n),o(r)}),[e]),(0,r.useEffect)((()=>{if(e&&e.playerStatus&&u&&S(e.playerStatus)){const n=w(e.playerStatus);return n>0&&(f.current=setInterval((()=>{t({type:"CLICK"})}),n)),()=>{f.current&&(clearInterval(f.current),f.current=null)}}}),[u,t,w,S,e]),(0,r.useEffect)((()=>{if(!e)return;[10,25,50,100].includes(e.level)&&c(!0)}),[e]),(0,r.useEffect)((()=>()=>{f.current&&clearInterval(f.current)}),[]),(0,r.useEffect)((()=>{const e=()=>{d(!1),f.current&&(clearInterval(f.current),f.current=null)};return window.addEventListener("blur",e),()=>{window.removeEventListener("blur",e)}}),[]),(0,r.useEffect)((()=>{var t,n;if(e&&e.playerStatus){if(null!==(t=e.playerStatus.job)&&void 0!==t&&t.readyForPromotion&&!v){b(!0);const e=setTimeout((()=>{b(!1)}),5e3);return()=>clearTimeout(e)}null!==(n=e.playerStatus.job)&&void 0!==n&&n.readyForPromotion||!v||b(!1)}}),[e,v]),(0,r.useEffect)((()=>{function e(e){m.current&&!m.current.contains(e.target)&&null!==h&&p(null)}return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[h]),!e||!e.playerStatus)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const k=e,N=(E=k.level,Math.floor(100*Math.pow(1.5,E-1)));var E;const _=k.experience/N*100,C=e=>{e&&e.preventDefault(),d(!1)},T=e=>{e&&e.preventDefault(),d(!1)},j=e=>{p(h===e?null:e)},I=(e,t)=>{if(!k.playerStatus.job||!k.playerStatus.job.category)return;const n=k.playerStatus.job.category;y({skill:n.charAt(0).toUpperCase()+n.slice(1),x:e,y:t}),setTimeout((()=>{y(null)}),600)},P=(e,t)=>{const n=document.createElement("div");n.innerText="+$0.01",n.className="penny-gain-indicator",n.style.left=`${e}px`,n.style.top=`${t}px`,document.body.appendChild(n),setTimeout((()=>{n.style.transform="translateY(-50px)",n.style.opacity="0"}),50),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n)}),1e3)};return(0,Wh.jsxs)("div",{className:"clicker-container",children:[(0,Wh.jsxs)("div",{className:"player-info-section",children:[(0,Wh.jsxs)("div",{className:"player-name-level",children:[(0,Wh.jsx)("h2",{children:k.playerStatus.name||"Player"}),(0,Wh.jsxs)("div",{className:"player-level",children:[(0,Wh.jsxs)("span",{className:"level-badge level-beginner",children:["Level ",k.level]}),(0,Wh.jsx)("div",{className:"xp-bar",children:(0,Wh.jsx)("div",{className:"xp-progress",style:{width:`${_}%`}})})]})]}),(0,Wh.jsx)("div",{className:"job-info-panel",children:k.playerStatus.job?(0,Wh.jsxs)(Wh.Fragment,{children:[(0,Wh.jsxs)("div",{className:"job-header",children:[(0,Wh.jsxs)("div",{className:"job-title-container",children:[(0,Wh.jsxs)("div",{className:"job-title",children:[k.playerStatus.job.title,k.playerStatus.job.readyForPromotion&&(0,Wh.jsx)("span",{className:"badge badge-primary badge-promotion",children:"Ready for Promotion!"})]}),(0,Wh.jsxs)("div",{className:"job-pay",children:["$",(k.playerStatus.job.hourlyPay||60*k.playerStatus.job.payPerClick).toFixed(2),"/hr | $",a.toFixed(2),"/click"]})]}),(0,Wh.jsx)("div",{className:"job-icon",children:k.playerStatus.job.image||((e,t)=>{const n={technology:"\ud83d\udcbb",technical:"\ud83d\udda5\ufe0f",finance:"\ud83d\udcb0",financial:"\ud83d\udcb9",healthcare:"\ud83c\udfe5",education:"\ud83c\udf93",retail:"\ud83d\uded2",hospitality:"\ud83c\udfe8",service:"\ud83d\udece\ufe0f",sales:"\ud83c\udff7\ufe0f",legal:"\u2696\ufe0f",construction:"\ud83d\udd28",creative:"\ud83c\udfa8",marketing:"\ud83d\udce2",entertainment:"\ud83c\udfac",science:"\ud83d\udd2c",management:"\ud83d\udccb",food:"\ud83c\udf73"};return t&&n[t]?n[t]:{owner:"\ud83d\udc51",executive:"\ud83c\udf1f",senior:"\ud83d\udcca",mid:"\ud83d\udccb",entry:"\ud83d\udd30"}[e]||"\ud83d\udd30"})((A=k.playerStatus.job,A?A.category:null),k.playerStatus.job.category)})]}),(0,Wh.jsxs)("div",{className:"job-level-progress",children:[(0,Wh.jsxs)("div",{className:"level-display",children:[(0,Wh.jsxs)("span",{className:"level-badge level-beginner",children:["Level ",k.playerStatus.job.level]}),k.playerStatus.job.level<500&&(0,Wh.jsx)("span",{className:"next-job-level",children:k.playerStatus.job.readyForPromotion?(0,Wh.jsx)("span",{className:"badge badge-primary badge-promotion",children:"Ready for Promotion!"}):`Level ${k.playerStatus.job.level+1}`})]}),(0,Wh.jsx)("div",{className:"level-progress-bar",children:(0,Wh.jsx)("div",{className:"level-progress-filled "+(k.playerStatus.job.readyForPromotion?"promotion-ready":""),style:{width:`${Math.min(100,k.playerStatus.jobExperience/n(k.playerStatus.job.level)*100)}%`}})}),(0,Wh.jsxs)("div",{className:"level-experience-text",children:[k.playerStatus.job.readyForPromotion?(0,Wh.jsx)("span",{className:"promotion-ready-text",children:"Check Jobs tab to apply for promotion!"}):(0,Wh.jsxs)("span",{children:["XP: ",Math.round(k.playerStatus.jobExperience)," / ",n(k.playerStatus.job.level)]}),!k.playerStatus.job.readyForPromotion&&k.playerStatus.job.level<500&&(0,Wh.jsxs)("span",{children:["Next promotion at level ",10*Math.ceil(k.playerStatus.job.level/10)]})]})]})]}):(0,Wh.jsx)("div",{className:"no-job",children:"No job yet! Visit the Jobs tab to apply."})}),(0,Wh.jsxs)("div",{className:"business-stats",children:[(0,Wh.jsxs)("div",{className:"stat-box",children:[(0,Wh.jsx)("div",{className:"stat-label",children:"Businesses"}),(0,Wh.jsx)("div",{className:"stat-value",children:(()=>{let e=0;return k.assets&&(e+=k.assets.filter((e=>"business"===e.type)).length),k.playerStatus.business&&(e+=1),e})()})]}),(0,Wh.jsxs)("div",{className:"stat-box",children:[(0,Wh.jsx)("div",{className:"stat-label",children:"Passive Income"}),(0,Wh.jsxs)("div",{className:"stat-value",children:["$",(60*i).toFixed(2),"/min"]})]}),(0,Wh.jsxs)("div",{className:"stat-box",children:[(0,Wh.jsx)("div",{className:"stat-label",children:"Ascension"}),(0,Wh.jsx)("div",{className:"stat-value",children:k.generation})]})]}),(0,Wh.jsx)("div",{className:"money-display",children:(0,Wh.jsxs)("span",{className:"money-value",children:["$",k.money.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})})]}),(0,Wh.jsxs)("div",{className:"tap-pad-section",children:[(0,Wh.jsxs)("div",{className:"boost-icons-column",ref:m,children:[k.playerStatus.transportation&&(0,Wh.jsxs)("div",{className:"boost-icon-wrapper "+("transportation"===h?"tooltip-active":""),onClick:()=>j("transportation"),children:[(0,Wh.jsxs)("div",{className:"boost-icon transportation-boost",children:[(0,Wh.jsx)("span",{children:k.playerStatus.transportation.image}),(0,Wh.jsxs)("span",{className:"boost-text",children:[x(k.playerStatus),"x"]})]}),(0,Wh.jsxs)("div",{className:"boost-tooltip",children:[(0,Wh.jsx)("h4",{children:"Transportation Boost"}),(0,Wh.jsxs)("p",{children:["Your ",k.playerStatus.transportation.name," allows you to work ",x(k.playerStatus)," clicks/sec when holding down."]}),(0,Wh.jsx)("button",{className:"tooltip-close",onClick:e=>{e.stopPropagation(),p(null)},children:"\u2715"})]})]}),k.level>1&&(0,Wh.jsxs)("div",{className:"boost-icon-wrapper "+("level"===h?"tooltip-active":""),onClick:()=>j("level"),children:[(0,Wh.jsxs)("div",{className:"boost-icon level-boost",children:[(0,Wh.jsx)("span",{children:"\u2b50"}),(0,Wh.jsxs)("span",{className:"boost-text",children:["+",k.level-1,"%"]})]}),(0,Wh.jsxs)("div",{className:"boost-tooltip",children:[(0,Wh.jsx)("h4",{children:"Level Bonus"}),(0,Wh.jsxs)("p",{children:["+",k.level-1,"% to all passive income"]}),(0,Wh.jsx)("button",{className:"tooltip-close",onClick:e=>{e.stopPropagation(),p(null)},children:"\u2715"})]})]}),k.playerStatus.ascensionBonus>0&&(0,Wh.jsxs)("div",{className:"boost-icon-wrapper "+("ascension"===h?"tooltip-active":""),onClick:()=>j("ascension"),children:[(0,Wh.jsxs)("div",{className:"boost-icon ascension-boost",children:[(0,Wh.jsx)("span",{children:"\ud83d\udd04"}),(0,Wh.jsxs)("span",{className:"boost-text",children:["+",k.playerStatus.ascensionBonus,"%"]})]}),(0,Wh.jsxs)("div",{className:"boost-tooltip",children:[(0,Wh.jsx)("h4",{children:"Ascension Bonus"}),(0,Wh.jsxs)("p",{children:["+",k.playerStatus.ascensionBonus,"% to all passive income"]}),(0,Wh.jsx)("button",{className:"tooltip-close",onClick:e=>{e.stopPropagation(),p(null)},children:"\u2715"})]})]})]}),(0,Wh.jsxs)("div",{className:"tap-pad "+(S(k.playerStatus)?"":"no-auto-click"),onClick:e=>{},onMouseDown:e=>{e.preventDefault(),t({type:"CLICK"}),k.playerStatus.job&&k.playerStatus.job.category?I(e.clientX,e.clientY-20):P(e.clientX,e.clientY-20),S(k.playerStatus)&&d(!0)},onMouseUp:C,onMouseLeave:C,onTouchStart:e=>{(e.currentTarget===e.target||e.currentTarget.contains(e.target))&&e.preventDefault(),t({type:"CLICK"}),S(k.playerStatus)&&d(!0)},onTouchEnd:T,onTouchCancel:T,role:"button","aria-label":"Work button",children:[!S(k.playerStatus)&&(0,Wh.jsx)("div",{className:"auto-click-info",children:(0,Wh.jsx)("span",{children:"\ud83d\udeb2 Buy transportation to enable auto-clicking"})}),(0,Wh.jsxs)("div",{className:"tap-pad-content",children:[(0,Wh.jsx)("div",{className:"tap-icon",children:"\ud83d\udcbc"}),(0,Wh.jsx)("div",{className:"tap-text",children:"Tap to work"}),(0,Wh.jsxs)("div",{className:"tap-value",children:["+$",a.toFixed(2)]})]})]})]}),l&&(0,Wh.jsxs)("div",{className:"ascension-prompt",children:[(0,Wh.jsx)("h3",{children:"Ascension Available!"}),(0,Wh.jsxs)("p",{children:["You've reached level ",k.level,", which is an ascension milestone!"]}),(0,Wh.jsx)("p",{children:"Ascending will add 1 year to your age and grant a permanent 5% income bonus."}),(0,Wh.jsxs)("div",{className:"ascension-buttons",children:[(0,Wh.jsx)("button",{className:"ascend-button",onClick:()=>{t({type:"ASCEND"}),c(!1)},children:"Ascend"}),(0,Wh.jsx)("button",{className:"decline-button",onClick:()=>{c(!1)},children:"Continue Playing"})]})]}),k.level>=100&&(0,Wh.jsx)(lp,{}),g&&(0,Wh.jsxs)("div",{className:"skill-gain-indicator",style:{left:`${g.x}px`,top:`${g.y}px`},children:["+",g.skill]}),v&&(0,Wh.jsxs)("div",{className:"promotion-notification",onClick:()=>{b(!1)},children:[(0,Wh.jsx)("div",{className:"promotion-notification-icon",children:"\ud83c\udf89"}),(0,Wh.jsxs)("div",{className:"promotion-notification-content",children:[(0,Wh.jsx)("h4",{children:"Ready for Promotion!"}),(0,Wh.jsxs)("p",{children:["You've reached level ",k.playerStatus.job.level," and can apply for a promotion in the Jobs tab"]})]}),(0,Wh.jsx)("button",{className:"promotion-notification-dismiss",children:"\xd7"})]})]});var A},up={management:["management","leadership","communication"],technical:["technical","education"],financial:["financial","business"],healthcare:["healthcare","education"],legal:["legal","ethics","communication"],food:["food","creativity","communication"]},dp={poor:[{id:"fastfood",title:"Fast Food Worker",hourlyPay:15,payPerClick:.25,category:"food",description:"Flipping burgers for minimum wage",requirements:{food:1}},{id:"retail",title:"Retail Associate",hourlyPay:16.2,payPerClick:16.2/60,category:"sales",description:"Helping customers and stocking shelves",requirements:{communication:1}},{id:"delivery",title:"Delivery Driver",hourlyPay:19.8,payPerClick:.33,category:"service",description:"Delivering packages around town",requirements:{management:1}}],rich:[{id:"intern",title:"Corporate Intern",hourlyPay:19.8,payPerClick:.33,category:"management",description:"Getting coffee and making copies",requirements:{management:1}},{id:"assistant",title:"Executive Assistant",hourlyPay:25.2,payPerClick:.42,category:"management",description:"Managing schedules and emails",requirements:{communication:1}},{id:"sales",title:"Junior Sales Rep",hourlyPay:30,payPerClick:.5,category:"sales",description:"Making cold calls and following up leads",requirements:{business:1}}]},hp=[{id:"manager",title:"Shift Manager",hourlyPay:40.2,payPerClick:.67,category:"management",description:"Managing a team of workers",requirements:{management:2}},{id:"technician",title:"IT Technician",hourlyPay:45,payPerClick:.75,category:"technical",description:"Troubleshooting tech issues",requirements:{technical:2}},{id:"accountant",title:"Junior Accountant",hourlyPay:49.8,payPerClick:.83,category:"financial",description:"Balancing the books",requirements:{financial:2}},{id:"teacher",title:"Teaching Assistant",hourlyPay:34.8,payPerClick:.58,category:"education",description:"Helping to educate the next generation",requirements:{education:2}},{id:"nurse",title:"Nursing Assistant",hourlyPay:42.6,payPerClick:42.6/60,category:"healthcare",description:"Helping patients in healthcare facilities",requirements:{healthcare:2}},{id:"chef",title:"Line Cook",hourlyPay:36,payPerClick:.6,category:"food",description:"Preparing meals in a restaurant kitchen",requirements:{food:2}}],pp=[{id:"director",title:"Department Director",hourlyPay:109.8,payPerClick:109.8/60,category:"management",description:"Leading an entire department",requirements:{management:4,leadership:2}},{id:"developer",title:"Senior Developer",hourlyPay:120,payPerClick:2,category:"technical",description:"Building complex software systems",requirements:{technical:4,education:1}},{id:"financial_advisor",title:"Financial Advisor",hourlyPay:100.2,payPerClick:100.2/60,category:"financial",description:"Advising clients on financial matters",requirements:{financial:4,business:1}},{id:"physician",title:"Physician",hourlyPay:229.8,payPerClick:3.83,category:"healthcare",description:"Diagnosing and treating patients",requirements:{healthcare:5,education:2}},{id:"lawyer",title:"Attorney",hourlyPay:199.8,payPerClick:3.33,category:"legal",description:"Providing legal counsel",requirements:{legal:5,communication:3}},{id:"stockbroker",title:"Stock Broker",hourlyPay:160.2,payPerClick:2.67,category:"financial",description:"Trading stocks and securities for clients",requirements:{financial:3,management:2}},{id:"product_manager",title:"Product Manager",hourlyPay:150,payPerClick:2.5,category:"management",description:"Overseeing product development and launches",requirements:{management:3,technical:2}},{id:"executive_chef",title:"Executive Chef",hourlyPay:105,payPerClick:1.75,category:"food",description:"Running restaurant kitchens and creating menus",requirements:{food:4,management:2}}],fp=[{id:"ceo",title:"CEO",hourlyPay:499.8,payPerClick:8.33,category:"management",description:"Chief Executive Officer running an entire company",requirements:{management:8,leadership:6,business:5}},{id:"cto",title:"CTO",hourlyPay:424.8,payPerClick:7.08,category:"technical",description:"Chief Technology Officer overseeing all tech operations",requirements:{technical:8,leadership:4}},{id:"cfo",title:"CFO",hourlyPay:450,payPerClick:7.5,category:"financial",description:"Chief Financial Officer managing company finances",requirements:{financial:8,management:3}},{id:"surgeon",title:"Neurosurgeon",hourlyPay:649.8,payPerClick:10.83,category:"healthcare",description:"Performing complex brain surgeries",requirements:{healthcare:10,education:6}},{id:"judge",title:"Federal Judge",hourlyPay:400.2,payPerClick:6.67,category:"legal",description:"Presiding over important federal cases",requirements:{legal:10,ethics:5}},{id:"investment_banker",title:"Investment Banker",hourlyPay:529.8,payPerClick:8.83,category:"financial",description:"Managing high-profile financial transactions and mergers",requirements:{financial:7,management:5}},{id:"tech_entrepreneur",title:"Tech Entrepreneur",hourlyPay:450,payPerClick:7.5,category:"technical",description:"Founding and leading innovative tech companies",requirements:{technical:6,leadership:4,business:5}},{id:"hedge_fund_manager",title:"Hedge Fund Manager",hourlyPay:850.2,payPerClick:14.17,category:"financial",description:"Managing a portfolio of high-risk, high-reward investments",requirements:{financial:8,business:6}},{id:"celebrity_chef",title:"Celebrity Chef",hourlyPay:300,payPerClick:5,category:"food",description:"Running multiple restaurants and media enterprises",requirements:{food:8,communication:5,business:4}}],mp=[{id:"company_chairman",title:"Company Chairman",hourlyPay:1999.8,payPerClick:33.33,category:"management",description:"Chairman of the Board with controlling interest in multiple corporations",requirements:{management:10,leadership:8,business:7,ethics:3}},{id:"tech_mogul",title:"Tech Mogul",hourlyPay:2500.2,payPerClick:2500.2/60,category:"technical",description:"Owner of multiple technology companies and venture capital funds",requirements:{technical:10,business:8,leadership:6,education:4}},{id:"finance_tycoon",title:"Finance Tycoon",hourlyPay:3499.8,payPerClick:3499.8/60,category:"financial",description:"Controlling shareholder in major financial institutions and investment firms",requirements:{financial:10,business:8,ethics:4,management:6}},{id:"hospital_owner",title:"Healthcare Magnate",hourlyPay:2500.2,payPerClick:2500.2/60,category:"healthcare",description:"Owner of a network of hospitals and medical research facilities",requirements:{healthcare:12,education:8,management:6,ethics:5}},{id:"law_firm_founder",title:"Law Firm Founder",hourlyPay:3e3,payPerClick:50,category:"legal",description:"Founding partner of a prestigious international law firm",requirements:{legal:12,ethics:8,communication:6,business:5}},{id:"restaurant_mogul",title:"Restaurant Mogul",hourlyPay:1999.8,payPerClick:33.33,category:"food",description:"Owner of a global restaurant empire and food production companies",requirements:{food:10,business:8,creativity:6,management:7}}],gp=[{id:"savings",name:"Savings Account",cost:1e3,income:.05,description:"A basic savings account that generates small interest",image:"\ud83d\udcb0"},{id:"bonds",name:"Government Bonds",cost:5e3,income:.5,description:"Safe government bonds with steady returns",image:"\ud83d\udcdc"},{id:"stocks",name:"Stock Portfolio",cost:1e4,income:2,description:"Invest in the stock market",image:"\ud83d\udcc8"},{id:"crypto",name:"Cryptocurrency",cost:2e4,income:8,description:"High risk, high reward digital assets",image:"\u20bf"},{id:"realestate",name:"Rental Property",cost:15e4,income:25,description:"Generate income from tenants",image:"\ud83c\udfe2"},{id:"commercial",name:"Commercial Property",cost:5e5,income:80,description:"Prime commercial real estate with long-term leases",image:"\ud83c\udfec"},{id:"reit",name:"Real Estate Fund",cost:1e6,income:150,description:"A diversified real estate investment trust",image:"\ud83c\udfd7\ufe0f"},{id:"hedge",name:"Hedge Fund",cost:5e6,income:500,description:"Exclusive high-return investment vehicle",image:"\ud83d\udcb9"},{id:"venture",name:"Venture Capital Fund",cost:1e7,income:1200,description:"Invest in promising startups",image:"\ud83d\ude80"},{id:"island",name:"Private Island",cost:5e7,income:5e3,description:"Your own luxury paradise that generates tourism revenue",image:"\ud83c\udfdd\ufe0f"}],yp=[{id:"cafe",name:"Coffee Shop",baseCost:5e4,baseIncome:15,image:"\u2615",description:"A cozy spot for coffee lovers",upgrades:[{level:1,name:"Better Equipment",cost:2e4,incomeMultiplier:.3},{level:2,name:"Expanded Menu",cost:5e4,incomeMultiplier:.5},{level:3,name:"Second Location",cost:15e4,incomeMultiplier:1}]},{id:"store",name:"Convenience Store",baseCost:75e3,baseIncome:20,image:"\ud83c\udfea",description:"A local store selling everyday necessities",upgrades:[{level:1,name:"More Inventory",cost:3e4,incomeMultiplier:.4},{level:2,name:"Self-Checkout",cost:7e4,incomeMultiplier:.6},{level:3,name:"Expand to Supermarket",cost:2e5,incomeMultiplier:1.2}]},{id:"tech",name:"Tech Startup",baseCost:2e5,baseIncome:40,image:"\ud83d\udcbb",description:"A small company developing innovative software",upgrades:[{level:1,name:"Cloud Infrastructure",cost:5e4,incomeMultiplier:.5},{level:2,name:"Marketing Campaign",cost:1e5,incomeMultiplier:.8},{level:3,name:"Venture Capital",cost:3e5,incomeMultiplier:1.5}]},{id:"restaurant",name:"Restaurant",baseCost:25e4,baseIncome:50,image:"\ud83c\udf7d\ufe0f",description:"A mid-sized restaurant serving delicious food",upgrades:[{level:1,name:"Chef Upgrade",cost:8e4,incomeMultiplier:.6},{level:2,name:"Expanded Dining",cost:15e4,incomeMultiplier:.9},{level:3,name:"Franchise License",cost:4e5,incomeMultiplier:2}]},{id:"factory",name:"Small Factory",baseCost:1e6,baseIncome:200,image:"\ud83c\udfed",description:"A manufacturing facility producing goods",upgrades:[{level:1,name:"Automation",cost:25e4,incomeMultiplier:.7},{level:2,name:"Supply Chain Optimization",cost:5e5,incomeMultiplier:1},{level:3,name:"International Expansion",cost:15e5,incomeMultiplier:2.5}]},{id:"airline",name:"Regional Airline",baseCost:5e6,baseIncome:800,image:"\u2708\ufe0f",description:"A small airline operating regional flights",upgrades:[{level:1,name:"Fleet Expansion",cost:1e6,incomeMultiplier:.8},{level:2,name:"International Routes",cost:3e6,incomeMultiplier:1.2},{level:3,name:"Premium Service",cost:8e6,incomeMultiplier:2}]},{id:"tech_giant",name:"Tech Corporation",baseCost:1e7,baseIncome:1500,image:"\ud83d\udda5\ufe0f",description:"A large technology corporation with multiple product lines",upgrades:[{level:1,name:"R&D Department",cost:2e6,incomeMultiplier:.9},{level:2,name:"Global Expansion",cost:5e6,incomeMultiplier:1.5},{level:3,name:"Acquire Competitors",cost:15e6,incomeMultiplier:3}]},{id:"media",name:"Media Conglomerate",baseCost:25e6,baseIncome:3e3,image:"\ud83d\udcfa",description:"A massive media company owning TV networks, film studios, and streaming platforms",upgrades:[{level:1,name:"Streaming Platform",cost:5e6,incomeMultiplier:1},{level:2,name:"Original Content",cost:1e7,incomeMultiplier:1.8},{level:3,name:"Global Media Empire",cost:3e7,incomeMultiplier:3.5}]},{id:"space",name:"Aerospace Company",baseCost:5e7,baseIncome:6e3,image:"\ud83d\ude80",description:"A company developing cutting-edge aerospace technology and space exploration",upgrades:[{level:1,name:"Satellite Network",cost:1e7,incomeMultiplier:1.2},{level:2,name:"Space Tourism",cost:25e6,incomeMultiplier:2},{level:3,name:"Interplanetary Missions",cost:6e7,incomeMultiplier:4}]}],vp=(e,t)=>{const n="poor"===t?.2:0;return e.baseCost*(1-n)},bp=[{id:"online_course",name:"Online Course",cost:500,skill:"technical",value:1,image:"\ud83d\udcbb",description:"Learn programming or IT skills from the comfort of your home",skillMultiplier:{rich:1.5,poor:1}},{id:"management_seminar",name:"Management Seminar",cost:1e3,skill:"management",value:1,image:"\ud83d\udcca",description:"Learn essential management skills in this intensive seminar",skillMultiplier:{rich:1.5,poor:1}},{id:"financial_workshop",name:"Financial Workshop",cost:800,skill:"financial",value:1,image:"\ud83d\udcb9",description:"Learn about investments, accounting, and financial planning",skillMultiplier:{rich:1.5,poor:1}},{id:"communication_course",name:"Communication Workshop",cost:600,skill:"communication",value:1,image:"\ud83d\udde3\ufe0f",description:"Improve your communication and negotiation skills",skillMultiplier:{rich:1.5,poor:1}},{id:"legal_seminar",name:"Legal Basics Seminar",cost:1200,skill:"legal",value:1,image:"\u2696\ufe0f",description:"Learn the fundamentals of business and personal law",skillMultiplier:{rich:1.5,poor:1}},{id:"healthcare_course",name:"Healthcare Fundamentals",cost:1500,skill:"healthcare",value:1,image:"\ud83c\udfe5",description:"Learn basic healthcare and medical knowledge",skillMultiplier:{rich:1.5,poor:1}},{id:"culinary_workshop",name:"Culinary Workshop",cost:700,skill:"food",value:1,image:"\ud83c\udf73",description:"Learn essential cooking techniques and food preparation",skillMultiplier:{rich:1.5,poor:1}},{id:"leadership_retreat",name:"Leadership Retreat",cost:2e3,skill:"leadership",value:1,image:"\ud83d\udc51",description:"Develop your leadership and team-building abilities",skillMultiplier:{rich:1.5,poor:1}},{id:"ethics_course",name:"Ethics Course",cost:900,skill:"ethics",value:1,image:"\ud83e\udde0",description:"Learn about business ethics and moral decision making",skillMultiplier:{rich:1.5,poor:1}},{id:"business_101",name:"Business 101",cost:1200,skill:"business",value:1,image:"\ud83d\udcc8",description:"Learn the basics of running a business",skillMultiplier:{rich:1.5,poor:1}},{id:"creativity_workshop",name:"Creativity Workshop",cost:800,skill:"creativity",value:1,image:"\ud83c\udfa8",description:"Develop your creative thinking and problem-solving skills",skillMultiplier:{rich:1.5,poor:1}},{id:"community_college",name:"Community College",cost:5e3,skill:"education",value:2,image:"\ud83c\udfeb",description:"Get an associate degree or certification in your field of choice",skillMultiplier:{rich:1.5,poor:1}},{id:"university",name:"University",cost:25e3,skill:"education",value:4,image:"\ud83c\udf93",description:"Obtain a bachelor's degree in your field of choice",skillMultiplier:{rich:1.5,poor:1}},{id:"graduate_school",name:"Graduate School",cost:5e4,skill:"education",value:5,image:"\ud83d\udcda",description:"Get an advanced degree for high-level positions",skillMultiplier:{rich:1.5,poor:1}},{id:"executive_mba",name:"Executive MBA",cost:1e5,skill:"business",value:5,image:"\ud83d\udcbc",description:"Prestigious business degree for executives",skillMultiplier:{rich:1.5,poor:1}},{id:"medical_school",name:"Medical School",cost:2e5,skill:"healthcare",value:8,image:"\ud83e\ude7a",description:"Comprehensive medical education",skillMultiplier:{rich:1.5,poor:1}},{id:"law_school",name:"Law School",cost:15e4,skill:"legal",value:8,image:"\u2696\ufe0f",description:"Professional legal education",skillMultiplier:{rich:1.5,poor:1}},{id:"culinary_school",name:"Culinary School",cost:8e4,skill:"food",value:7,image:"\ud83d\udc68\u200d\ud83c\udf73",description:"Professional culinary education and technique training",skillMultiplier:{rich:1.5,poor:1}},{id:"phd_program",name:"PhD Program",cost:12e4,skill:"education",value:8,image:"\ud83c\udf93",description:"The highest level of academic achievement",skillMultiplier:{rich:1.5,poor:1}},{id:"leadership_institute",name:"Leadership Institute",cost:9e4,skill:"leadership",value:6,image:"\ud83d\udc54",description:"Elite training for executive leadership positions",skillMultiplier:{rich:1.5,poor:1}}],xp=[{id:"bicycle",name:"Bicycle",cost:200,image:"\ud83d\udeb2",description:"A basic means of transportation - enables auto-clicking at 1 click/sec",clickSpeedMultiplier:1},{id:"bus_pass",name:"Bus Pass",cost:300,image:"\ud83d\ude8c",description:"Monthly public transportation pass - 1.5 clicks/sec",clickSpeedMultiplier:1.5},{id:"usedcar_basic",name:"Basic Used Car",cost:5e3,image:"\ud83d\ude97",description:"An affordable vehicle - 2 clicks/sec",clickSpeedMultiplier:2},{id:"usedcar_mid",name:"Mid-Range Used Car",cost:15e3,image:"\ud83d\ude99",description:"A reliable used vehicle - 3 clicks/sec",clickSpeedMultiplier:3},{id:"newcar_economy",name:"New Economy Car",cost:3e4,image:"\ud83d\ude98",description:"A brand new basic vehicle - 4 clicks/sec",clickSpeedMultiplier:4},{id:"newcar_luxury",name:"New Luxury Car",cost:8e4,image:"\ud83c\udfce\ufe0f",description:"A premium new vehicle - 5 clicks/sec",clickSpeedMultiplier:5},{id:"luxury_car",name:"High-End Luxury Car",cost:2e5,image:"\ud83c\udfce\ufe0f",description:"A statement of your success - 7 clicks/sec",clickSpeedMultiplier:7},{id:"supercar",name:"Supercar",cost:5e5,image:"\ud83c\udfce\ufe0f",description:"An ultra-high performance vehicle - 10 clicks/sec",clickSpeedMultiplier:10},{id:"hypercar",name:"Hypercar",cost:2e6,image:"\ud83c\udfce\ufe0f",description:"The pinnacle of automotive engineering - 15 clicks/sec",clickSpeedMultiplier:15},{id:"helicopter",name:"Helicopter",cost:5e6,image:"\ud83d\ude81",description:"Beat the traffic with your personal helicopter - 20 clicks/sec",clickSpeedMultiplier:20},{id:"private_jet",name:"Private Jet",cost:2e7,image:"\u2708\ufe0f",description:"Travel anywhere in style and comfort - 30 clicks/sec",clickSpeedMultiplier:30}],wp=[{id:"room",name:"Shared Room",cost:1e3,image:"\ud83d\udecf\ufe0f",description:"A room in a shared apartment"},{id:"studio",name:"Studio Apartment",cost:5e3,image:"\ud83c\udfe2",description:"A small studio apartment"},{id:"apartment",name:"One-Bedroom Apartment",cost:15e3,image:"\ud83c\udfe2",description:"Your own small apartment"},{id:"condo",name:"Condominium",cost:5e4,image:"\ud83c\udfd9\ufe0f",description:"A modern condominium with amenities"},{id:"townhouse",name:"Townhouse",cost:15e4,image:"\ud83c\udfe0",description:"A modest townhouse"},{id:"house",name:"Single Family Home",cost:35e4,image:"\ud83c\udfe0",description:"A nice house in the suburbs"},{id:"luxury_condo",name:"Luxury Condominium",cost:8e5,image:"\ud83c\udfd9\ufe0f",description:"A high-end condo in a prime location"},{id:"luxury_house",name:"Luxury Home",cost:15e5,image:"\ud83c\udfe1",description:"A spacious luxury home"},{id:"mansion",name:"Mansion",cost:5e6,image:"\ud83c\udff0",description:"A luxurious mansion with extensive grounds"},{id:"estate",name:"Private Estate",cost:15e6,image:"\ud83c\udff0",description:"A vast estate with multiple buildings"},{id:"compound",name:"Luxury Compound",cost:5e7,image:"\ud83c\udfef",description:"An exclusive compound with ultimate privacy and security"}],Sp=()=>{var e;const{gameState:t,gameDispatch:n,jobExperienceNeededForLevel:i,getJobTitleForLevel:s}=op(),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[x,w]=(0,r.useState)(!1),[S,k]=(0,r.useState)(Date.now()),[N,E]=(0,r.useState)(!1),_=r.useRef(1),[C,T]=(0,r.useState)({}),[j,I]=(0,r.useState)(30),P=(0,r.useCallback)(((e,t)=>{if(!e||!up[e])return 0;return up[e].reduce(((e,n)=>e+(t[n]||0)),0)}),[]),A=(0,r.useCallback)((e=>e.education&&e.education>=4),[]),D=((0,r.useCallback)((e=>!!(t&&t.playerStatus&&t.playerStatus.job)&&e.category===t.playerStatus.job.category),[t]),(e,t)=>e*(1+.05*t)),R=(e,n)=>!(!t||!t.skills)&&t.skills[e]>=n,M=e=>e.category||"general",O=(e,t)=>{const n={general:"\ud83d\udcbc",labor:"\ud83d\udd28",service:"\ud83d\udece\ufe0f",office:"\ud83d\udda5\ufe0f",creative:"\ud83c\udfa8",technology:"\ud83d\udcbb",finance:"\ud83d\udcb0",healthcare:"\u2695\ufe0f",education:"\ud83c\udf93",management:"\ud83d\udcca",executive:"\ud83d\udc54",owner:"\ud83c\udfe2"};return n[t]||n[e]||"\ud83d\udcbc"},L=()=>{p(!1),n({type:"DISMISS_WORK_EVENT"})},F=(0,r.useCallback)((()=>{var e;if(!t||!t.skills)return[];let n=[];if(n=1!==t.generation&&t.playerStatus.background?"rich"===t.playerStatus.background?[...dp.rich.map((e=>({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})))]:[...dp.poor.map((e=>({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})))]:[...dp.poor.map((e=>({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick}))),...dp.rich.map((e=>({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})))],null!==(e=t.playerStatus.job)&&void 0!==e&&e.readyForPromotion){const e=t.playerStatus.job,r=10*Math.ceil(e.level/10),i=s(e.category,r),a=e.hourlyPay||60*e.payPerClick||300,o={id:`promotion-${Date.now()}`,title:i,category:e.category,hourlyPay:D(a,r),payPerClick:D(a,r)/60,requirements:{[e.category]:.2*e.level},description:`A promotion opportunity at ${i} position. This is the next step in your career path.`,isPromotion:!0,level:r};n.unshift(o)}return hp.forEach((e=>{let r=!0;for(const[n,i]of Object.entries(e.requirements))if(!t.skills[n]||t.skills[n]<i){r=!1;break}if(!r&&e.category){P(e.category,t.skills)>=2&&(r=!0)}r&&n.push({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})})),A(t.skills)&&(pp.forEach((e=>{let r=!0;for(const[n,i]of Object.entries(e.requirements))if(!t.skills[n]||t.skills[n]<i){r=!1;break}if(!r&&Object.keys(e.requirements).length>=2){const n=Object.values(e.requirements).reduce(((e,t)=>e+t),0),i=Object.entries(e.requirements).reduce(((e,n)=>{let[r,i]=n;return e+(t.skills[r]||0)}),0);i>=.75*n&&(r=!0)}r&&n.push({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})})),fp.forEach((e=>{let r=!0;for(const[n,i]of Object.entries(e.requirements))if(!t.skills[n]||t.skills[n]<i){r=!1;break}r&&n.push({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})})),mp.forEach((e=>{let r=!0;for(const[n,i]of Object.entries(e.requirements))if(!t.skills[n]||t.skills[n]<i){r=!1;break}r&&n.push({...e,hourlyPay:e.hourlyPay||60*e.payPerClick,payPerClick:e.hourlyPay?e.hourlyPay/60:e.payPerClick})}))),n}),[t,P,A,s]);if((0,r.useEffect)((()=>{var e;t&&t.playerStatus&&(null!==(e=t.playerStatus.job)&&void 0!==e&&e.readyForPromotion?w(!0):w(!1))}),[t]),(0,r.useEffect)((()=>{if(!t||!t.skills)return;const e=F();o(e)}),[F,t]),(0,r.useEffect)((()=>{if(!t||!t.playerStatus||!t.playerStatus.job)return;const e=t.playerStatus.job.level,n=_.current;e>n&&(b({oldLevel:n,newLevel:e,job:t.playerStatus.job.title}),y(!0),setTimeout((()=>{y(!1)}),5e3)),_.current=e}),[t]),(0,r.useEffect)((()=>{if(!t)return;const e=setInterval((()=>{I((e=>{if(e<=1){const e=F();return o(e),k(Date.now()),E(!0),setTimeout((()=>{E(!1)}),500),30}return e-1})),T((e=>{const t=Date.now(),n=Object.keys(e).filter((n=>e[n]<t));if(n.length>0){const t={...e};return n.forEach((e=>{delete t[e]})),t}return e}))}),1e3);return()=>clearInterval(e)}),[t,F]),!t||!t.skills)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const U=t,V=e=>{var r;if(C[e.id])return;if(l)return;c(e);const i=(e=>{if(!t||!t.skills)return{qualified:!1,percentQualified:0,missingSkills:[]};const n=[];let r=0,i=0;for(const[s,a]of Object.entries(e.requirements||{}))r+=a,i+=Math.min(t.skills[s]||0,a),(!t.skills[s]||t.skills[s]<a)&&n.push(s);return{qualified:0===n.length,percentQualified:r>0?i/r*100:100,missingSkills:n}})(e),s=i.qualified,a=e.isPromotion;let o=s?.85:i.percentQualified/100*.5;e.level&&e.level>=50&&(o*=.85),a&&null!==(r=U.playerStatus.job)&&void 0!==r&&r.readyForPromotion&&(o=1);const u=Math.random()<=o;setTimeout((()=>{u?a?(n({type:"APPLY_FOR_PROMOTION",payload:{job:e}}),d({success:!0,message:`Congratulations! You've been promoted to ${e.title}!`,job:e})):(n({type:"SET_JOB",payload:{id:e.id,title:e.title,hourlyPay:e.hourlyPay,payPerClick:e.payPerClick,category:e.category,level:e.level||1,image:e.image,baseTitle:e.title}}),d({success:!0,message:`Congratulations! You got the ${e.title} job!`,job:e})):d({success:!1,message:`Sorry, your application for ${e.title} was rejected.${i.missingSkills.length>0?" You need more experience in "+i.missingSkills.join(", ")+".":""}`,job:e});const t=Date.now()+3e4;T((n=>({...n,[e.id]:t}))),c(null)}),2e3)};return(0,Wh.jsxs)("div",{className:"jobs-container",children:[(0,Wh.jsx)("h2",{children:"Jobs & Career"}),(0,Wh.jsx)("div",{className:"jobs-info-panel",children:(0,Wh.jsx)("p",{className:"wage-info-note",children:"Wages shown are hourly rates. Each click represents one minute of work and earns 1/60th of the hourly wage."})}),x&&(null===(e=U.playerStatus.job)||void 0===e?void 0:e.readyForPromotion)&&(0,Wh.jsxs)("div",{className:"promotion-banner",children:[(0,Wh.jsx)("div",{className:"promotion-icon",children:"\ud83c\udf89"}),(0,Wh.jsxs)("div",{className:"promotion-message",children:[(0,Wh.jsx)("h4",{children:"Promotion Available!"}),(0,Wh.jsxs)("p",{children:["You've reached level ",U.playerStatus.job.level," and qualify for a promotion to a higher position."]})]})]}),U.workEvents.pendingEvent&&U.workEvents.notificationVisible&&(0,Wh.jsxs)("div",{className:"work-event-notification",onClick:()=>{t.workEvents.pendingEvent&&p(!0)},children:[(0,Wh.jsx)("div",{className:"notification-icon",children:"!"}),(0,Wh.jsxs)("div",{className:"notification-text",children:["Work event: ",U.workEvents.pendingEvent.title]})]}),g&&v&&(0,Wh.jsxs)("div",{className:"level-up-notification",children:[(0,Wh.jsx)("div",{className:"level-up-icon",children:"\ud83c\udf89"}),(0,Wh.jsxs)("div",{className:"level-up-text",children:[(0,Wh.jsx)("div",{className:"level-up-title",children:"Promotion!"}),(0,Wh.jsxs)("div",{className:"level-up-details",children:["You've been promoted to Level ",v.newLevel,": ",v.title]})]})]}),f&&(0,Wh.jsxs)("div",{className:"skill-gain-animation",style:{left:`${f.x}px`,top:`${f.y}px`},children:[f.skill," ",f.amount]}),h&&U.workEvents.pendingEvent&&(0,Wh.jsx)("div",{className:"modal-overlay",onClick:L,children:(0,Wh.jsxs)("div",{className:"event-modal",onClick:e=>e.stopPropagation(),children:[(0,Wh.jsx)("h3",{children:U.workEvents.pendingEvent.title}),(0,Wh.jsx)("p",{className:"event-description",children:U.workEvents.pendingEvent.description}),(0,Wh.jsx)("div",{className:"event-choices",children:U.workEvents.pendingEvent.choices.map(((e,r)=>(0,Wh.jsx)("button",{className:"event-choice-button",onClick:e=>((e,r)=>{if(r.stopPropagation(),!t.workEvents.pendingEvent)return;t.workEvents.pendingEvent.choices[e],n({type:"RESOLVE_WORK_EVENT",payload:{choiceIndex:e}}),p(!1)})(r,e),children:e.text},r)))}),(0,Wh.jsx)("button",{className:"dismiss-event-button",onClick:L,children:"Ignore this situation"})]})}),U.playerStatus.job&&(0,Wh.jsxs)("div",{className:"current-job-banner",children:[(0,Wh.jsxs)("div",{className:"current-job-header",children:[(0,Wh.jsx)("div",{className:"job-icon",children:U.playerStatus.job.image||O(M(U.playerStatus.job),U.playerStatus.job.category)}),(0,Wh.jsxs)("div",{className:"job-title",children:[(0,Wh.jsxs)("div",{className:"title-level-container",children:[(0,Wh.jsx)("h3",{children:U.playerStatus.job.title}),U.playerStatus.job.level&&(0,Wh.jsxs)("span",{className:"level-badge level-beginner",children:["Level ",U.playerStatus.job.level]})]}),(0,Wh.jsx)("div",{className:"job-category",children:U.playerStatus.job.category&&(0,Wh.jsx)("span",{className:`category-badge category-${U.playerStatus.job.category.toLowerCase()}`,children:U.playerStatus.job.category.charAt(0).toUpperCase()+U.playerStatus.job.category.slice(1)})})]}),(0,Wh.jsxs)("div",{className:"job-pay",children:["$",(U.playerStatus.job.hourlyPay||60*U.playerStatus.job.payPerClick||0).toFixed(2),"/hr"]})]}),(0,Wh.jsxs)("p",{children:["Each click earns $",(U.playerStatus.job.payPerClick||0).toFixed(2)," (representing one minute of work)"]}),(0,Wh.jsxs)("div",{className:"job-level-progress",children:[(0,Wh.jsxs)("div",{className:"level-display",children:[(0,Wh.jsxs)("span",{className:"current-job-level",children:["Level ",U.playerStatus.job.level]}),U.playerStatus.job.level<500&&(0,Wh.jsxs)("span",{className:"next-job-level",children:["Level ",U.playerStatus.job.level+1]})]}),(0,Wh.jsx)("div",{className:"level-progress-bar",children:(0,Wh.jsx)("div",{className:"level-progress-filled",style:{width:U.playerStatus.jobExperience/i(U.playerStatus.job.level)*100+"%"}})}),(0,Wh.jsxs)("div",{className:"level-experience-text",children:[(0,Wh.jsxs)("span",{children:["XP: ",Math.round(U.playerStatus.jobExperience)," / ",i(U.playerStatus.job.level)]}),U.playerStatus.job.level<500&&(0,Wh.jsxs)("span",{children:["Next promotion at level ",10*Math.ceil(U.playerStatus.job.level/10)]})]})]})]}),U.playerStatus.job&&"management"===U.playerStatus.job.category&&(0,Wh.jsxs)("div",{className:"management-progression",children:[(0,Wh.jsx)("h4",{children:"Management Class Progression"}),(0,Wh.jsxs)("div",{className:"progression-info",children:[(0,Wh.jsxs)("div",{className:"current-level",children:[(0,Wh.jsxs)("span",{className:"level-number",children:["Level ",U.playerStatus.job.level]}),(0,Wh.jsx)("span",{className:"class-title",children:U.playerStatus.job.title})]}),U.playerStatus.job.level<300&&(0,Wh.jsxs)("div",{className:"next-promotion",children:[(0,Wh.jsx)("div",{className:"promotion-bar",children:(0,Wh.jsx)("div",{className:"promotion-progress",style:{width:U.playerStatus.jobExperience/i(U.playerStatus.job.level)*100+"%"}})}),(0,Wh.jsxs)("div",{className:"promotion-info",children:[(0,Wh.jsxs)("span",{className:"next-level",children:["Level ",U.playerStatus.job.level+10]}),(0,Wh.jsx)("span",{className:"next-title",children:(()=>{const e=U.playerStatus.job.level+10;return s("management",e)})()})]})]})]}),(0,Wh.jsxs)("div",{className:"management-tiers",children:[(0,Wh.jsxs)("div",{className:"tier "+(U.playerStatus.job.level<=100?"current":"completed"),children:[(0,Wh.jsx)("h5",{children:"Entry Level (1-100)"}),(0,Wh.jsx)("p",{children:"Progress from Associate to Junior Supervisor"})]}),(0,Wh.jsxs)("div",{className:"tier "+(U.playerStatus.job.level>100&&U.playerStatus.job.level<=200?"current":U.playerStatus.job.level>200?"completed":""),children:[(0,Wh.jsx)("h5",{children:"Tier 1: Mid-Management (101-200)"}),(0,Wh.jsx)("p",{children:"Progress from Supervisor to Regional Manager"}),U.playerStatus.job.level<=100&&!A(U.skills)&&(0,Wh.jsx)("div",{className:"tier-requirement",children:(0,Wh.jsx)("span",{children:"Requires Bachelor's Degree"})})]}),(0,Wh.jsxs)("div",{className:"tier "+(U.playerStatus.job.level>200&&U.playerStatus.job.level<=400?"current":U.playerStatus.job.level>400?"completed":""),children:[(0,Wh.jsx)("h5",{children:"Tier 2: Upper Management (201-400)"}),(0,Wh.jsx)("p",{children:"Progress from Director to Managing Partner"}),U.playerStatus.job.level<=200&&!A(U.skills)&&(0,Wh.jsx)("div",{className:"tier-requirement",children:(0,Wh.jsx)("span",{children:"Requires Master's Degree"})})]}),(0,Wh.jsxs)("div",{className:"tier "+(U.playerStatus.job.level>400?"current":""),children:[(0,Wh.jsx)("h5",{children:"Tier 3: Corporate Elite (401-500)"}),(0,Wh.jsx)("p",{children:"Progress from Entrepreneur to Tycoon"}),U.playerStatus.job.level<=400&&(0,Wh.jsx)("div",{className:"tier-requirement",children:(0,Wh.jsx)("span",{children:"Requires Exceptional Performance"})})]})]})]}),(0,Wh.jsxs)("div",{className:"section-header",children:[(0,Wh.jsx)("h3",{children:"Available Jobs"}),(0,Wh.jsx)("div",{className:"job-refresh-indicator",onClick:()=>{if(N)return;E(!0);const e=F();o(e),k(Date.now()),I(30),setTimeout((()=>{E(!1)}),500)},style:{cursor:"pointer"},children:N?(0,Wh.jsx)("span",{className:"refresh-icon",children:"\u27f3"}):(0,Wh.jsxs)("span",{children:["Refreshing in ",(0,Wh.jsx)("span",{className:"refresh-timer",children:j}),"s"]})})]}),(0,Wh.jsx)("div",{className:"job-listings "+(N?"refreshing-jobs":""),children:a.length>0?a.map(((e,t)=>{const n=l===e.id,r=u&&u.jobId===e.id?u:null;return(0,Wh.jsxs)("div",{className:`job-listing ${n?"pending":""} ${e.isPromotion?"promotion-job":""}`,children:[e.isPromotion&&(0,Wh.jsx)("div",{className:"level-badge level-promotion",children:"PROMOTION"}),(0,Wh.jsxs)("div",{className:"job-header",children:[(0,Wh.jsx)("div",{className:"job-icon",children:O(M(e),e.category)}),(0,Wh.jsxs)("div",{className:"job-title",children:[(0,Wh.jsxs)("div",{className:"title-level-container",children:[(0,Wh.jsx)("h3",{children:e.title}),e.level&&(0,Wh.jsxs)("span",{className:"level-badge "+(e.isPromotion?"level-promotion":"level-beginner"),children:["Level ",e.level]})]}),(0,Wh.jsx)("div",{className:"job-category",children:e.category&&(0,Wh.jsx)("span",{className:`category-badge category-${e.category.toLowerCase()}`,children:e.category.charAt(0).toUpperCase()+e.category.slice(1)})})]}),(0,Wh.jsxs)("div",{className:"job-pay",children:["$",(e.hourlyPay||60*e.payPerClick||0).toFixed(2),"/hr"]})]}),(0,Wh.jsx)("div",{className:"job-description",children:e.description}),(0,Wh.jsx)("div",{className:"job-requirements",children:e.isPromotion?(0,Wh.jsx)("div",{className:"promotion-requirements",children:(0,Wh.jsx)("p",{children:"This promotion is available because you've reached the next milestone in your current career path."})}):(0,Wh.jsx)("ul",{children:Object.entries(e.requirements||{}).map((e=>{let[t,n]=e;return(0,Wh.jsxs)("li",{className:R(t,n)?"met":"not-met",children:[t,": ",Math.round(n)," ",R(t,n)?"\u2713":"\u2717"]},t)}))})}),r&&(0,Wh.jsx)("div",{className:"application-result "+(r.success?"success":"failure"),children:r.message}),(0,Wh.jsx)("div",{className:"job-action-buttons",children:n?(0,Wh.jsx)(Wh.Fragment,{children:(0,Wh.jsxs)("div",{className:"application-pending",children:[(0,Wh.jsx)("div",{className:"loading-bar"}),(0,Wh.jsx)("div",{className:"pending-text",children:"Application in progress..."}),(0,Wh.jsx)("button",{className:"cancel-application-button",onClick:t=>{var n;t.stopPropagation(),n=e.id,l===n&&c(null)},children:"Cancel Application"})]})}):(0,Wh.jsx)("button",{className:"apply-job-button",onClick:t=>{t.stopPropagation(),(e=>{l||V(e)})(e)},disabled:null!==l,children:e.isPromotion?"Apply for Promotion":"Apply for Job"})})]},e.id||t)})):(0,Wh.jsx)("p",{children:"No jobs available."})})]})},kp=()=>{const{gameState:e,gameDispatch:t}=op(),[n,i]=(0,r.useState)("assets"),[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=(0,r.useRef)(null),d=(0,r.useRef)(null),[h,p]=(0,r.useState)({}),[f,m]=(0,r.useState)({}),[g,y]=(0,r.useState)("priceAsc"),[v,b]=(0,r.useState)(!1),[x,w]=(0,r.useState)({minPrice:0,maxPrice:1e9,minBeds:0,propertyTypes:[]});if((0,r.useEffect)((()=>()=>{c.current&&clearTimeout(c.current),d.current&&clearTimeout(d.current)}),[]),!e||!e.playerStatus)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const S=e,{money:k}=S,N=e=>{i(e)},E=(e,t)=>{d.current&&(clearTimeout(d.current),d.current=null),a({item:e,type:t})},_=()=>{a(null)},C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.stopPropagation(),n?(n.includes("bicycle")||n.includes("bus")||n.includes("car")||n.includes("helicopter")||n.includes("jet")?(e=>{m({...f,[e]:!0}),setTimeout((()=>{m({...f,[e]:!1})}),700)})(n):(e=>{p({...h,[e]:!0}),setTimeout((()=>{p({...h,[e]:!1})}),700)})(n),setTimeout((()=>{t()}),600)):t()},T=(e,t,n)=>{"BUTTON"!==n.target.tagName&&(u.current={item:e,type:t},c.current=setTimeout((()=>{l(!0),E(e,t)}),500))},j=e=>{c.current&&(clearTimeout(c.current),c.current=null),o&&(_(),l(!1)),!o&&"BUTTON"!==e.target.tagName&&u.current&&E(u.current.item,u.current.type),u.current=null},I=e=>({room:{icon:"\ud83d\udecf\ufe0f",color:"bg-fuchsia-900"},studio:{icon:"\ud83c\udfe0",color:"bg-teal-900"},apartment:{icon:"\ud83c\udfe2",color:"bg-cyan-900"},condo:{icon:"\ud83c\udfd9\ufe0f",color:"bg-blue-900"},townhouse:{icon:"\ud83c\udfd8\ufe0f",color:"bg-emerald-900"},house:{icon:"\ud83c\udfe1",color:"bg-green-900"},luxury_condo:{icon:"\u26f2",color:"bg-indigo-900"},luxury_house:{icon:"\ud83c\udff0",color:"bg-violet-900"},mansion:{icon:"\ud83c\udfdb\ufe0f",color:"bg-purple-900"},estate:{icon:"\ud83c\udf06",color:"bg-slate-900"},compound:{icon:"\ud83c\udf03",color:"bg-zinc-900"}}[e]||{icon:"\ud83c\udfe0",color:"bg-teal-900"}),P=e=>({bicycle:{icon:"\ud83d\udeb2",color:"bg-teal-900"},bus_pass:{icon:"\ud83d\ude8c",color:"bg-yellow-900"},usedcar_basic:{icon:"\ud83d\ude97",color:"bg-blue-900"},usedcar_mid:{icon:"\ud83d\ude99",color:"bg-sky-900"},newcar_economy:{icon:"\ud83d\ude98",color:"bg-green-900"},newcar_luxury:{icon:"\ud83c\udfce\ufe0f",color:"bg-red-900"},luxury_car:{icon:"\ud83d\ude93",color:"bg-gray-900"},supercar:{icon:"\ud83c\udfce\ufe0f",color:"bg-orange-900"},hypercar:{icon:"\u26a1",color:"bg-amber-900"},helicopter:{icon:"\ud83d\ude81",color:"bg-emerald-900"},private_jet:{icon:"\u2708\ufe0f",color:"bg-blue-900"}}[e]||{icon:"\ud83d\ude97",color:"bg-orange-900"});return(0,Wh.jsxs)("div",{className:"max-w-6xl mx-auto p-2 bg-white rounded-lg shadow-lg",children:[(0,Wh.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,Wh.jsxs)("button",{className:"flex items-center py-3 px-6 font-medium text-lg transition-colors border-b-2 "+("assets"===n?"text-indigo-600 border-indigo-600":"text-gray-500 border-transparent hover:text-indigo-600"),onClick:()=>N("assets"),children:[(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83c\udfe6"}),"Banking"]}),(0,Wh.jsxs)("button",{className:"flex items-center py-3 px-6 font-medium text-lg transition-colors border-b-2 "+("housing"===n?"text-teal-600 border-teal-600":"text-gray-500 border-transparent hover:text-teal-600"),onClick:()=>N("housing"),children:[(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83c\udfe0"}),"Housing"]}),(0,Wh.jsxs)("button",{className:"flex items-center py-3 px-6 font-medium text-lg transition-colors border-b-2 "+("transportation"===n?"text-orange-600 border-orange-600":"text-gray-500 border-transparent hover:text-orange-600"),onClick:()=>N("transportation"),children:[(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83d\ude97"}),"Transportation"]})]}),(0,Wh.jsxs)("div",{children:["assets"===n&&(0,Wh.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[(0,Wh.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-200 pb-4",children:[(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"text-3xl mr-3",children:"\ud83c\udfe6"}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Banking"}),(0,Wh.jsx)("p",{className:"text-gray-500 text-sm",children:"Manage your personal finances"})]})]}),(0,Wh.jsxs)("div",{className:"bg-blue-50 px-4 py-2 rounded-lg",children:[(0,Wh.jsx)("p",{className:"text-sm text-gray-600",children:"Available Funds"}),(0,Wh.jsxs)("p",{className:"text-xl font-bold text-blue-800",children:["$",k.toLocaleString()]})]})]}),(0,Wh.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,Wh.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-700 rounded-xl p-5 text-white shadow-md",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h4",{className:"text-sm font-medium opacity-80",children:"CHECKING ACCOUNT"}),(0,Wh.jsxs)("p",{className:"text-2xl font-bold",children:["$",k.toLocaleString()]})]}),(0,Wh.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb3"})]}),(0,Wh.jsx)("div",{className:"text-sm mb-4 opacity-80",children:"Available for daily transactions"}),(0,Wh.jsx)("div",{className:"mt-auto pt-2 border-t border-white border-opacity-20",children:(0,Wh.jsxs)("p",{className:"text-xs opacity-70",children:["Account Number: **** **** **** ",Math.floor(1e3+9e3*Math.random())]})})]}),(0,Wh.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-xl p-5 text-white shadow-md",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h4",{className:"text-sm font-medium opacity-80",children:"SAVINGS ACCOUNT"}),(0,Wh.jsxs)("p",{className:"text-2xl font-bold",children:["$",S.assets.filter((e=>e.id.includes("savings"))).reduce(((e,t)=>e+t.cost),0).toLocaleString()]})]}),(0,Wh.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"})]}),(0,Wh.jsxs)("div",{className:"text-sm mb-4 opacity-80",children:["Earning ",S.assets.some((e=>e.id.includes("savings")))?"0.5%":"0%"," APY"]}),(0,Wh.jsx)("div",{className:"mt-auto pt-2 border-t border-white border-opacity-20",children:(0,Wh.jsx)("p",{className:"text-xs opacity-70",children:"Grows slowly but steadily"})})]})]}),(0,Wh.jsxs)("div",{className:"mb-8",children:[(0,Wh.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,Wh.jsx)("span",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mr-2 text-xs",children:(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),"Banking Products"]}),(0,Wh.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[gp.filter((e=>"savings"===e.id)).map((e=>{const n=k>=e.cost,r=S.assets.some((t=>t.id.split("-")[0]===e.id));return(0,Wh.jsx)("div",{className:"relative rounded-xl shadow-sm overflow-hidden transition-transform hover:shadow-md hover:scale-102 border "+(r?"bg-green-50 border-green-200":"bg-white border-gray-200"),onClick:()=>E(e,"asset"),onTouchStart:t=>T(e,"asset",t),onTouchEnd:j,onTouchCancel:j,children:(0,Wh.jsxs)("div",{className:"p-4",children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Wh.jsx)("div",{className:"w-10 h-10 rounded-full mr-3 flex items-center justify-center bg-blue-100 text-blue-700",children:(0,Wh.jsx)("span",{className:"text-xl",children:"\ud83d\udcb0"})}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),(0,Wh.jsx)("p",{className:"text-xs text-gray-500",children:"Safe, steady returns"})]})]}),(0,Wh.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,Wh.jsx)("span",{className:"text-xs text-gray-500",children:"Minimum Deposit"}),(0,Wh.jsxs)("span",{className:"text-sm font-medium text-gray-800",children:["$",e.cost.toLocaleString()]})]}),(0,Wh.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,Wh.jsx)("span",{className:"text-xs text-gray-500",children:"Interest Rate"}),(0,Wh.jsx)("span",{className:"text-sm font-medium text-green-600",children:"0.5% APY"})]}),(0,Wh.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Wh.jsx)("span",{className:"text-xs text-gray-500",children:"Per Second"}),(0,Wh.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["$",e.income.toFixed(2),"/sec"]})]})]}),(0,Wh.jsx)("button",{className:"w-full py-2.5 px-4 rounded-lg font-medium transition-colors text-center shadow-sm "+(r?"bg-green-500 text-white cursor-default":n?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),onClick:n=>C(n,(()=>(e=>{S.assets.some((t=>t.id.split("-")[0]===e.id))||t({type:"BUY_ASSET",payload:{...e,id:`${e.id}-${Date.now()}`,purchasedAt:Date.now()}})})(e)),e.id),disabled:!n||r,children:r?"Account Active":n?"Open Account":"Insufficient Funds"})]})},e.id)})),(0,Wh.jsx)("div",{className:"relative rounded-xl shadow-sm overflow-hidden transition-transform hover:shadow-md hover:scale-102 border bg-white border-gray-200",children:(0,Wh.jsxs)("div",{className:"p-4",children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Wh.jsx)("div",{className:"w-10 h-10 rounded-full mr-3 flex items-center justify-center bg-purple-100 text-purple-700",children:(0,Wh.jsx)("span",{className:"text-xl",children:"\ud83d\udcb3"})}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h4",{className:"font-semibold text-gray-800",children:"Work Tap Card"}),(0,Wh.jsx)("p",{className:"text-xs text-gray-500",children:"Customize your work experience"})]})]}),(0,Wh.jsxs)("div",{className:"mb-4",children:[(0,Wh.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl p-4 shadow-sm mb-3 text-white",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-5",children:[(0,Wh.jsx)("div",{className:"text-xs opacity-80",children:"Business Tycoon Bank"}),(0,Wh.jsx)("div",{className:"text-lg",children:"\ud83d\udcb0"})]}),(0,Wh.jsxs)("div",{className:"mb-5",children:[(0,Wh.jsx)("div",{className:"inline-block w-10 h-6 bg-gold bg-opacity-50 rounded mr-1"}),(0,Wh.jsx)("div",{className:"inline-block w-10 h-6 bg-gold bg-opacity-50 rounded mr-1"}),(0,Wh.jsx)("div",{className:"inline-block w-10 h-6 bg-gold bg-opacity-50 rounded mr-1"}),(0,Wh.jsx)("div",{className:"inline-block w-10 h-6 bg-gold bg-opacity-50 rounded"})]}),(0,Wh.jsx)("div",{className:"text-xs mb-1 opacity-80",children:"CARD HOLDER"}),(0,Wh.jsx)("div",{className:"font-medium mb-2",children:"BUSINESS TYCOON"})]}),(0,Wh.jsx)("div",{className:"text-sm text-gray-600 mb-3",children:"Your Work Tap Card allows you to earn money faster in the Work tab. Customize it with different designs and bonuses!"})]}),(0,Wh.jsx)("button",{className:"w-full py-2.5 px-4 rounded-lg font-medium transition-colors text-center shadow-sm bg-purple-600 hover:bg-purple-700 text-white",onClick:()=>E({id:"tap_card",name:"Work Tap Card",description:"Customize your card to enhance your work experience. Different designs give you different bonuses!",image:"\ud83d\udcb3"},"tap_card"),children:"Customize Card"})]})})]})]}),(0,Wh.jsxs)("div",{className:"mt-8",children:[(0,Wh.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,Wh.jsx)("span",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center text-green-600 mr-2 text-xs",children:(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),"Your Banking Products"]}),S.assets.filter((e=>e.id.includes("savings"))).length>0?(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:(0,Wh.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("p",{className:"text-gray-500 text-sm",children:"Total Savings"}),(0,Wh.jsxs)("p",{className:"text-xl font-bold text-gray-800",children:["$",S.assets.filter((e=>e.id.includes("savings"))).reduce(((e,t)=>e+t.cost),0).toLocaleString()]})]}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("p",{className:"text-gray-500 text-sm",children:"Interest Income"}),(0,Wh.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["$",S.assets.filter((e=>e.id.includes("savings"))).reduce(((e,t)=>e+t.income),0).toFixed(2),"/sec"]})]})]})}),(0,Wh.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:S.assets.filter((e=>e.id.includes("savings"))).map((e=>(0,Wh.jsx)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 transition-transform hover:shadow-md hover:scale-102",onClick:()=>E(e,"asset"),onTouchStart:t=>T(e,"asset",t),onTouchEnd:j,onTouchCancel:j,children:(0,Wh.jsxs)("div",{className:"p-4",children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Wh.jsx)("div",{className:"w-10 h-10 rounded-full mr-3 flex items-center justify-center bg-blue-100 text-blue-700",children:(0,Wh.jsx)("span",{className:"text-xl",children:"\ud83d\udcb0"})}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),(0,Wh.jsx)("p",{className:"text-xs text-green-600",children:"Active Account"})]})]}),(0,Wh.jsxs)("div",{className:"rounded-lg p-3 mb-1 bg-gray-50",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Wh.jsx)("span",{className:"text-sm text-gray-500",children:"Balance"}),(0,Wh.jsxs)("span",{className:"text-lg font-semibold text-gray-800",children:["$",e.cost.toLocaleString()]})]}),(0,Wh.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Wh.jsx)("span",{className:"text-sm text-gray-500",children:"Interest"}),(0,Wh.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["$",e.income.toFixed(2),"/sec"]})]})]}),(0,Wh.jsxs)("div",{className:"text-xs text-gray-500 text-right mt-2",children:["Opened: ",new Date(e.purchasedAt).toLocaleDateString()]})]})},e.id)))})]}):(0,Wh.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[(0,Wh.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-3 flex items-center justify-center",children:(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Wh.jsx)("p",{className:"text-gray-600 font-medium",children:"You don't have any banking products yet"}),(0,Wh.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Open a savings account to start earning interest"})]})]})]}),"housing"===n&&(()=>{const e=e=>({room:{beds:"1 Room",baths:"Shared",sqft:"100 sqft"},studio:{beds:"Studio",baths:"1 Bath",sqft:"350 sqft"},apartment:{beds:"2 Bed",baths:"1 Bath",sqft:"750 sqft"},condo:{beds:"2 Bed",baths:"2 Bath",sqft:"1,200 sqft"},townhouse:{beds:"3 Bed",baths:"2.5 Bath",sqft:"1,800 sqft"},house:{beds:"3 Bed",baths:"2 Bath",sqft:"2,500 sqft"},luxury_condo:{beds:"3 Bed",baths:"3 Bath",sqft:"2,800 sqft"},luxury_house:{beds:"4 Bed",baths:"3.5 Bath",sqft:"4,500 sqft"},mansion:{beds:"5 Bed",baths:"4.5 Bath",sqft:"8,500 sqft"},estate:{beds:"6 Bed",baths:"5.5 Bath",sqft:"12,000 sqft"},compound:{beds:"8 Bed",baths:"8 Bath",sqft:"25,000 sqft"}}[e]||{beds:"2 Bed",baths:"2 Bath",sqft:"1,000 sqft"}),n=(r=(e=>{const t=[...e];switch(g){case"priceAsc":return t.sort(((e,t)=>e.cost-t.cost));case"priceDesc":return t.sort(((e,t)=>t.cost-e.cost));case"nameAsc":return t.sort(((e,t)=>e.name.localeCompare(t.name)));case"nameDesc":return t.sort(((e,t)=>t.name.localeCompare(e.name)));default:return t}})(wp),r.filter((t=>{if(t.cost<x.minPrice||t.cost>x.maxPrice)return!1;if(x.propertyTypes.length>0&&!x.propertyTypes.includes(t.id))return!1;const n=e(t.id);let r=1;return n.beds.includes("Bed")&&(r=parseInt(n.beds,10)),!(r<x.minBeds)})));var r;const i=e=>{const{name:t,value:n,type:r,checked:i}=e.target;w("checkbox"===r?i?e=>({...e,propertyTypes:[...e.propertyTypes,t]}):e=>({...e,propertyTypes:e.propertyTypes.filter((e=>e!==t))}):e=>({...e,[t]:"number"===r?Number(n):n}))};return(0,Wh.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,Wh.jsxs)("div",{className:"flex items-center justify-between mb-4 border-b pb-3",children:[(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"text-3xl mr-2",children:"\ud83c\udfe0"}),(0,Wh.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Find Your Next Home"})]}),(0,Wh.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,Wh.jsxs)("button",{className:"bg-gray-100 hover:bg-gray-200 rounded-full px-3 py-1.5 text-gray-700 font-medium transition-colors flex items-center justify-center min-w-[90px] "+("priceAsc"!==g?"bg-gray-200":""),onClick:()=>{const e=["priceAsc","priceDesc","nameAsc","nameDesc"],t=(e.indexOf(g)+1)%e.length;y(e[t])},children:[(0,Wh.jsx)("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),(0,Wh.jsx)("span",{children:(()=>{switch(g){case"priceAsc":return"Price \u2191";case"priceDesc":return"Price \u2193";case"nameAsc":return"A-Z";case"nameDesc":return"Z-A";default:return"Sort"}})()})]}),(0,Wh.jsxs)("button",{className:"bg-gray-100 hover:bg-gray-200 rounded-full px-3 py-1.5 text-gray-700 font-medium transition-colors flex items-center justify-center min-w-[90px] "+(v?"bg-gray-200":""),onClick:()=>b(!v),children:[(0,Wh.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters",(x.propertyTypes.length>0||x.minPrice>0||x.minBeds>0)&&(0,Wh.jsx)("span",{className:"ml-1 bg-teal-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:x.propertyTypes.length+(x.minPrice>0?1:0)+(x.minBeds>0?1:0)})]})]})]}),v&&(0,Wh.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 shadow-sm border border-gray-200 animate-fadeIn",children:[(0,Wh.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200",children:[(0,Wh.jsx)("h4",{className:"font-semibold text-gray-700",children:"Filter Properties"}),(0,Wh.jsxs)("button",{className:"text-sm text-teal-600 hover:text-teal-800 flex items-center",onClick:()=>{w({minPrice:0,maxPrice:1e9,minBeds:0,propertyTypes:[]})},children:[(0,Wh.jsx)("svg",{className:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset All"]})]}),(0,Wh.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Range"}),(0,Wh.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Wh.jsxs)("div",{className:"relative flex-1",children:[(0,Wh.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2 text-gray-500",children:"$"}),(0,Wh.jsx)("input",{type:"number",name:"minPrice",value:x.minPrice,onChange:i,placeholder:"Min",className:"w-full pl-6 p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-teal-500 focus:border-teal-500"})]}),(0,Wh.jsx)("span",{className:"text-gray-400",children:"to"}),(0,Wh.jsxs)("div",{className:"relative flex-1",children:[(0,Wh.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2 text-gray-500",children:"$"}),(0,Wh.jsx)("input",{type:"number",name:"maxPrice",value:x.maxPrice,onChange:i,placeholder:"Max",className:"w-full pl-6 p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-teal-500 focus:border-teal-500"})]})]})]}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Bedrooms"}),(0,Wh.jsxs)("select",{name:"minBeds",value:x.minBeds,onChange:i,className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-teal-500 focus:border-teal-500",children:[(0,Wh.jsx)("option",{value:"0",children:"Any"}),(0,Wh.jsx)("option",{value:"1",children:"1+ Bed"}),(0,Wh.jsx)("option",{value:"2",children:"2+ Beds"}),(0,Wh.jsx)("option",{value:"3",children:"3+ Beds"}),(0,Wh.jsx)("option",{value:"4",children:"4+ Beds"}),(0,Wh.jsx)("option",{value:"5",children:"5+ Beds"})]})]})]}),(0,Wh.jsxs)("div",{className:"mt-4",children:[(0,Wh.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),(0,Wh.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2",children:["room","studio","apartment","condo","townhouse","house","luxury_condo","luxury_house","mansion","estate"].map((e=>(0,Wh.jsxs)("label",{className:`\n                  flex items-center justify-center p-2 rounded-md text-sm cursor-pointer \n                  ${x.propertyTypes.includes(e)?"bg-teal-100 border border-teal-300 text-teal-800":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"}\n                `,children:[(0,Wh.jsx)("input",{type:"checkbox",name:e,checked:x.propertyTypes.includes(e),onChange:i,className:"sr-only"}),(0,Wh.jsx)("span",{children:e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})]},e)))})]}),(0,Wh.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Wh.jsxs)("button",{className:"bg-teal-600 hover:bg-teal-700 text-white py-2 px-4 rounded-md text-sm font-medium transition-colors shadow-sm flex items-center",onClick:()=>b(!1),children:[(0,Wh.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Apply Filters"]})})]}),S.playerStatus.housing&&(0,Wh.jsxs)("div",{className:"mb-6",children:[(0,Wh.jsx)("h4",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Your Current Home"}),(0,Wh.jsxs)("div",{className:"relative bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105 border border-gray-200",onClick:()=>E(S.playerStatus.housing,"housing"),onTouchStart:e=>T(S.playerStatus.housing,"housing",e),onTouchEnd:j,onTouchCancel:j,children:[(0,Wh.jsxs)("div",{className:"h-48 bg-gray-200 relative overflow-hidden",children:[(0,Wh.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-70 bg-gradient-to-br from-teal-500 to-blue-700",children:(0,Wh.jsx)("span",{className:"text-white text-9xl",children:I(S.playerStatus.housing.id).icon})}),(0,Wh.jsx)("div",{className:"absolute top-0 left-0 bg-teal-600 text-white m-2 px-3 py-1 rounded-full text-sm font-semibold",children:"CURRENT HOME"})]}),(0,Wh.jsxs)("div",{className:"p-4",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Wh.jsx)("h4",{className:"font-bold text-xl text-gray-800",children:S.playerStatus.housing.name}),(0,Wh.jsx)("div",{className:"text-2xl",children:S.playerStatus.housing.image})]}),(0,Wh.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[(0,Wh.jsxs)("span",{className:"mr-3",children:[(0,Wh.jsx)("span",{className:"text-gray-400 mr-1",children:"\ud83d\udccd"})," Business District"]}),(0,Wh.jsxs)("span",{className:"mr-3",children:[(0,Wh.jsx)("span",{className:"text-gray-400 mr-1",children:"\ud83d\udecf\ufe0f"})," ",e(S.playerStatus.housing.id).beds]}),(0,Wh.jsxs)("span",{children:[(0,Wh.jsx)("span",{className:"text-gray-400 mr-1",children:"\ud83d\udebf"})," ",e(S.playerStatus.housing.id).baths]})]}),(0,Wh.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:S.playerStatus.housing.description})]})]})]}),(0,Wh.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.length>0?n.map((n=>{const r=k>=n.cost,i=S.playerStatus.housing&&S.playerStatus.housing.id===n.id,{icon:s}=I(n.id),{beds:a,baths:o,sqft:l}=e(n.id);return(0,Wh.jsxs)("div",{className:`relative bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:shadow-lg ${r?"":"opacity-75"} ${i?"ring-2 ring-teal-500":"border border-gray-200"}`,onClick:()=>E(n,"housing"),onTouchStart:e=>T(n,"housing",e),onTouchEnd:j,onTouchCancel:j,children:[i&&(0,Wh.jsx)("div",{className:"absolute top-0 right-0 bg-teal-600 text-white m-2 px-3 py-1 rounded-full text-sm font-semibold z-20",children:"CURRENT"}),(0,Wh.jsxs)("div",{className:"h-40 bg-gray-200 relative overflow-hidden",children:[(0,Wh.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-70 bg-gradient-to-br from-teal-500 to-blue-700",children:(0,Wh.jsx)("span",{className:"text-white text-8xl",children:s})}),(0,Wh.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent h-20 opacity-70"}),(0,Wh.jsxs)("div",{className:"absolute bottom-2 left-2 text-white font-bold text-xl",children:["$",n.cost.toLocaleString()]})]}),(0,Wh.jsxs)("div",{className:"p-3",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,Wh.jsx)("h4",{className:"font-bold text-gray-800 truncate",children:n.name}),(0,Wh.jsx)("span",{className:"text-xl",children:n.image})]}),(0,Wh.jsx)("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83d\udccd Business District"})}),(0,Wh.jsxs)("div",{className:"flex items-center justify-between mb-3 text-xs text-gray-700",children:[(0,Wh.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 rounded-full",children:["\ud83d\udecf\ufe0f ",a]}),(0,Wh.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 rounded-full",children:["\ud83d\udebf ",o]}),(0,Wh.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 rounded-full",children:["\ud83d\udccf ",l]})]}),(0,Wh.jsx)("div",{className:"mt-auto",children:(0,Wh.jsxs)("div",{className:"relative w-full pr-20",children:[h[n.id]?(0,Wh.jsx)("div",{className:"absolute inset-0 bg-gray-400 rounded-full transition-all duration-700 ease-in-out"}):null,(0,Wh.jsx)("button",{className:"w-[60%] mx-auto py-2 sm:py-3 px-3 sm:px-4 rounded-full font-medium transition-colors text-center shadow-md "+(i?"bg-green-500 text-white cursor-default":r?"bg-teal-600 hover:bg-teal-700 hover:shadow-lg text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),onClick:e=>C(e,(()=>(e=>{t({type:"BUY_HOUSING",payload:{...e,purchasedAt:Date.now()}})})(n)),n.id),disabled:!r||i,children:(0,Wh.jsx)("span",{className:"block truncate",children:i?"Current Home":r?"Buy Property":"Can't Afford"})})]})})]})]},n.id)})):(0,Wh.jsx)("p",{className:"text-gray-600 italic",children:"No properties match the current filters."})})]})})(),"transportation"===n&&(0,Wh.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-orange-100 rounded-lg p-6",children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Wh.jsx)("span",{className:"text-3xl mr-2",children:"\ud83d\ude97"}),(0,Wh.jsx)("h3",{className:"text-2xl font-bold text-orange-800",children:"Transportation Options"})]}),S.playerStatus.transportation&&(0,Wh.jsxs)("div",{className:"mb-6",children:[(0,Wh.jsx)("h4",{className:"text-xl font-semibold text-orange-800 mb-3",children:"Current Transportation"}),(0,Wh.jsxs)("div",{className:`relative ${P(S.playerStatus.transportation.id).color} rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105 p-0`,onClick:()=>E(S.playerStatus.transportation,"transportation"),onTouchStart:e=>T(S.playerStatus.transportation,"transportation",e),onTouchEnd:j,onTouchCancel:j,children:[(0,Wh.jsx)("div",{className:"absolute right-0 bottom-0 w-32 h-32 opacity-20 flex items-center justify-center",children:(0,Wh.jsx)("span",{className:"text-white text-8xl",children:P(S.playerStatus.transportation.id).icon})}),(0,Wh.jsxs)("div",{className:"relative z-10 p-4",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Wh.jsx)("div",{className:"bg-black bg-opacity-30 rounded-lg p-2 shadow-sm inline-flex items-center",children:(0,Wh.jsx)("h4",{className:"font-semibold text-lg text-white",children:S.playerStatus.transportation.name})}),(0,Wh.jsx)("span",{className:"bg-yellow-500 bg-opacity-30 py-1 px-3 rounded-full text-sm font-medium shadow-sm border border-yellow-400",children:(0,Wh.jsxs)("span",{className:"text-yellow-500 drop-shadow-[0_0_2px_rgba(234,179,8,0.8)]",children:[S.playerStatus.transportation.clicksPerSecond,"x \ud83d\udc46's"]})})]}),(0,Wh.jsx)("p",{className:"text-white text-sm",children:S.playerStatus.transportation.description})]})]})]}),(0,Wh.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:xp.map((e=>{const n=k>=e.cost,r=S.playerStatus.transportation&&S.playerStatus.transportation.id===e.id,{icon:i,color:s}=P(e.id);return(0,Wh.jsxs)("div",{className:`relative ${s} rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105 ${n?"":"opacity-75"} ${r?"ring-3 ring-green-400":""} w-full h-48 md:h-56 lg:h-64`,onClick:()=>E(e,"transportation"),onTouchStart:t=>T(e,"transportation",t),onTouchEnd:j,onTouchCancel:j,children:[(0,Wh.jsx)("div",{className:"absolute right-2 bottom-4 w-20 h-20 opacity-80 flex items-center justify-center transition-all duration-500 z-10 "+(f[e.id]?"scale-150 opacity-100":""),children:(0,Wh.jsx)("span",{className:"text-white text-6xl drop-shadow-md",children:i})}),(0,Wh.jsxs)("div",{className:"relative z-0 h-full flex flex-col p-3",children:[(0,Wh.jsx)("div",{className:"bg-black bg-opacity-30 rounded-lg p-2 mb-1 shadow-sm flex items-center",children:(0,Wh.jsx)("h4",{className:"font-semibold text-base text-white truncate",children:e.name})}),(0,Wh.jsxs)("div",{className:"flex-grow flex flex-col justify-between",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("p",{className:"text-white text-xs px-1 mt-1 mb-2",children:(a=e.id,{bicycle:"Eco-friendly with bonus leg day!",bus_pass:"Public transit without exact change.",usedcar_basic:"Sunday driver special.",usedcar_mid:"Pre-loved but reliable.",newcar_economy:"New car smell included!",newcar_luxury:"Turning heads everywhere.",luxury_car:"Costs more than your first home.",supercar:"Zero to ticket in seconds.",hypercar:"A rocket with cup holders.",helicopter:"Traffic? What traffic?",private_jet:"First class is too public."}[a]||"Stylish A to B transport!")}),(0,Wh.jsx)("span",{className:"bg-yellow-500 bg-opacity-30 py-0.5 px-2 rounded-full text-xs font-medium shadow-sm border border-yellow-400 inline-block",children:(0,Wh.jsxs)("span",{className:"text-yellow-500 drop-shadow-[0_0_2px_rgba(234,179,8,0.8)]",children:[e.clickSpeedMultiplier,"x \ud83d\udc46's"]})})]}),(0,Wh.jsx)("div",{className:"mt-auto",children:(0,Wh.jsxs)("div",{className:"relative w-full",children:[h[e.id]?(0,Wh.jsx)("div",{className:"absolute inset-0 bg-gray-400 rounded-full transition-all duration-700 ease-in-out"}):null,(0,Wh.jsx)("button",{className:"w-[60%] mx-auto py-2 sm:py-3 px-3 sm:px-4 rounded-full font-bold transition-colors text-center shadow-md "+(r?"bg-green-500 text-white cursor-default":n?"bg-green-500 hover:bg-green-600 hover:shadow-lg text-white":"bg-gray-600 text-gray-300 cursor-not-allowed"),onClick:n=>C(n,(()=>(e=>{t({type:"BUY_TRANSPORTATION",payload:{...e,purchasedAt:Date.now()}}),setTimeout((()=>{const n=xp.filter((t=>S.playerStatus.transportation&&(t.id===S.playerStatus.transportation.id||t.id===e.id)));if(n.length>0){const e=[...n].sort(((e,t)=>t.clickSpeedMultiplier-e.clickSpeedMultiplier))[0];S.playerStatus.transportation.id!==e.id&&t({type:"SELECT_TRANSPORTATION",payload:e})}}),100)})(e)),e.id),disabled:!n||r,children:r?"Owned":(0,Wh.jsxs)("span",{className:"text-sm sm:text-base whitespace-nowrap overflow-hidden truncate",children:["$",e.cost.toLocaleString()]})})]})})]})]})]},e.id);var a}))})]})]}),s&&(0,Wh.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:_,children:(0,Wh.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full transform transition-all animate-fadeIn",onClick:e=>e.stopPropagation(),children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Wh.jsx)("span",{className:"text-4xl mr-3",children:s.item.image}),(0,Wh.jsx)("h4",{className:"text-xl font-bold",children:s.item.name})]}),(0,Wh.jsx)("p",{className:"text-gray-700 mb-4",children:s.item.description}),"asset"===s.type&&(0,Wh.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4 mb-4",children:[(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"Cost:"})," $",s.item.cost.toLocaleString()]}),(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"Income:"})," $",s.item.income.toFixed(2),"/sec"]}),(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"ROI:"})," ",(3600*s.item.income*24*365/s.item.cost*100).toFixed(2),"% annually"]})]}),"housing"===s.type&&(0,Wh.jsx)("div",{className:"bg-teal-50 rounded-lg p-4 mb-4",children:(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"Cost:"})," $",s.item.cost.toLocaleString()]})}),"transportation"===s.type&&(0,Wh.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 mb-4",children:[(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"Cost:"})," $",s.item.cost.toLocaleString()]}),(0,Wh.jsxs)("p",{className:"flex justify-between py-1",children:[(0,Wh.jsx)("span",{className:"font-semibold",children:"Work Speed:"}),(0,Wh.jsx)("span",{className:"bg-yellow-500 bg-opacity-30 py-1 px-3 rounded-full text-sm font-medium shadow-sm border border-yellow-400",children:(0,Wh.jsxs)("span",{className:"text-yellow-500 drop-shadow-[0_0_2px_rgba(234,179,8,0.8)]",children:[s.item.clickSpeedMultiplier,"x \ud83d\udc46's"]})})]})]}),(0,Wh.jsx)("button",{className:"w-full py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-colors font-medium",onClick:_,children:"Close"})]})})]})},Np=()=>{const{gameState:e,gameDispatch:t}=op(),[n,i]=(0,r.useState)("all");if(!e||!e.playerStatus)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const s=e,a=e=>{const t=vp(e,s.playerStatus.background);return s.money>=t},o=e=>s.money>=e.cost,l=()=>{if(!s.playerStatus.business)return null;const e=s.playerStatus.business,t=yp.find((t=>t.id===e.id));if(!t)return null;const n=e.level+1;return t.upgrades.find((e=>e.level===n))};return(0,Wh.jsxs)("div",{className:"business-container",children:[(0,Wh.jsx)("h2",{children:"Business Ventures"}),s.playerStatus.business?(0,Wh.jsxs)("div",{className:"owned-businesses",children:[(0,Wh.jsx)("h3",{children:"Your Business"}),(0,Wh.jsxs)("div",{className:"business-card owned",children:[(0,Wh.jsxs)("div",{className:"business-header",children:[(0,Wh.jsx)("div",{className:"business-icon",children:s.playerStatus.business.image}),(0,Wh.jsxs)("h3",{children:[s.playerStatus.business.name," ",(0,Wh.jsxs)("span",{className:"level-badge level-intermediate",children:["Level ",s.playerStatus.business.level]})]})]}),(0,Wh.jsx)("p",{className:"business-description",children:s.playerStatus.business.description}),(0,Wh.jsxs)("p",{className:"business-income",children:["Income: $",s.playerStatus.business.income.toFixed(2),"/sec"]}),l()?(0,Wh.jsxs)("div",{className:"upgrade-section",children:[(0,Wh.jsxs)("h4",{children:["Available Upgrade: ",l().name]}),(0,Wh.jsxs)("p",{children:["Cost: $",l().cost.toLocaleString()]}),(0,Wh.jsxs)("p",{children:["Income Boost: ",(0,Wh.jsxs)("span",{className:"boost-text",children:["+",(100*l().incomeMultiplier).toFixed(0),"%"]})]}),"poor"===s.playerStatus.background&&(0,Wh.jsxs)("p",{className:"bonus",children:["Poor Background Bonus: ",(0,Wh.jsx)("span",{className:"boost-text",children:"+10% income"})]}),(0,Wh.jsx)("button",{className:"upgrade-button",onClick:()=>(e=>{if(!s.playerStatus.business)return;const n=s.playerStatus.business,r=(i=e.incomeMultiplier,a=s.playerStatus.background,i+("poor"===a?.1:0));var i,a;const o=n.income*r;t({type:"UPGRADE_BUSINESS",payload:{business:n,upgrade:{...e,incomeBoost:o}}})})(l()),disabled:!o(l()),children:o(l())?"Upgrade":"Not enough money"})]}):(0,Wh.jsx)("div",{className:"max-level",children:(0,Wh.jsx)("p",{children:(0,Wh.jsx)("span",{className:"badge badge-warning",children:"Max Level Reached!"})})})]})]}):(0,Wh.jsx)("div",{className:"no-businesses",children:(0,Wh.jsx)("p",{children:"You don't own any businesses yet. Purchase one below to start generating serious income!"})}),(0,Wh.jsxs)("div",{className:"filter-controls",children:[(0,Wh.jsx)("span",{className:"filter-label",children:"Filter by price:"}),(0,Wh.jsxs)("div",{className:"filter-buttons",children:[(0,Wh.jsx)("button",{className:"all"===n?"active":"",onClick:()=>i("all"),children:(0,Wh.jsx)("span",{className:"price-badge price-all",children:"All"})}),(0,Wh.jsx)("button",{className:"affordable"===n?"active":"",onClick:()=>i("affordable"),children:(0,Wh.jsx)("span",{className:"price-badge price-affordable",children:"Affordable"})}),(0,Wh.jsx)("button",{className:"low"===n?"active":"",onClick:()=>i("low"),children:(0,Wh.jsx)("span",{className:"price-badge price-low",children:"Low (<$100k)"})}),(0,Wh.jsx)("button",{className:"medium"===n?"active":"",onClick:()=>i("medium"),children:(0,Wh.jsx)("span",{className:"price-badge price-medium",children:"Medium ($100k-$1M)"})}),(0,Wh.jsx)("button",{className:"high"===n?"active":"",onClick:()=>i("high"),children:(0,Wh.jsx)("span",{className:"price-badge price-high",children:"High (>$1M)"})})]})]}),(0,Wh.jsx)("h3",{children:"Available Businesses"}),(0,Wh.jsx)("div",{className:"available-businesses",children:(()=>{switch(n){case"affordable":return yp.filter((e=>vp(e,s.playerStatus.background)<=s.money));case"low":return yp.filter((e=>vp(e,s.playerStatus.background)<1e5));case"medium":return yp.filter((e=>{const t=vp(e,s.playerStatus.background);return t>=1e5&&t<1e6}));case"high":return yp.filter((e=>vp(e,s.playerStatus.background)>=1e6));default:return yp}})().map((e=>{const n=vp(e,s.playerStatus.background),r=s.playerStatus.business&&s.playerStatus.business.id===e.id;return(0,Wh.jsxs)("div",{className:`business-card ${a(e)?"":"cannot-afford"} ${r?"already-owned":""}`,children:[(0,Wh.jsxs)("div",{className:"business-header",children:[(0,Wh.jsx)("div",{className:"business-icon",children:e.image}),(0,Wh.jsx)("h3",{children:e.name})]}),(0,Wh.jsx)("p",{className:"business-description",children:e.description}),(0,Wh.jsxs)("div",{className:"business-details",children:[(0,Wh.jsxs)("p",{children:["Cost: $",n.toLocaleString()]}),(0,Wh.jsxs)("p",{children:["Income: $",e.baseIncome.toFixed(2),"/sec"]}),(0,Wh.jsxs)("p",{className:"roi",children:["ROI: ",(0,Wh.jsxs)("span",{className:"boost-text",children:[(3600*e.baseIncome*24*365/n*100).toFixed(2),"% annually"]})]}),"poor"===s.playerStatus.background&&(0,Wh.jsxs)("p",{className:"discount",children:["Poor Background Discount: ",(0,Wh.jsx)("span",{className:"boost-text",children:"20% off"})]})]}),(0,Wh.jsx)("button",{className:"buy-button",onClick:()=>(e=>{const n=vp(e,s.playerStatus.background);s.money>=n&&t({type:"START_BUSINESS",payload:{id:e.id,name:e.name,income:e.baseIncome,cost:n,level:1,image:e.image,description:e.description,upgrades:e.upgrades,purchasedAt:Date.now()}})})(e),disabled:!a(e)||r,children:r?"Already Owned":a(e)?"Start Business":"Not enough money"})]},e.id)}))})]})},Ep=()=>{const{gameState:e,gameDispatch:t}=op(),[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(null);if((0,r.useEffect)((()=>{if(e&&e.currentEducation){const e=setInterval((()=>{t({type:"UPDATE_EDUCATION_PROGRESS"})}),1e3);return()=>clearInterval(e)}}),[null===e||void 0===e?void 0:e.currentEducation,t]),!e||!e.skills)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const o=e,l=e=>e.charAt(0).toUpperCase()+e.slice(1),c=e=>o.skills[e]||0===o.skills[e]?parseFloat(o.skills[e].toFixed(1)):0,u=()=>o.skills.education&&o.skills.education>=4,d=()=>o.playerStatus.job?o.playerStatus.job.category:null,h=e=>{a(s===e?null:e)},p=(e,t)=>{if(!e)return"Job";const n={food:{1:"Cook 1",10:"Cook 2",20:"Head Chef",30:"Sous Chef",40:"Chef de Partie",50:"Kitchen Manager",60:"Executive Chef",70:"Culinary Director",80:"Restaurant Manager",90:"General Manager",100:"Regional Director"},retail:{1:"Cashier 1",10:"Cashier 2",20:"Supervisor",30:"Shift Lead",40:"Department Manager",50:"Assistant Store Manager",60:"Store Manager",70:"Multi-Store Manager",80:"District Manager",90:"Regional Manager",100:"Operations Director"},technical:{1:"Junior Developer",10:"Developer",20:"Senior Developer",30:"Team Lead",40:"Project Manager",50:"Development Manager",60:"Director of Engineering",70:"VP of Engineering",80:"CTO",90:"Chief Architect",100:"Technology Director"},financial:{1:"Financial Analyst",10:"Senior Analyst",20:"Finance Manager",30:"Senior Finance Manager",40:"Controller",50:"Finance Director",60:"VP of Finance",70:"Chief Financial Officer",80:"Investment Director",90:"Treasury Director",100:"Finance Executive"},healthcare:{1:"Nurse Assistant",10:"Registered Nurse",20:"Charge Nurse",30:"Nurse Manager",40:"Nurse Practitioner",50:"Department Head",60:"Clinical Director",70:"Chief Nursing Officer",80:"Medical Director",90:"Hospital Administrator",100:"Healthcare Executive"},management:{1:"Management Trainee",10:"Junior Manager",20:"Manager",30:"Senior Manager",40:"Department Head",50:"Director",60:"Senior Director",70:"Vice President",80:"Senior VP",90:"Executive VP",100:"Chief Operating Officer"},legal:{1:"Legal Assistant",10:"Paralegal",20:"Junior Attorney",30:"Associate Attorney",40:"Senior Associate",50:"Managing Attorney",60:"Partner",70:"Senior Partner",80:"Managing Partner",90:"Practice Head",100:"Chief Legal Officer"}}[e]||{1:"Associate 1",10:"Associate 2",20:"Senior Associate",30:"Team Lead",40:"Supervisor",50:"Assistant Manager",60:"Manager",70:"Senior Manager",80:"Department Head",90:"Director",100:"Senior Director"},r=Object.keys(n).map(Number).sort(((e,t)=>e-t));let i=r[0];for(const s of r){if(!(s<=t))break;i=s}if(t>i){const e=Math.floor((t-i)/10)+1;return`${n[i]} ${e}`}return n[i]},f=e=>e<100||e<300?10*Math.ceil(e/10):null,m=(e,t)=>{const n=1+.05*t;return Math.round(e*n)},g=(e,t)=>{if(!e)return[];const n=[];for(let r=1;r<=100;r+=10)n.push({level:r,title:p(e,r),pay:m(t,r),tier:1});for(let r=110;r<=300;r+=10)n.push({level:r,title:p(e,r),pay:m(2*t,r-100),tier:2,requiresDegree:!0});return n},y=()=>{var e;return(null===(e=o.playerStatus.job)||void 0===e?void 0:e.level)||1};return(0,Wh.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,Wh.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 pb-2 border-b border-gray-200",children:"Education & Skills"}),o.currentEducation&&(0,Wh.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6 shadow border border-blue-200",children:[(0,Wh.jsxs)("h3",{className:"text-center text-blue-700 font-medium mb-3",children:["Currently Learning: ",o.currentEducation.name]}),(0,Wh.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden border border-gray-300",children:(0,Wh.jsx)("div",{className:"h-full bg-green-500 rounded-full animate-progress-bar",style:{width:100*o.educationProgress+"%"}})}),(0,Wh.jsxs)("div",{className:"flex justify-between flex-wrap mt-2",children:[(0,Wh.jsxs)("p",{className:"text-sm text-gray-700 m-1",children:["Skill: ",l(o.currentEducation.skill)]}),(0,Wh.jsxs)("p",{className:"text-sm text-gray-700 m-1",children:["Progress: ",Math.round(100*o.educationProgress),"%"]}),(0,Wh.jsx)("p",{className:"text-sm font-bold text-blue-700 m-1",children:(()=>{if(!o.currentEducation)return null;const e=Date.now()-o.currentEducation.startTime,t=o.currentEducation.duration-e;if(t<=0)return"Completing...";return`${Math.ceil(t/1e3)} seconds remaining`})()})]})]}),(0,Wh.jsxs)("div",{className:"bg-white rounded-lg p-5 mb-8 shadow-md",children:[(0,Wh.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Your Skills"}),(0,Wh.jsx)("div",{className:"flex flex-wrap gap-4 p-2",children:Object.keys(o.skills).length>0?Object.entries(o.skills).map((e=>{let[t,n]=e;return(0,Wh.jsxs)("div",{className:"bg-blue-50 rounded-full py-2 px-4 text-sm flex items-center border-l-3 border-green-500",children:[(0,Wh.jsxs)("span",{className:"font-bold text-gray-800 mr-2",children:[l(t),":"]}),(0,Wh.jsxs)("span",{className:"text-green-600 font-bold",children:["Level ",c(t)]})]},t)})):(0,Wh.jsx)("p",{className:"text-gray-500",children:"You don't have any skills yet. Get some education!"})})]}),(0,Wh.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Wh.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Job Training & Career Path"})}),(0,Wh.jsx)("div",{className:"bg-white rounded-lg p-5 mb-8 shadow-md",children:o.playerStatus.job?(0,Wh.jsxs)(Wh.Fragment,{children:[(0,Wh.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Wh.jsxs)("h4",{className:"font-semibold text-lg text-gray-800 mb-2",children:["Current Position: ",o.playerStatus.job.title]}),(0,Wh.jsxs)("p",{className:"text-gray-700 mb-1",children:["Career: ",l(o.playerStatus.job.category)]}),(0,Wh.jsxs)("p",{className:"text-gray-700 mb-1",children:["Current Level: ",y()]}),(0,Wh.jsxs)("p",{className:"text-gray-700 mb-2",children:["Tier: ",(()=>{if(!o.playerStatus.job)return 0;const e=o.playerStatus.job.id;return mp.some((t=>t.id===e))?3:fp.some((t=>t.id===e))||pp.some((t=>t.id===e))?2:(hp.some((t=>t.id===e)),1)})()]}),f(y())&&(0,Wh.jsxs)("div",{className:"mt-4",children:[(0,Wh.jsxs)("p",{className:"text-gray-700",children:["Next promotion at level ",f(y()),":",(0,Wh.jsx)("span",{className:"font-medium text-blue-600 ml-1",children:p(o.playerStatus.job.category,f(y()))})]}),(0,Wh.jsx)("div",{className:"h-2 bg-gray-200 rounded-full mt-2 overflow-hidden",children:(0,Wh.jsx)("div",{className:"h-full bg-blue-500 rounded-full",style:{width:Math.floor(y()-1)%10*10+"%"}})})]}),y()<100&&!u()&&(0,Wh.jsx)("p",{className:"mt-3 text-sm text-amber-700 bg-amber-50 p-2 rounded-md",children:"You need a Bachelor's Degree to advance to Tier 2 (Corporate Management)"})]}),(0,Wh.jsxs)("div",{className:"mb-6",children:[(0,Wh.jsx)("h4",{className:"font-medium text-gray-800 mb-3",children:"Explore Career Paths"}),(0,Wh.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:(()=>{const e=new Set;return[...dp.poor,...dp.rich,...hp,...pp,...fp,...mp].forEach((t=>{t.category&&e.add(t.category)})),Array.from(e)})().map((e=>(0,Wh.jsx)("button",{className:"px-3 py-1.5 rounded-full text-sm transition-colors "+(e===n?"bg-primary-600 text-white":e===d()?"bg-primary-100 text-primary-800 border border-primary-300":"bg-gray-100 text-gray-800 hover:bg-gray-200"),onClick:()=>(e=>{i(e),a(null)})(e),children:l(e)},e)))})]}),n&&(0,Wh.jsxs)("div",{className:"career-progression",children:[(0,Wh.jsxs)("h4",{children:[l(n)," Career Progression"]}),(0,Wh.jsxs)("div",{className:"tier-container expandable",onClick:()=>h("tier1"),children:[(0,Wh.jsxs)("div",{className:"tier-header",children:[(0,Wh.jsxs)("h5",{children:[(0,Wh.jsx)("span",{className:"level-badge level-beginner",children:"Tier 1"})," Entry Level to Management (Levels 1-100)"]}),(0,Wh.jsx)("div",{className:"tier-expand-icon",children:"tier1"===s?"\u25bc":"\u25b6"})]}),"tier1"===s&&(0,Wh.jsx)("div",{className:"career-progression-path",children:g(n,10).filter((e=>1===e.tier)).map((e=>(0,Wh.jsxs)("div",{className:`progression-item ${y()===e.level?"current-level":""} ${y()>e.level?"completed-level":""}`,children:[(0,Wh.jsx)("div",{className:"progression-level",children:(0,Wh.jsxs)("span",{className:"level-badge level-beginner",children:["Level ",e.level]})}),(0,Wh.jsx)("div",{className:"progression-title",children:e.title}),(0,Wh.jsxs)("div",{className:"progression-pay",children:["$",e.pay,"/hr"]})]},e.level)))}),!s&&d()===n&&(0,Wh.jsxs)("div",{className:"tier-current-status",children:[(0,Wh.jsxs)("p",{children:["Current Level: ",y(),"/100"]}),(0,Wh.jsx)("div",{className:"tier-progress-container",children:(0,Wh.jsx)("div",{className:"tier-progress-bar",style:{width:10*Math.floor((y()-1)/10)+"%"}})})]})]}),(0,Wh.jsxs)("div",{className:"tier-container expandable "+(u()?"":"locked-tier"),onClick:()=>u()&&h("tier2"),children:[(0,Wh.jsxs)("div",{className:"tier-header",children:[(0,Wh.jsxs)("h5",{children:[(0,Wh.jsx)("span",{className:"level-badge level-intermediate",children:"Tier 2"})," Corporate Management (Levels 101-300)"]}),u()?(0,Wh.jsx)("div",{className:"tier-expand-icon",children:"tier2"===s?"\u25bc":"\u25b6"}):(0,Wh.jsx)("div",{className:"tier-requirement",children:(0,Wh.jsx)("span",{className:"badge badge-warning badge-sm",children:"Requires Bachelor's Degree"})})]}),"tier2"===s&&u()&&(0,Wh.jsx)("div",{className:"career-progression-path",children:g(n,20).filter((e=>2===e.tier)).map((e=>(0,Wh.jsxs)("div",{className:`progression-item ${y()===e.level?"current-level":""} ${y()>e.level?"completed-level":""}`,children:[(0,Wh.jsx)("div",{className:"progression-level",children:(0,Wh.jsxs)("span",{className:"level-badge level-intermediate",children:["Level ",e.level]})}),(0,Wh.jsx)("div",{className:"progression-title",children:e.title}),(0,Wh.jsxs)("div",{className:"progression-pay",children:["$",e.pay,"/hr"]})]},e.level)))}),!s&&u()&&d()===n&&y()>100&&(0,Wh.jsxs)("div",{className:"tier-current-status",children:[(0,Wh.jsxs)("p",{children:["Current Level: ",y(),"/300"]}),(0,Wh.jsx)("div",{className:"tier-progress-container",children:(0,Wh.jsx)("div",{className:"tier-progress-bar",style:{width:10*Math.floor((y()-101)/20)+"%"}})})]})]}),(0,Wh.jsxs)("div",{className:"tier-container",children:[(0,Wh.jsx)("div",{className:"tier-header",children:(0,Wh.jsxs)("h5",{children:[(0,Wh.jsx)("span",{className:"level-badge level-advanced",children:"Tier 3"})," Company Ownership (Level 300+)"]})}),(0,Wh.jsx)("div",{className:"tier-description",children:(0,Wh.jsxs)("p",{children:["After reaching level 300 in your career path, you can become a company owner in the ",l(n)," industry."]})})]}),(0,Wh.jsxs)("div",{className:"career-tips",children:[(0,Wh.jsx)("h5",{children:"Career Progression Tips:"}),(0,Wh.jsxs)("ul",{children:[(0,Wh.jsx)("li",{children:"Gain job experience by working to advance levels"}),(0,Wh.jsx)("li",{children:"Every 10 levels earns you a promotion with higher pay"}),(0,Wh.jsx)("li",{children:"You need a Bachelor's Degree to advance to Tier 2 (Level 100+)"}),(0,Wh.jsx)("li",{children:"Tier 1 spans levels 1-100 (Entry level to Management)"}),(0,Wh.jsx)("li",{children:"Tier 2 spans levels 101-300 (Corporate positions)"}),(0,Wh.jsx)("li",{children:"Tier 3 begins at level 300+ (Company Ownership)"})]})]})]})]}):(0,Wh.jsx)("div",{className:"text-center p-6 bg-gray-50 rounded-lg border border-gray-200",children:(0,Wh.jsx)("p",{className:"text-gray-600",children:"You don't have a job yet. Visit the Jobs tab to find one first!"})})}),(0,Wh.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Wh.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Available Education"})}),(0,Wh.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:bp.map((e=>{const n=(e=>o.money>=e.cost)(e),r=(e=>o.playerStatus.background?"rich"===o.playerStatus.background?e.skillMultiplier.rich:e.skillMultiplier.poor:1)(e);let i=1;o.skills[e.skill]&&(i=1+.2*c(e.skill));const s=Math.round(60*i),a="university"===e.id;return(0,Wh.jsxs)("div",{className:`bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:-translate-y-1 hover:shadow-lg ${n?"":"opacity-60"} ${o.currentEducation?"opacity-50":""} ${a?"border-2 border-blue-400":""}`,children:[(0,Wh.jsx)("div",{className:"flex items-start p-4 bg-gray-50 border-b border-gray-200",children:(0,Wh.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Wh.jsx)("div",{className:"text-2xl",children:e.image}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h3",{className:"font-semibold text-gray-800 text-lg",children:e.name}),e.difficulty&&(0,Wh.jsx)("span",{className:"inline-block px-2 py-0.5 text-xs font-medium rounded-full "+("beginner"===e.difficulty.toLowerCase()?"bg-green-100 text-green-800":"intermediate"===e.difficulty.toLowerCase()?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.difficulty})]})]})}),(0,Wh.jsxs)("div",{className:"p-4",children:[(0,Wh.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,Wh.jsxs)("div",{className:"flex justify-between items-end",children:[(0,Wh.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Wh.jsxs)("p",{className:"text-gray-700",children:["Cost: $",e.cost.toLocaleString()]}),(0,Wh.jsxs)("p",{className:"text-gray-700",children:["Skill:",(0,Wh.jsx)("span",{className:"inline-block ml-1 px-2 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:l(e.skill)})]}),(0,Wh.jsxs)("p",{className:"text-gray-700",children:["Skill gain: +",(e.value*r).toFixed(1)," points"]}),(0,Wh.jsxs)("p",{className:"text-gray-700",children:["Duration: ",s," seconds"]}),c(e.skill)>0&&(0,Wh.jsx)("p",{className:"text-xs text-gray-500 italic",children:"Duration increased due to current skill level"}),"rich"===o.playerStatus.background&&(0,Wh.jsx)("p",{className:"text-green-600 text-xs font-medium",children:"Rich Background Bonus: +50% skill gain"}),a&&(0,Wh.jsx)("p",{className:"bg-blue-50 text-blue-700 p-2 rounded-md text-xs mt-2",children:"Required for management positions"})]}),(0,Wh.jsx)("button",{className:"px-4 py-1.5 rounded-lg font-medium text-sm transition ml-4 flex-shrink-0 "+(!n||o.currentEducation?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow"),onClick:()=>(e=>{t({type:"START_EDUCATION",payload:e})})(e),disabled:!n||null!==o.currentEducation,children:n?o.currentEducation?"Already in education":"Enroll":"Not enough money"})]})]})]},e.id)}))})]})},_p={MARKET_SENTIMENT:{min:-.008,max:.008},NEWS_EVENTS:{min:-.05,max:.05},EARNINGS_IMPACT:{min:-.1,max:.08},PLAYER_ACTIONS:{min:-.02,max:.02},SECTOR_TRENDS:{tech:{min:-.015,max:.018},retail:{min:-.01,max:.011},finance:{min:-.008,max:.009},auto:{min:-.013,max:.014},media:{min:-.014,max:.015},energy:{min:-.016,max:.013},health:{min:-.009,max:.011},food:{min:-.007,max:.008},telecom:{min:-.008,max:.009},aerospace:{min:-.018,max:.015}}},Cp=[{headline:"Fed announces surprise interest rate hike",impact:"negative",sectors:["finance","retail"],magnitude:.03},{headline:"Breakthrough in quantum computing announced",impact:"positive",sectors:["tech"],magnitude:.04},{headline:"Data privacy scandal rocks social media companies",impact:"negative",sectors:["tech","media"],magnitude:.05},{headline:"New renewable energy tax credits approved",impact:"positive",sectors:["energy"],magnitude:.03},{headline:"Automotive chip shortage worsens",impact:"negative",sectors:["auto","tech"],magnitude:.035},{headline:"Streaming services see record subscriber growth",impact:"positive",sectors:["media"],magnitude:.04},{headline:"Healthcare reform bill passes",impact:"mixed",sectors:["health"],magnitude:.025},{headline:"Global supply chain disruptions continue",impact:"negative",sectors:["retail","auto","food"],magnitude:.03},{headline:"New AI breakthrough announced",impact:"positive",sectors:["tech"],magnitude:.045},{headline:"Consumer spending reaches all-time high",impact:"positive",sectors:["retail","food"],magnitude:.025},{headline:"Major cybersecurity breach reported",impact:"negative",sectors:["tech","finance"],magnitude:.04},{headline:"Space tourism takes off",impact:"positive",sectors:["aerospace"],magnitude:.055},{headline:"Fast food workers announce nationwide strike",impact:"negative",sectors:["food"],magnitude:.025},{headline:"Mobile payment usage skyrockets",impact:"positive",sectors:["finance","tech"],magnitude:.03},{headline:"Self-driving car achieves safety milestone",impact:"positive",sectors:["auto","tech"],magnitude:.035},{headline:"Streaming price wars intensify",impact:"mixed",sectors:["media"],magnitude:.02},{headline:"Generic drug approvals accelerate",impact:"negative",sectors:["health"],magnitude:.025},{headline:"5G rollout exceeds expectations",impact:"positive",sectors:["telecom","tech"],magnitude:.03},{headline:"Oil reserves discovery announced",impact:"positive",sectors:["energy"],magnitude:.035},{headline:"Record inflation reported",impact:"negative",sectors:["retail","food","finance"],magnitude:.035}],Tp=[{id:"MSOFT",name:"MicroWeave",fullName:"MicroWeave Technologies, Inc.",sector:"tech",basePrice:337.5,volatility:.012,description:"Leading software company known for office productivity tools and operating systems.",logo:"\ud83e\ude9f",marketCap:2507e9,totalShares:74284e5,pe:35.8,revenue:2119e8,dividendYield:.73,beta:.94,events:{earnings:{day:25,month:[1,4,7,10]},dividend:{day:10,month:[2,5,8,11],amount:.62}},news:[{headline:"MicroWeave announces new cloud partnership",impact:.018,probability:.05},{headline:"MicroWeave OS security flaw discovered",impact:-.025,probability:.03},{headline:"MicroWeave acquires AI startup",impact:.022,probability:.04}]},{id:"APLE",name:"Pear",fullName:"Pear Inc.",sector:"tech",basePrice:182.85,volatility:.014,description:"Consumer electronics, software and services company with a dedicated following.",logo:"\ud83c\udf50",marketCap:2876e9,totalShares:15729e6,pe:30.2,revenue:3833e8,dividendYield:.52,beta:1.15,events:{earnings:{day:15,month:[2,5,8,11]},dividend:{day:5,month:[2,5,8,11],amount:.24}},news:[{headline:"Pear unveils next-gen smartphone",impact:.032,probability:.05},{headline:"Pear production delays reported",impact:-.028,probability:.03},{headline:"Pear services growth exceeds expectations",impact:.024,probability:.04}]},{id:"GOOG",name:"Boogle",fullName:"Boogle LLC",sector:"tech",basePrice:143.65,volatility:.013,description:"Search engine and digital advertising giant with diverse technology interests.",logo:"\ud83d\udd0d",marketCap:1832e9,totalShares:12754e6,pe:26.3,revenue:2828e8,dividendYield:0,beta:1.08,events:{earnings:{day:20,month:[1,4,7,10]},dividend:null},news:[{headline:"Boogle facing new antitrust lawsuit",impact:-.031,probability:.035},{headline:"Boogle AI assistant capabilities expanded",impact:.027,probability:.04},{headline:"Boogle ad revenue hits record high",impact:.024,probability:.045}]},{id:"AMZN",name:"Jungle",fullName:"Jungle Marketplace, Inc.",sector:"retail",basePrice:128.75,volatility:.016,description:"E-commerce and cloud computing giant with expanding interests in various industries.",logo:"\ud83d\udce6",marketCap:1324e9,totalShares:10284e6,pe:59.5,revenue:5139e8,dividendYield:0,beta:1.22,events:{earnings:{day:28,month:[1,4,7,10]},dividend:null},news:[{headline:"Jungle opens new fulfillment centers",impact:.021,probability:.04},{headline:"Jungle cloud division reports record growth",impact:.032,probability:.05},{headline:"Jungle workers plan strike at multiple locations",impact:-.027,probability:.03}]},{id:"MTBK",name:"FaceScroll",fullName:"MetaBook, Inc.",sector:"media",basePrice:312.75,volatility:.018,description:"Social media conglomerate focusing on virtual reality and connectivity.",logo:"\ud83d\udc65",marketCap:807e9,totalShares:2581e6,pe:28.1,revenue:1349e8,dividendYield:0,beta:1.35,events:{earnings:{day:22,month:[1,4,7,10]},dividend:null},news:[{headline:"FaceScroll faces new privacy regulations",impact:-.024,probability:.04},{headline:"FaceScroll virtual reality sales surge",impact:.031,probability:.035},{headline:"FaceScroll user growth stagnates",impact:-.022,probability:.03}]},{id:"NFLX",name:"Webflix",fullName:"Webflix Streaming Services, Inc.",sector:"media",basePrice:417.25,volatility:.019,description:"Streaming entertainment service with global reach and original content production.",logo:"\ud83c\udfac",marketCap:1855e8,totalShares:4446e5,pe:44.8,revenue:337e8,dividendYield:0,beta:1.27,events:{earnings:{day:18,month:[1,4,7,10]},dividend:null},news:[{headline:"Webflix subscriber numbers exceed expectations",impact:.043,probability:.04},{headline:"Webflix raises subscription prices",impact:-.024,probability:.045},{headline:"Webflix original series wins major awards",impact:.027,probability:.035}]},{id:"TSLA",name:"Coil",fullName:"Coil Motors, Inc.",sector:"auto",basePrice:235.45,volatility:.028,description:"Electric vehicle manufacturer also involved in renewable energy and space exploration.",logo:"\u26a1",marketCap:7486e8,totalShares:3179e6,pe:78.4,revenue:968e8,dividendYield:0,beta:1.92,events:{earnings:{day:26,month:[1,4,7,10]},dividend:null},news:[{headline:"Coil announces revolutionary new battery technology",impact:.052,probability:.03},{headline:"Coil production misses targets",impact:-.046,probability:.04},{headline:"Coil expands charging network globally",impact:.038,probability:.035}]},{id:"VZN",name:"Horizon",fullName:"Horizon Communications",sector:"telecom",basePrice:41.3,volatility:.012,description:"Telecommunications company providing cellular, broadband and digital services.",logo:"\ud83d\udce1",marketCap:1735e8,totalShares:420097e4,events:{earnings:{day:19,month:[1,4,7,10]},dividend:{day:15,month:[2,5,8,11],amount:.65}},news:[{headline:"Horizon completes largest 5G rollout to date",impact:.031,probability:.04},{headline:"Horizon faces network outage in major markets",impact:-.028,probability:.025},{headline:"Horizon to acquire regional fiber provider",impact:.024,probability:.03}]},{id:"PFE",name:"Fizor",fullName:"Fizor Pharmaceuticals",sector:"health",basePrice:36.85,volatility:.014,description:"Global pharmaceutical corporation developing vaccines and medications.",logo:"\ud83d\udc8a",marketCap:2075e8,totalShares:5631206e3,events:{earnings:{day:15,month:[2,5,8,11]},dividend:{day:10,month:[3,6,9,12],amount:.4}},news:[{headline:"Fizor drug receives FDA approval",impact:.055,probability:.035},{headline:"Fizor recalls treatment after safety concerns",impact:-.048,probability:.02},{headline:"Fizor vaccine shows promising trial results",impact:.043,probability:.03}]},{id:"XOM",name:"PetroCorp",fullName:"PetroCorp Energy",sector:"energy",basePrice:106.4,volatility:.017,description:"Multinational oil and gas corporation with exploration, production and distribution operations.",logo:"\u26fd",marketCap:4326e8,totalShares:406767e4,events:{earnings:{day:28,month:[1,4,7,10]},dividend:{day:10,month:[3,6,9,12],amount:.91}},news:[{headline:"PetroCorp discovers major new oil reserves",impact:.042,probability:.03},{headline:"PetroCorp faces new environmental regulations",impact:-.035,probability:.045},{headline:"PetroCorp expands renewable energy division",impact:.028,probability:.035}]},{id:"DIS",name:"Kingsley",fullName:"Kingsley Entertainment",sector:"media",basePrice:90.15,volatility:.018,description:"Entertainment conglomerate operating theme parks, movie studios, and streaming services.",logo:"\ud83c\udff0",marketCap:1648e8,totalShares:1828841e3,events:{earnings:{day:10,month:[2,5,8,11]},dividend:{day:20,month:[1,4,7,10],amount:.3}},news:[{headline:"Kingsley+ streaming subscribers surge",impact:.046,probability:.04},{headline:"Kingsley announces new theme park expansion",impact:.035,probability:.035},{headline:"Kingsley movie underperforms at box office",impact:-.032,probability:.03}]},{id:"SBUX",name:"MoonDollars",fullName:"MoonDollars Coffee Co.",sector:"food",basePrice:98.7,volatility:.016,description:"Global coffee chain with locations in hundreds of countries.",logo:"\u2615",marketCap:1131e8,totalShares:1146e6,events:{earnings:{day:5,month:[2,5,8,11]},dividend:{day:25,month:[2,5,8,11],amount:.53}},news:[{headline:"MoonDollars launches innovative new beverage line",impact:.038,probability:.045},{headline:"MoonDollars same-store sales decline",impact:-.033,probability:.03},{headline:"MoonDollars accelerates global expansion",impact:.036,probability:.035}]},{id:"PYPL",name:"BuddyPay",fullName:"BuddyPay Holdings",sector:"finance",basePrice:63.8,volatility:.019,description:"Digital payment platform enabling online money transfers and purchases.",logo:"\ud83d\udcb8",marketCap:711e8,totalShares:111442e4,events:{earnings:{day:12,month:[2,5,8,11]},dividend:null},news:[{headline:"BuddyPay expands cryptocurrency support",impact:.048,probability:.035},{headline:"BuddyPay transaction volume hits record high",impact:.043,probability:.04},{headline:"BuddyPay faces new regulatory scrutiny",impact:-.037,probability:.03}]},{id:"NKE",name:"Swoosh",fullName:"Swoosh Athletics",sector:"retail",basePrice:102.5,volatility:.015,description:"Athletic footwear and apparel multinational with iconic branding.",logo:"\ud83d\udc5f",marketCap:1579e8,totalShares:154048e4,events:{earnings:{day:28,month:[3,6,9,12]},dividend:{day:15,month:[1,4,7,10],amount:.34}},news:[{headline:"Swoosh signs record-breaking athlete endorsement",impact:.041,probability:.03},{headline:"Swoosh factory workers strike in Southeast Asia",impact:-.035,probability:.025},{headline:"Swoosh direct-to-consumer sales surge",impact:.039,probability:.04}]},{id:"SONO",name:"AudioWave",fullName:"AudioWave Sound Systems",sector:"tech",basePrice:15.4,volatility:.022,description:"Premium audio equipment manufacturer specializing in wireless speaker systems.",logo:"\ud83d\udd0a",marketCap:197e7,totalShares:12792e4,events:{earnings:{day:8,month:[2,5,8,11]},dividend:null},news:[{headline:"AudioWave releases revolutionary new speaker technology",impact:.058,probability:.03},{headline:"AudioWave faces component shortage",impact:-.042,probability:.035},{headline:"AudioWave partners with major streaming services",impact:.045,probability:.03}]},{id:"CRPT",name:"CoinDash",fullName:"CoinDash Crypto Exchange",sector:"finance",basePrice:128.65,volatility:.045,description:"Leading cryptocurrency exchange platform and blockchain technology company.",logo:"\ud83e\ude99",marketCap:242e8,totalShares:18811e4,events:{earnings:{day:20,month:[2,5,8,11]},dividend:null},news:[{headline:"CoinDash adds support for emerging cryptocurrencies",impact:.062,probability:.04},{headline:"CoinDash faces security breach",impact:-.075,probability:.02},{headline:"CoinDash expands institutional services",impact:.054,probability:.035}]},{id:"RBLX",name:"BlockWorld",fullName:"BlockWorld Interactive",sector:"tech",basePrice:38.7,volatility:.028,description:"Online gaming platform allowing users to develop and play games in a virtual universe.",logo:"\ud83c\udfae",marketCap:234e8,totalShares:60465e4,events:{earnings:{day:15,month:[2,5,8,11]},dividend:null},news:[{headline:"BlockWorld daily active users reach all-time high",impact:.056,probability:.04},{headline:"BlockWorld introduces new developer monetization features",impact:.042,probability:.035},{headline:"BlockWorld faces increased scrutiny over child safety",impact:-.047,probability:.025}]},{id:"DASH",name:"SwiftBite",fullName:"SwiftBite Delivery Services",sector:"food",basePrice:82.9,volatility:.026,description:"Food delivery platform connecting restaurants with customers via mobile app.",logo:"\ud83c\udf54",marketCap:322e8,totalShares:38842e4,events:{earnings:{day:10,month:[2,5,8,11]},dividend:null},news:[{headline:"SwiftBite expands into grocery delivery",impact:.047,probability:.035},{headline:"SwiftBite driver protests impact major markets",impact:-.039,probability:.03},{headline:"SwiftBite partners with major restaurant chains",impact:.043,probability:.04}]},{id:"RIVN",name:"FlowEV",fullName:"FlowEV Motors",sector:"auto",basePrice:17.3,volatility:.032,description:"Electric vehicle startup focused on trucks and SUVs with advanced autonomous features.",logo:"\ud83d\ude99",marketCap:163e8,totalShares:9422e5,events:{earnings:{day:10,month:[3,6,9,12]},dividend:null},news:[{headline:"FlowEV production capacity doubles with new factory",impact:.065,probability:.03},{headline:"FlowEV delays vehicle launch",impact:-.058,probability:.035},{headline:"FlowEV secures major fleet order",impact:.072,probability:.025}]},{id:"ABNB",name:"StayCation",fullName:"StayCation Rentals, Inc.",sector:"retail",basePrice:126.8,volatility:.023,description:"Online marketplace for short and long-term home and experience rentals worldwide.",logo:"\ud83c\udfe1",marketCap:815e8,totalShares:64274e4,events:{earnings:{day:5,month:[2,5,8,11]},dividend:null},news:[{headline:"StayCation bookings surge to record levels",impact:.054,probability:.04},{headline:"StayCation faces new rental regulations in major cities",impact:-.046,probability:.035},{headline:"StayCation introduces innovative new booking features",impact:.038,probability:.03}]},{id:"SPCE",name:"GalaxyTours",fullName:"GalaxyTours Holdings",sector:"aerospace",basePrice:2.7,volatility:.038,description:"Space tourism company developing spacecraft for commercial suborbital flights.",logo:"\ud83d\ude80",marketCap:99e7,totalShares:36667e4,events:{earnings:{day:22,month:[2,5,8,11]},dividend:null},news:[{headline:"GalaxyTours completes successful test flight",impact:.085,probability:.03},{headline:"GalaxyTours delays commercial launch schedule",impact:-.074,probability:.035},{headline:"GalaxyTours secures major partnership with aerospace giant",impact:.068,probability:.025}]}],jp=[{id:"BTTC",name:"BizTycoon Composite",description:"Tracks all stocks in the market",companies:Tp.map((e=>e.id)),baseValue:12845.63,volatility:.01,logo:"\ud83d\udcca"},{id:"TECH",name:"Technology Index",description:"Tracks technology sector stocks",companies:Tp.filter((e=>"tech"===e.sector)).map((e=>e.id)),baseValue:15720.48,volatility:.015,logo:"\ud83d\udcbb"},{id:"RETA",name:"Retail & Consumer",description:"Tracks retail and consumer goods companies",companies:Tp.filter((e=>"retail"===e.sector)).map((e=>e.id)),baseValue:8652.17,volatility:.012,logo:"\ud83d\uded2"},{id:"FINS",name:"Financial Services",description:"Tracks financial sector companies",companies:Tp.filter((e=>"finance"===e.sector)).map((e=>e.id)),baseValue:5290.36,volatility:.011,logo:"\ud83d\udcb0"},{id:"TRNP",name:"Transportation & Auto",description:"Tracks transportation and automotive companies",companies:Tp.filter((e=>"auto"===e.sector)).map((e=>e.id)),baseValue:4387.92,volatility:.018,logo:"\ud83d\ude97"}],Ip=e=>e>=2?"Market Surging: Enthusiastic buying pushes stocks to significant gains":e>=1?"Market Up: Positive sentiment drives broad market gains":e>=.2?"Market Positive: Modest gains across most sectors":e>-.2?"Market Flat: Sideways trading with minimal movement":e>-1?"Market Dipping: Slight selling pressure across stocks":e>-2?"Market Down: Broad selling pushes most stocks lower":"Market Plunging: Significant selling pressure across all sectors",Pp=[{action:"Stock Buyback",description:"Company repurchases shares to return value to shareholders",impact:.03},{action:"Dividend Increase",description:"Company raises dividend payout to shareholders",impact:.025},{action:"Expansion Announcement",description:"Company announces new markets or products",impact:.035},{action:"Cost-Cutting",description:"Company implements efficiency measures to reduce expenses",impact:.02},{action:"Layoffs",description:"Company reduces workforce to lower costs",impact:-.015},{action:"Executive Change",description:"Company announces new leadership",impact:.01},{action:"Product Recall",description:"Company recalls product due to defects or safety concerns",impact:-.04},{action:"Missed Earnings",description:"Company reports earnings below expectations",impact:-.06},{action:"Earnings Beat",description:"Company reports earnings above expectations",impact:.05},{action:"Strategic Partnership",description:"Company forms alliance with another business",impact:.03},{action:"Acquisition",description:"Company purchases another business",impact:.02},{action:"Legal Settlement",description:"Company resolves legal dispute",impact:.015},{action:"Data Breach",description:"Company suffers security incident exposing data",impact:-.05},{action:"New Patent",description:"Company secures intellectual property protection",impact:.025},{action:"Research Breakthrough",description:"Company makes significant technological advancement",impact:.045}],Ap={APPL:"AAPL",GOOG:"GOOGL",MCSF:"MSFT",AMZN:"AMZN",FCBK:"META",NFLX:"NFLX",TSLA:"TSLA",JPMG:"JPM",BNKA:"BAC",VISA:"V",MSTR:"MA",COCA:"KO",PEPS:"PEP",NIKE:"NKE",SBUX:"SBUX",WLMT:"WMT",TARG:"TGT",COST:"COST",FORD:"F",GENM:"GM",BOEN:"BA",CTRP:"CAT",EXON:"XOM",CHVR:"CVX",JNSN:"JNJ",PFIZ:"PFE",MRCK:"MRK",default_tech:"QQQ",default_finance:"XLF",default_energy:"XLE",default_healthcare:"XLV",default_consumer:"XLP",default_retail:"XRT",default_industrial:"XLI",default:"SPY"},Dp=(e,t)=>{if(Ap[e])return Ap[e];const n=`default_${null===t||void 0===t?void 0:t.toLowerCase()}`;return Ap[n]?Ap[n]:Ap.default},Rp=e=>{if(!e||0===e.length)return 0;return e.reduce(((e,t)=>e+t.currentPrice),0)/e.length},Mp={},Op=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;const n=`${e}_${t}`,r=Mp[n];if(r&&Date.now()-r.timestamp<36e5)return r.data;try{const r=await fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${e}&apikey=demo`);if(!r.ok)throw new Error(`Failed to fetch data: ${r.statusText}`);const i=await r.json();if(i["Error Message"])throw new Error(i["Error Message"]);const s=i["Time Series (Daily)"];if(!s)return Lp(e);const a=Object.keys(s).slice(0,t).map((e=>parseFloat(s[e]["4. close"]))).reverse();return Mp[n]={data:a,timestamp:Date.now()},a}catch(i){return console.error(`Error fetching real-world data for ${e}:`,i),Lp(e)}},Lp=e=>{const t=50+10*e.length,n=.01+.02*Math.random();let r=t;const i=[r];for(let s=1;s<30;s++){r=r*(1+.003*Math.sin(s/5))+(Math.random()-.5)*n*r,r=Math.max(r,.5*t),i.push(r)}return i},Fp=(e,t)=>{switch(t.type){case"UPDATE_STOCK_PRICES":return{...e,companies:t.payload.companies,indices:t.payload.indices,nowAverage:t.payload.nowAverage,lastUpdate:(new Date).toLocaleTimeString(),marketStatus:t.payload.marketStatus,marketTrend:t.payload.marketTrend,marketMood:t.payload.marketMood};case"ADD_NEWS":return{...e,news:[t.payload,...e.news].slice(0,15)};case"BUY_STOCK":const n=t.payload,r=e.companies.map((e=>{if(e.id===n.stockId){const t=e.owned+n.shares,r=n.shares/e.totalShares,i=e.buyPressure+5*r;return{...e,owned:t,transactions:[{type:"buy",shares:n.shares,price:n.price,total:n.total,date:(new Date).toISOString()},...e.transactions],companyOwned:t>.51*e.totalShares,buyPressure:i,sellPressure:Math.max(0,e.sellPressure-2*r)}}return e})),i={id:Date.now(),type:"buy",stockId:n.stockId,shares:n.shares,price:n.price,total:n.total,date:(new Date).toISOString()};let s=[...e.playerOwnedStocks];const a=s.findIndex((e=>e.stockId===n.stockId));return a>=0?s[a]={...s[a],shares:s[a].shares+n.shares,averagePrice:(s[a].totalInvested+n.total)/(s[a].shares+n.shares),totalInvested:s[a].totalInvested+n.total}:s.push({stockId:n.stockId,shares:n.shares,averagePrice:n.price,totalInvested:n.total,purchaseDate:(new Date).toISOString()}),{...e,companies:r,transactionHistory:[i,...e.transactionHistory],playerOwnedStocks:s};case"SELL_STOCK":const o=t.payload,l=e.companies.map((e=>{if(e.id===o.stockId){const t=e.owned-o.shares,n=o.shares/e.totalShares,r=e.sellPressure+5*n;return{...e,owned:t,transactions:[{type:"sell",shares:o.shares,price:o.price,total:o.total,date:(new Date).toISOString()},...e.transactions],companyOwned:t>.51*e.totalShares,sellPressure:r,buyPressure:Math.max(0,e.buyPressure-2*n)}}return e})),c={id:Date.now(),type:"sell",stockId:o.stockId,shares:o.shares,price:o.price,total:o.total,date:(new Date).toISOString()};let u=[...e.playerOwnedStocks];const d=u.findIndex((e=>e.stockId===o.stockId));return d>=0&&(u[d].shares===o.shares?u=u.filter(((e,t)=>t!==d)):u[d]={...u[d],shares:u[d].shares-o.shares,totalInvested:u[d].totalInvested-u[d].averagePrice*o.shares}),{...e,companies:l,transactionHistory:[c,...e.transactionHistory],playerOwnedStocks:u};case"ADD_TO_WATCHLIST":return e.watchlist.includes(t.payload)?e:{...e,watchlist:[...e.watchlist,t.payload]};case"REMOVE_FROM_WATCHLIST":return{...e,watchlist:e.watchlist.filter((e=>e!==t.payload))};case"COMPANY_ACTION":const{companyId:h,action:p,impact:f}=t.payload,m={id:Date.now(),headline:`${e.companies.find((e=>e.id===h)).name} ${p.action}`,content:p.description,impact:f>0?"positive":"negative",timestamp:(new Date).toISOString(),companyId:h};return{...e,news:[m,...e.news].slice(0,15),companies:e.companies.map((e=>{if(e.id===h){const t=e.currentPrice*(1+f);return{...e,previousPrice:e.currentPrice,currentPrice:t,priceHistory:[...e.priceHistory,t].slice(-50),percentChange:100*(t/e.previousPrice-1),trending:f>0?"up":"down",recentNews:m}}return e}))};case"ADVANCE_MARKET_TIME":const{newHour:g,newMinute:y,newDay:v,isOpen:b}=t.payload;return{...e,marketHour:g,marketMinute:y,marketDay:v||e.marketDay,marketOpen:b};case"SET_REAL_WORLD_PRICE_HISTORY":return{...e,companies:e.companies.map((e=>e.id===t.payload.id?{...e,realWorldPriceHistory:t.payload.priceHistory,lastRealWorldUpdate:Date.now()}:e))};case"RECORD_PRICE_CHANGES":return{...e,companies:t.payload.companies,lastPriceRecordTime:t.payload.timestamp};case"REFRESH_PRICES":const x=Date.now(),w=e.marketMood,S=e.companies.map((e=>{const t=e.volatility||.02,n="bullish"===w?.3:"bearish"===w?-.3:0,r=(Math.random()-.5)*t*2+n*t+.01*(e.buyPressure-e.sellPressure),i=Math.max(.01,e.currentPrice*(1+r)),s=i>e.lastRecordedPrice?"up":i<e.lastRecordedPrice?"down":"neutral";return{...e,previousPrice:e.currentPrice,currentPrice:i,lastRecordedPrice:i,priceHistory:[...e.priceHistory,i].slice(-50),percentChange:100*(i/e.previousPrice-1),trending:s,priceDirection:s,priceChangeTime:x,buyPressure:.95*e.buyPressure,sellPressure:.95*e.sellPressure}})),k=Rp(S),N=e.nowAverage.currentValue,E=100*(k/N-1);let _="neutral";E>.05?_="up":E<-.05&&(_="down");const C={...e.nowAverage,previousValue:N,currentValue:k,valueHistory:[...e.nowAverage.valueHistory,k],percentChange:E,trending:_,description:Ip(E)};return{...e,companies:S,nowAverage:C,lastPriceRecordTime:x,lastUpdate:(new Date).toLocaleTimeString()};case"INTERNAL_CLOCK_UPDATE":return{...e,companies:t.payload.companies,nowAverage:t.payload.nowAverage,lastPriceRecordTime:t.payload.timestamp,lastUpdate:(new Date).toLocaleTimeString()};case"MARKET_DAY_ADVANCE":const T=e.nowAverage.currentValue,j={...e.nowAverage,valueHistory:[T]};return{...e,marketDay:e.marketDay+1,marketHour:9,marketMinute:30,nowAverage:j};case"UPDATE_MARKET_TIME":return{...e,marketHour:t.payload.hour,marketMinute:t.payload.minute};default:return e}},Up=(0,r.createContext)(),Vp=e=>{var t;let{children:n}=e;const[i,s]=(0,r.useReducer)(Fp,(()=>{const e=Tp.map((e=>({...e,currentPrice:e.basePrice,previousPrice:e.basePrice,priceHistory:Array(50).fill(e.basePrice).map((e=>e*(.1*Math.random()-.05+1))),percentChange:0,volume:Math.floor(1e7*Math.random()),dayHigh:1.01*e.basePrice,dayLow:.99*e.basePrice,weekHigh:1.05*e.basePrice,weekLow:.95*e.basePrice,trending:"neutral",owned:0,transactions:[],companyOwned:!1,recentNews:null,lastRecordedPrice:e.basePrice,priceDirection:"neutral",priceChangeTime:Date.now(),buyPressure:0,sellPressure:0,priceTrend:0}))),t=jp.map((e=>({...e,currentValue:e.baseValue,previousValue:e.baseValue,valueHistory:Array(50).fill(e.baseValue).map((e=>e*(.08*Math.random()-.04+1))),percentChange:0,trending:"neutral"}))),n=Rp(e);return{companies:e,indices:t,news:[],marketStatus:"Market Opening: Trading begins for the day",lastUpdate:(new Date).toLocaleTimeString(),playerOwnedStocks:[],transactionHistory:[],watchlist:[],marketDay:1,marketHour:9,marketMinute:30,marketOpen:!0,marketTrend:"neutral",marketMood:0,nowAverage:{currentValue:n,previousValue:n,valueHistory:[n],percentChange:0,trending:"neutral",name:"NOW Average",description:"Average of all stocks currently trading on the market"},lastPriceRecordTime:Date.now()}})()),{state:a,dispatch:o}=op(),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),h=(0,r.useRef)(Date.now()),p=(0,r.useRef)(null),f=(0,r.useRef)(null),[m,g]=(0,r.useState)(0),y=()=>{let e=i.marketHour,t=i.marketMinute+1,n=i.marketDay,r=!0;t>=60&&(t=0,e++),e>=16?(r=!1,e>=24&&(e=9,t=30,n++,r=!0)):(e<9||9===e&&t<30)&&(r=!1),s({type:"ADVANCE_MARKET_TIME",payload:{newHour:e,newMinute:t,newDay:n,isOpen:r}})};(0,r.useEffect)((()=>(p.current=setInterval((()=>{i.marketOpen&&b()}),5e3),()=>{p.current&&clearInterval(p.current)})),[]),(0,r.useEffect)((()=>{const e=setInterval((()=>{(()=>{if(s({type:"UPDATE_PRICES_START"}),!i.marketOpen)return;const e=.7*(Math.random()*(_p.MARKET_SENTIMENT.max-_p.MARKET_SENTIMENT.min)+_p.MARKET_SENTIMENT.min)+i.marketMood/100*.3,t=Math.random()<.05?Cp[Math.floor(Math.random()*Cp.length)]:null,n={};Object.keys(_p.SECTOR_TRENDS).forEach((r=>{const i=_p.SECTOR_TRENDS[r],s=Math.random()*(i.max-i.min)+i.min;if(n[r]=.6*e+.4*s,t&&t.sectors.includes(r)){const e="positive"===t.impact?1:"negative"===t.impact?-1:Math.random()>.5?1:-1;n[r]+=e*t.magnitude}}));const r=i.companies.map((e=>{let t=n[e.sector]||0;const r=e.beta||1;t+=(2*Math.random()-1)*e.volatility*r*.4;let i=e.priceTrend||0;i=.95*i+.05*t,i=Math.max(-.5,Math.min(.5,i));const a=.15*(e.buyPressure-e.sellPressure);if(t+=a,t=.5*t+.3*i+.2*a,Math.random()<.01&&e.news&&e.news.length>0){const n=e.news[Math.floor(Math.random()*e.news.length)];Math.random()<n.probability&&(t+=n.impact,s({type:"ADD_NEWS",payload:{id:Date.now(),headline:n.headline,content:`News specific to ${e.name}.`,impact:n.impact>0?"positive":"negative",timestamp:(new Date).toISOString(),companyId:e.id}}))}const l=new Date,c=l.getDate(),u=l.getMonth()+1;if(e.events.earnings&&e.events.earnings.day===c&&e.events.earnings.month.includes(u)){const n=Math.random();let r=0,i="";const a=e.pe?Math.min(Math.sqrt(e.pe/20),1.5):1;n>.6?(r=(.05*Math.random()+.02)/a,i=`${e.name} beats earnings expectations`):n>.25?(r=.02*Math.random()-.01,i=`${e.name} meets earnings expectations`):(r=-(.06*Math.random()+.03)*a,i=`${e.name} misses earnings expectations`),t+=r,s({type:"ADD_NEWS",payload:{id:Date.now(),headline:i,content:`${e.name} reported quarterly earnings.`,impact:r>0?"positive":r<0?"negative":"neutral",timestamp:(new Date).toISOString(),companyId:e.id}})}if(e.events.dividend&&e.events.dividend.day===c&&e.events.dividend.month.includes(u)){t+=.003,s({type:"ADD_NEWS",payload:{id:Date.now(),headline:`${e.name} pays quarterly dividend of $${e.events.dividend.amount} per share`,content:"Shareholders of record received dividends today.",impact:"positive",timestamp:(new Date).toISOString(),companyId:e.id}});const n=e.owned;if(n>0){const t=n*e.events.dividend.amount;o({type:"UPDATE_MONEY",payload:t}),s({type:"ADD_NEWS",payload:{id:Date.now(),headline:`You received $${t.toFixed(2)} in dividends from ${e.name}`,content:`Dividend payment for ${n} shares at $${e.events.dividend.amount} per share.`,impact:"positive",timestamp:(new Date).toISOString(),companyId:e.id,isPersonal:!0}})}}const d=.995*e.buyPressure,h=.995*e.sellPressure;t=Math.max(Math.min(t,.09),-.09);const p=e.currentPrice*(1+t);let f="neutral";t>.0025?f="up":t<-.0025&&(f="down");const m=Math.abs(t)*e.totalShares*.05,g=.75+.5*Math.random(),y=Math.floor(e.volume+m*g),v=Math.max(.01,p),b=(e.priceHistory,Math.max(e.dayHigh,v)),x=Math.min(e.dayLow,v),w=Math.max(e.weekHigh,v),S=Math.min(e.weekLow,v),k=[...e.priceHistory||[],v].slice(-60);return{...e,previousPrice:e.currentPrice,currentPrice:v,priceHistory:k,percentChange:100*(v/e.previousPrice-1),trending:f,volume:y,dayHigh:b,dayLow:x,weekHigh:w,weekLow:S,priceTrend:i,buyPressure:d,sellPressure:h}})),a=i.indices.map((e=>{const t=r.filter((t=>e.companies.includes(t.id))).map((e=>({id:e.id,price:e.currentPrice,prevPrice:e.previousPrice}))),n=t.reduce(((e,t)=>e+t.price),0)/t.length*e.baseValue/100,i=t.reduce(((e,t)=>e+t.prevPrice),0)/t.length*e.baseValue/100;let s="neutral";const a=n/i-1;return a>.001?s="up":a<-.001&&(s="down"),{...e,previousValue:e.currentValue,currentValue:n,valueHistory:[...e.valueHistory,n],percentChange:100*(n/e.previousValue-1),trending:s}})),l=r.reduce(((e,t)=>e+t.marketCap),0),c=100*r.reduce(((e,t)=>{const n=t.marketCap/l;return e+t.currentPrice*n}),0),u=i.nowAverage.currentValue,d=100*(c/u-1);let p="neutral";d>.08?p="up":d<-.08&&(p="down");const f=[...i.nowAverage.valueHistory,c],m={...i.nowAverage,previousValue:u,currentValue:c,valueHistory:f,percentChange:d,trending:p,description:Ip(d)};let g=i.marketMood;d>.5?g+=.5:d>.1?g+=.2:d<-.5?g-=.5:d<-.1&&(g-=.2),g*=.95,g=Math.max(-10,Math.min(10,g));let v="neutral";if(g>3?v="bullish":g>1?v="positive":g<-3?v="bearish":g<-1&&(v="negative"),Math.abs(d)>1.5){const e={id:Date.now(),headline:d>0?`Markets surge ${d.toFixed(1)}% on strong buying pressure`:`Markets plunge ${Math.abs(d).toFixed(1)}% amid broad selling`,content:Ip(d),impact:d>0?"positive":"negative",timestamp:(new Date).toISOString(),isMarketWide:!0};s({type:"ADD_NEWS",payload:e})}t&&s({type:"ADD_NEWS",payload:{id:Date.now(),headline:t.headline,content:`This event is affecting ${t.sectors.join(", ")} sectors.`,impact:t.impact,timestamp:(new Date).toISOString(),sectors:t.sectors}});const x=Ip(d);s({type:"UPDATE_STOCK_PRICES",payload:{companies:r,indices:a,nowAverage:m,marketStatus:x,marketTrend:v,marketMood:g}}),Date.now()-h.current>=5e3&&b(),y()})()}),1e3);return c(e),()=>clearInterval(e)}),[]);(0,r.useEffect)((()=>{const e=async()=>{if(i.companies&&i.companies.length>0){const e=5;for(let t=0;t<i.companies.length;t+=e){const n=i.companies.slice(t,t+e).map((async e=>{if(!e.lastRealWorldUpdate||Date.now()-e.lastRealWorldUpdate>36e5){const t=Dp(e.id,e.sector),n=await Op(t);n&&n.length>0&&s({type:"SET_REAL_WORLD_PRICE_HISTORY",payload:{id:e.id,priceHistory:n}})}}));await Promise.all(n),t+e<i.companies.length&&await new Promise((e=>setTimeout(e,1500)))}}};e();const t=setInterval(e,36e5);return()=>clearInterval(t)}),[null===(t=i.companies)||void 0===t?void 0:t.length]);const v=(0,r.useCallback)((()=>{if(g((e=>e+1)),i.marketOpen){const e=Date.now(),t=i.companies.map((t=>{const n=.012*((t.buyPressure||0)-(t.sellPressure||0)),r=t.volatility||.01,i=.7*n+.3*((2*Math.random()-1)*r*.5),s=Math.max(.01,t.currentPrice*(1+i)),a=s>t.currentPrice?"up":s<t.currentPrice?"down":"neutral";return{...t,previousPrice:t.currentPrice,currentPrice:s,lastRecordedPrice:s,priceHistory:[...t.priceHistory,s].slice(-50),percentChange:100*(s/t.previousPrice-1),trending:a,priceDirection:a,priceChangeTime:e,buyPressure:.98*t.buyPressure,sellPressure:.98*t.sellPressure}})),n=Rp(t),r=i.nowAverage.currentValue,a=100*(n/r-1);let o="neutral";a>.05?o="up":a<-.05&&(o="down");const l={...i.nowAverage,previousValue:r,currentValue:n,valueHistory:[...i.nowAverage.valueHistory,n],percentChange:a,trending:o,description:Ip(a)};s({type:"INTERNAL_CLOCK_UPDATE",payload:{companies:t,nowAverage:l,timestamp:e,clockTick:m}})}}),[i.companies,i.marketOpen,i.nowAverage,m]);(0,r.useEffect)((()=>(!f.current&&v&&(f.current=setInterval((()=>{if(g((e=>e+1)),v(),i.marketOpen){const e=(i.marketMinute+1)%60;let t=i.marketHour;0===e&&(t=(i.marketHour+1)%24),s(16===t&&0===e?{type:"MARKET_DAY_ADVANCE"}:{type:"UPDATE_MARKET_TIME",payload:{hour:t,minute:e}})}}),5e3)),()=>{f.current&&clearInterval(f.current)})),[v,i.marketHour,i.marketMinute,i.marketOpen]);const b=()=>{if(!i.marketOpen)return;const e=Date.now(),t=i.companies.map((t=>{const n=t.currentPrice>t.lastRecordedPrice?"up":t.currentPrice<t.lastRecordedPrice?"down":"neutral";return{...t,lastRecordedPrice:t.currentPrice,priceDirection:n,priceChangeTime:e}}));s({type:"RECORD_PRICE_CHANGES",payload:{companies:t,timestamp:e}}),h.current=e},x={stockMarket:i,buyStock:(e,t)=>{const n=i.companies.find((t=>t.id===e));if(!n)throw new Error(`Company with ID ${e} not found`);if(t<=0)throw new Error("Cannot buy zero or negative shares");const r=n.currentPrice,l=r*t;return a.money<l?{success:!1,message:"Insufficient funds"}:(o({type:"UPDATE_MONEY",payload:-l}),s({type:"BUY_STOCK",payload:{stockId:e,shares:t,price:r,total:l}}),{success:!0,message:`Successfully purchased ${t} shares of ${n.name} for $${l.toFixed(2)}`})},sellStock:(e,t)=>{const n=i.companies.find((t=>t.id===e));if(!n)throw new Error(`Company with ID ${e} not found`);if(t<=0)throw new Error("Cannot sell zero or negative shares");const r=i.playerOwnedStocks.find((t=>t.stockId===e));if(!r||r.shares<t)throw new Error(`You only own ${r?r.shares:0} shares of ${n.name}`);const a=n.currentPrice,l=a*t;return o({type:"UPDATE_MONEY",payload:l}),s({type:"SELL_STOCK",payload:{stockId:e,shares:t,price:a,total:l}}),{success:!0,message:`Successfully sold ${t} shares of ${n.name} for $${l.toFixed(2)}`}},toggleWatchlist:e=>{i.watchlist.includes(e)?s({type:"REMOVE_FROM_WATCHLIST",payload:e}):s({type:"ADD_TO_WATCHLIST",payload:e})},takeCompanyAction:e=>{const t=i.companies.find((t=>t.id===e));if(!t||!t.companyOwned)return{success:!1,message:"You don't control this company"};const n=Pp[Math.floor(Math.random()*Pp.length)];return s({type:"COMPANY_ACTION",payload:{companyId:e,action:n,impact:n.impact}}),{success:!0,message:`Successfully executed ${n.action}`}},dispatch:s};return(0,Wh.jsx)(Up.Provider,{value:x,children:n})},Bp=()=>{const{stockMarket:e,buyStock:t,sellStock:n,toggleWatchlist:i,dispatch:s}=(()=>{const e=(0,r.useContext)(Up);if(void 0===e)throw new Error("useStockMarket must be used within a StockMarketProvider");return e})(),{gameState:a,gameDispatch:o}=op(),[l,c]=(0,r.useState)(0),[u,d]=(0,r.useState)([]),[h,p]=(0,r.useState)(Date.now()),[f,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)("buy"),[x,w]=(0,r.useState)(0),[S,k]=(0,r.useState)({}),[N,E]=(0,r.useState)(null),[_,C]=(0,r.useState)(null),[T,j]=(0,r.useState)(1),[I,P]=(0,r.useState)("buy"),[A,D]=(0,r.useState)(null),[R,M]=(0,r.useState)(!1),[O,L]=(0,r.useState)(""),[F,U]=(0,r.useState)({key:"name",direction:"ascending"}),[V,B]=(0,r.useState)("all"),[z,$]=(0,r.useState)([]),[H,q]=(0,r.useState)(!1),[W,G]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(null),[Y,J]=(0,r.useState)(null),[X,Z]=(0,r.useState)({}),[ee,te]=(0,r.useState)(window.innerWidth),[ne,re]=(0,r.useState)(Date.now()),[ie,se]=(0,r.useState)(0),[ae,oe]=(0,r.useState)(!1),[le,ce]=(0,r.useState)(!1),[ue,de]=(0,r.useState)(Date.now()),[he,pe]=(0,r.useState)(!1),fe=(0,r.useRef)(null),me=(0,r.useRef)(null),ge=(0,r.useRef)(null),ye=(0,r.useRef)(null);(0,r.useMemo)((()=>{if(!e.companies)return["all"];const t=new Set(e.companies.map((e=>e.sector)));return["all",...Array.from(t)]}),[e.companies]);(0,r.useEffect)((()=>{j(1)}),[f]),(0,r.useEffect)((()=>{if(A){const e=setTimeout((()=>{D(null)}),3e3);return()=>clearTimeout(e)}}),[A]),(0,r.useEffect)((()=>{const e=e=>{ge.current&&!ge.current.contains(e.target)&&M(!1)};return R?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[R]),(0,r.useEffect)((()=>{const e=()=>{te(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,r.useEffect)((()=>{if(f&&R)return ye.current=setInterval((()=>{re(Date.now()),se((e=>e+1)),ce(!0),setTimeout((()=>{ce(!1)}),500)}),3e4),()=>{ye.current&&clearInterval(ye.current)}}),[f,R]),(0,r.useEffect)((()=>{f&&f.id!==Y&&(Ce(f),J(f.id))}),[f,Y]),(0,r.useEffect)((()=>{if(!a)return;const t=Date.now();if(t-h<6e4)return;const n=e.playerOwnedStocks.reduce(((t,n)=>{const r=e.companies.find((e=>e.id===n.stockId));return r?t+r.currentPrice*n.shares:t}),0),r=a.money+n;c(r),d((e=>{const n=[...e,{timestamp:t,value:r}];return n.length>100?n.slice(-100):n})),p(t)}),[e,a,h]),(0,r.useEffect)((()=>{const e=setInterval((()=>{Date.now()-ue>3e5&&(pe(!0),s({type:"REFRESH_PRICES"}),de(Date.now()),setTimeout((()=>{pe(!1)}),1e3))}),6e4);return()=>{clearInterval(e)}}),[ue,s]);const ve=(0,r.useCallback)((()=>{if(!ue)return"5:00";const e=Date.now()-ue,t=Math.max(0,3e5-e),n=Math.floor(t/6e4),r=Math.floor(t%6e4/1e3);return`${n}:${r<10?"0":""}${r}`}),[ue]);if(!a)return(0,Wh.jsx)("div",{className:"loading-container",children:"Loading game data..."});const be=a,{money:xe}=be,we=e=>{let t="ascending";F.key===e&&"ascending"===F.direction&&(t="descending"),U({key:e,direction:t})},Se=()=>{if(!e.companies)return[];const t=[...e.companies.filter((e=>("all"===V||e.sector===V)&&(e.name.toLowerCase().includes(O.toLowerCase())||e.id.toLowerCase().includes(O.toLowerCase()))))].sort(((e,t)=>e[F.key]<t[F.key]?"ascending"===F.direction?-1:1:e[F.key]>t[F.key]?"ascending"===F.direction?1:-1:0));return t},ke=e=>F.key!==e?null:(0,Wh.jsx)("span",{className:"ml-1",children:"ascending"===F.direction?"\u2191":"\u2193"});(0,r.useEffect)((()=>{const t={...X};let n=!1;e.companies.forEach((e=>{if(!X[e.id]){n=!0;const r=20;let i;i=e.realWorldPriceHistory&&e.realWorldPriceHistory.length>0?e.realWorldPriceHistory.slice(-r):e.priceHistory.length>=r?e.priceHistory.slice(-r):Ne(e,r),t[e.id]=i}})),n&&Z(t)}),[e.companies.length]);const Ne=(e,t)=>{const n=e.currentPrice,r=.5*(e.volatility||.02);let i=[n];for(let s=1;s<t;s++){const s=r*(.8*Math.random()+.6),a=2*(Math.random()-.5)*s*i[0],o=e.percentChange/100*n*(.01/t),l=i[0]-o+a;i.unshift(Math.max(l,.9*n))}return i},Ee=e=>{const t=50,n=180;let r;if(X[e.id])r=X[e.id];else{const t=20;r=e.realWorldPriceHistory&&e.realWorldPriceHistory.length>0?e.realWorldPriceHistory.slice(-t):e.priceHistory.length>=t?e.priceHistory.slice(-t):Ne(e,t),Z((t=>({...t,[e.id]:r})))}const i=Math.min(...r),s=Math.max(...r)-i||1,a=r.map(((e,a)=>`${a/(r.length-1)*n},${t-(e-i)/s*t}`)).join(" "),o=e.percentChange>=0?"#10B981":"#EF4444",l=t-(r[r.length-1]-i)/s*t;return(0,Wh.jsxs)("svg",{width:"100%",height:t,className:"stock-chart",viewBox:"0 0 180 50",preserveAspectRatio:"xMidYMid meet","data-company-id":e.id,children:[(0,Wh.jsx)("polygon",{points:a+" 180,50 0,50",fill:e.percentChange>=0?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)"}),(0,Wh.jsx)("polyline",{points:a,fill:"none",stroke:o,strokeWidth:"2"}),(0,Wh.jsx)("circle",{cx:180,cy:l,r:"3",fill:o}),(0,Wh.jsx)("rect",{x:"0",y:"0",width:n,height:t,fill:"transparent",className:"chart-hover-area","data-points":a,"data-color":o,"data-min-price":i,"data-price-range":s})]})},_e=e=>{if(m(e),j(1),P("buy"),M(!0),J(e.id),re(Date.now()),se(0),e.priceHistory&&e.priceHistory.length>0){const t=Math.min(60,e.priceHistory.length);Q(e.priceHistory.slice(-t))}else Q([e.currentPrice])},Ce=e=>{if(!e)return;const t=e.currentPrice;if(K&&K.length>0&&Y===e.id){if(K[K.length-1]!==t){const e=[...K,t];e.length>60?Q(e.slice(-60)):Q(e)}}else if(e.priceHistory&&e.priceHistory.length>0){const n=Math.min(60,e.priceHistory.length);Q([...e.priceHistory.slice(-n),t])}else Q([t])},Te=()=>{if(f&&!(T<=0))try{if("buy"===I){if(f.currentPrice*T>xe)return void D({type:"error",message:"Insufficient funds for this purchase"});const e=t(f.id,T);if(!e.success)return void D({type:"error",message:e.message||"Transaction failed"});D({type:"success",message:e.message})}else{const t=e.playerOwnedStocks.find((e=>e.stockId===f.id));if(!t||t.shares<T)return void D({type:"error",message:"You don't own enough shares to sell"});const r=n(f.id,T);if(!r.success)return void D({type:"error",message:r.message||"Transaction failed"});D({type:"success",message:r.message})}j(1),M(!1)}catch(r){D({type:"error",message:"Transaction failed: "+r.message})}},je=t=>{if(!t)return null;const n=200,r=Math.min(450,ee-60);let i;Y===t.id&&K&&0!==K.length?i=K:(Ce(t),i=[t.currentPrice]),1===i.length&&(i=[i[0],i[0]]);const s=Math.min(...i),a=Math.max(...i),o=a-s||1,l=Math.floor(.998*s),c=Math.ceil(1.002*a),u=i.map(((e,t)=>`${t/(i.length-1)*r},${n-(e-s)/o*n}`)).join(" "),d=i[i.length-1]>=i[0],h=d?"#10B981":"#EF4444",p=d?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",f=u+` ${r},200 0,200`,m=r,g=n-(i[i.length-1]-s)/o*n;let y=[];for(let v=0;v<6;v++){const t=Math.floor(v*(i.length-1)/5),n=Math.floor(.5*(i.length-1-t)),r=e.marketMinute,s=e.marketHour;let a=(r-n+60)%60,o=s;n>r&&(o=(s-Math.ceil(n/60)+24)%24,a=(a+60)%60);const l=a.toString().padStart(2,"0");y.push(`${o}:${l}`)}return(0,Wh.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,Wh.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Price History"}),(0,Wh.jsxs)("div",{className:"relative chart-container",children:[(0,Wh.jsxs)("svg",{width:"100%",height:230,className:"detailed-stock-chart",id:"detailed-chart",viewBox:`0 0 ${r} 230`,preserveAspectRatio:"xMidYMid meet",children:[(0,Wh.jsx)("polygon",{points:f,fill:p}),(0,Wh.jsx)("polyline",{points:u,fill:"none",stroke:h,strokeWidth:"2",className:"price-line"}),(0,Wh.jsx)("circle",{cx:m,cy:g,r:"4",fill:h,className:"end-point"}),(0,Wh.jsx)("circle",{cx:"0",cy:"0",r:"0",fill:h,className:"hover-point",opacity:"0"}),(0,Wh.jsxs)("g",{className:"price-tooltip",opacity:"0",transform:"translate(0,0)",children:[(0,Wh.jsx)("rect",{x:"-40",y:"-30",width:"80",height:"22",rx:"4",fill:"rgba(0,0,0,0.7)"}),(0,Wh.jsx)("text",{x:"0",y:"-15",fill:"white","text-anchor":"middle","font-size":"12",className:"tooltip-text",children:"$0.00"})]}),(0,Wh.jsx)("line",{x1:"0",y1:n,x2:r,y2:n,stroke:"#e5e7eb",strokeWidth:"1"}),y.map(((e,t)=>{const n=t/(y.length-1)*r;return(0,Wh.jsx)("text",{x:n,y:220,textAnchor:0===t?"start":t===y.length-1?"end":"middle",fill:"#6b7280",fontSize:"12",children:e},t)})),(0,Wh.jsxs)("text",{x:"5",y:"15",textAnchor:"start",fill:"#6b7280",fontSize:"12",children:["$",c.toFixed(2)]}),(0,Wh.jsxs)("text",{x:"5",y:195,textAnchor:"start",fill:"#6b7280",fontSize:"12",children:["$",l.toFixed(2)]}),(0,Wh.jsx)("line",{x1:"0",y1:n-(t.currentPrice-s)/o*n,x2:r,y2:n-(t.currentPrice-s)/o*n,stroke:h,strokeWidth:"1",strokeDasharray:"2,2"}),(0,Wh.jsx)("rect",{x:"0",y:"0",width:r,height:n,fill:"transparent",className:"detailed-chart-hover-area","data-points":u,"data-color":h,"data-min-price":s,"data-price-range":o,"data-price-data":JSON.stringify(i)})]}),(0,Wh.jsx)("div",{className:"absolute top-1/2 right-2 transform -translate-y-1/2",children:(0,Wh.jsx)("div",{className:"px-2 py-1 rounded "+(d?"bg-green-100":"bg-red-100"),children:(0,Wh.jsxs)("span",{className:"text-sm font-medium "+(d?"text-green-700":"text-red-700"),children:["$",t.currentPrice.toFixed(2)]})})})]}),(0,Wh.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 mt-4 text-sm",children:[(0,Wh.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,Wh.jsx)("span",{className:"block text-gray-500",children:"First Point"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",i[0].toFixed(2)]})]}),(0,Wh.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,Wh.jsx)("span",{className:"block text-gray-500",children:"Current"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",t.currentPrice.toFixed(2)]})]}),(0,Wh.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,Wh.jsx)("span",{className:"block text-gray-500",children:"High"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",a.toFixed(2)]})]}),(0,Wh.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,Wh.jsx)("span",{className:"block text-gray-500",children:"Low"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",s.toFixed(2)]})]})]})]})};(0,r.useEffect)((()=>{const t=(e,t)=>{if(!e||0===e.length)return null;const n=e.split(" ").map((e=>{const[t,n]=e.split(",").map(parseFloat);return{x:t,y:n}}));let r=null,i=1/0;return n.forEach((e=>{const n=Math.abs(e.x-t);n<i&&(i=n,r=e)})),r},n=e=>{const n=e.currentTarget,r=n.parentNode,i=n.getAttribute("data-points"),s=n.getAttribute("data-color");let a=r.querySelector(".hover-dot");a||(a=document.createElementNS("http://www.w3.org/2000/svg","circle"),a.setAttribute("class","hover-dot"),a.setAttribute("r","3"),a.setAttribute("fill",s),r.appendChild(a));const o=r.getBoundingClientRect(),l=e.clientX-o.left,c=t(i,l);c&&(a.setAttribute("cx",c.x),a.setAttribute("cy",c.y),a.style.opacity="1")},r=e=>{const t=e.currentTarget.parentNode.querySelector(".hover-dot");t&&(t.style.opacity="0")},i=n=>{const r=n.currentTarget,i=r.parentNode,s=r.getAttribute("data-points"),a=(parseFloat(r.getAttribute("data-min-price")),parseFloat(r.getAttribute("data-price-range")),JSON.parse(r.getAttribute("data-price-data"))),o=i.querySelector(".hover-point"),l=i.querySelector(".price-tooltip"),c=i.querySelector(".tooltip-text"),u=i.getBoundingClientRect(),d=n.clientX-u.left,h=t(s,d);if(h){o.setAttribute("cx",h.x),o.setAttribute("cy",h.y),o.setAttribute("r","5"),o.style.opacity="1";const t=h.x/u.width,n=Math.round(t*(a.length-1)),r=a[n],i=Math.round((a.length-1-n)*(60/a.length)),s=e.marketMinute,d=e.marketHour;let p=d;s<i&&(p=(d-1+24)%24);const f=`${p}:${((s-i+60)%60).toString().padStart(2,"0")}`;c.textContent=`$${r.toFixed(2)} @ ${f}`,l.setAttribute("transform",`translate(${h.x},${h.y-5})`),l.style.opacity="1";const m=l.querySelector("rect");m&&(m.setAttribute("width","120"),m.setAttribute("x","-60"))}},s=e=>{const t=e.currentTarget.parentNode,n=t.querySelector(".hover-point"),r=t.querySelector(".price-tooltip");n&&(n.style.opacity="0"),r&&(r.style.opacity="0")},a=document.querySelectorAll(".chart-hover-area");a.forEach((e=>{e.addEventListener("mousemove",n),e.addEventListener("mouseleave",r)}));const o=document.querySelector(".detailed-chart-hover-area");return o&&(o.addEventListener("mousemove",i),o.addEventListener("mouseleave",s)),()=>{a.forEach((e=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseleave",r)})),o&&(o.removeEventListener("mousemove",i),o.removeEventListener("mouseleave",s))}}),[R,Se().length,e.marketHour,e.marketMinute]),(0,r.useEffect)((()=>{if(e.companies){const t={};e.companies.forEach((e=>{if(S[e.id]?t[e.id]=Array.isArray(S[e.id])?[...S[e.id]]:[]:t[e.id]=[],e.priceDirection&&e.priceChangeTime){t[e.id].find((t=>t.timestamp===e.priceChangeTime))||(t[e.id].push({price:e.lastRecordedPrice,direction:e.priceDirection,timestamp:e.priceChangeTime}),t[e.id].length>10&&(t[e.id]=t[e.id].slice(-10)))}})),k(t)}}),[e.companies,e.lastPriceRecordTime]),(0,r.useEffect)((()=>{if(!R)return;const e=setInterval((()=>{re((e=>e))}),1e3);return()=>clearInterval(e)}),[R]),(0,r.useEffect)((()=>(fe.current&&clearInterval(fe.current),fe.current=setInterval((()=>{pe(!0),s({type:"REFRESH_PRICES"}),de(Date.now()),setTimeout((()=>pe(!1)),800)}),5e3),()=>{fe.current&&(clearInterval(fe.current),fe.current=null)})),[s]),(0,r.useEffect)((()=>{const e=setInterval((()=>{de((e=>e))}),1e3);return()=>clearInterval(e)}),[]);const Ie=(0,r.useCallback)((()=>{let t=xe;return t+=e.playerOwnedStocks.reduce(((t,n)=>{const r=e.companies.find((e=>e.id===n.stockId));return r?t+n.shares*r.currentPrice:t}),0),t}),[xe,e.playerOwnedStocks,e.companies]);(0,r.useEffect)((()=>{const e=Date.now();if(e-h>1e3){const t=Ie();if(t!==l){c(t);const n=document.querySelector(".net-worth-value");n&&(n.classList.add("net-worth-pulse"),setTimeout((()=>{n.classList.remove("net-worth-pulse")}),500)),d((n=>{const r=[...n,{value:t,timestamp:e}];return r.length>100?r.slice(-100):r}))}p(e)}}),[xe,e.playerOwnedStocks,e.companies,Ie,h,l]);const Pe=()=>{const e=60,t=u.length>1?u:1===u.length?[...u,...u]:[{value:xe,timestamp:Date.now()-1e4},{value:xe,timestamp:Date.now()}],n=t.map((e=>e.value)),r=Math.min(...n),i=Math.max(...n)-r||1,s=t.map(((n,s)=>`${s/(t.length-1)*300},${e-(n.value-r)/i*e*.8+6}`)).join(" "),a=t[t.length-1].value>=t[0].value,o=a?"#10B981":"#EF4444",l=a?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",c=s+" 300,60 0,60";return(0,Wh.jsxs)("svg",{width:"100%",height:e,className:"net-worth-chart",viewBox:"0 0 300 60",preserveAspectRatio:"xMidYMid meet",children:[(0,Wh.jsx)("polygon",{points:c,fill:l}),(0,Wh.jsx)("polyline",{points:s,fill:"none",stroke:o,strokeWidth:"2"})]})},Ae=()=>{const{nowAverage:t}=e;if(!t||!t.valueHistory||t.valueHistory.length<2)return(0,Wh.jsx)("div",{className:"flex items-center justify-center h-full text-xs text-gray-400",children:"Collecting market data..."});const n=t.valueHistory.filter((e=>Number.isFinite(e)));if(n.length<2)return(0,Wh.jsx)("div",{className:"flex items-center justify-center h-full text-xs text-gray-400",children:"Waiting for valid data..."});const r=n,i=Math.min(...r),s=Math.max(...r)-i||1,a=r.map(((e,t)=>{const n=t/(r.length-1)*100;let a=60-(e-i)/s*60;return Number.isFinite(a)||(a=30),`${0===t?"M":"L"} ${n}% ${a.toFixed(2)}`})).join(" "),o=r[r.length-1]>=r[0]?"#22c55e":"#ef4444";return(0,Wh.jsx)("svg",{width:"100%",height:60,preserveAspectRatio:"none",className:"overflow-visible",children:(0,Wh.jsx)("path",{d:a,fill:"none",stroke:o,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})},De=()=>{const{nowAverage:t}=e;if(!t||"undefined"===typeof t.currentValue)return(0,Wh.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 text-center text-gray-500",children:"Loading Market Data..."});const n=t.currentValue.toFixed(2),r=(t.percentChange>=0?"+":"")+t.percentChange.toFixed(2),i=t.percentChange>=0,s=i?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400";return(0,Wh.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden mb-6 border border-gray-200 dark:border-gray-700",children:(0,Wh.jsxs)("div",{className:"p-5",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"NOW Average"}),(0,Wh.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Overall Market Indicator"})]}),(0,Wh.jsxs)("div",{className:"text-right",children:[(0,Wh.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n}),(0,Wh.jsxs)("p",{className:`text-sm font-medium ${s} flex items-center justify-end`,children:[r,"%",i?(0,Wh.jsx)("svg",{className:"ml-1 w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):(0,Wh.jsx)("svg",{className:"ml-1 w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]}),(0,Wh.jsx)("div",{className:"h-16 -mx-5 -mb-5 mt-2 opacity-80",children:(0,Wh.jsx)(Ae,{})})]})})};return(0,Wh.jsxs)("div",{className:"bg-gray-50 min-h-screen p-4",children:[(0,Wh.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Wh.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Stock Market"}),(0,Wh.jsx)("p",{className:"text-gray-600",children:"Invest in companies and build your portfolio"})]}),(0,Wh.jsxs)("div",{className:"mt-4 md:mt-0 bg-white px-4 py-3 rounded-lg shadow border border-gray-200",children:[(0,Wh.jsx)("p",{className:"text-gray-500 text-sm",children:"Available Funds"}),(0,Wh.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",xe.toLocaleString()]})]})]}),(0,Wh.jsx)("div",{className:"bg-gray-900 overflow-hidden rounded-lg mb-6",children:(0,Wh.jsx)("div",{className:"ticker-wrapper",children:(0,Wh.jsx)("div",{className:"ticker",ref:me,children:e.companies.map((e=>(0,Wh.jsxs)("div",{className:"ticker-item",children:[(0,Wh.jsx)("span",{className:"ticker-symbol",children:e.id}),(0,Wh.jsxs)("span",{className:"ticker-price "+("up"===e.trending?"text-green-400":"down"===e.trending?"text-red-400":"text-gray-300"),children:["$",e.currentPrice.toFixed(2)]}),(0,Wh.jsxs)("span",{className:"ticker-change "+(e.percentChange>=0?"text-green-400":"text-red-400"),children:[e.percentChange>=0?"+":"",e.percentChange.toFixed(2),"%"]})]},e.id)))})})}),(0,Wh.jsx)(De,{}),(()=>{const e=l,t=u.length>24?u[u.length-25].value:u.length>0?u[0].value:e,n=e-t,r=0!==t?n/t*100:0,i=n>=0,s=i?"from-green-500/10 to-blue-500/5":"from-red-500/10 to-orange-500/5",a=i?"text-green-500":"text-red-500",o=i?"\ud83d\udcc8":"\ud83d\udcc9";return(0,Wh.jsxs)("div",{className:`bg-gradient-to-br ${s} rounded-lg shadow-md overflow-hidden border border-gray-200 mb-6 relative transition-all duration-500`,children:[(0,Wh.jsx)("div",{className:"absolute inset-0 opacity-30",children:Pe()}),(0,Wh.jsxs)("div",{className:"p-4 relative z-10",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Wh.jsxs)("div",{children:[(0,Wh.jsxs)("div",{className:"flex items-center mb-1",children:[(0,Wh.jsx)("span",{className:`mr-2 ${a}`,children:o}),(0,Wh.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Net Worth"})]}),(0,Wh.jsxs)("p",{className:"text-2xl font-bold text-gray-800 net-worth-value",children:["$",e.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,Wh.jsxs)("div",{className:"flex flex-col items-end",children:[(0,Wh.jsxs)("div",{className:"text-sm font-medium "+(n>=0?"text-green-600":"text-red-600"),children:[n>=0?"+":"-","$",Math.abs(n).toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,Wh.jsxs)("div",{className:"text-xs "+(n>=0?"text-green-600":"text-red-600"),children:["(",n>=0?"+":"",r.toFixed(2),"%)"]})]})]}),(0,Wh.jsxs)("div",{className:"mt-2 text-xs text-gray-500 flex items-center justify-between",children:[(0,Wh.jsx)("span",{children:"Includes cash, stocks, and other assets"}),(0,Wh.jsx)("span",{className:"text-xs text-gray-400",children:(new Date).toLocaleDateString()})]})]})]})})(),(0,Wh.jsxs)("div",{className:"mb-8",children:[(()=>{const e=ve();return(0,Wh.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsxs)("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83d\udcca"})," Stock Market"]}),(0,Wh.jsx)("span",{className:"ml-4 text-sm text-gray-500",children:he?(0,Wh.jsx)("span",{className:"text-blue-500",children:"Refreshing..."}):(0,Wh.jsxs)("span",{children:["Next update in ",(0,Wh.jsx)("span",{className:"font-semibold",children:e}),"s (5 min in-game)"]})})]}),(0,Wh.jsx)("button",{onClick:()=>q(!H),className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:H?(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]})})(),!H&&(0,Wh.jsxs)(Wh.Fragment,{children:[(0,Wh.jsx)("div",{className:"bg-white p-4 rounded-t-lg border border-gray-200 border-b-0",children:(0,Wh.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0",children:[(0,Wh.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,Wh.jsx)("input",{type:"text",placeholder:"Search by name or ticker...",value:O,onChange:e=>L(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md pl-10"}),(0,Wh.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Wh.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,Wh.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,Wh.jsx)("label",{className:"text-gray-600 text-sm",children:"Sector:"}),(0,Wh.jsxs)("select",{value:V,onChange:e=>B(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Wh.jsx)("option",{value:"all",children:"All Sectors"}),z.map((e=>(0,Wh.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))]})]})]})}),(0,Wh.jsx)("div",{className:"bg-white rounded-b-lg shadow border border-gray-200 overflow-hidden "+(he?"data-refreshed":""),children:(0,Wh.jsx)("div",{className:"overflow-x-auto max-w-full mobile-table-container",children:(0,Wh.jsxs)("table",{className:"w-full min-w-[640px] stock-table",children:[(0,Wh.jsx)("thead",{children:(0,Wh.jsxs)("tr",{className:"bg-gray-50 text-left",children:[(0,Wh.jsxs)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm cursor-pointer w-[15%]",onClick:()=>we("id"),children:["Ticker ",ke("id")]}),(0,Wh.jsxs)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm cursor-pointer w-[30%]",onClick:()=>we("name"),children:["Name ",ke("name")]}),(0,Wh.jsxs)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm cursor-pointer w-[15%]",onClick:()=>we("currentPrice"),children:["Price ",ke("currentPrice")]}),(0,Wh.jsxs)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm cursor-pointer w-[15%]",onClick:()=>we("percentChange"),children:["Change ",ke("percentChange")]}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[25%]",children:"Last Day"})]})}),(0,Wh.jsx)("tbody",{children:Se().map((e=>(0,Wh.jsxs)("tr",{className:"border-t border-gray-100 hover:bg-gray-50 cursor-pointer",onClick:()=>_e(e),children:[(0,Wh.jsx)("td",{className:"px-2 py-2 font-medium",children:e.id}),(0,Wh.jsx)("td",{className:"px-2 py-2",children:(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"text-xl mr-2",children:e.logo}),(0,Wh.jsx)("span",{className:"truncate",children:e.name})]})}),(0,Wh.jsx)("td",{className:"px-2 py-2 font-medium",children:(0,Wh.jsxs)("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full inline-block",children:["$",e.currentPrice.toFixed(2)]})}),(0,Wh.jsxs)("td",{className:"px-2 py-2 font-medium "+(e.percentChange>=0?"text-green-600":"text-red-600"),children:[e.percentChange>=0?"+":"",e.percentChange.toFixed(2),"%"]}),(0,Wh.jsx)("td",{className:"px-2 py-2",children:Ee(e)})]},e.id)))})]})})})]})]}),(0,Wh.jsxs)("div",{className:"mt-8",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Wh.jsxs)("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,Wh.jsx)("span",{className:"mr-2",children:"\ud83d\udcbc"})," Your Portfolio"]}),(0,Wh.jsx)("button",{onClick:()=>G(!W),className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:W?(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Wh.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]}),!W&&(0,Wh.jsxs)(Wh.Fragment,{children:[(0,Wh.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,Wh.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 border border-gray-200",children:[(0,Wh.jsx)("p",{className:"text-sm text-gray-500",children:"Total Holdings"}),(0,Wh.jsxs)("p",{className:"text-2xl font-bold text-gray-800",children:["$",e.playerOwnedStocks.reduce(((t,n)=>{const r=e.companies.find((e=>e.id===n.stockId));return t+n.shares*r.currentPrice}),0).toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,Wh.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 border border-gray-200",children:[(0,Wh.jsx)("p",{className:"text-sm text-gray-500",children:"Total Stocks Owned"}),(0,Wh.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:e.playerOwnedStocks.reduce(((e,t)=>e+t.shares),0)})]}),(0,Wh.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 border border-gray-200",children:[(0,Wh.jsx)("p",{className:"text-sm text-gray-500",children:"Different Companies"}),(0,Wh.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:e.playerOwnedStocks.length})]})]}),(0,Wh.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:e.playerOwnedStocks.length>0?(0,Wh.jsx)("div",{className:"overflow-x-auto max-w-full mobile-table-container",children:(0,Wh.jsxs)("table",{className:"w-full min-w-[640px] stock-table",children:[(0,Wh.jsx)("thead",{children:(0,Wh.jsxs)("tr",{className:"bg-gray-50 text-left",children:[(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[25%]",children:"Company"}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[10%]",children:"Shares"}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[15%]",children:"Current Value"}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[20%]",children:"Daily Change"}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[20%]",children:"Chart"}),(0,Wh.jsx)("th",{className:"px-2 py-2 text-gray-500 font-medium text-sm w-[10%]",children:"Action"})]})}),(0,Wh.jsx)("tbody",{children:e.playerOwnedStocks.map((t=>{const n=e.companies.find((e=>e.id===t.stockId)),r=t.shares*n.currentPrice,i=t.shares*n.previousPrice,s=r-i,a=s/i*100;return(0,Wh.jsxs)("tr",{className:"border-t border-gray-100 hover:bg-gray-50 cursor-pointer",onClick:()=>_e(n),children:[(0,Wh.jsx)("td",{className:"px-2 py-2",children:(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"text-xl mr-2",children:n.logo}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("span",{className:"font-medium block",children:n.name}),(0,Wh.jsx)("span",{className:"text-xs text-gray-500",children:n.id})]})]})}),(0,Wh.jsx)("td",{className:"px-2 py-2 font-medium",children:t.shares}),(0,Wh.jsx)("td",{className:"px-2 py-2 font-medium",children:(0,Wh.jsxs)("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full inline-block",children:["$",r.toLocaleString(void 0,{maximumFractionDigits:2})]})}),(0,Wh.jsxs)("td",{className:"px-2 py-2 font-medium "+(s>=0?"text-green-600":"text-red-600"),children:[s>=0?"+":"","$",Math.abs(s).toLocaleString(void 0,{maximumFractionDigits:2}),"(",a>=0?"+":"",a.toFixed(2),"%)"]}),(0,Wh.jsx)("td",{className:"px-2 py-2",children:Ee(n)}),(0,Wh.jsx)("td",{className:"px-2 py-2",children:(0,Wh.jsx)("button",{onClick:e=>{e.stopPropagation(),_e(n),P("sell")},className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Sell"})})]},n.id)}))})]})}):(0,Wh.jsxs)("div",{className:"p-8 text-center",children:[(0,Wh.jsx)("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,Wh.jsx)("span",{className:"text-2xl text-gray-400",children:"\ud83d\udcc8"})}),(0,Wh.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No Stocks Owned Yet"}),(0,Wh.jsx)("p",{className:"text-gray-500 max-w-md mx-auto",children:"Start building your portfolio by investing in companies from the market list above."})]})})]})]}),(0,Wh.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-500",children:[(0,Wh.jsxs)("p",{children:["Market Day: ",e.marketDay," | Time: ",e.marketHour,":",e.marketMinute.toString().padStart(2,"0")]}),(0,Wh.jsx)("p",{className:"mt-2",children:e.marketOpen?(0,Wh.jsx)("span",{className:"text-green-600",children:"Market Open"}):(0,Wh.jsx)("span",{className:"text-red-600",children:"Market Closed"})})]})]}),(()=>{if(!A)return null;const e="success"===A.type?"bg-green-100 border-green-400":"bg-red-100 border-red-400",t="success"===A.type?"text-green-700":"text-red-700";return(0,Wh.jsx)("div",{className:`fixed bottom-4 right-4 px-4 py-3 rounded border ${e} ${t} max-w-md`,children:(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"mr-2",children:"success"===A.type?"\u2705":"\u274c"}),(0,Wh.jsx)("p",{children:A.message})]})})})(),(()=>{if(!R||!f)return null;const t=f,n=t.currentPrice*T,r="buy"===I?Math.floor(xe/t.currentPrice):(()=>{const t=e.playerOwnedStocks.find((e=>e.stockId===f.id));return t?t.shares:0})(),i=Date.now()-ne,s=Math.max(0,Math.ceil((5e3-i)/1e3));return(0,Wh.jsx)("div",{className:"modal-overlay",children:(0,Wh.jsxs)("div",{ref:ge,className:"modal-content max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,Wh.jsxs)("div",{className:"bg-gray-800 text-white p-4 flex items-center justify-between ${showRefreshAnimation ? 'data-refreshed' : ''}",children:[(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("span",{className:"text-2xl mr-3",children:t.logo}),(0,Wh.jsxs)("div",{children:[(0,Wh.jsx)("h3",{className:"font-bold text-lg",children:t.name}),(0,Wh.jsxs)("div",{className:"text-sm text-gray-300 flex items-center",children:[(0,Wh.jsx)("span",{className:"font-mono",children:t.id}),(0,Wh.jsx)("span",{className:"mx-2",children:"\u2022"}),(0,Wh.jsx)("span",{children:t.sector.toUpperCase()})]})]})]}),(0,Wh.jsxs)("div",{className:"text-right",children:[(0,Wh.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,Wh.jsxs)("div",{className:"text-2xl font-bold",children:["$",t.currentPrice.toFixed(2)]})}),(0,Wh.jsxs)("div",{className:"text-sm "+(t.percentChange>=0?"text-green-400":"text-red-400"),children:[t.percentChange>=0?"+":"",t.percentChange.toFixed(2),"%"]}),(0,Wh.jsxs)("div",{className:"text-xs text-gray-400 mt-1 flex items-center justify-end",children:[(0,Wh.jsx)("span",{children:s>0?`Next update in ${s}s`:"Updating..."}),ie>0&&(0,Wh.jsxs)("span",{className:"ml-2 text-gray-500",children:["(",ie," update",1!==ie?"s":"",")"]})]})]})]}),(0,Wh.jsx)("div",{className:"p-4 border-b border-gray-200 "+(le?"data-refreshed":""),children:je(t)}),(0,Wh.jsx)("div",{className:"px-4 pt-4 pb-2 flex justify-center",children:(0,Wh.jsxs)("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[(0,Wh.jsx)("button",{type:"button",onClick:()=>M(!1),className:"px-4 py-2 text-sm font-medium rounded-l-lg "+(R?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-600 text-white"),children:"Cancel"}),(0,Wh.jsxs)("button",{onClick:()=>Te(),className:"px-4 py-2 text-sm font-medium rounded-r-lg "+(R?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["buy"===I?"Buy":"Sell"," ",T," Shares"]})]})}),(0,Wh.jsxs)("div",{className:"p-4 "+(le?"data-refreshed":""),children:[(0,Wh.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Wh.jsxs)("div",{className:"flex",children:[(0,Wh.jsx)("button",{className:"px-4 py-2 rounded-l-lg "+("buy"===I?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>P("buy"),children:"Buy"}),(0,Wh.jsx)("button",{className:"px-4 py-2 rounded-r-lg "+("sell"===I?"bg-red-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>P("sell"),disabled:(()=>{const t=e.playerOwnedStocks.find((e=>e.stockId===f.id));return!t||t.shares<=0})(),children:"Sell"})]}),(0,Wh.jsx)("div",{className:"text-sm text-gray-500",children:"buy"===I?`Max: ${r} shares`:`Owned: ${(()=>{const t=e.playerOwnedStocks.find((e=>e.stockId===f.id));return t?t.shares:0})()} shares`})]}),(0,Wh.jsxs)("div",{className:"mb-4",children:[(0,Wh.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,Wh.jsxs)("div",{className:"quantity-input",children:[(0,Wh.jsx)("button",{className:"quantity-button",onClick:()=>j(Math.max(1,T-1)),children:"\u2212"}),(0,Wh.jsx)("input",{type:"number",min:"1",max:r,value:T,onChange:e=>j(Math.min(r,Math.max(1,parseInt(e.target.value)||1))),className:"flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 text-center"}),(0,Wh.jsx)("button",{className:"quantity-button",onClick:()=>j(Math.min(r,T+1)),children:"+"})]})]}),(0,Wh.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md mb-4 "+(le?"data-refreshed":""),children:[(0,Wh.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Share Price:"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",t.currentPrice.toFixed(2)]})]}),(0,Wh.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Quantity:"}),(0,Wh.jsx)("span",{className:"font-medium",children:T})]}),(0,Wh.jsxs)("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[(0,Wh.jsx)("span",{className:"text-gray-700 font-medium",children:"Total Value:"}),(0,Wh.jsxs)("span",{className:"font-bold",children:["$",n.toFixed(2)]})]})]}),(0,Wh.jsxs)("div",{className:"flex space-x-3",children:[(0,Wh.jsx)("button",{className:"flex-1 py-2 px-4 rounded-md font-medium bg-gray-300 hover:bg-gray-400 text-gray-800 cancel-button",onClick:()=>M(!1),children:"Cancel"}),(0,Wh.jsxs)("button",{className:"flex-1 py-2 px-4 rounded-md font-medium "+("buy"===I?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"),onClick:Te,disabled:"buy"===I&&n>xe||"sell"===I&&(()=>{const t=e.playerOwnedStocks.find((e=>e.stockId===f.id));return!t||t.shares<T})(),children:["buy"===I?"Buy":"Sell"," ",T," Shares"]})]}),"buy"===I&&(0,Wh.jsxs)("div",{className:"mt-4 text-sm "+(le?"data-refreshed":""),children:[(0,Wh.jsxs)("div",{className:"flex justify-between",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Available Cash:"}),(0,Wh.jsxs)("span",{className:"font-medium",children:["$",xe.toLocaleString()]})]}),(0,Wh.jsxs)("div",{className:"flex justify-between",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Remaining After Purchase:"}),(0,Wh.jsxs)("span",{className:"font-medium "+(xe-n<0?"text-red-600":""),children:["$",(xe-n).toLocaleString()]})]})]}),"sell"===I&&(()=>{const t=e.playerOwnedStocks.find((e=>e.stockId===f.id));return t&&t.shares>0})()&&(0,Wh.jsxs)("div",{className:"mt-4 text-sm "+(le?"data-refreshed":""),children:[(0,Wh.jsxs)("div",{className:"flex justify-between",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Current Position:"}),(0,Wh.jsx)("span",{className:"font-medium",children:(()=>{const n=e.playerOwnedStocks.find((e=>e.stockId===f.id)),r=n?n.shares:0;return`${r} shares (${(r*t.currentPrice).toLocaleString()})`})()})]}),(0,Wh.jsxs)("div",{className:"flex justify-between",children:[(0,Wh.jsx)("span",{className:"text-gray-600",children:"Remaining After Sale:"}),(0,Wh.jsx)("span",{className:"font-medium",children:(()=>{const n=e.playerOwnedStocks.find((e=>e.stockId===f.id)),r=(n?n.shares:0)-T;return`${r} shares (${(r*t.currentPrice).toLocaleString()})`})()})]})]})]})]})})})()]})},zp=(0,r.createContext)(),$p=e=>{let{children:t}=e;const[n,i]=(0,r.useState)((()=>{const e=localStorage.getItem("theme");return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}));return(0,r.useEffect)((()=>{document.documentElement.removeAttribute("data-theme"),"dark"===n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),[n]),(0,Wh.jsx)(zp.Provider,{value:{theme:n,toggleTheme:()=>{i((e=>{const t="light"===e?"dark":"light";return localStorage.setItem("theme",t),t}))}},children:t})},Hp=()=>{const{theme:e,toggleTheme:t}=(()=>{const e=(0,r.useContext)(zp);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})();return(0,Wh.jsxs)("button",{onClick:t,className:"theme-toggle-btn "+("dark"===e?"dark-mode":"light-mode"),"aria-label":`Switch to ${"light"===e?"dark":"light"} mode`,children:[(0,Wh.jsx)("div",{className:"toggle-wrapper",children:"light"===e?(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"theme-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Wh.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}):(0,Wh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"theme-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Wh.jsx)("circle",{cx:"12",cy:"12",r:"5"}),(0,Wh.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),(0,Wh.jsx)("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),(0,Wh.jsx)("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),(0,Wh.jsx)("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),(0,Wh.jsx)("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),(0,Wh.jsx)("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),(0,Wh.jsx)("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),(0,Wh.jsx)("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})}),(0,Wh.jsx)("span",{className:"sr-only",children:"light"===e?"Dark mode":"Light mode"})]})};function qp(e){let{setShowRegister:t,onLoginSuccess:n}=e;const[i,s]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),{login:h,signInWithGoogle:p,signInWithApple:f,signInAsGuest:m,authInitialized:g}=Kh();return(0,r.useEffect)((()=>{g&&l.includes("not initialized")&&c("")}),[g,l]),(0,Wh.jsxs)("div",{className:"auth-form-container",children:[(0,Wh.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Login"}),!g&&(0,Wh.jsx)("div",{className:"info-message mb-4 p-2 bg-blue-100 text-blue-700 rounded",children:"Initializing authentication... Please wait."}),l&&(0,Wh.jsx)("div",{className:"error-message mb-4 p-2 bg-red-100 text-red-700 rounded",children:l}),(0,Wh.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),g)try{c(""),d(!0),await h(i,a),n()}catch(l){c("Failed to log in: "+l.message)}finally{d(!1)}else c("Authentication is still initializing. Please wait a moment and try again.")},className:"flex flex-col gap-4",children:[(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Wh.jsx)("input",{type:"email",id:"email",value:i,onChange:e=>s(e.target.value),required:!0,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!g||u})]}),(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Wh.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>o(e.target.value),required:!0,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!g||u})]}),(0,Wh.jsx)("button",{type:"submit",disabled:!g||u,className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50",children:u?"Logging in...":"Login"})]}),(0,Wh.jsxs)("div",{className:"social-login-divider my-6 flex items-center",children:[(0,Wh.jsx)("div",{className:"flex-grow border-t border-gray-300"}),(0,Wh.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,Wh.jsx)("div",{className:"flex-grow border-t border-gray-300"})]}),(0,Wh.jsxs)("div",{className:"social-login-buttons flex flex-col gap-3",children:[(0,Wh.jsxs)("button",{onClick:async function(){if(g)try{c(""),d(!0),await p(),n()}catch(l){c("Failed to sign in with Google: "+l.message)}finally{d(!1)}else c("Authentication is still initializing. Please wait a moment and try again.")},disabled:!g||u,className:"bg-white border border-gray-300 py-2 px-4 rounded hover:bg-gray-50 flex items-center justify-center disabled:opacity-50",children:[(0,Wh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 48 48",className:"mr-2",children:[(0,Wh.jsx)("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,Wh.jsx)("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,Wh.jsx)("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,Wh.jsx)("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Sign in with Google"]}),(0,Wh.jsxs)("button",{onClick:async function(){if(g)try{c(""),d(!0),await f(),n()}catch(l){c("Failed to sign in with Apple: "+l.message)}finally{d(!1)}else c("Authentication is still initializing. Please wait a moment and try again.")},disabled:!g||u,className:"bg-black text-white py-2 px-4 rounded hover:bg-gray-900 flex items-center justify-center disabled:opacity-50",children:[(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"white",className:"mr-2",children:(0,Wh.jsx)("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.53 4.08zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.26 2.31-2.15 4.2-3.74 4.25z"})}),"Sign in with Apple"]}),(0,Wh.jsxs)("button",{onClick:async function(){if(g)try{c(""),d(!0),console.log("Login component: Starting guest sign in..."),await m(),console.log("Login component: Guest sign in completed"),n()}catch(l){console.error("Guest sign-in error in Login component:",l),c("Failed to sign in as guest: "+l.message)}finally{d(!1)}else c("Authentication is still initializing. Please wait a moment and try again.")},disabled:!g||u,className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 flex items-center justify-center disabled:opacity-50",children:[(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"white",className:"mr-2",children:(0,Wh.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Continue as Guest"]})]}),(0,Wh.jsx)("div",{className:"mt-6 text-center",children:(0,Wh.jsxs)("p",{children:["Don't have an account?"," ",(0,Wh.jsx)("button",{onClick:()=>t(!0),className:"text-blue-600 hover:underline",disabled:!g||u,children:"Register"})]})})]})}function Wp(e){let{setShowRegister:t,onRegisterSuccess:n}=e;const[i,s]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(!1),{signup:g,signInWithGoogle:y,signInWithApple:v}=Kh();return(0,Wh.jsxs)("div",{className:"auth-form-container",children:[(0,Wh.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Register"}),h&&(0,Wh.jsx)("div",{className:"error-message mb-4 p-2 bg-red-100 text-red-700 rounded",children:h}),(0,Wh.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),a!==l)return p("Passwords do not match");try{p(""),m(!0),await g(i,a,u),n()}catch(h){p("Failed to create an account: "+h.message)}finally{m(!1)}},className:"flex flex-col gap-4",children:[(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"displayName",children:"Display Name"}),(0,Wh.jsx)("input",{type:"text",id:"displayName",value:u,onChange:e=>d(e.target.value),required:!0,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Wh.jsx)("input",{type:"email",id:"email",value:i,onChange:e=>s(e.target.value),required:!0,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Wh.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>o(e.target.value),required:!0,minLength:6,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Wh.jsxs)("div",{className:"form-group",children:[(0,Wh.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,Wh.jsx)("input",{type:"password",id:"confirmPassword",value:l,onChange:e=>c(e.target.value),required:!0,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Wh.jsx)("button",{type:"submit",disabled:f,className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50",children:f?"Creating Account...":"Register"})]}),(0,Wh.jsxs)("div",{className:"social-login-divider my-6 flex items-center",children:[(0,Wh.jsx)("div",{className:"flex-grow border-t border-gray-300"}),(0,Wh.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,Wh.jsx)("div",{className:"flex-grow border-t border-gray-300"})]}),(0,Wh.jsxs)("div",{className:"social-login-buttons flex flex-col gap-3",children:[(0,Wh.jsxs)("button",{onClick:async function(){try{p(""),m(!0),await y(),n()}catch(h){p("Failed to sign in with Google: "+h.message)}finally{m(!1)}},disabled:f,className:"bg-white border border-gray-300 py-2 px-4 rounded hover:bg-gray-50 flex items-center justify-center",children:[(0,Wh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 48 48",className:"mr-2",children:[(0,Wh.jsx)("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,Wh.jsx)("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,Wh.jsx)("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,Wh.jsx)("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Sign up with Google"]}),(0,Wh.jsxs)("button",{onClick:async function(){try{p(""),m(!0),await v(),n()}catch(h){p("Failed to sign in with Apple: "+h.message)}finally{m(!1)}},disabled:f,className:"bg-black text-white py-2 px-4 rounded hover:bg-gray-900 flex items-center justify-center",children:[(0,Wh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"white",className:"mr-2",children:(0,Wh.jsx)("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.53 4.08zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.26 2.31-2.15 4.2-3.74 4.25z"})}),"Sign up with Apple"]})]}),(0,Wh.jsx)("div",{className:"mt-6 text-center",children:(0,Wh.jsxs)("p",{children:["Already have an account?"," ",(0,Wh.jsx)("button",{onClick:()=>t(!1),className:"text-blue-600 hover:underline",children:"Login"})]})})]})}function Gp(e){let{onAuthSuccess:t}=e;const[n,i]=(0,r.useState)(!1);return(0,Wh.jsx)("div",{className:"auth-container p-6 max-w-md mx-auto bg-white rounded-lg shadow-md",children:n?(0,Wh.jsx)(Wp,{setShowRegister:i,onRegisterSuccess:()=>{t()}}):(0,Wh.jsx)(qp,{setShowRegister:i,onLoginSuccess:()=>{t()}})})}function Kp(e){let{onClose:t}=e;const{currentUser:n,logout:i}=Kh(),{saveGame:s,resetGame:a}=op(),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1);return(0,Wh.jsxs)("div",{className:"profile-container p-6 bg-white rounded-lg shadow-md",children:[(0,Wh.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Wh.jsx)("h2",{className:"text-2xl font-bold",children:"Profile"}),(0,Wh.jsx)("button",{onClick:t,className:"text-gray-600 hover:text-gray-900",children:"\u2715"})]}),o&&(0,Wh.jsx)("div",{className:"error-message mb-4 p-2 bg-red-100 text-red-700 rounded",children:o}),c&&(0,Wh.jsx)("div",{className:"success-message mb-4 p-2 bg-green-100 text-green-700 rounded",children:c}),(0,Wh.jsxs)("div",{className:"user-info mb-6",children:[(0,Wh.jsxs)("div",{className:"mb-2",children:[(0,Wh.jsx)("strong",{children:"Email:"})," ",null===n||void 0===n?void 0:n.email]}),(0,Wh.jsxs)("div",{className:"mb-2",children:[(0,Wh.jsx)("strong",{children:"Display Name:"})," ",(null===n||void 0===n?void 0:n.displayName)||"N/A"]})]}),(0,Wh.jsxs)("div",{className:"profile-actions flex flex-col gap-3",children:[(0,Wh.jsx)("button",{onClick:async function(){try{h(!0);await s()?(u("Game saved successfully!"),setTimeout((()=>u("")),3e3)):l("Failed to save game")}catch(o){l("Error saving game: "+o.message)}finally{h(!1)}},disabled:d,className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50",children:d?"Saving...":"Save Game"}),(0,Wh.jsx)("button",{onClick:async function(){if(window.confirm("Are you sure you want to start a new game? Your current progress will be lost."))try{await a(),u("New game started!"),setTimeout((()=>u("")),3e3)}catch(o){l("Error starting new game: "+o.message)}},className:"bg-yellow-600 text-white py-2 px-4 rounded hover:bg-yellow-700",children:"Start New Game"}),(0,Wh.jsx)("button",{onClick:async function(){try{await s(),await i()}catch(o){l("Failed to log out: "+o.message)}},className:"bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 mt-3",children:"Logout"})]})]})}const Qp=()=>{const{gameState:e,getGameTime:t}=op(),[n,i]=(0,r.useState)(t());(0,r.useEffect)((()=>{const e=setInterval((()=>{i(t())}),1e3);return()=>clearInterval(e)}),[t]);const s=n.fullDate,a=n.shortTime,o=60===e.timeSettings.gameTimeRatio?"1 real second = 1 game minute":`1 real second = ${e.timeSettings.gameTimeRatio} game seconds`;return(0,Wh.jsx)("div",{className:"game-clock bg-gradient-to-r from-slate-800 to-slate-700 text-white px-3 py-2 rounded-lg shadow-lg",children:(0,Wh.jsx)("div",{className:"flex items-center justify-between",children:(0,Wh.jsxs)("div",{className:"flex flex-col",children:[(0,Wh.jsx)("div",{className:"text-sm opacity-80",children:s}),(0,Wh.jsx)("div",{className:"text-xl font-bold",children:a}),(0,Wh.jsx)("div",{className:"text-xs opacity-60 mt-1",children:o})]})})})};function Yp(){var e,t;const{currentUser:n,authInitialized:i,loading:s}=Kh(),[a,o]=(0,r.useState)("clicker"),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null);if((0,r.useEffect)((()=>{console.log("Auth state:",{currentUser:n,authInitialized:i,loading:s})}),[n,i,s]),s||!i)return(0,Wh.jsx)($p,{children:(0,Wh.jsx)("div",{className:"app-container flex items-center justify-center min-h-screen",children:(0,Wh.jsxs)("div",{className:"text-center",children:[(0,Wh.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),(0,Wh.jsx)("p",{className:"text-lg",children:"Loading... Please wait"})]})})});if(!n)return(0,Wh.jsx)($p,{children:(0,Wh.jsx)("div",{className:"app-container flex items-center justify-center min-h-screen",children:(0,Wh.jsxs)("div",{className:"auth-page-container",children:[(0,Wh.jsx)("h1",{className:"text-4xl font-bold text-center mb-6",children:"Business Tycoon"}),(0,Wh.jsx)(Gp,{onAuthSuccess:()=>{console.log("Auth success called")}})]})})});return(0,Wh.jsx)($p,{children:(0,Wh.jsx)(ap,{children:(0,Wh.jsx)(Vp,{children:(0,Wh.jsxs)("div",{className:"app-container",children:[l&&(0,Wh.jsx)("div",{className:"profile-modal-overlay",children:(0,Wh.jsx)("div",{className:"profile-modal",children:(0,Wh.jsx)(Kp,{onClose:()=>c(!1)})})}),(0,Wh.jsxs)("div",{className:"app-content",children:[(0,Wh.jsxs)("div",{className:"header-container flex justify-between items-center p-2",children:[(0,Wh.jsxs)("div",{className:"flex items-center",children:[(0,Wh.jsx)("div",{className:"theme-toggle-container mr-3",children:(0,Wh.jsx)(Hp,{})}),(0,Wh.jsx)("div",{className:"game-clock-container",children:(0,Wh.jsx)(Qp,{})})]}),(0,Wh.jsx)("div",{className:"user-info-container",children:(0,Wh.jsxs)("button",{onClick:()=>c(!0),className:"profile-button flex items-center",children:[(0,Wh.jsx)("span",{className:"user-display-name mr-2",children:(null===n||void 0===n?void 0:n.displayName)||(null===n||void 0===n?void 0:n.email)||"Guest"}),(0,Wh.jsx)("span",{className:"user-avatar bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center",children:((null===n||void 0===n||null===(e=n.displayName)||void 0===e?void 0:e[0])||(null===n||void 0===n||null===(t=n.email)||void 0===t?void 0:t[0])||"G").toUpperCase()})]})})]}),u?(0,Wh.jsxs)("div",{className:"p-6 bg-red-100 text-red-800 rounded-lg m-4",children:[(0,Wh.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Error"}),(0,Wh.jsx)("p",{children:u}),(0,Wh.jsx)("button",{onClick:()=>d(null),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded",children:"Dismiss"})]}):(()=>{try{switch(a){case"clicker":default:return(0,Wh.jsx)(cp,{});case"jobs":return(0,Wh.jsx)(Sp,{});case"assets":return(0,Wh.jsx)(kp,{});case"business":return(0,Wh.jsx)(Np,{});case"education":return(0,Wh.jsx)(Ep,{});case"finance":return(0,Wh.jsx)(Bp,{})}}catch(e){return console.error("Error rendering tab content:",e),d(e.message),(0,Wh.jsxs)("div",{className:"p-6 bg-red-100 text-red-800 rounded-lg",children:[(0,Wh.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Error Loading Content"}),(0,Wh.jsx)("p",{children:e.message}),(0,Wh.jsx)("button",{onClick:()=>d(null),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded",children:"Dismiss"})]})}})()]}),(0,Wh.jsx)("nav",{className:"app-navigation",children:(0,Wh.jsxs)("ul",{className:"nav-list",children:[(0,Wh.jsx)("li",{className:"nav-item "+("clicker"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("clicker"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Work",children:"\ud83d\udcbc"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Work"})]})}),(0,Wh.jsx)("li",{className:"nav-item "+("jobs"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("jobs"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Jobs",children:"\ud83d\udd0d"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Jobs"})]})}),(0,Wh.jsx)("li",{className:"nav-item "+("assets"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("assets"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Banking",children:"\ud83c\udfe6"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Banking"})]})}),(0,Wh.jsx)("li",{className:"nav-item "+("finance"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("finance"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Invest",children:"\ud83d\udcc8"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Invest"})]})}),(0,Wh.jsx)("li",{className:"nav-item "+("business"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("business"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Business",children:"\ud83c\udfe2"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Business"})]})}),(0,Wh.jsx)("li",{className:"nav-item "+("education"===a?"active":""),children:(0,Wh.jsxs)("button",{onClick:()=>o("education"),className:"nav-button",children:[(0,Wh.jsx)("span",{role:"img","aria-label":"Education",children:"\ud83c\udf93"}),(0,Wh.jsx)("span",{className:"nav-text",children:"Education"})]})})]})})]})})})})}const Jp=function(){return(0,Wh.jsx)(Qh,{children:(0,Wh.jsx)(Yp,{})})},Xp=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:a}=t;n(e),r(e),i(e),s(e),a(e)}))};function Zp(){const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{try{console.log("Initializing Firebase and waiting for auth state...");const e=lr(Bh,(()=>{console.log("Firebase auth initialized successfully"),t(!0)}),(e=>{console.error("Firebase auth initialization error:",e),i(e.message)}));return()=>e()}catch(e){console.error("Error during Firebase initialization:",e),i(e.message)}})()}),[]),n?(0,Wh.jsxs)("div",{className:"firebase-error-container",style:{padding:"20px",margin:"20px",backgroundColor:"#fee2e2",color:"#b91c1c",borderRadius:"8px",textAlign:"center"},children:[(0,Wh.jsx)("h2",{children:"Firebase Initialization Error"}),(0,Wh.jsx)("p",{children:n}),(0,Wh.jsx)("p",{children:"Please refresh the page or check your connection."})]}):e?(0,Wh.jsx)(Jp,{}):(0,Wh.jsxs)("div",{className:"firebase-loading",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw"},children:[(0,Wh.jsx)("div",{className:"loading-spinner",style:{width:"50px",height:"50px",border:"5px solid #f3f3f3",borderTop:"5px solid #3498db",borderRadius:"50%",animation:"spin 2s linear infinite",marginBottom:"20px"}}),(0,Wh.jsx)("style",{children:"@keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }"}),(0,Wh.jsx)("p",{children:"Initializing Firebase..."})]})}i.createRoot(document.getElementById("root")).render((0,Wh.jsx)(r.StrictMode,{children:(0,Wh.jsx)(Zp,{})})),Xp()})();
//# sourceMappingURL=main.add591fd.js.map